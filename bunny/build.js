!function(e){function t(e){for(var t=[],n=0,r=e.length;r>n;n++)-1==m.call(t,e[n])&&t.push(e[n]);return t}function n(e,n,r,i){if("string"!=typeof e)throw"System.register provided no module name";var o;o="boolean"==typeof r?{declarative:!1,deps:n,execute:i,executingRequire:r}:{declarative:!0,deps:n,declare:r},o.name=e,e in f||(f[e]=o),o.deps=t(o.deps),o.normalizedDeps=o.deps}function r(e,t){if(t[e.groupIndex]=t[e.groupIndex]||[],-1==m.call(t[e.groupIndex],e)){t[e.groupIndex].push(e);for(var n=0,i=e.normalizedDeps.length;i>n;n++){var o=e.normalizedDeps[n],a=f[o];if(a&&!a.evaluated){var s=e.groupIndex+(a.declarative!=e.declarative);if(void 0===a.groupIndex||a.groupIndex<s){if(void 0!==a.groupIndex&&(t[a.groupIndex].splice(m.call(t[a.groupIndex],a),1),0==t[a.groupIndex].length))throw new TypeError("Mixed dependency cycle detected");a.groupIndex=s}r(a,t)}}}}function i(e){var t=f[e];t.groupIndex=0;var n=[];r(t,n);for(var i=!!t.declarative==n.length%2,o=n.length-1;o>=0;o--){for(var s=n[o],c=0;c<s.length;c++){var l=s[c];i?a(l):u(l)}i=!i}}function o(e){return d[e]||(d[e]={name:e,dependencies:[],exports:{},importers:[]})}function a(t){if(!t.module){var n=t.module=o(t.name),r=t.module.exports,i=t.declare.call(e,function(e,t){n.locked=!0,r[e]=t;for(var i=0,o=n.importers.length;o>i;i++){var a=n.importers[i];if(!a.locked){var s=m.call(a.dependencies,n);a.setters[s](r)}}return n.locked=!1,t});if(n.setters=i.setters,n.execute=i.execute,!n.setters||!n.execute)throw new TypeError("Invalid System.register form for "+t.name);for(var s=0,u=t.normalizedDeps.length;u>s;s++){var c,p=t.normalizedDeps[s],h=f[p],b=d[p];b?c=b.exports:h&&!h.declarative?c=h.module.exports&&h.module.exports.__esModule?h.module.exports:{"default":h.module.exports,__useDefault:!0}:h?(a(h),b=h.module,c=b.exports):c=l(p),b&&b.importers?(b.importers.push(n),n.dependencies.push(b)):n.dependencies.push(null),n.setters[s]&&n.setters[s](c)}}}function s(e){var t,n=f[e];if(n)n.declarative?c(e,[]):n.evaluated||u(n),t=n.module.exports;else if(t=l(e),!t)throw new Error("Unable to load dependency "+e+".");return(!n||n.declarative)&&t&&t.__useDefault?t["default"]:t}function u(t){if(!t.module){var n={},r=t.module={exports:n,id:t.name};if(!t.executingRequire)for(var i=0,o=t.normalizedDeps.length;o>i;i++){var a=t.normalizedDeps[i],c=f[a];c&&u(c)}t.evaluated=!0;var l=t.execute.call(e,function(e){for(var n=0,r=t.deps.length;r>n;n++)if(t.deps[n]==e)return s(t.normalizedDeps[n]);throw new TypeError("Module "+e+" not declared as a dependency.")},n,r);l&&(r.exports=l)}}function c(t,n){var r=f[t];if(r&&!r.evaluated&&r.declarative){n.push(t);for(var i=0,o=r.normalizedDeps.length;o>i;i++){var a=r.normalizedDeps[i];-1==m.call(n,a)&&(f[a]?c(a,n):l(a))}r.evaluated||(r.evaluated=!0,r.module.execute.call(e))}}function l(e){if(p[e])return p[e];var t=f[e];if(!t)throw"Module "+e+" not present.";i(e),c(e,[]),f[e]=void 0;var n=t.module.exports;return(!n||!t.declarative&&n.__esModule!==!0)&&(n={"default":n,__useDefault:!0}),p[e]=n}var f={},m=Array.prototype.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},d={},p={};return function(t,r){var i,i={register:n,get:l,set:function(e,t){p[e]=t},newModule:function(e){return e},global:e};i.set("@empty",{}),r(i);for(var o=0;o<t.length;o++)l(t[o])}}("undefined"!=typeof window?window:global)(["main"],function(e){e.register("npm:core-js@0.9.10/library/modules/$.fw",[],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=function(e){return e.FW=!1,e.path=e.core,e},r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/modules/$.def",["npm:core-js@0.9.10/library/modules/$"],!0,function(require,t,n){function r(e,t){return function(){return e.apply(t,arguments)}}function i(e,t,n){var a,s,l,f,m=e&i.G,d=e&i.P,p=m?o:e&i.S?o[t]:(o[t]||{}).prototype,h=m?u:u[t]||(u[t]={});m&&(n=t);for(a in n)s=!(e&i.F)&&p&&a in p,s&&a in h||(l=s?p[a]:n[a],m&&!c(p[a])?f=n[a]:e&i.B&&s?f=r(l,o):e&i.W&&p[a]==l?!function(e){f=function(t){return this instanceof e?new e(t):e(t)},f.prototype=e.prototype}(l):f=d&&c(l)?r(Function.call,l):l,h[a]=f,d&&((h.prototype||(h.prototype={}))[a]=l))}var o=e.global,a=o.define;o.define=void 0;var s=require("npm:core-js@0.9.10/library/modules/$"),o=s.g,u=s.core,c=s.isFunction;return i.F=1,i.G=2,i.S=4,i.P=8,i.B=16,i.W=32,n.exports=i,o.define=a,n.exports}),e.register("npm:core-js@0.9.10/library/fn/object/define-property",["npm:core-js@0.9.10/library/modules/$"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:core-js@0.9.10/library/modules/$");return n.exports=function(e,t,n){return o.setDesc(e,t,n)},r.define=i,n.exports}),e.register("npm:babel-runtime@5.4.3/helpers/class-call-check",[],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,t["default"]=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t.__esModule=!0,r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/modules/$.uid",["npm:core-js@0.9.10/library/modules/$"],!0,function(require,t,n){function r(e){return"Symbol(".concat(void 0===e?"":e,")_",(++a+Math.random()).toString(36))}var i=e.global,o=i.define;i.define=void 0;var a=0;return r.safe=require("npm:core-js@0.9.10/library/modules/$").g.Symbol||r,n.exports=r,i.define=o,n.exports}),e.register("npm:core-js@0.9.10/library/modules/$.redef",["npm:core-js@0.9.10/library/modules/$"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=require("npm:core-js@0.9.10/library/modules/$").hide,r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/modules/$.string-at",["npm:core-js@0.9.10/library/modules/$"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:core-js@0.9.10/library/modules/$");return n.exports=function(e){return function(t,n){var r,i,a=String(o.assertDefined(t)),s=o.toInteger(n),u=a.length;return 0>s||s>=u?e?"":void 0:(r=a.charCodeAt(s),55296>r||r>56319||s+1===u||(i=a.charCodeAt(s+1))<56320||i>57343?e?a.charAt(s):r:e?a.slice(s,s+2):(r-55296<<10)+(i-56320)+65536)}},r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/modules/$.assert",["npm:core-js@0.9.10/library/modules/$"],!0,function(require,t,n){function r(e,t,n){if(!e)throw TypeError(n?t+n:t)}var i=e.global,o=i.define;i.define=void 0;var a=require("npm:core-js@0.9.10/library/modules/$");return r.def=a.assertDefined,r.fn=function(e){if(!a.isFunction(e))throw TypeError(e+" is not a function!");return e},r.obj=function(e){if(!a.isObject(e))throw TypeError(e+" is not an object!");return e},r.inst=function(e,t,n){if(!(e instanceof t))throw TypeError(n+": use the 'new' operator!");return e},n.exports=r,i.define=o,n.exports}),e.register("npm:core-js@0.9.10/library/modules/$.iter-define",["npm:core-js@0.9.10/library/modules/$.def","npm:core-js@0.9.10/library/modules/$.redef","npm:core-js@0.9.10/library/modules/$","npm:core-js@0.9.10/library/modules/$.cof","npm:core-js@0.9.10/library/modules/$.iter","npm:core-js@0.9.10/library/modules/$.wks"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:core-js@0.9.10/library/modules/$.def"),a=require("npm:core-js@0.9.10/library/modules/$.redef"),s=require("npm:core-js@0.9.10/library/modules/$"),u=require("npm:core-js@0.9.10/library/modules/$.cof"),c=require("npm:core-js@0.9.10/library/modules/$.iter"),l=require("npm:core-js@0.9.10/library/modules/$.wks")("iterator"),f="@@iterator",m="keys",d="values",p=c.Iterators;return n.exports=function(e,t,n,r,i,h,b){function v(e){function t(t){return new n(t,e)}switch(e){case m:return function(){return t(this)};case d:return function(){return t(this)}}return function(){return t(this)}}c.create(n,t,r);var g,y,x=t+" Iterator",w=e.prototype,j=w[l]||w[f]||i&&w[i],_=j||v(i);if(j){var E=s.getProto(_.call(new e));u.set(E,x,!0),s.FW&&s.has(w,f)&&c.set(E,s.that)}if(s.FW&&c.set(w,_),p[t]=_,p[x]=s.that,i)if(g={keys:h?_:v(m),values:i==d?_:v(d),entries:i!=d?_:v("entries")},b)for(y in g)y in w||a(w,y,g[y]);else o(o.P+o.F*c.BUGGY,t,g)},r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/modules/$.unscope",["npm:core-js@0.9.10/library/modules/$","npm:core-js@0.9.10/library/modules/$.wks"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:core-js@0.9.10/library/modules/$"),a=require("npm:core-js@0.9.10/library/modules/$.wks")("unscopables");return!o.FW||a in[]||o.hide(Array.prototype,a,{}),n.exports=function(e){o.FW&&([][a][e]=!0)},r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/modules/$.ctx",["npm:core-js@0.9.10/library/modules/$.assert"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:core-js@0.9.10/library/modules/$.assert").fn;return n.exports=function(e,t,n){if(o(e),~n&&void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}},r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/modules/$.iter-call",["npm:core-js@0.9.10/library/modules/$.assert"],!0,function(require,t,n){function r(e){var t=e["return"];void 0!==t&&s(t.call(e))}function i(e,t,n,i){try{return i?t(s(n)[0],n[1]):t(n)}catch(o){throw r(e),o}}var o=e.global,a=o.define;o.define=void 0;var s=require("npm:core-js@0.9.10/library/modules/$.assert").obj;return i.close=r,n.exports=i,o.define=a,n.exports}),e.register("npm:core-js@0.9.10/library/modules/$.set-proto",["npm:core-js@0.9.10/library/modules/$","npm:core-js@0.9.10/library/modules/$.assert","npm:core-js@0.9.10/library/modules/$.ctx"],!0,function(require,t,n){function r(e,t){s.obj(e),s(null===t||a.isObject(t),t,": can't set as prototype!")}var i=e.global,o=i.define;i.define=void 0;var a=require("npm:core-js@0.9.10/library/modules/$"),s=require("npm:core-js@0.9.10/library/modules/$.assert");return n.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t){try{t=require("npm:core-js@0.9.10/library/modules/$.ctx")(Function.call,a.getDesc(Object.prototype,"__proto__").set,2),t({},[])}catch(n){e=!0}return function(n,i){return r(n,i),e?n.__proto__=i:t(n,i),n}}():void 0),check:r},i.define=o,n.exports}),e.register("npm:core-js@0.9.10/library/modules/$.species",["npm:core-js@0.9.10/library/modules/$","npm:core-js@0.9.10/library/modules/$.wks"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:core-js@0.9.10/library/modules/$"),a=require("npm:core-js@0.9.10/library/modules/$.wks")("species");return n.exports=function(e){!o.DESC||a in e||o.setDesc(e,a,{configurable:!0,get:o.that})},r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/modules/$.invoke",[],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3]);case 5:return r?e(t[0],t[1],t[2],t[3],t[4]):e.call(n,t[0],t[1],t[2],t[3],t[4])}return e.apply(n,t)},r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/modules/$.dom-create",["npm:core-js@0.9.10/library/modules/$"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:core-js@0.9.10/library/modules/$"),a=o.g.document,s=o.isObject,u=s(a)&&s(a.createElement);return n.exports=function(e){return u?a.createElement(e):{}},r.define=i,n.exports}),e.register("npm:process@0.10.1/browser",[],!0,function(require,t,n){function r(){if(!c){c=!0;for(var e,t=u.length;t;){e=u,u=[];for(var n=-1;++n<t;)e[n]();t=u.length}c=!1}}function i(){}var o=e.global,a=o.define;o.define=void 0;var s=n.exports={},u=[],c=!1;return s.nextTick=function(e){u.push(e),c||setTimeout(r,0)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=i,s.addListener=i,s.once=i,s.off=i,s.removeListener=i,s.removeAllListeners=i,s.emit=i,s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0},o.define=a,n.exports}),e.register("npm:core-js@0.9.10/library/modules/$.mix",["npm:core-js@0.9.10/library/modules/$.redef"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:core-js@0.9.10/library/modules/$.redef");return n.exports=function(e,t){for(var n in t)o(e,n,t[n]);return e},r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/modules/$.iter-detect",["npm:core-js@0.9.10/library/modules/$.wks"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:core-js@0.9.10/library/modules/$.wks")("iterator"),a=!1;try{var s=[7][o]();s["return"]=function(){a=!0},Array.from(s,function(){throw 2})}catch(u){}return n.exports=function(e){if(!a)return!1;var t=!1;try{var n=[7],r=n[o]();r.next=function(){t=!0},n[o]=function(){return r},e(n)}catch(i){}return t},r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/modules/$.array-methods",["npm:core-js@0.9.10/library/modules/$","npm:core-js@0.9.10/library/modules/$.ctx"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:core-js@0.9.10/library/modules/$"),a=require("npm:core-js@0.9.10/library/modules/$.ctx");return n.exports=function(e){var t=1==e,n=2==e,r=3==e,i=4==e,s=6==e,u=5==e||s;return function(c,l,f){for(var m,d,p=Object(o.assertDefined(c)),h=o.ES5Object(p),b=a(l,f,3),v=o.toLength(h.length),g=0,y=t?Array(v):n?[]:void 0;v>g;g++)if((u||g in h)&&(m=h[g],d=b(m,g,p),e))if(t)y[g]=d;else if(d)switch(e){case 3:return!0;case 5:return m;case 6:return g;case 2:y.push(m)}else if(i)return!1;return s?-1:r||i?i:y}},r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/modules/$.collection",["npm:core-js@0.9.10/library/modules/$","npm:core-js@0.9.10/library/modules/$.def","npm:core-js@0.9.10/library/modules/$.iter","npm:core-js@0.9.10/library/modules/$.for-of","npm:core-js@0.9.10/library/modules/$.species","npm:core-js@0.9.10/library/modules/$.assert","npm:core-js@0.9.10/library/modules/$.redef","npm:core-js@0.9.10/library/modules/$.mix","npm:core-js@0.9.10/library/modules/$.iter-detect","npm:core-js@0.9.10/library/modules/$.cof"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:core-js@0.9.10/library/modules/$"),a=require("npm:core-js@0.9.10/library/modules/$.def"),s=require("npm:core-js@0.9.10/library/modules/$.iter").BUGGY,u=require("npm:core-js@0.9.10/library/modules/$.for-of"),c=require("npm:core-js@0.9.10/library/modules/$.species"),l=require("npm:core-js@0.9.10/library/modules/$.assert").inst;return n.exports=function(e,t,n,r,i){function f(e,t){if(o.FW){var n=h[e];require("npm:core-js@0.9.10/library/modules/$.redef")(h,e,function(e,r){var i=n.call(this,0===e?0:e,r);return t?this:i})}}var m=o.g[e],d=m,p=r?"set":"add",h=d&&d.prototype,b={};if(o.isFunction(d)&&(i||!s&&h.forEach&&h.entries)){var v,g=new d,y=g[p](i?{}:-0,1);require("npm:core-js@0.9.10/library/modules/$.iter-detect")(function(e){new d(e)})||(d=function(){l(this,d,e);var t=new m,n=arguments[0];return void 0!=n&&u(n,r,t[p],t),t},d.prototype=h,o.FW&&(h.constructor=d)),i||g.forEach(function(e,t){v=1/t===-(1/0)}),v&&(f("delete"),f("has"),r&&f("get")),(v||y!==g)&&f(p,!0)}else d=n.getConstructor(e,r,p),require("npm:core-js@0.9.10/library/modules/$.mix")(d.prototype,t);return require("npm:core-js@0.9.10/library/modules/$.cof").set(d,e),b[e]=d,a(a.G+a.W+a.F*(d!=m),b),c(d),c(o.core[e]),i||n.setIter(d,e,r),d},r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/modules/core.iter-helpers",["npm:core-js@0.9.10/library/modules/$","npm:core-js@0.9.10/library/modules/$.iter"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:core-js@0.9.10/library/modules/$").core,a=require("npm:core-js@0.9.10/library/modules/$.iter");return o.isIterable=a.is,o.getIterator=a.get,r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/modules/es6.weak-set",["npm:core-js@0.9.10/library/modules/$.collection-weak","npm:core-js@0.9.10/library/modules/$.collection"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:core-js@0.9.10/library/modules/$.collection-weak");return require("npm:core-js@0.9.10/library/modules/$.collection")("WeakSet",{add:function(e){return o.def(this,e,!0)}},o,!1,!0),r.define=i,n.exports}),function(){function t(){}t.amd={},function(n){"use strict";var r={};"undefined"==typeof exports?"function"==typeof t&&"object"==typeof t.amd&&t.amd?(r.exports={},e.register("github:toji/gl-matrix@master/dist/gl-matrix",[],!1,function(){return r.exports})):r.exports="undefined"!=typeof window?window:n:r.exports=exports,function(e){if(!t)var t=1e-6;if(!n)var n="undefined"!=typeof Float32Array?Float32Array:Array;if(!r)var r=Math.random;var i={};i.setMatrixArrayType=function(e){n=e},"undefined"!=typeof e&&(e.glMatrix=i);var o=Math.PI/180;i.toRadian=function(e){return e*o};var a={};a.create=function(){var e=new n(2);return e[0]=0,e[1]=0,e},a.clone=function(e){var t=new n(2);return t[0]=e[0],t[1]=e[1],t},a.fromValues=function(e,t){var r=new n(2);return r[0]=e,r[1]=t,r},a.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},a.set=function(e,t,n){return e[0]=t,e[1]=n,e},a.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e},a.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e},a.sub=a.subtract,a.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e},a.mul=a.multiply,a.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e},a.div=a.divide,a.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e},a.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e},a.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e},a.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e},a.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)},a.dist=a.distance,a.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r},a.sqrDist=a.squaredDistance,a.length=function(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)},a.len=a.length,a.squaredLength=function(e){var t=e[0],n=e[1];return t*t+n*n},a.sqrLen=a.squaredLength,a.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},a.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},a.normalize=function(e,t){var n=t[0],r=t[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i),e},a.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},a.cross=function(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e},a.lerp=function(e,t,n,r){var i=t[0],o=t[1];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e},a.random=function(e,t){t=t||1;var n=2*r()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e},a.transformMat2=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i,e[1]=n[1]*r+n[3]*i,e},a.transformMat2d=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i+n[4],e[1]=n[1]*r+n[3]*i+n[5],e},a.transformMat3=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[3]*i+n[6],e[1]=n[1]*r+n[4]*i+n[7],e},a.transformMat4=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e},a.forEach=function(){var e=a.create();return function(t,n,r,i,o,a){var s,u;for(n||(n=2),r||(r=0),u=i?Math.min(i*n+r,t.length):t.length,s=r;u>s;s+=n)e[0]=t[s],e[1]=t[s+1],o(e,e,a),t[s]=e[0],t[s+1]=e[1];return t}}(),a.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},"undefined"!=typeof e&&(e.vec2=a);var s={};s.create=function(){var e=new n(3);return e[0]=0,e[1]=0,e[2]=0,e},s.clone=function(e){var t=new n(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},s.fromValues=function(e,t,r){var i=new n(3);return i[0]=e,i[1]=t,i[2]=r,i},s.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},s.set=function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e},s.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e},s.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e},s.sub=s.subtract,s.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e},s.mul=s.multiply,s.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e},s.div=s.divide,s.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e},s.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e},s.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},s.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e},s.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)},s.dist=s.distance,s.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i},s.sqrDist=s.squaredDistance,s.length=function(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)},s.len=s.length,s.squaredLength=function(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r},s.sqrLen=s.squaredLength,s.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},s.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},s.normalize=function(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e},s.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},s.cross=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],u=n[2];return e[0]=i*u-o*s,e[1]=o*a-r*u,e[2]=r*s-i*a,e},s.lerp=function(e,t,n,r){var i=t[0],o=t[1],a=t[2];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e[2]=a+r*(n[2]-a),e},s.random=function(e,t){t=t||1;var n=2*r()*Math.PI,i=2*r()-1,o=Math.sqrt(1-i*i)*t;return e[0]=Math.cos(n)*o,e[1]=Math.sin(n)*o,e[2]=i*t,e},s.transformMat4=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,e[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,e[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,e[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,e},s.transformMat3=function(e,t,n){var r=t[0],i=t[1],o=t[2];return e[0]=r*n[0]+i*n[3]+o*n[6],e[1]=r*n[1]+i*n[4]+o*n[7],e[2]=r*n[2]+i*n[5]+o*n[8],e},s.transformQuat=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],u=n[2],c=n[3],l=c*r+s*o-u*i,f=c*i+u*r-a*o,m=c*o+a*i-s*r,d=-a*r-s*i-u*o;return e[0]=l*c+d*-a+f*-u-m*-s,e[1]=f*c+d*-s+m*-a-l*-u,e[2]=m*c+d*-u+l*-s-f*-a,e},s.rotateX=function(e,t,n,r){var i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e},s.rotateY=function(e,t,n,r){var i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e},s.rotateZ=function(e,t,n,r){var i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e},s.forEach=function(){var e=s.create();return function(t,n,r,i,o,a){var s,u;for(n||(n=3),r||(r=0),u=i?Math.min(i*n+r,t.length):t.length,s=r;u>s;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2];return t}}(),s.angle=function(e,t){var n=s.fromValues(e[0],e[1],e[2]),r=s.fromValues(t[0],t[1],t[2]);s.normalize(n,n),s.normalize(r,r);var i=s.dot(n,r);return i>1?0:Math.acos(i)},s.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},"undefined"!=typeof e&&(e.vec3=s);var u={};u.create=function(){var e=new n(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},u.clone=function(e){var t=new n(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},u.fromValues=function(e,t,r,i){var o=new n(4);return o[0]=e,o[1]=t,o[2]=r,o[3]=i,o},u.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},u.set=function(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e},u.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},u.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e},u.sub=u.subtract,u.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e},u.mul=u.multiply,u.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e},u.div=u.divide,u.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e},u.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e},u.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},u.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},u.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],o=t[3]-e[3];return Math.sqrt(n*n+r*r+i*i+o*o)},u.dist=u.distance,u.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],o=t[3]-e[3];return n*n+r*r+i*i+o*o},u.sqrDist=u.squaredDistance,u.length=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.sqrt(t*t+n*n+r*r+i*i)},u.len=u.length,u.squaredLength=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i},u.sqrLen=u.squaredLength,u.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},u.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},u.normalize=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a),e},u.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},u.lerp=function(e,t,n,r){var i=t[0],o=t[1],a=t[2],s=t[3];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e[2]=a+r*(n[2]-a),e[3]=s+r*(n[3]-s),e},u.random=function(e,t){return t=t||1,e[0]=r(),e[1]=r(),e[2]=r(),e[3]=r(),u.normalize(e,e),u.scale(e,e,t),e},u.transformMat4=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,e},u.transformQuat=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],u=n[2],c=n[3],l=c*r+s*o-u*i,f=c*i+u*r-a*o,m=c*o+a*i-s*r,d=-a*r-s*i-u*o;return e[0]=l*c+d*-a+f*-u-m*-s,e[1]=f*c+d*-s+m*-a-l*-u,e[2]=m*c+d*-u+l*-s-f*-a,e},u.forEach=function(){var e=u.create();return function(t,n,r,i,o,a){var s,u;for(n||(n=4),r||(r=0),u=i?Math.min(i*n+r,t.length):t.length,s=r;u>s;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}}(),u.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},"undefined"!=typeof e&&(e.vec4=u);var c={};c.create=function(){var e=new n(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},c.clone=function(e){var t=new n(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},c.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},c.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},c.transpose=function(e,t){if(e===t){var n=t[1];e[1]=t[2],e[2]=n}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e},c.invert=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*o-i*r;return a?(a=1/a,e[0]=o*a,e[1]=-r*a,e[2]=-i*a,e[3]=n*a,e):null},c.adjoint=function(e,t){var n=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=n,e},c.determinant=function(e){return e[0]*e[3]-e[2]*e[1]},c.multiply=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=n[0],u=n[1],c=n[2],l=n[3];return e[0]=r*s+o*u,e[1]=i*s+a*u,e[2]=r*c+o*l,e[3]=i*c+a*l,e},c.mul=c.multiply,c.rotate=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+o*s,e[1]=i*u+a*s,e[2]=r*-s+o*u,e[3]=i*-s+a*u,e},c.scale=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=n[0],u=n[1];return e[0]=r*s,e[1]=i*s,e[2]=o*u,e[3]=a*u,e},c.str=function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},c.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))},c.LDU=function(e,t,n,r){return e[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-e[2]*n[1],[e,t,n]},"undefined"!=typeof e&&(e.mat2=c);var l={};l.create=function(){var e=new n(6);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},l.clone=function(e){var t=new n(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},l.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},l.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},l.invert=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=n*o-r*i;return u?(u=1/u,e[0]=o*u,e[1]=-r*u,e[2]=-i*u,e[3]=n*u,e[4]=(i*s-o*a)*u,e[5]=(r*a-n*s)*u,e):null},l.determinant=function(e){return e[0]*e[3]-e[1]*e[2]},l.multiply=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=n[0],l=n[1],f=n[2],m=n[3],d=n[4],p=n[5];return e[0]=r*c+o*l,e[1]=i*c+a*l,e[2]=r*f+o*m,e[3]=i*f+a*m,e[4]=r*d+o*p+s,e[5]=i*d+a*p+u,e},l.mul=l.multiply,l.rotate=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=Math.sin(n),l=Math.cos(n);return e[0]=r*l+o*c,e[1]=i*l+a*c,e[2]=r*-c+o*l,e[3]=i*-c+a*l,e[4]=s,e[5]=u,e},l.scale=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=n[0],l=n[1];return e[0]=r*c,e[1]=i*c,e[2]=o*l,e[3]=a*l,e[4]=s,e[5]=u,e},l.translate=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=n[0],l=n[1];return e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=r*c+o*l+s,e[5]=i*c+a*l+u,e},l.str=function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},l.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)},"undefined"!=typeof e&&(e.mat2d=l);var f={};f.create=function(){var e=new n(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},f.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},f.clone=function(e){var t=new n(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},f.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},f.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},f.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},f.invert=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=l*a-s*c,m=-l*o+s*u,d=c*o-a*u,p=n*f+r*m+i*d;return p?(p=1/p,e[0]=f*p,e[1]=(-l*r+i*c)*p,e[2]=(s*r-i*a)*p,e[3]=m*p,e[4]=(l*n-i*u)*p,e[5]=(-s*n+i*o)*p,e[6]=d*p,e[7]=(-c*n+r*u)*p,e[8]=(a*n-r*o)*p,e):null},f.adjoint=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=t[8];return e[0]=a*l-s*c,e[1]=i*c-r*l,e[2]=r*s-i*a,e[3]=s*u-o*l,e[4]=n*l-i*u,e[5]=i*o-n*s,e[6]=o*c-a*u,e[7]=r*u-n*c,e[8]=n*a-r*o,e},f.determinant=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],c=e[8];return t*(c*o-a*u)+n*(-c*i+a*s)+r*(u*i-o*s)},f.multiply=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],m=n[0],d=n[1],p=n[2],h=n[3],b=n[4],v=n[5],g=n[6],y=n[7],x=n[8];return e[0]=m*r+d*a+p*c,e[1]=m*i+d*s+p*l,e[2]=m*o+d*u+p*f,e[3]=h*r+b*a+v*c,e[4]=h*i+b*s+v*l,e[5]=h*o+b*u+v*f,e[6]=g*r+y*a+x*c,e[7]=g*i+y*s+x*l,e[8]=g*o+y*u+x*f,e},f.mul=f.multiply,f.translate=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],m=n[0],d=n[1];return e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=u,e[6]=m*r+d*a+c,e[7]=m*i+d*s+l,e[8]=m*o+d*u+f,e},f.rotate=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],m=Math.sin(n),d=Math.cos(n);
return e[0]=d*r+m*a,e[1]=d*i+m*s,e[2]=d*o+m*u,e[3]=d*a-m*r,e[4]=d*s-m*i,e[5]=d*u-m*o,e[6]=c,e[7]=l,e[8]=f,e},f.scale=function(e,t,n){var r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},f.fromMat2d=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},f.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,s=r+r,u=i+i,c=n*a,l=r*a,f=r*s,m=i*a,d=i*s,p=i*u,h=o*a,b=o*s,v=o*u;return e[0]=1-f-p,e[3]=l-v,e[6]=m+b,e[1]=l+v,e[4]=1-c-p,e[7]=d-h,e[2]=m-b,e[5]=d+h,e[8]=1-c-f,e},f.normalFromMat4=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=t[9],m=t[10],d=t[11],p=t[12],h=t[13],b=t[14],v=t[15],g=n*s-r*a,y=n*u-i*a,x=n*c-o*a,w=r*u-i*s,j=r*c-o*s,_=i*c-o*u,E=l*h-f*p,T=l*b-m*p,S=l*v-d*p,M=f*b-m*h,A=f*v-d*h,k=m*v-d*b,O=g*k-y*A+x*M+w*S-j*T+_*E;return O?(O=1/O,e[0]=(s*k-u*A+c*M)*O,e[1]=(u*S-a*k-c*T)*O,e[2]=(a*A-s*S+c*E)*O,e[3]=(i*A-r*k-o*M)*O,e[4]=(n*k-i*S+o*T)*O,e[5]=(r*S-n*A-o*E)*O,e[6]=(h*_-b*j+v*w)*O,e[7]=(b*x-p*_-v*y)*O,e[8]=(p*j-h*x+v*g)*O,e):null},f.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},f.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))},"undefined"!=typeof e&&(e.mat3=f);var m={};m.create=function(){var e=new n(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},m.clone=function(e){var t=new n(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},m.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},m.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},m.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},m.invert=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=t[9],m=t[10],d=t[11],p=t[12],h=t[13],b=t[14],v=t[15],g=n*s-r*a,y=n*u-i*a,x=n*c-o*a,w=r*u-i*s,j=r*c-o*s,_=i*c-o*u,E=l*h-f*p,T=l*b-m*p,S=l*v-d*p,M=f*b-m*h,A=f*v-d*h,k=m*v-d*b,O=g*k-y*A+x*M+w*S-j*T+_*E;return O?(O=1/O,e[0]=(s*k-u*A+c*M)*O,e[1]=(i*A-r*k-o*M)*O,e[2]=(h*_-b*j+v*w)*O,e[3]=(m*j-f*_-d*w)*O,e[4]=(u*S-a*k-c*T)*O,e[5]=(n*k-i*S+o*T)*O,e[6]=(b*x-p*_-v*y)*O,e[7]=(l*_-m*x+d*y)*O,e[8]=(a*A-s*S+c*E)*O,e[9]=(r*S-n*A-o*E)*O,e[10]=(p*j-h*x+v*g)*O,e[11]=(f*x-l*j-d*g)*O,e[12]=(s*T-a*M-u*E)*O,e[13]=(n*M-r*T+i*E)*O,e[14]=(h*y-p*w-b*g)*O,e[15]=(l*w-f*y+m*g)*O,e):null},m.adjoint=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=t[9],m=t[10],d=t[11],p=t[12],h=t[13],b=t[14],v=t[15];return e[0]=s*(m*v-d*b)-f*(u*v-c*b)+h*(u*d-c*m),e[1]=-(r*(m*v-d*b)-f*(i*v-o*b)+h*(i*d-o*m)),e[2]=r*(u*v-c*b)-s*(i*v-o*b)+h*(i*c-o*u),e[3]=-(r*(u*d-c*m)-s*(i*d-o*m)+f*(i*c-o*u)),e[4]=-(a*(m*v-d*b)-l*(u*v-c*b)+p*(u*d-c*m)),e[5]=n*(m*v-d*b)-l*(i*v-o*b)+p*(i*d-o*m),e[6]=-(n*(u*v-c*b)-a*(i*v-o*b)+p*(i*c-o*u)),e[7]=n*(u*d-c*m)-a*(i*d-o*m)+l*(i*c-o*u),e[8]=a*(f*v-d*h)-l*(s*v-c*h)+p*(s*d-c*f),e[9]=-(n*(f*v-d*h)-l*(r*v-o*h)+p*(r*d-o*f)),e[10]=n*(s*v-c*h)-a*(r*v-o*h)+p*(r*c-o*s),e[11]=-(n*(s*d-c*f)-a*(r*d-o*f)+l*(r*c-o*s)),e[12]=-(a*(f*b-m*h)-l*(s*b-u*h)+p*(s*m-u*f)),e[13]=n*(f*b-m*h)-l*(r*b-i*h)+p*(r*m-i*f),e[14]=-(n*(s*b-u*h)-a*(r*b-i*h)+p*(r*u-i*s)),e[15]=n*(s*m-u*f)-a*(r*m-i*f)+l*(r*u-i*s),e},m.determinant=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],l=e[9],f=e[10],m=e[11],d=e[12],p=e[13],h=e[14],b=e[15],v=t*a-n*o,g=t*s-r*o,y=t*u-i*o,x=n*s-r*a,w=n*u-i*a,j=r*u-i*s,_=c*p-l*d,E=c*h-f*d,T=c*b-m*d,S=l*h-f*p,M=l*b-m*p,A=f*b-m*h;return v*A-g*M+y*S+x*T-w*E+j*_},m.multiply=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],m=t[9],d=t[10],p=t[11],h=t[12],b=t[13],v=t[14],g=t[15],y=n[0],x=n[1],w=n[2],j=n[3];return e[0]=y*r+x*s+w*f+j*h,e[1]=y*i+x*u+w*m+j*b,e[2]=y*o+x*c+w*d+j*v,e[3]=y*a+x*l+w*p+j*g,y=n[4],x=n[5],w=n[6],j=n[7],e[4]=y*r+x*s+w*f+j*h,e[5]=y*i+x*u+w*m+j*b,e[6]=y*o+x*c+w*d+j*v,e[7]=y*a+x*l+w*p+j*g,y=n[8],x=n[9],w=n[10],j=n[11],e[8]=y*r+x*s+w*f+j*h,e[9]=y*i+x*u+w*m+j*b,e[10]=y*o+x*c+w*d+j*v,e[11]=y*a+x*l+w*p+j*g,y=n[12],x=n[13],w=n[14],j=n[15],e[12]=y*r+x*s+w*f+j*h,e[13]=y*i+x*u+w*m+j*b,e[14]=y*o+x*c+w*d+j*v,e[15]=y*a+x*l+w*p+j*g,e},m.mul=m.multiply,m.translate=function(e,t,n){var r,i,o,a,s,u,c,l,f,m,d,p,h=n[0],b=n[1],v=n[2];return t===e?(e[12]=t[0]*h+t[4]*b+t[8]*v+t[12],e[13]=t[1]*h+t[5]*b+t[9]*v+t[13],e[14]=t[2]*h+t[6]*b+t[10]*v+t[14],e[15]=t[3]*h+t[7]*b+t[11]*v+t[15]):(r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],m=t[9],d=t[10],p=t[11],e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=u,e[6]=c,e[7]=l,e[8]=f,e[9]=m,e[10]=d,e[11]=p,e[12]=r*h+s*b+f*v+t[12],e[13]=i*h+u*b+m*v+t[13],e[14]=o*h+c*b+d*v+t[14],e[15]=a*h+l*b+p*v+t[15]),e},m.scale=function(e,t,n){var r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},m.rotate=function(e,n,r,i){var o,a,s,u,c,l,f,m,d,p,h,b,v,g,y,x,w,j,_,E,T,S,M,A,k=i[0],O=i[1],L=i[2],R=Math.sqrt(k*k+O*O+L*L);return Math.abs(R)<t?null:(R=1/R,k*=R,O*=R,L*=R,o=Math.sin(r),a=Math.cos(r),s=1-a,u=n[0],c=n[1],l=n[2],f=n[3],m=n[4],d=n[5],p=n[6],h=n[7],b=n[8],v=n[9],g=n[10],y=n[11],x=k*k*s+a,w=O*k*s+L*o,j=L*k*s-O*o,_=k*O*s-L*o,E=O*O*s+a,T=L*O*s+k*o,S=k*L*s+O*o,M=O*L*s-k*o,A=L*L*s+a,e[0]=u*x+m*w+b*j,e[1]=c*x+d*w+v*j,e[2]=l*x+p*w+g*j,e[3]=f*x+h*w+y*j,e[4]=u*_+m*E+b*T,e[5]=c*_+d*E+v*T,e[6]=l*_+p*E+g*T,e[7]=f*_+h*E+y*T,e[8]=u*S+m*M+b*A,e[9]=c*S+d*M+v*A,e[10]=l*S+p*M+g*A,e[11]=f*S+h*M+y*A,n!==e&&(e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e)},m.rotateX=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],l=t[9],f=t[10],m=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+c*r,e[5]=a*i+l*r,e[6]=s*i+f*r,e[7]=u*i+m*r,e[8]=c*i-o*r,e[9]=l*i-a*r,e[10]=f*i-s*r,e[11]=m*i-u*r,e},m.rotateY=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],u=t[3],c=t[8],l=t[9],f=t[10],m=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-c*r,e[1]=a*i-l*r,e[2]=s*i-f*r,e[3]=u*i-m*r,e[8]=o*r+c*i,e[9]=a*r+l*i,e[10]=s*r+f*i,e[11]=u*r+m*i,e},m.rotateZ=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],u=t[3],c=t[4],l=t[5],f=t[6],m=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+c*r,e[1]=a*i+l*r,e[2]=s*i+f*r,e[3]=u*i+m*r,e[4]=c*i-o*r,e[5]=l*i-a*r,e[6]=f*i-s*r,e[7]=m*i-u*r,e},m.fromRotationTranslation=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=r+r,u=i+i,c=o+o,l=r*s,f=r*u,m=r*c,d=i*u,p=i*c,h=o*c,b=a*s,v=a*u,g=a*c;return e[0]=1-(d+h),e[1]=f+g,e[2]=m-v,e[3]=0,e[4]=f-g,e[5]=1-(l+h),e[6]=p+b,e[7]=0,e[8]=m+v,e[9]=p-b,e[10]=1-(l+d),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},m.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,s=r+r,u=i+i,c=n*a,l=r*a,f=r*s,m=i*a,d=i*s,p=i*u,h=o*a,b=o*s,v=o*u;return e[0]=1-f-p,e[1]=l+v,e[2]=m-b,e[3]=0,e[4]=l-v,e[5]=1-c-p,e[6]=d+h,e[7]=0,e[8]=m+b,e[9]=d-h,e[10]=1-c-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},m.frustum=function(e,t,n,r,i,o,a){var s=1/(n-t),u=1/(i-r),c=1/(o-a);return e[0]=2*o*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*u,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(i+r)*u,e[10]=(a+o)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*c,e[15]=0,e},m.perspective=function(e,t,n,r,i){var o=1/Math.tan(t/2),a=1/(r-i);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*a,e[15]=0,e},m.ortho=function(e,t,n,r,i,o,a){var s=1/(t-n),u=1/(r-i),c=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*u,e[14]=(a+o)*c,e[15]=1,e},m.lookAt=function(e,n,r,i){var o,a,s,u,c,l,f,d,p,h,b=n[0],v=n[1],g=n[2],y=i[0],x=i[1],w=i[2],j=r[0],_=r[1],E=r[2];return Math.abs(b-j)<t&&Math.abs(v-_)<t&&Math.abs(g-E)<t?m.identity(e):(f=b-j,d=v-_,p=g-E,h=1/Math.sqrt(f*f+d*d+p*p),f*=h,d*=h,p*=h,o=x*p-w*d,a=w*f-y*p,s=y*d-x*f,h=Math.sqrt(o*o+a*a+s*s),h?(h=1/h,o*=h,a*=h,s*=h):(o=0,a=0,s=0),u=d*s-p*a,c=p*o-f*s,l=f*a-d*o,h=Math.sqrt(u*u+c*c+l*l),h?(h=1/h,u*=h,c*=h,l*=h):(u=0,c=0,l=0),e[0]=o,e[1]=u,e[2]=f,e[3]=0,e[4]=a,e[5]=c,e[6]=d,e[7]=0,e[8]=s,e[9]=l,e[10]=p,e[11]=0,e[12]=-(o*b+a*v+s*g),e[13]=-(u*b+c*v+l*g),e[14]=-(f*b+d*v+p*g),e[15]=1,e)},m.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},m.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},"undefined"!=typeof e&&(e.mat4=m);var d={};d.create=function(){var e=new n(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},d.rotationTo=function(){var e=s.create(),t=s.fromValues(1,0,0),n=s.fromValues(0,1,0);return function(r,i,o){var a=s.dot(i,o);return-.999999>a?(s.cross(e,t,i),s.length(e)<1e-6&&s.cross(e,n,i),s.normalize(e,e),d.setAxisAngle(r,e,Math.PI),r):a>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(s.cross(e,i,o),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+a,d.normalize(r,r))}}(),d.setAxes=function(){var e=f.create();return function(t,n,r,i){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],d.normalize(t,d.fromMat3(t,e))}}(),d.clone=u.clone,d.fromValues=u.fromValues,d.copy=u.copy,d.set=u.set,d.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},d.setAxisAngle=function(e,t,n){n=.5*n;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e},d.add=u.add,d.multiply=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=n[0],u=n[1],c=n[2],l=n[3];return e[0]=r*l+a*s+i*c-o*u,e[1]=i*l+a*u+o*s-r*c,e[2]=o*l+a*c+r*u-i*s,e[3]=a*l-r*s-i*u-o*c,e},d.mul=d.multiply,d.scale=u.scale,d.rotateX=function(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+a*s,e[1]=i*u+o*s,e[2]=o*u-i*s,e[3]=a*u-r*s,e},d.rotateY=function(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u-o*s,e[1]=i*u+a*s,e[2]=o*u+r*s,e[3]=a*u-i*s,e},d.rotateZ=function(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+i*s,e[1]=i*u-r*s,e[2]=o*u+a*s,e[3]=a*u-o*s,e},d.calculateW=function(e,t){var n=t[0],r=t[1],i=t[2];return e[0]=n,e[1]=r,e[2]=i,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),e},d.dot=u.dot,d.lerp=u.lerp,d.slerp=function(e,t,n,r){var i,o,a,s,u,c=t[0],l=t[1],f=t[2],m=t[3],d=n[0],p=n[1],h=n[2],b=n[3];return o=c*d+l*p+f*h+m*b,0>o&&(o=-o,d=-d,p=-p,h=-h,b=-b),1-o>1e-6?(i=Math.acos(o),a=Math.sin(i),s=Math.sin((1-r)*i)/a,u=Math.sin(r*i)/a):(s=1-r,u=r),e[0]=s*c+u*d,e[1]=s*l+u*p,e[2]=s*f+u*h,e[3]=s*m+u*b,e},d.invert=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o,s=a?1/a:0;return e[0]=-n*s,e[1]=-r*s,e[2]=-i*s,e[3]=o*s,e},d.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},d.length=u.length,d.len=d.length,d.squaredLength=u.squaredLength,d.sqrLen=d.squaredLength,d.normalize=u.normalize,d.fromMat3=function(e,t){var n,r=t[0]+t[4]+t[8];if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;n=Math.sqrt(t[3*i+i]-t[3*o+o]-t[3*a+a]+1),e[i]=.5*n,n=.5/n,e[3]=(t[3*o+a]-t[3*a+o])*n,e[o]=(t[3*o+i]+t[3*i+o])*n,e[a]=(t[3*a+i]+t[3*i+a])*n}return e},d.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},"undefined"!=typeof e&&(e.quat=d)}(r.exports)}(this)}(),e.register("npm:core-js@0.9.10/library/fn/object/keys",["npm:core-js@0.9.10/library/modules/es6.object.statics-accept-primitives","npm:core-js@0.9.10/library/modules/$"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,require("npm:core-js@0.9.10/library/modules/es6.object.statics-accept-primitives"),n.exports=require("npm:core-js@0.9.10/library/modules/$").core.Object.keys,r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/modules/es6.array.from",["npm:core-js@0.9.10/library/modules/$","npm:core-js@0.9.10/library/modules/$.ctx","npm:core-js@0.9.10/library/modules/$.def","npm:core-js@0.9.10/library/modules/$.iter","npm:core-js@0.9.10/library/modules/$.iter-call","npm:core-js@0.9.10/library/modules/$.iter-detect"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:core-js@0.9.10/library/modules/$"),a=require("npm:core-js@0.9.10/library/modules/$.ctx"),s=require("npm:core-js@0.9.10/library/modules/$.def"),u=require("npm:core-js@0.9.10/library/modules/$.iter"),c=require("npm:core-js@0.9.10/library/modules/$.iter-call");return s(s.S+s.F*!require("npm:core-js@0.9.10/library/modules/$.iter-detect")(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,r,i,s=Object(o.assertDefined(e)),l=arguments[1],f=void 0!==l,m=f?a(l,arguments[2],2):void 0,d=0;if(u.is(s))for(i=u.get(s),n=new("function"==typeof this?this:Array);!(r=i.next()).done;d++)n[d]=f?c(i,m,[r.value,d],!0):r.value;else for(n=new("function"==typeof this?this:Array)(t=o.toLength(s.length));t>d;d++)n[d]=f?m(s[d],d):s[d];return n.length=d,n}}),r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/modules/$.collection-strong",["npm:core-js@0.9.10/library/modules/$","npm:core-js@0.9.10/library/modules/$.ctx","npm:core-js@0.9.10/library/modules/$.uid","npm:core-js@0.9.10/library/modules/$.assert","npm:core-js@0.9.10/library/modules/$.for-of","npm:core-js@0.9.10/library/modules/$.iter","npm:core-js@0.9.10/library/modules/$.mix","npm:core-js@0.9.10/library/modules/$.iter-define"],!0,function(require,t,n){function r(e,t){if(!h(e))return("string"==typeof e?"S":"P")+e;if(v(e))return"F";if(!d(e,g)){if(!t)return"E";b(e,g,++E)}return"O"+e[g]}function i(e,t){var n,i=r(t);if("F"!=i)return e[y][i];for(n=e[w];n;n=n.n)if(n.k==t)return n}var o=e.global,a=o.define;o.define=void 0;var s=require("npm:core-js@0.9.10/library/modules/$"),u=require("npm:core-js@0.9.10/library/modules/$.ctx"),c=require("npm:core-js@0.9.10/library/modules/$.uid").safe,l=require("npm:core-js@0.9.10/library/modules/$.assert"),f=require("npm:core-js@0.9.10/library/modules/$.for-of"),m=require("npm:core-js@0.9.10/library/modules/$.iter").step,d=s.has,p=s.set,h=s.isObject,b=s.hide,v=Object.isFrozen||s.core.Object.isFrozen,g=c("id"),y=c("O1"),x=c("last"),w=c("first"),j=c("iter"),_=s.DESC?c("size"):"size",E=0;return n.exports={getConstructor:function(e,t,n){function r(){var i=l.inst(this,r,e),o=arguments[0];p(i,y,s.create(null)),p(i,_,0),p(i,x,void 0),p(i,w,void 0),void 0!=o&&f(o,t,i[n],i)}return require("npm:core-js@0.9.10/library/modules/$.mix")(r.prototype,{clear:function(){for(var e=this,t=e[y],n=e[w];n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete t[n.i];e[w]=e[x]=void 0,e[_]=0},"delete":function(e){var t=this,n=i(t,e);if(n){var r=n.n,o=n.p;delete t[y][n.i],n.r=!0,o&&(o.n=r),r&&(r.p=o),t[w]==n&&(t[w]=r),t[x]==n&&(t[x]=o),t[_]--}return!!n},forEach:function(e){for(var t,n=u(e,arguments[1],3);t=t?t.n:this[w];)for(n(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!i(this,e)}}),s.DESC&&s.setDesc(r.prototype,"size",{get:function(){return l.def(this[_])}}),r},def:function(e,t,n){var o,a,s=i(e,t);return s?s.v=n:(e[x]=s={i:a=r(t,!0),k:t,v:n,p:o=e[x],n:void 0,r:!1},e[w]||(e[w]=s),o&&(o.n=s),e[_]++,"F"!=a&&(e[y][a]=s)),e},getEntry:i,setIter:function(e,t,n){require("npm:core-js@0.9.10/library/modules/$.iter-define")(e,t,function(e,t){p(this,j,{o:e,k:t})},function(){for(var e=this[j],t=e.k,n=e.l;n&&n.r;)n=n.p;return e.o&&(e.l=n=n?n.n:e.o[w])?"keys"==t?m(0,n.k):"values"==t?m(0,n.v):m(0,[n.k,n.v]):(e.o=void 0,m(1))},n?"entries":"values",!n,!0)}},o.define=a,n.exports}),e.register("npm:core-js@0.9.10/library/modules/$.collection-to-json",["npm:core-js@0.9.10/library/modules/$.def","npm:core-js@0.9.10/library/modules/$.for-of"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:core-js@0.9.10/library/modules/$.def"),a=require("npm:core-js@0.9.10/library/modules/$.for-of");return n.exports=function(e){o(o.P,e,{toJSON:function(){var e=[];return a(this,!1,e.push,e),e}})},r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/modules/es6.set",["npm:core-js@0.9.10/library/modules/$.collection-strong","npm:core-js@0.9.10/library/modules/$.collection"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:core-js@0.9.10/library/modules/$.collection-strong");return require("npm:core-js@0.9.10/library/modules/$.collection")("Set",{add:function(e){return o.def(this,e=0===e?0:e,e)}},o),r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/modules/es7.set.to-json",["npm:core-js@0.9.10/library/modules/$.collection-to-json"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,require("npm:core-js@0.9.10/library/modules/$.collection-to-json")("Set"),r.define=i,n.exports}),e.register("github:mrdoob/stats.js@master/src/Stats",[],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=function(){var e=Date.now(),t=e,n=0,r=1/0,i=0,o=0,a=1/0,s=0,u=0,c=0,l=document.createElement("div");l.id="stats",l.addEventListener("mousedown",function(e){e.preventDefault(),g(++c%2)},!1),l.style.cssText="width:80px;opacity:0.9;cursor:pointer";var f=document.createElement("div");f.id="fps",f.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",l.appendChild(f);var m=document.createElement("div");m.id="fpsText",m.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",m.innerHTML="FPS",f.appendChild(m);var d=document.createElement("div");for(d.id="fpsGraph",d.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",f.appendChild(d);d.children.length<74;){var p=document.createElement("span");p.style.cssText="width:1px;height:30px;float:left;background-color:#113",d.appendChild(p)}var h=document.createElement("div");h.id="ms",h.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",l.appendChild(h);var b=document.createElement("div");b.id="msText",b.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",b.innerHTML="MS",h.appendChild(b);var v=document.createElement("div");for(v.id="msGraph",v.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",h.appendChild(v);v.children.length<74;){var p=document.createElement("span");p.style.cssText="width:1px;height:30px;float:left;background-color:#131",v.appendChild(p)}var g=function(e){switch(c=e){case 0:f.style.display="block",h.style.display="none";break;case 1:f.style.display="none",h.style.display="block"}},y=function(e,t){var n=e.appendChild(e.firstChild);n.style.height=t+"px"};return{REVISION:12,domElement:l,setMode:g,begin:function(){e=Date.now()},end:function(){var c=Date.now();return n=c-e,r=Math.min(r,n),i=Math.max(i,n),b.textContent=n+" MS ("+r+"-"+i+")",y(v,Math.min(30,30-n/200*30)),u++,c>t+1e3&&(o=Math.round(1e3*u/(c-t)),a=Math.min(a,o),s=Math.max(s,o),m.textContent=o+" FPS ("+a+"-"+s+")",y(d,Math.min(30,30-o/100*30)),t=c,u=0),c},update:function(){e=this.end()}}};return"object"==typeof n&&(n.exports=o),r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/fn/symbol/iterator",["npm:core-js@0.9.10/library/modules/es6.string.iterator","npm:core-js@0.9.10/library/modules/web.dom.iterable","npm:core-js@0.9.10/library/modules/$.wks"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,require("npm:core-js@0.9.10/library/modules/es6.string.iterator"),require("npm:core-js@0.9.10/library/modules/web.dom.iterable"),n.exports=require("npm:core-js@0.9.10/library/modules/$.wks")("iterator"),r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/modules/$.keyof",["npm:core-js@0.9.10/library/modules/$"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:core-js@0.9.10/library/modules/$");return n.exports=function(e,t){for(var n,r=o.toObject(e),i=o.getKeys(r),a=i.length,s=0;a>s;)if(r[n=i[s++]]===t)return n},r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/modules/$.enum-keys",["npm:core-js@0.9.10/library/modules/$"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:core-js@0.9.10/library/modules/$");return n.exports=function(e){var t=o.getKeys(e),n=o.getDesc,r=o.getSymbols;return r&&o.each.call(r(e),function(r){n(e,r).enumerable&&t.push(r)}),t},r.define=i,n.exports}),e.register("npm:es5-ext@0.10.7/object/normalize-options",["github:jspm/nodelibs-process@0.1.1"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,function(e){"use strict";var t=Array.prototype.forEach,r=Object.create,e=function(e,t){var n;for(n in e)t[n]=e[n]};n.exports=function(n){var i=r(null);return t.call(arguments,function(t){null!=t&&e(Object(t),i)}),i}}(require("github:jspm/nodelibs-process@0.1.1")),r.define=i,n.exports}),e.register("npm:es5-ext@0.10.7/math/sign/is-implemented",[],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=function(){var e=Math.sign;return"function"!=typeof e?!1:1===e(10)&&-1===e(-20)},r.define=i,n.exports}),e.register("npm:es5-ext@0.10.7/math/sign/shim",[],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=function(e){return e=Number(e),isNaN(e)||0===e?e:e>0?1:-1},r.define=i,n.exports}),e.register("npm:es5-ext@0.10.7/object/valid-callable",[],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e},r.define=i,n.exports}),e.register("npm:es5-ext@0.10.7/object/is-callable",[],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=function(e){return"function"==typeof e},r.define=i,n.exports}),e.register("npm:es5-ext@0.10.7/object/valid-value",[],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=function(e){if(null==e)throw new TypeError("Cannot use null or undefined");return e},r.define=i,n.exports}),e.register("npm:memoizee@0.3.8/lib/registered-extensions",[],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,r.define=i,n.exports}),e.register("npm:es5-ext@0.10.7/object/assign/is-implemented",[],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=function(){var e,t=Object.assign;return"function"!=typeof t?!1:(e={foo:"raz"},t(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")},r.define=i,n.exports}),e.register("npm:es5-ext@0.10.7/object/keys/is-implemented",[],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}},r.define=i,n.exports}),e.register("npm:es5-ext@0.10.7/object/keys/shim",[],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=Object.keys;return n.exports=function(e){return o(null==e?e:Object(e))},r.define=i,n.exports}),e.register("npm:es5-ext@0.10.7/object/mixin",["npm:es5-ext@0.10.7/object/valid-value"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:es5-ext@0.10.7/object/valid-value"),a=Object.defineProperty,s=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames;return n.exports=function(e,t){var n;if(e=Object(o(e)),u(Object(o(t))).forEach(function(r){try{a(e,r,s(t,r))}catch(i){n=i}}),void 0!==n)throw n;return e},r.define=i,n.exports}),e.register("npm:es5-ext@0.10.7/object/assign",["npm:es5-ext@0.10.7/object/assign/index"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=require("npm:es5-ext@0.10.7/object/assign/index"),r.define=i,n.exports}),e.register("npm:es5-ext@0.10.7/string/#/contains/is-implemented",[],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o="razdwatrzy";return n.exports=function(){return"function"!=typeof o.contains?!1:o.contains("dwa")===!0&&o.contains("foo")===!1},r.define=i,n.exports}),e.register("npm:es5-ext@0.10.7/string/#/contains/shim",[],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=String.prototype.indexOf;return n.exports=function(e){return o.call(this,e,arguments[1])>-1},r.define=i,n.exports}),e.register("npm:event-emitter@0.3.3/index",["npm:d@0.1.1","npm:es5-ext@0.10.7/object/valid-callable"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o,a,s,u,c,l,f,m=require("npm:d@0.1.1"),d=require("npm:es5-ext@0.10.7/object/valid-callable"),p=Function.prototype.apply,h=Function.prototype.call,b=Object.create,v=Object.defineProperty,g=Object.defineProperties,y=Object.prototype.hasOwnProperty,x={configurable:!0,enumerable:!1,writable:!0};return o=function(e,t){var n;return d(t),y.call(this,"__ee__")?n=this.__ee__:(n=x.value=b(null),v(this,"__ee__",x),x.value=null),n[e]?"object"==typeof n[e]?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},a=function(e,t){var n,r;return d(t),r=this,o.call(this,e,n=function(){s.call(r,e,n),p.call(t,this,arguments)}),n.__eeOnceListener__=t,this},s=function(e,t){var n,r,i,o;if(d(t),!y.call(this,"__ee__"))return this;if(n=this.__ee__,!n[e])return this;if(r=n[e],"object"==typeof r)for(o=0;i=r[o];++o)(i===t||i.__eeOnceListener__===t)&&(2===r.length?n[e]=r[o?0:1]:r.splice(o,1));else(r===t||r.__eeOnceListener__===t)&&delete n[e];return this},u=function(e){var t,n,r,i,o;if(y.call(this,"__ee__")&&(i=this.__ee__[e]))if("object"==typeof i){for(n=arguments.length,o=new Array(n-1),t=1;n>t;++t)o[t-1]=arguments[t];for(i=i.slice(),t=0;r=i[t];++t)p.call(r,this,o)}else switch(arguments.length){case 1:h.call(i,this);break;case 2:h.call(i,this,arguments[1]);break;case 3:h.call(i,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),t=1;n>t;++t)o[t-1]=arguments[t];p.call(i,this,o)}},c={on:o,once:a,off:s,emit:u},l={on:m(o),once:m(a),off:m(s),emit:m(u)},f=g({},l),n.exports=t=function(e){return null==e?b(f):g(Object(e),l)},t.methods=c,r.define=i,n.exports}),e.register("npm:es5-ext@0.10.7/array/from/is-implemented",[],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=function(){var e,t,n=Array.from;return"function"!=typeof n?!1:(e=["raz","dwa"],t=n(e),Boolean(t&&t!==e&&"dwa"===t[1]))},r.define=i,n.exports}),e.register("npm:es6-symbol@2.0.1/is-implemented",[],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=function(){var e;if("function"!=typeof Symbol)return!1;e=Symbol("test symbol");try{String(e)}catch(t){return!1}return"symbol"==typeof Symbol.iterator?!0:"object"!=typeof Symbol.isConcatSpreadable?!1:"object"!=typeof Symbol.iterator?!1:"object"!=typeof Symbol.toPrimitive?!1:"object"!=typeof Symbol.toStringTag?!1:"object"!=typeof Symbol.unscopables?!1:!0},r.define=i,n.exports}),e.register("npm:es6-symbol@2.0.1/is-symbol",[],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=function(e){return e&&("symbol"==typeof e||"Symbol"===e["@@toStringTag"])||!1},r.define=i,n.exports}),e.register("npm:es5-ext@0.10.7/function/is-arguments",[],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=Object.prototype.toString,a=o.call(function(){return arguments}());return n.exports=function(e){return o.call(e)===a},r.define=i,n.exports}),e.register("npm:es5-ext@0.10.7/function/noop",[],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=function(){},r.define=i,n.exports}),e.register("npm:es5-ext@0.10.7/string/is-string",[],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=Object.prototype.toString,a=o.call("");return n.exports=function(e){return"string"==typeof e||e&&"object"==typeof e&&(e instanceof String||o.call(e)===a)||!1},r.define=i,n.exports}),e.register("npm:memoizee@0.3.8/lib/resolve-normalize",["npm:es5-ext@0.10.7/object/valid-callable"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:es5-ext@0.10.7/object/valid-callable");return n.exports=function(e){var t;return"function"==typeof e?{set:e,get:e}:(t={get:o(e.get)},void 0!==e.set?(t.set=o(e.set),t["delete"]=o(e["delete"]),t.clear=o(e.clear),t):(t.set=t.get,t))},r.define=i,n.exports}),e.register("npm:memoizee@0.3.8/normalizers/primitive",[],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=function(e){var t,n,r=e.length;if(!r)return"";for(t=String(e[n=0]);--r;)t+=""+e[++n];return t},r.define=i,n.exports}),e.register("npm:memoizee@0.3.8/normalizers/get-primitive-fixed",[],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=function(e){return e?function(t){for(var n=String(t[0]),r=0,i=e;--i;)n+=""+t[++r];return n}:function(){return""}},r.define=i,n.exports}),e.register("npm:es5-ext@0.10.7/array/#/e-index-of",["npm:es5-ext@0.10.7/number/to-pos-integer","npm:es5-ext@0.10.7/object/valid-value"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:es5-ext@0.10.7/number/to-pos-integer"),a=require("npm:es5-ext@0.10.7/object/valid-value"),s=Array.prototype.indexOf,u=Object.prototype.hasOwnProperty,c=Math.abs,l=Math.floor;return n.exports=function(e){var t,n,r,i;if(e===e)return s.apply(this,arguments);for(n=o(a(this).length),r=arguments[1],r=isNaN(r)?0:r>=0?l(r):o(this.length)-l(c(r)),t=r;n>t;++t)if(u.call(this,t)&&(i=this[t],i!==i))return t;return-1},r.define=i,n.exports}),e.register("npm:memoizee@0.3.8/normalizers/get-1",["npm:es5-ext@0.10.7/array/#/e-index-of"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:es5-ext@0.10.7/array/#/e-index-of");return n.exports=function(){var e=0,t=[],n=[];return{get:function(e){var r=o.call(t,e[0]);return-1===r?null:n[r]},set:function(r){return t.push(r[0]),n.push(++e),e},"delete":function(e){var r=o.call(n,e);-1!==r&&(t.splice(r,1),n.splice(r,1))},clear:function(){t=[],n=[]}}},r.define=i,n.exports}),e.register("npm:memoizee@0.3.8/normalizers/get-fixed",["npm:es5-ext@0.10.7/array/#/e-index-of"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:es5-ext@0.10.7/array/#/e-index-of"),a=Object.create;return n.exports=function(e){var t=0,n=[[],[]],r=a(null);return{get:function(t){for(var r,i=0,a=n;e-1>i;){if(r=o.call(a[0],t[i]),-1===r)return null;a=a[1][r],++i}return r=o.call(a[0],t[i]),-1===r?null:a[1][r]||null},set:function(i){for(var a,s=0,u=n;e-1>s;)a=o.call(u[0],i[s]),-1===a&&(a=u[0].push(i[s])-1,u[1].push([[],[]])),u=u[1][a],++s;return a=o.call(u[0],i[s]),-1===a&&(a=u[0].push(i[s])-1),u[1][a]=++t,r[t]=i,t},"delete":function(t){for(var i,a=0,s=n,u=[],c=r[t];e-1>a;){if(i=o.call(s[0],c[a]),-1===i)return;u.push(s,i),s=s[1][i],++a}if(i=o.call(s[0],c[a]),-1!==i){for(t=s[1][i],s[0].splice(i,1),s[1].splice(i,1);!s[0].length&&u.length;)i=u.pop(),
s=u.pop(),s[0].splice(i,1),s[1].splice(i,1);delete r[t]}},clear:function(){n=[[],[]],r=a(null)}}},r.define=i,n.exports}),e.register("npm:es5-ext@0.10.7/array/from",["npm:es5-ext@0.10.7/array/from/index"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=require("npm:es5-ext@0.10.7/array/from/index"),r.define=i,n.exports}),e.register("npm:next-tick@0.2.2/index",["github:jspm/nodelibs-process@0.1.1"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,function(e){"use strict";var t,r;t=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e},r=function(e){var n,r=document.createTextNode(""),i=0;return new e(function(){var e;if(n)return e=n,n=null,"function"==typeof e?void e():void e.forEach(function(e){e()})}).observe(r,{characterData:!0}),function(e){return t(e),n?void("function"==typeof n?n=[n,e]:n.push(e)):(n=e,void(r.data=i=++i%2))}},n.exports=function(){if("undefined"!=typeof e&&e&&"function"==typeof e.nextTick)return e.nextTick;if("object"==typeof document&&document){if("function"==typeof MutationObserver)return r(MutationObserver);if("function"==typeof WebKitMutationObserver)return r(WebKitMutationObserver)}return"function"==typeof setImmediate?function(e){setImmediate(t(e))}:"function"==typeof setTimeout?function(e){setTimeout(t(e),0)}:null}()}(require("github:jspm/nodelibs-process@0.1.1")),r.define=i,n.exports}),e.register("npm:memoizee@0.3.8/ext/dispose",["npm:es5-ext@0.10.7/object/valid-callable","npm:es5-ext@0.10.7/object/for-each","npm:memoizee@0.3.8/lib/registered-extensions"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:es5-ext@0.10.7/object/valid-callable"),a=require("npm:es5-ext@0.10.7/object/for-each"),s=require("npm:memoizee@0.3.8/lib/registered-extensions"),u=Array.prototype.slice,c=Function.prototype.apply;return s.dispose=function(e,t,n){var r;return o(e),n.async&&s.async?(t.on("deleteasync",r=function(t,n){c.call(e,null,u.call(n.args,1))}),void t.on("clearasync",function(e){a(e,function(e,t){r(t,e)})})):(t.on("delete",r=function(t,n){e(n)}),void t.on("clear",function(e){a(e,function(e,t){r(t,e)})}))},r.define=i,n.exports}),e.register("npm:timers-ext@0.1.0/max-timeout",[],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=2147483647,r.define=i,n.exports}),e.register("npm:lru-queue@0.1.0/index",["npm:es5-ext@0.10.7/number/to-pos-integer"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:es5-ext@0.10.7/number/to-pos-integer"),a=Object.create,s=Object.prototype.hasOwnProperty;return n.exports=function(e){var t,n=0,r=1,i=a(null),u=a(null),c=0;return e=o(e),{hit:function(o){var a=u[o],l=++c;if(i[l]=o,u[o]=l,!a){if(++n,e>=n)return;return o=i[r],t(o),o}if(delete i[a],r===a)for(;!s.call(i,++r);)continue},"delete":t=function(e){var t=u[e];if(t&&(delete i[t],delete u[e],--n,r===t)){if(!n)return c=0,void(r=1);for(;!s.call(i,++r);)continue}},clear:function(){n=0,r=1,i=a(null),u=a(null),c=0}}},r.define=i,n.exports}),e.register("npm:memoizee@0.3.8/ext/ref-counter",["npm:d@0.1.1","npm:memoizee@0.3.8/lib/registered-extensions"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:d@0.1.1"),a=require("npm:memoizee@0.3.8/lib/registered-extensions"),s=Object.create,u=Object.defineProperties;return a.refCounter=function(e,t,n){var r,i;r=s(null),i=n.async&&a.async?"async":"",t.on("set"+i,function(e,t){r[e]=t||1}),t.on("get"+i,function(e){++r[e]}),t.on("delete"+i,function(e){delete r[e]}),t.on("clear"+i,function(){r={}}),u(t.memoized,{deleteRef:o(function(){var e=t.get(arguments);return null===e?null:r[e]?--r[e]?!1:(t["delete"](e),!0):null}),getRefCount:o(function(){var e=t.get(arguments);return null===e?0:r[e]?r[e]:0})})},r.define=i,n.exports}),e.register("npm:babel-runtime@5.4.3/helpers/bind",[],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,t["default"]=Function.prototype.bind,t.__esModule=!0,r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/fn/is-iterable",["npm:core-js@0.9.10/library/modules/web.dom.iterable","npm:core-js@0.9.10/library/modules/es6.string.iterator","npm:core-js@0.9.10/library/modules/core.iter-helpers","npm:core-js@0.9.10/library/modules/$"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,require("npm:core-js@0.9.10/library/modules/web.dom.iterable"),require("npm:core-js@0.9.10/library/modules/es6.string.iterator"),require("npm:core-js@0.9.10/library/modules/core.iter-helpers"),n.exports=require("npm:core-js@0.9.10/library/modules/$").core.isIterable,r.define=i,n.exports}),e.register("github:toji/gl-matrix@master/src/gl-matrix/vec3.js!github:systemjs/plugin-text@0.0.2",[],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports="/* Copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE. */\n\n/**\n * @class 3 Dimensional Vector\n * @name vec3\n */\nvar vec3 = {};\n\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\nvec3.create = function() {\n    var out = new GLMAT_ARRAY_TYPE(3);\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    return out;\n};\n\n/**\n * Creates a new vec3 initialized with values from an existing vector\n *\n * @param {vec3} a vector to clone\n * @returns {vec3} a new 3D vector\n */\nvec3.clone = function(a) {\n    var out = new GLMAT_ARRAY_TYPE(3);\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    return out;\n};\n\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\nvec3.fromValues = function(x, y, z) {\n    var out = new GLMAT_ARRAY_TYPE(3);\n    out[0] = x;\n    out[1] = y;\n    out[2] = z;\n    return out;\n};\n\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the source vector\n * @returns {vec3} out\n */\nvec3.copy = function(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    return out;\n};\n\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\nvec3.set = function(out, x, y, z) {\n    out[0] = x;\n    out[1] = y;\n    out[2] = z;\n    return out;\n};\n\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nvec3.add = function(out, a, b) {\n    out[0] = a[0] + b[0];\n    out[1] = a[1] + b[1];\n    out[2] = a[2] + b[2];\n    return out;\n};\n\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nvec3.subtract = function(out, a, b) {\n    out[0] = a[0] - b[0];\n    out[1] = a[1] - b[1];\n    out[2] = a[2] - b[2];\n    return out;\n};\n\n/**\n * Alias for {@link vec3.subtract}\n * @function\n */\nvec3.sub = vec3.subtract;\n\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nvec3.multiply = function(out, a, b) {\n    out[0] = a[0] * b[0];\n    out[1] = a[1] * b[1];\n    out[2] = a[2] * b[2];\n    return out;\n};\n\n/**\n * Alias for {@link vec3.multiply}\n * @function\n */\nvec3.mul = vec3.multiply;\n\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nvec3.divide = function(out, a, b) {\n    out[0] = a[0] / b[0];\n    out[1] = a[1] / b[1];\n    out[2] = a[2] / b[2];\n    return out;\n};\n\n/**\n * Alias for {@link vec3.divide}\n * @function\n */\nvec3.div = vec3.divide;\n\n/**\n * Returns the minimum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nvec3.min = function(out, a, b) {\n    out[0] = Math.min(a[0], b[0]);\n    out[1] = Math.min(a[1], b[1]);\n    out[2] = Math.min(a[2], b[2]);\n    return out;\n};\n\n/**\n * Returns the maximum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nvec3.max = function(out, a, b) {\n    out[0] = Math.max(a[0], b[0]);\n    out[1] = Math.max(a[1], b[1]);\n    out[2] = Math.max(a[2], b[2]);\n    return out;\n};\n\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\nvec3.scale = function(out, a, b) {\n    out[0] = a[0] * b;\n    out[1] = a[1] * b;\n    out[2] = a[2] * b;\n    return out;\n};\n\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec3} out\n */\nvec3.scaleAndAdd = function(out, a, b, scale) {\n    out[0] = a[0] + (b[0] * scale);\n    out[1] = a[1] + (b[1] * scale);\n    out[2] = a[2] + (b[2] * scale);\n    return out;\n};\n\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {Number} distance between a and b\n */\nvec3.distance = function(a, b) {\n    var x = b[0] - a[0],\n        y = b[1] - a[1],\n        z = b[2] - a[2];\n    return Math.sqrt(x*x + y*y + z*z);\n};\n\n/**\n * Alias for {@link vec3.distance}\n * @function\n */\nvec3.dist = vec3.distance;\n\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\nvec3.squaredDistance = function(a, b) {\n    var x = b[0] - a[0],\n        y = b[1] - a[1],\n        z = b[2] - a[2];\n    return x*x + y*y + z*z;\n};\n\n/**\n * Alias for {@link vec3.squaredDistance}\n * @function\n */\nvec3.sqrDist = vec3.squaredDistance;\n\n/**\n * Calculates the length of a vec3\n *\n * @param {vec3} a vector to calculate length of\n * @returns {Number} length of a\n */\nvec3.length = function (a) {\n    var x = a[0],\n        y = a[1],\n        z = a[2];\n    return Math.sqrt(x*x + y*y + z*z);\n};\n\n/**\n * Alias for {@link vec3.length}\n * @function\n */\nvec3.len = vec3.length;\n\n/**\n * Calculates the squared length of a vec3\n *\n * @param {vec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nvec3.squaredLength = function (a) {\n    var x = a[0],\n        y = a[1],\n        z = a[2];\n    return x*x + y*y + z*z;\n};\n\n/**\n * Alias for {@link vec3.squaredLength}\n * @function\n */\nvec3.sqrLen = vec3.squaredLength;\n\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to negate\n * @returns {vec3} out\n */\nvec3.negate = function(out, a) {\n    out[0] = -a[0];\n    out[1] = -a[1];\n    out[2] = -a[2];\n    return out;\n};\n\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to invert\n * @returns {vec3} out\n */\nvec3.inverse = function(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n};\n\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to normalize\n * @returns {vec3} out\n */\nvec3.normalize = function(out, a) {\n    var x = a[0],\n        y = a[1],\n        z = a[2];\n    var len = x*x + y*y + z*z;\n    if (len > 0) {\n        //TODO: evaluate use of glm_invsqrt here?\n        len = 1 / Math.sqrt(len);\n        out[0] = a[0] * len;\n        out[1] = a[1] * len;\n        out[2] = a[2] * len;\n    }\n    return out;\n};\n\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {Number} dot product of a and b\n */\nvec3.dot = function (a, b) {\n    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n};\n\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nvec3.cross = function(out, a, b) {\n    var ax = a[0], ay = a[1], az = a[2],\n        bx = b[0], by = b[1], bz = b[2];\n\n    out[0] = ay * bz - az * by;\n    out[1] = az * bx - ax * bz;\n    out[2] = ax * by - ay * bx;\n    return out;\n};\n\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {vec3} out\n */\nvec3.lerp = function (out, a, b, t) {\n    var ax = a[0],\n        ay = a[1],\n        az = a[2];\n    out[0] = ax + t * (b[0] - ax);\n    out[1] = ay + t * (b[1] - ay);\n    out[2] = az + t * (b[2] - az);\n    return out;\n};\n\n/**\n * Performs a hermite interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @param {vec3} c the third operand\n * @param {vec3} d the fourth operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {vec3} out\n */\nvec3.hermite = function (out, a, b, c, d, t) {\n  var factorTimes2 = t * t,\n      factor1 = factorTimes2 * (2 * t - 3) + 1,\n      factor2 = factorTimes2 * (t - 2) + t,\n      factor3 = factorTimes2 * (t - 1),\n      factor4 = factorTimes2 * (3 - 2 * t);\n  \n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  \n  return out;\n};\n\n/**\n * Performs a bezier interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @param {vec3} c the third operand\n * @param {vec3} d the fourth operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {vec3} out\n */\nvec3.bezier = function (out, a, b, c, d, t) {\n  var inverseFactor = 1 - t,\n      inverseFactorTimesTwo = inverseFactor * inverseFactor,\n      factorTimes2 = t * t,\n      factor1 = inverseFactorTimesTwo * inverseFactor,\n      factor2 = 3 * t * inverseFactorTimesTwo,\n      factor3 = 3 * factorTimes2 * inverseFactor,\n      factor4 = factorTimes2 * t;\n  \n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  \n  return out;\n};\n\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec3} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec3} out\n */\nvec3.random = function (out, scale) {\n    scale = scale || 1.0;\n\n    var r = GLMAT_RANDOM() * 2.0 * Math.PI;\n    var z = (GLMAT_RANDOM() * 2.0) - 1.0;\n    var zScale = Math.sqrt(1.0-z*z) * scale;\n\n    out[0] = Math.cos(r) * zScale;\n    out[1] = Math.sin(r) * zScale;\n    out[2] = z * scale;\n    return out;\n};\n\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to transform\n * @param {mat4} m matrix to transform with\n * @returns {vec3} out\n */\nvec3.transformMat4 = function(out, a, m) {\n    var x = a[0], y = a[1], z = a[2],\n        w = m[3] * x + m[7] * y + m[11] * z + m[15];\n    w = w || 1.0;\n    out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n    out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n    out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n    return out;\n};\n\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to transform\n * @param {mat4} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\nvec3.transformMat3 = function(out, a, m) {\n    var x = a[0], y = a[1], z = a[2];\n    out[0] = x * m[0] + y * m[3] + z * m[6];\n    out[1] = x * m[1] + y * m[4] + z * m[7];\n    out[2] = x * m[2] + y * m[5] + z * m[8];\n    return out;\n};\n\n/**\n * Transforms the vec3 with a quat\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to transform\n * @param {quat} q quaternion to transform with\n * @returns {vec3} out\n */\nvec3.transformQuat = function(out, a, q) {\n    // benchmarks: http://jsperf.com/quaternion-transform-vec3-implementations\n\n    var x = a[0], y = a[1], z = a[2],\n        qx = q[0], qy = q[1], qz = q[2], qw = q[3],\n\n        // calculate quat * vec\n        ix = qw * x + qy * z - qz * y,\n        iy = qw * y + qz * x - qx * z,\n        iz = qw * z + qx * y - qy * x,\n        iw = -qx * x - qy * y - qz * z;\n\n    // calculate result * inverse quat\n    out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n    out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n    out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n    return out;\n};\n\n/**\n * Rotate a 3D vector around the x-axis\n * @param {vec3} out The receiving vec3\n * @param {vec3} a The vec3 point to rotate\n * @param {vec3} b The origin of the rotation\n * @param {Number} c The angle of rotation\n * @returns {vec3} out\n */\nvec3.rotateX = function(out, a, b, c){\n   var p = [], r=[];\n	  //Translate point to the origin\n	  p[0] = a[0] - b[0];\n	  p[1] = a[1] - b[1];\n  	p[2] = a[2] - b[2];\n\n	  //perform rotation\n	  r[0] = p[0];\n	  r[1] = p[1]*Math.cos(c) - p[2]*Math.sin(c);\n	  r[2] = p[1]*Math.sin(c) + p[2]*Math.cos(c);\n\n	  //translate to correct position\n	  out[0] = r[0] + b[0];\n	  out[1] = r[1] + b[1];\n	  out[2] = r[2] + b[2];\n\n  	return out;\n};\n\n/**\n * Rotate a 3D vector around the y-axis\n * @param {vec3} out The receiving vec3\n * @param {vec3} a The vec3 point to rotate\n * @param {vec3} b The origin of the rotation\n * @param {Number} c The angle of rotation\n * @returns {vec3} out\n */\nvec3.rotateY = function(out, a, b, c){\n  	var p = [], r=[];\n  	//Translate point to the origin\n  	p[0] = a[0] - b[0];\n  	p[1] = a[1] - b[1];\n  	p[2] = a[2] - b[2];\n  \n  	//perform rotation\n  	r[0] = p[2]*Math.sin(c) + p[0]*Math.cos(c);\n  	r[1] = p[1];\n  	r[2] = p[2]*Math.cos(c) - p[0]*Math.sin(c);\n  \n  	//translate to correct position\n  	out[0] = r[0] + b[0];\n  	out[1] = r[1] + b[1];\n  	out[2] = r[2] + b[2];\n  \n  	return out;\n};\n\n/**\n * Rotate a 3D vector around the z-axis\n * @param {vec3} out The receiving vec3\n * @param {vec3} a The vec3 point to rotate\n * @param {vec3} b The origin of the rotation\n * @param {Number} c The angle of rotation\n * @returns {vec3} out\n */\nvec3.rotateZ = function(out, a, b, c){\n  	var p = [], r=[];\n  	//Translate point to the origin\n  	p[0] = a[0] - b[0];\n  	p[1] = a[1] - b[1];\n  	p[2] = a[2] - b[2];\n  \n  	//perform rotation\n  	r[0] = p[0]*Math.cos(c) - p[1]*Math.sin(c);\n  	r[1] = p[0]*Math.sin(c) + p[1]*Math.cos(c);\n  	r[2] = p[2];\n  \n  	//translate to correct position\n  	out[0] = r[0] + b[0];\n  	out[1] = r[1] + b[1];\n  	out[2] = r[2] + b[2];\n  \n  	return out;\n};\n\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\nvec3.forEach = (function() {\n    var vec = vec3.create();\n\n    return function(a, stride, offset, count, fn, arg) {\n        var i, l;\n        if(!stride) {\n            stride = 3;\n        }\n\n        if(!offset) {\n            offset = 0;\n        }\n        \n        if(count) {\n            l = Math.min((count * stride) + offset, a.length);\n        } else {\n            l = a.length;\n        }\n\n        for(i = offset; i < l; i += stride) {\n            vec[0] = a[i]; vec[1] = a[i+1]; vec[2] = a[i+2];\n            fn(vec, vec, arg);\n            a[i] = vec[0]; a[i+1] = vec[1]; a[i+2] = vec[2];\n        }\n        \n        return a;\n    };\n})();\n\n/**\n * Get the angle between two 3D vectors\n * @param {vec3} a The first operand\n * @param {vec3} b The second operand\n * @returns {Number} The angle in radians\n */\nvec3.angle = function(a, b) {\n   \n    var tempA = vec3.fromValues(a[0], a[1], a[2]);\n    var tempB = vec3.fromValues(b[0], b[1], b[2]);\n \n    vec3.normalize(tempA, tempA);\n    vec3.normalize(tempB, tempB);\n \n    var cosine = vec3.dot(tempA, tempB);\n\n    if(cosine > 1.0){\n        return 0;\n    } else {\n        return Math.acos(cosine);\n    }     \n};\n\n/**\n * Returns a string representation of a vector\n *\n * @param {vec3} vec vector to represent as a string\n * @returns {String} string representation of the vector\n */\nvec3.str = function (a) {\n    return 'vec3(' + a[0] + ', ' + a[1] + ', ' + a[2] + ')';\n};\n\nif(typeof(exports) !== 'undefined') {\n    exports.vec3 = vec3;\n}\n",r.define=i,n.exports}),e.register("npm:babel-runtime@5.4.3/helpers/to-array",["npm:babel-runtime@5.4.3/core-js/array/from"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:babel-runtime@5.4.3/core-js/array/from")["default"];return t["default"]=function(e){return Array.isArray(e)?e:o(e)},t.__esModule=!0,r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/modules/$.assign",["npm:core-js@0.9.10/library/modules/$","npm:core-js@0.9.10/library/modules/$.enum-keys"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:core-js@0.9.10/library/modules/$"),a=require("npm:core-js@0.9.10/library/modules/$.enum-keys");return n.exports=Object.assign||function(e,t){for(var n=Object(o.assertDefined(e)),r=arguments.length,i=1;r>i;)for(var s,u=o.ES5Object(arguments[i++]),c=a(u),l=c.length,f=0;l>f;)n[s=c[f++]]=u[s];return n},r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/modules/es6.math",["npm:core-js@0.9.10/library/modules/$.def"],!0,function(require,t,n){function r(e){return e+1/y-1/y}function i(e){return 0==(e=+e)||e!=e?e:0>e?-1:1}function o(e){return isFinite(e=+e)&&0!=e?0>e?-o(-e):h(e+b(e*e+1)):e}function a(e){return 0==(e=+e)?e:e>-1e-6&&1e-6>e?e+e*e/2:p(e)-1}var s=e.global,u=s.define;s.define=void 0;var c=1/0,l=require("npm:core-js@0.9.10/library/modules/$.def"),f=Math.E,m=Math.pow,d=Math.abs,p=Math.exp,h=Math.log,b=Math.sqrt,v=Math.ceil,g=Math.floor,y=m(2,-52),x=m(2,-23),w=m(2,127)*(2-x),j=m(2,-126);return l(l.S,"Math",{acosh:function(e){return(e=+e)<1?NaN:isFinite(e)?h(e/f+b(e+1)*b(e-1)/f)+1:e},asinh:o,atanh:function(e){return 0==(e=+e)?e:h((1+e)/(1-e))/2},cbrt:function(e){return i(e=+e)*m(d(e),1/3)},clz32:function(e){return(e>>>=0)?31-g(h(e+.5)*Math.LOG2E):32},cosh:function(e){return(p(e=+e)+p(-e))/2},expm1:a,fround:function(e){var t,n,o=d(e),a=i(e);return j>o?a*r(o/j/x)*j*x:(t=(1+x/y)*o,n=t-(t-o),n>w||n!=n?a*c:a*n)},hypot:function(e,t){for(var n,r=0,i=arguments.length,o=i,a=Array(i),s=0;i--;){if(n=a[i]=d(arguments[i]),n==c)return c;n>s&&(s=n)}for(s=s||1;o--;)r+=m(a[o]/s,2);return s*b(r)},imul:function(e,t){var n=65535,r=+e,i=+t,o=n&r,a=n&i;return 0|o*a+((n&r>>>16)*a+o*(n&i>>>16)<<16>>>0)},log1p:function(e){return(e=+e)>-1e-8&&1e-8>e?e-e*e/2:h(1+e)},log10:function(e){return h(e)/Math.LN10},log2:function(e){return h(e)/Math.LN2},sign:i,sinh:function(e){return d(e=+e)<1?(a(e)-a(-e))/2:(p(e-1)-p(-e-1))*(f/2)},tanh:function(e){var t=a(e=+e),n=a(-e);return t==c?1:n==c?-1:(t-n)/(p(e)+p(-e))},trunc:function(e){return(e>0?g:v)(e)}}),s.define=u,n.exports}),e.register("github:maxdavidson/jsTGALoader@master/tga.js!github:systemjs/plugin-text@0.0.2",[],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=" /**\n * @fileoverview jsTGALoader - Javascript loader for TGA file\n * @author Vincent Thibault\n * @version 1.2.1\n * @blog http://blog.robrowser.com/javascript-tga-loader.html\n */\n\n/* Copyright (c) 2013, Vincent Thibault. All rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification,\nare permitted provided that the following conditions are met:\n\n  * Redistributions of source code must retain the above copyright notice, this\n    list of conditions and the following disclaimer.\n  * Redistributions in binary form must reproduce the above copyright notice,\n    this list of conditions and the following disclaimer in the documentation \n    and/or other materials provided with the distribution.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\nANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\nWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE \nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR\nANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\nLOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\nANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\nSOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. */\n\n(function(_global)\n{\n	'use strict';\n\n\n	/**\n	 * TGA Namespace\n	 * @constructor\n	 */\n	function Targa()\n	{\n	}\n\n\n	/**\n	 * @var {object} TGA type constants\n	 */\n	Targa.Type = {\n		NO_DATA:      0,\n		INDEXED:      1,\n		RGB:          2,\n		GREY:         3,\n		RLE_INDEXED:  9,\n		RLE_RGB:     10,\n		RLE_GREY:    11\n	};\n\n\n	/**\n	 * @var {object} TGA origin constants\n	 */\n	Targa.Origin = {\n		BOTTOM_LEFT:  0x00,\n		BOTTOM_RIGHT: 0x01,\n		TOP_LEFT:     0x02,\n		TOP_RIGHT:    0x03,\n		SHIFT:        0x04,\n		MASK:         0x30\n	};\n\n\n	/**\n	 * Check the header of TGA file to detect errors\n	 *\n	 * @param {object} tga header structure\n	 * @throws Error\n	 */\n	function checkHeader( header )\n	{\n		// What the need of a file without data ?\n		if (header.imageType === Targa.Type.NO_DATA) {\n			throw new Error('Targa::checkHeader() - No data');\n		}\n\n		// Indexed type\n		if (header.hasColorMap) {\n			if (header.colorMapLength > 256 || header.colorMapSize !== 24 || header.colorMapType !== 1) {\n				throw new Error('Targa::checkHeader() - Invalid colormap for indexed type');\n			}\n		}\n		else {\n			if (header.colorMapType) {\n				throw new Error('Targa::checkHeader() - Why does the image contain a palette ?');\n			}\n		}\n\n		// Check image size\n		if (header.width <= 0 || header.height <= 0) {\n			throw new Error('Targa::checkHeader() - Invalid image size');\n		}\n\n		// Check pixel size\n		if (header.pixelDepth !== 8  &&\n		    header.pixelDepth !== 16 &&\n		    header.pixelDepth !== 24 &&\n		    header.pixelDepth !== 32) {\n			throw new Error('Targa::checkHeader() - Invalid pixel size \"' + header.pixelDepth + '\"');\n		}\n	}\n\n\n	/**\n	 * Decode RLE compression\n	 *\n	 * @param {Uint8Array} data\n	 * @param {number} offset in data to start loading RLE\n	 * @param {number} pixel count\n	 * @param {number} output buffer size\n	 */\n	function decodeRLE( data, offset, pixelSize, outputSize)\n	{\n		var pos, c, count, i;\n		var pixels, output;\n\n		output = new Uint8Array(outputSize);\n		pixels = new Uint8Array(pixelSize);\n		pos    = 0;\n\n		while (pos < outputSize) {\n			c     = data[offset++];\n			count = (c & 0x7f) + 1;\n\n			// RLE pixels.\n			if (c & 0x80) {\n				// Bind pixel tmp array\n				for (i = 0; i < pixelSize; ++i) {\n					pixels[i] = data[offset++];\n				}\n\n				// Copy pixel array\n				for (i = 0; i < count; ++i) {\n					output.set(pixels, pos);\n					pos += pixelSize;\n				}\n			}\n\n			// Raw pixels.\n			else {\n				count *= pixelSize;\n				for (i = 0; i < count; ++i) {\n					output[pos++] = data[offset++];\n				}\n			}\n		}\n\n		return output;\n	}\n\n\n	/**\n	 * Return a ImageData object from a TGA file (8bits)\n	 *\n	 * @param {Array} imageData - ImageData to bind\n	 * @param {Array} indexes - index to colormap\n	 * @param {Array} colormap\n	 * @param {number} width\n	 * @param {number} y_start - start at y pixel.\n	 * @param {number} x_start - start at x pixel.\n	 * @param {number} y_step  - increment y pixel each time.\n	 * @param {number} y_end   - stop at pixel y.\n	 * @param {number} x_step  - increment x pixel each time.\n	 * @param {number} x_end   - stop at pixel x.\n	 * @returns {Array} imageData\n	 */\n	function getImageData8bits(imageData, indexes, colormap, width, y_start, y_step, y_end, x_start, x_step, x_end)\n	{\n		var color, i, x, y;\n\n		for (i = 0, y = y_start; y !== y_end; y += y_step) {\n			for (x = x_start; x !== x_end; x += x_step, i++) {\n				color = indexes[i];\n				imageData[(x + width * y) * 4 + 3] = 255;\n				imageData[(x + width * y) * 4 + 2] = colormap[(color * 3) + 0];\n				imageData[(x + width * y) * 4 + 1] = colormap[(color * 3) + 1];\n				imageData[(x + width * y) * 4 + 0] = colormap[(color * 3) + 2];\n			}\n		}\n\n		return imageData;\n	}\n\n\n	/**\n	 * Return a ImageData object from a TGA file (16bits)\n	 *\n	 * @param {Array} imageData - ImageData to bind\n	 * @param {Array} pixels data\n	 * @param {Array} colormap - not used\n	 * @param {number} width\n	 * @param {number} y_start - start at y pixel.\n	 * @param {number} x_start - start at x pixel.\n	 * @param {number} y_step  - increment y pixel each time.\n	 * @param {number} y_end   - stop at pixel y.\n	 * @param {number} x_step  - increment x pixel each time.\n	 * @param {number} x_end   - stop at pixel x.\n	 * @returns {Array} imageData\n	 */\n	function getImageData16bits(imageData, pixels, colormap, width, y_start, y_step, y_end, x_start, x_step, x_end)\n	{\n		var color, i, x, y;\n\n		for (i = 0, y = y_start; y !== y_end; y += y_step) {\n			for (x = x_start; x !== x_end; x += x_step, i += 2) {\n				color = pixels[i + 0] | (pixels[i + 1] << 8);\n				imageData[(x + width * y) * 4 + 0] = (color & 0x7C00) >> 7;\n				imageData[(x + width * y) * 4 + 1] = (color & 0x03E0) >> 2;\n				imageData[(x + width * y) * 4 + 2] = (color & 0x001F) >> 3;\n				imageData[(x + width * y) * 4 + 3] = (color & 0x8000) ? 0 : 255;\n			}\n		}\n\n		return imageData;\n	}\n\n\n	/**\n	 * Return a ImageData object from a TGA file (24bits)\n	 *\n	 * @param {Array} imageData - ImageData to bind\n	 * @param {Array} pixels data\n	 * @param {Array} colormap - not used\n	 * @param {number} width\n	 * @param {number} y_start - start at y pixel.\n	 * @param {number} x_start - start at x pixel.\n	 * @param {number} y_step  - increment y pixel each time.\n	 * @param {number} y_end   - stop at pixel y.\n	 * @param {number} x_step  - increment x pixel each time.\n	 * @param {number} x_end   - stop at pixel x.\n	 * @returns {Array} imageData\n	 */\n	function getImageData24bits(imageData, pixels, colormap, width, y_start, y_step, y_end, x_start, x_step, x_end)\n	{\n		var i, x, y;\n\n		for (i = 0, y = y_start; y !== y_end; y += y_step) {\n			for (x = x_start; x !== x_end; x += x_step, i += 3) {\n				imageData[(x + width * y) * 4 + 3] = 255;\n				imageData[(x + width * y) * 4 + 2] = pixels[i + 0];\n				imageData[(x + width * y) * 4 + 1] = pixels[i + 1];\n				imageData[(x + width * y) * 4 + 0] = pixels[i + 2];\n			}\n		}\n\n		return imageData;\n	}\n\n\n	/**\n	 * Return a ImageData object from a TGA file (32bits)\n	 *\n	 * @param {Array} imageData - ImageData to bind\n	 * @param {Array} pixels data\n	 * @param {Array} colormap - not used\n	 * @param {number} width\n	 * @param {number} y_start - start at y pixel.\n	 * @param {number} x_start - start at x pixel.\n	 * @param {number} y_step  - increment y pixel each time.\n	 * @param {number} y_end   - stop at pixel y.\n	 * @param {number} x_step  - increment x pixel each time.\n	 * @param {number} x_end   - stop at pixel x.\n	 * @returns {Array} imageData\n	 */\n	function getImageData32bits(imageData, pixels, colormap, width, y_start, y_step, y_end, x_start, x_step, x_end)\n	{\n		var i, x, y;\n\n		for (i = 0, y = y_start; y !== y_end; y += y_step) {\n			for (x = x_start; x !== x_end; x += x_step, i += 4) {\n				imageData[(x + width * y) * 4 + 2] = pixels[i + 0];\n				imageData[(x + width * y) * 4 + 1] = pixels[i + 1];\n				imageData[(x + width * y) * 4 + 0] = pixels[i + 2];\n				imageData[(x + width * y) * 4 + 3] = pixels[i + 3];\n			}\n		}\n\n		return imageData;\n	}\n\n\n	/**\n	 * Return a ImageData object from a TGA file (8bits grey)\n	 *\n	 * @param {Array} imageData - ImageData to bind\n	 * @param {Array} pixels data\n	 * @param {Array} colormap - not used\n	 * @param {number} width\n	 * @param {number} y_start - start at y pixel.\n	 * @param {number} x_start - start at x pixel.\n	 * @param {number} y_step  - increment y pixel each time.\n	 * @param {number} y_end   - stop at pixel y.\n	 * @param {number} x_step  - increment x pixel each time.\n	 * @param {number} x_end   - stop at pixel x.\n	 * @returns {Array} imageData\n	 */\n	function getImageDataGrey8bits(imageData, pixels, colormap, width, y_start, y_step, y_end, x_start, x_step, x_end)\n	{\n		var color, i, x, y;\n\n		for (i = 0, y = y_start; y !== y_end; y += y_step) {\n			for (x = x_start; x !== x_end; x += x_step, i++) {\n				color = pixels[i];\n				imageData[(x + width * y) * 4 + 0] = color;\n				imageData[(x + width * y) * 4 + 1] = color;\n				imageData[(x + width * y) * 4 + 2] = color;\n				imageData[(x + width * y) * 4 + 3] = 255;\n			}\n		}\n\n		return imageData;\n	}\n\n\n	/**\n	 * Return a ImageData object from a TGA file (16bits grey)\n	 *\n	 * @param {Array} imageData - ImageData to bind\n	 * @param {Array} pixels data\n	 * @param {Array} colormap - not used\n	 * @param {number} width\n	 * @param {number} y_start - start at y pixel.\n	 * @param {number} x_start - start at x pixel.\n	 * @param {number} y_step  - increment y pixel each time.\n	 * @param {number} y_end   - stop at pixel y.\n	 * @param {number} x_step  - increment x pixel each time.\n	 * @param {number} x_end   - stop at pixel x.\n	 * @returns {Array} imageData\n	 */\n	function getImageDataGrey16bits(imageData, pixels, colormap, width, y_start, y_step, y_end, x_start, x_step, x_end)\n	{\n		var i, x, y;\n\n		for (i = 0, y = y_start; y !== y_end; y += y_step) {\n			for (x = x_start; x !== x_end; x += x_step, i += 2) {\n				imageData[(x + width * y) * 4 + 0] = pixels[i + 0];\n				imageData[(x + width * y) * 4 + 1] = pixels[i + 0];\n				imageData[(x + width * y) * 4 + 2] = pixels[i + 0];\n				imageData[(x + width * y) * 4 + 3] = pixels[i + 1];\n			}\n		}\n\n		return imageData;\n	}\n\n\n	/**\n	 * Open a targa file using XHR, be aware with Cross Domain files...\n	 *\n	 * @param {string} path - Path of the filename to load\n	 * @param {function} callback - callback to trigger when the file is loaded\n	 */\n	Targa.prototype.open = function targaOpen(path, callback)\n	{\n		var req, tga = this;\n		req = new XMLHttpRequest();\n		req.open('GET', path, true);\n		req.responseType = 'arraybuffer';\n		req.onload = function() {\n			if (this.status === 200) {\n				tga.load(new Uint8Array(req.response));\n				if (callback) {\n					callback.call(tga);\n				}\n			}\n		};\n		req.send(null);\n	};\n\n\n	/**\n	 * Load and parse a TGA file\n	 *\n	 * @param {Uint8Array} data - TGA file buffer array\n	 */\n	Targa.prototype.load = function targaLoad( data )\n	{\n		var offset = 0;\n\n		// Not enough data to contain header ?\n		if (data.length < 0x12) {\n			throw new Error('Targa::load() - Not enough data to contain header');\n		}\n\n		// Read TgaHeader\n		this.header = {\n			/* 0x00  BYTE */  idLength:       data[offset++],\n			/* 0x01  BYTE */  colorMapType:   data[offset++],\n			/* 0x02  BYTE */  imageType:      data[offset++],\n			/* 0x03  WORD */  colorMapIndex:  data[offset++] | data[offset++] << 8,\n			/* 0x05  WORD */  colorMapLength: data[offset++] | data[offset++] << 8,\n			/* 0x07  BYTE */  colorMapDepth:  data[offset++],\n			/* 0x08  WORD */  offsetX:        data[offset++] | data[offset++] << 8,\n			/* 0x0a  WORD */  offsetY:        data[offset++] | data[offset++] << 8,\n			/* 0x0c  WORD */  width:          data[offset++] | data[offset++] << 8,\n			/* 0x0e  WORD */  height:         data[offset++] | data[offset++] << 8,\n			/* 0x10  BYTE */  pixelDepth:     data[offset++],\n			/* 0x11  BYTE */  flags:          data[offset++]\n		};\n\n		// Set shortcut\n		this.header.hasEncoding = (this.header.imageType === Targa.Type.RLE_INDEXED || this.header.imageType === Targa.Type.RLE_RGB   || this.header.imageType === Targa.Type.RLE_GREY);\n		this.header.hasColorMap = (this.header.imageType === Targa.Type.RLE_INDEXED || this.header.imageType === Targa.Type.INDEXED);\n		this.header.isGreyColor = (this.header.imageType === Targa.Type.RLE_GREY    || this.header.imageType === Targa.Type.GREY);\n\n		// Check if a valid TGA file (or if we can load it)\n		checkHeader(this.header);\n\n		// Move to data\n		offset += this.header.idLength;\n		if (offset >= data.length) {\n			throw new Error('Targa::load() - No data');\n		}\n\n		// Read palette\n		if (this.header.hasColorMap) {\n			var colorMapSize  = this.header.colorMapLength * (this.header.colorMapDepth >> 3);\n			this.palette      = data.subarray( offset, offset + colorMapSize);\n			offset           += colorMapSize;\n		}\n\n		var pixelSize  = this.header.pixelDepth >> 3;\n		var imageSize  = this.header.width * this.header.height;\n		var pixelTotal = imageSize * pixelSize;\n\n		// RLE encoded\n		if (this.header.hasEncoding) {\n			this.imageData = decodeRLE(data, offset, pixelSize, pixelTotal);\n		}\n\n		// RAW pixels\n		else {\n			this.imageData = data.subarray( offset, offset + (this.header.hasColorMap ? imageSize : pixelTotal) );\n		}\n	};\n\n\n	/**\n	 * Return a ImageData object from a TGA file\n	 *\n	 * @param {object} imageData - Optional ImageData to work with\n	 * @returns {object} imageData\n	 */\n	Targa.prototype.getImageData = function targaGetImageData( imageData )\n	{\n		var width  = this.header.width;\n		var height = this.header.height;\n		var origin = (this.header.flags & Targa.Origin.MASK) >> Targa.Origin.SHIFT;\n		var x_start, x_step, x_end, y_start, y_step, y_end;\n		var getImageData;\n\n			// Create an imageData\n		if (!imageData) {\n			if (typeof(window) === 'object') {\n				imageData = document.createElement('canvas').getContext('2d').createImageData(width, height);\n			}\n			// In Thread context ?\n			else {\n				imageData = {\n					width:  width,\n					height: height,\n					data: new Uint8ClampedArray(width * height * 4)\n				};\n			}\n		}\n\n		if (origin === Targa.Origin.TOP_LEFT || origin === Targa.Origin.TOP_RIGHT) {\n			y_start = 0;\n			y_step  = 1;\n			y_end   = height;\n		}\n		else {\n			y_start = height - 1;\n			y_step  = -1;\n			y_end   = -1;\n		}\n\n		if (origin === Targa.Origin.TOP_LEFT || origin === Targa.Origin.BOTTOM_LEFT) {\n			x_start = 0;\n			x_step  = 1;\n			x_end   = width;\n		}\n		else {\n			x_start = width - 1;\n			x_step  = -1;\n			x_end   = -1;\n		}\n\n		// TODO: use this.header.offsetX and this.header.offsetY ?\n\n		switch (this.header.pixelDepth) {\n			case 8:\n				getImageData = this.header.isGreyColor ? getImageDataGrey8bits : getImageData8bits;\n				break;\n\n			case 16:\n				getImageData = this.header.isGreyColor ? getImageDataGrey16bits : getImageData16bits;\n				break;\n\n			case 24:\n				getImageData = getImageData24bits;\n				break;\n\n			case 32:\n				getImageData = getImageData32bits;\n				break;\n		}\n\n		getImageData(imageData.data, this.imageData, this.palette, width, y_start, y_step, y_end, x_start, x_step, x_end);\n		return imageData;\n	};\n\n\n	/**\n	 * Return a canvas with the TGA render on it\n	 *\n	 * @returns {object} CanvasElement\n	 */\n	Targa.prototype.getCanvas = function targaGetCanvas()\n	{\n		var canvas, ctx, imageData;\n\n		canvas    = document.createElement('canvas');\n		ctx       = canvas.getContext('2d');\n		imageData = ctx.createImageData(this.header.width, this.header.height);\n\n		canvas.width  = this.header.width;\n		canvas.height = this.header.height;\n\n		ctx.putImageData(this.getImageData(imageData), 0, 0);\n\n		return canvas;\n	};\n\n\n	/**\n	 * Return a dataURI of the TGA file\n	 *\n	 * @param {string} type - Optional image content-type to output (default: image/png)\n	 * @returns {string} url\n	 */\n	Targa.prototype.getDataURL = function targaGetDatURL( type )\n	{\n		return this.getCanvas().toDataURL(type || 'image/png');\n	};\n\n\n	// Find Context\n	var shim = {};\n	if (typeof(exports) === 'undefined') {\n		if (typeof(define) === 'function' && typeof(define.amd) === 'object' && define.amd) {\n			define(function(){\n				return Targa;\n			});\n		} else {\n			// Browser\n			shim.exports = typeof(window) !== 'undefined' ? window : _global;\n		}\n	} \n	else {\n		// Commonjs\n		shim.exports = exports;\n	}\n\n\n	// Export\n	if (shim.exports) {\n		shim.exports.TGA = Targa;\n	}\n\n})(this);\n",
r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/fn/object/freeze",["npm:core-js@0.9.10/library/modules/es6.object.statics-accept-primitives","npm:core-js@0.9.10/library/modules/$"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,require("npm:core-js@0.9.10/library/modules/es6.object.statics-accept-primitives"),n.exports=require("npm:core-js@0.9.10/library/modules/$").core.Object.freeze,r.define=i,n.exports}),e.register("npm:babel-runtime@5.4.3/helpers/object-without-properties",[],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,t["default"]=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},t.__esModule=!0,r.define=i,n.exports}),e.register("github:maxdavidson/tribus@master/material/shaders/phong.vert.dot!github:maxdavidson/tribus@master/plugins/dot",[],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=function(e){var t="uniform mat4 mvpMatrix;\nuniform mat4 modelMatrix;\nuniform mat3 normalMatrix;\n\nattribute vec3 vertex;\nattribute vec3 normal;\n";return("texture"===e.ambient||"texture"===e.diffuse||"texture"===e.specular)&&(t+="\nattribute vec2 texcoord;\n"),t+="\n\nvarying vec3 worldFragPos;\nvarying vec3 worldNormal;\n\n","texture"===e.ambient&&(t+="\nuniform vec4 ambientTexcoordBounds;\nvarying vec2 ambientTexcoord;\n"),t+="\n\n","texture"===e.diffuse&&(t+="\nuniform vec4 diffuseTexcoordBounds;\nvarying vec2 diffuseTexcoord;\n"),t+="\n\n","texture"===e.specular&&(t+="\nuniform vec4 specularTexcoordBounds;\nvarying vec2 specularTexcoord;\n"),t+="\n\n\nvoid main() {\n\n    worldFragPos = vec3(modelMatrix * vec4(vertex, 1.0));\n    worldNormal = normalize(normalMatrix * normal);\n\n    ","texture"===e.ambient&&(t+="\n    ambientTexcoord = ambientTexcoordBounds.xy + texcoord * ambientTexcoordBounds.zw;\n    "),t+="\n\n    ","texture"===e.diffuse&&(t+="\n    diffuseTexcoord = diffuseTexcoordBounds.xy + texcoord * diffuseTexcoordBounds.zw;\n    "),t+="\n\n    ","texture"===e.specular&&(t+="\n    specularTexcoord = specularTexcoordBounds.xy + texcoord * specularTexcoordBounds.zw;\n    "),t+="\n\n    gl_Position = mvpMatrix * vec4(vertex, 1.0);\n}\n"},r.define=i,n.exports}),e.register("github:maxdavidson/tribus@master/material/shaders/phong.frag.dot!github:maxdavidson/tribus@master/plugins/dot",[],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=function(e){var t="\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nprecision mediump float;\n\nstruct DirectionalLight {\n    vec3  direction;\n    vec3  diffuse, specular;\n};\n\nstruct PointLight {\n    vec3  position;\n    vec3  diffuse, specular;\n    float constant, linear, quadratic;\n};\n\nstruct SpotLight {\n    vec3  position, direction;\n    vec3  diffuse, specular;\n    float cutoff, outerCutoff;\n    float constant, linear, quadratic;\n};\n\nstruct Material {\n    lowp float shininess;\n    ";return"static"===e.ambient&&(t+=" vec3 ambient; "),t+="\n    ","static"===e.diffuse&&(t+=" vec3 diffuse; "),t+="\n    ","static"===e.specular&&(t+=" vec3 specular; "),t+="\n};\n\n\nvarying vec3 worldFragPos;\nvarying vec3 worldNormal;\n\nuniform vec3 viewPos;\n\n","texture"===e.ambient&&(t+="\nuniform sampler2D ambientSampler;\nvarying vec2 ambientTexcoord;\n"),t+="\n\n","texture"===e.diffuse&&(t+="\nuniform sampler2D diffuseSampler;\nvarying vec2 diffuseTexcoord;\n"),t+="\n\n","texture"===e.specular&&(t+="\nuniform sampler2D specularSampler;\nvarying vec2 specularTexcoord;\n"),t+="\n\n",e.MAX_DIRECTIONAL_LIGHTS&&(t+="\n    uniform DirectionalLight directionalLights["+e.MAX_DIRECTIONAL_LIGHTS+"];\n"),t+="\n\n",e.MAX_POINT_LIGHTS&&(t+="\n    uniform PointLight pointLights["+e.MAX_POINT_LIGHTS+"];\n"),t+="\n\n",e.MAX_SPOT_LIGHTS&&(t+="\n    uniform SpotLight spotLights["+e.MAX_SPOT_LIGHTS+"];\n"),t+="\n\nuniform Material material;\nuniform vec3 environmentAmbient;\n\nvoid main() {\n\n    vec3 worldNormal2 = normalize(worldNormal);\n\n    // Direction from fragment to camera\n    vec3 viewDir = normalize(viewPos - worldFragPos);\n    vec3 color = environmentAmbient +  ",t+="texture"===e.ambient?" texture2D(ambientSampler, ambientTexcoord).stp ":" material.ambient ",t+=" ;\n\n    ",e.MAX_DIRECTIONAL_LIGHTS&&(t+="\n        for (int i = 0; i < "+e.MAX_DIRECTIONAL_LIGHTS+"; ++i) {\n            DirectionalLight light = directionalLights[i];\n            \n    vec3 lightDir = -light.direction;\n\n    \n\n    vec3 diffuse = light.diffuse *  ",t+="texture"===e.diffuse?" texture2D(diffuseSampler, diffuseTexcoord).stp ":" material.diffuse ",t+="  * max(dot(worldNormal2, lightDir), 0.0);\n\n    //vec3 halfDir = normalize(lightDir + viewDir);\n    //vec3 specular = light.specular *  ",t+="texture"===e.specular?" texture2D(specularSampler, specularTexcoord).stp ":" material.specular ",t+="  * pow(max(dot(halfDir, worldNormal2), 0.0), material.shininess);\n\n    vec3 reflectDir = reflect(-lightDir, worldNormal2);\n    vec3 specular = light.specular *  ",t+="texture"===e.specular?" texture2D(specularSampler, specularTexcoord).stp ":" material.specular ",t+="  * pow(max(dot(viewDir, reflectDir), 0.0), material.shininess);\n\n    vec3 shade = diffuse + specular;\n\n\n            color += shade;\n        }\n    "),t+="\n\n    ",e.MAX_POINT_LIGHTS&&(t+="\n        for (int i = 0; i < "+e.MAX_POINT_LIGHTS+"; ++i) {\n            PointLight light = pointLights[i];\n            \n    vec3 direction = light.position - worldFragPos;\n    float distance = length(direction);\n\n    vec3 lightDir = direction / distance;\n\n    \n\n    vec3 diffuse = light.diffuse *  ",t+="texture"===e.diffuse?" texture2D(diffuseSampler, diffuseTexcoord).stp ":" material.diffuse ",t+="  * max(dot(worldNormal2, lightDir), 0.0);\n\n    //vec3 halfDir = normalize(lightDir + viewDir);\n    //vec3 specular = light.specular *  ",t+="texture"===e.specular?" texture2D(specularSampler, specularTexcoord).stp ":" material.specular ",t+="  * pow(max(dot(halfDir, worldNormal2), 0.0), material.shininess);\n\n    vec3 reflectDir = reflect(-lightDir, worldNormal2);\n    vec3 specular = light.specular *  ",t+="texture"===e.specular?" texture2D(specularSampler, specularTexcoord).stp ":" material.specular ",t+="  * pow(max(dot(viewDir, reflectDir), 0.0), material.shininess);\n\n    vec3 shade = diffuse + specular;\n\n\n    float attenuation = 1.0 / (light.constant + distance * (light.linear + distance * light.quadratic));\n\n    shade += attenuation;\n\n            color += shade;\n        }\n    "),t+="\n\n    ",e.MAX_SPOT_LIGHTS&&(t+="\n        for (int i = 0; i < "+e.MAX_SPOT_LIGHTS+"; ++i) {\n            SpotLight light = spotLights[i];\n            \n    \n    vec3 direction = light.position - worldFragPos;\n    float distance = length(direction);\n\n    vec3 lightDir = direction / distance;\n\n    \n\n    vec3 diffuse = light.diffuse *  ",t+="texture"===e.diffuse?" texture2D(diffuseSampler, diffuseTexcoord).stp ":" material.diffuse ",t+="  * max(dot(worldNormal2, lightDir), 0.0);\n\n    //vec3 halfDir = normalize(lightDir + viewDir);\n    //vec3 specular = light.specular *  ",t+="texture"===e.specular?" texture2D(specularSampler, specularTexcoord).stp ":" material.specular ",t+="  * pow(max(dot(halfDir, worldNormal2), 0.0), material.shininess);\n\n    vec3 reflectDir = reflect(-lightDir, worldNormal2);\n    vec3 specular = light.specular *  ",t+="texture"===e.specular?" texture2D(specularSampler, specularTexcoord).stp ":" material.specular ",t+="  * pow(max(dot(viewDir, reflectDir), 0.0), material.shininess);\n\n    vec3 shade = diffuse + specular;\n\n\n    float attenuation = 1.0 / (light.constant + distance * (light.linear + distance * light.quadratic));\n\n    shade += attenuation;\n\n\n    float theta = dot(lightDir, light.direction);\n    float epsilon = light.cutoff - light.outerCutoff;\n    float intensity = clamp((theta - light.outerCutoff) / epsilon, 0.0, 1.0);\n\n    shade *= intensity;\n\n            color += shade;\n        }\n    "),t+="\n\n    gl_FragColor = vec4(color, 1.0);\n}\n"},r.define=i,n.exports}),e.register("npm:babel-runtime@5.4.3/helpers/define-property",["npm:babel-runtime@5.4.3/core-js/object/define-property"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:babel-runtime@5.4.3/core-js/object/define-property")["default"];return t["default"]=function(e,t,n){return o(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0})},t.__esModule=!0,r.define=i,n.exports}),function(){function t(){}t.amd={},function(){var n,r,i,o,a,s,u,c,l,f,m,d,p,h,b,v,g,y,x,w,j,_,E,T,S,M,A,k,O,L,R,I,D,P,z,$,F,C,N,U,B,G,q,W,H,V,X,Y,K,Z,Q,J,ee,te,ne,re,ie,oe,ae,se,ue,ce,le,fe,me,de,pe,he,be,ve,ge,ye={}.hasOwnProperty,xe=function(e,t){function n(){this.constructor=e}for(var r in t)ye.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},we=[].slice,je=function(e,t){return function(){return e.apply(t,arguments)}};n={toString:function(){return"Bacon"}},n.version="0.7.58",d=("undefined"!=typeof global&&null!==global?global:this).Error,ie=function(){},K=function(e,t){return t},q=function(e,t){return e},I=function(e){return e.slice(0)},T=function(e,t){if(!t)throw new d(e)},L=function(e){if(e instanceof v&&!(e instanceof g))throw new d("Observable is not a Property : "+e)},M=function(e){if(!(e instanceof m))throw new d("not an EventStream : "+e)},O=function(e){if(!(e instanceof v))throw new d("not an Observable : "+e)},A=function(e){return T("not a function : "+e,_.isFunction(e))},V=function(e){return e instanceof Array},Y=function(e){return e instanceof v},S=function(e){if(!V(e))throw new d("not an array : "+e)},k=function(e){return T("no arguments supported",0===e.length)},R=function(e){if("string"!=typeof e)throw new d("not a string : "+e)},_={indexOf:Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){var n,r,i,o;for(n=r=0,i=e.length;i>r;n=++r)if(o=e[n],t===o)return n;return-1},indexWhere:function(e,t){var n,r,i,o;for(n=r=0,i=e.length;i>r;n=++r)if(o=e[n],t(o))return n;return-1},head:function(e){return e[0]},always:function(e){return function(){return e}},negate:function(e){return function(t){return!e(t)}},empty:function(e){return 0===e.length},tail:function(e){return e.slice(1,e.length)},filter:function(e,t){var n,r,i,o;for(n=[],r=0,i=t.length;i>r;r++)o=t[r],e(o)&&n.push(o);return n},map:function(e,t){var n,r,i,o;for(i=[],n=0,r=t.length;r>n;n++)o=t[n],i.push(e(o));return i},each:function(e,t){var n,r;for(n in e)r=e[n],t(n,r);return void 0},toArray:function(e){return V(e)?e:[e]},contains:function(e,t){return-1!==_.indexOf(e,t)},id:function(e){return e},last:function(e){return e[e.length-1]},all:function(e,t){var n,r,i;for(null==t&&(t=_.id),n=0,r=e.length;r>n;n++)if(i=e[n],!t(i))return!1;return!0},any:function(e,t){var n,r,i;for(null==t&&(t=_.id),n=0,r=e.length;r>n;n++)if(i=e[n],t(i))return!0;return!1},without:function(e,t){return _.filter(function(t){return t!==e},t)},remove:function(e,t){var n;return n=_.indexOf(t,e),n>=0?t.splice(n,1):void 0},fold:function(e,t,n){var r,i,o;for(r=0,i=e.length;i>r;r++)o=e[r],t=n(t,o);return t},flatMap:function(e,t){return _.fold(t,[],function(t,n){return t.concat(e(n))})},cached:function(e){var t;return t=b,function(){return t===b&&(t=e(),e=void 0),t}},isFunction:function(e){return"function"==typeof e},toString:function(e){var t,n,r,i;try{return ae++,null==e?"undefined":_.isFunction(e)?"function":V(e)?ae>5?"[..]":"["+_.map(_.toString,e).toString()+"]":null!=(null!=e?e.toString:void 0)&&e.toString!==Object.prototype.toString?e.toString():"object"==typeof e?ae>5?"{..}":(n=function(){var n;n=[];for(r in e)ye.call(e,r)&&(i=function(){try{return e[r]}catch(n){return t=n}}(),n.push(_.toString(r)+":"+_.toString(i)));return n}(),"{"+n+"}"):e}finally{ae--}}},ae=0,n._=_,j=n.UpdateBarrier=function(){var e,t,r,i,o,a,s,u,c,l,f,m,d,p;return l=void 0,f=[],m={},t=[],r=0,e=function(e){return l?t.push(e):e()},d=function(e,t){var n;return l?(n=m[e.id],null==n?(n=m[e.id]=[t],f.push(e)):n.push(t)):t()},o=function(){for(;f.length>0;)s(0);return void 0},s=function(e){var t,n,r,i,o,s;for(i=f[e],o=i.id,s=m[o],f.splice(e,1),delete m[o],a(i),n=0,r=s.length;r>n;n++)(t=s[n])();return void 0},a=function(e){var t,n,r,i,o;for(n=e.internalDeps(),i=0,o=n.length;o>i;i++)t=n[i],a(t),m[t.id]&&(r=_.indexOf(f,t),s(r));return void 0},c=function(e,n,i,a){var s,u;if(l)return i.apply(n,a);l=e;try{u=i.apply(n,a),o()}finally{for(l=void 0;r<t.length;)s=t[r],r++,s();r=0,t=[]}return u},i=function(){return l?l.id:void 0},p=function(t,r){var i,o,a,s;return s=!1,o=!1,i=function(){return o=!0},a=function(){return s=!0,i()},i=t.dispatcher.subscribe(function(t){return e(function(){var e;return s||(e=r(t),e!==n.noMore)?void 0:a()})}),o&&i(),a},u=function(){return f.length>0},{whenDoneWith:d,hasWaiters:u,inTransaction:c,currentEventId:i,wrappedSubscribe:p,afterTransaction:e}}(),w=function(){function e(e,t,n){this.obs=e,this.sync=t,this.lazy=null!=n?n:!1,this.queue=[]}return e.prototype.subscribe=function(e){return this.obs.dispatcher.subscribe(e)},e.prototype.toString=function(){return this.obs.toString()},e.prototype.markEnded=function(){return this.ended=!0},e.prototype.consume=function(){return this.lazy?{value:_.always(this.queue[0])}:this.queue[0]},e.prototype.push=function(e){return this.queue=[e]},e.prototype.mayHave=function(){return!0},e.prototype.hasAtLeast=function(){return this.queue.length},e.prototype.flatten=!0,e}(),a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return xe(t,e),t.prototype.consume=function(){return this.queue.shift()},t.prototype.push=function(e){return this.queue.push(e)},t.prototype.mayHave=function(e){return!this.ended||this.queue.length>=e},t.prototype.hasAtLeast=function(e){return this.queue.length>=e},t.prototype.flatten=!1,t}(w),r=function(e){function t(e){t.__super__.constructor.call(this,e,!0)}return xe(t,e),t.prototype.consume=function(){var e;return e=this.queue,this.queue=[],{value:function(){return e}}},t.prototype.push=function(e){return this.queue.push(e.value())},t.prototype.hasAtLeast=function(){return!0},t}(w),w.isTrigger=function(e){return e instanceof w?e.sync:e instanceof m},w.fromObservable=function(e){return e instanceof w?e:e instanceof g?new w(e,!1):new a(e,!0)},s=function(){function e(e,t,n){this.context=e,this.method=t,this.args=n,this.cached=void 0}return e.prototype.deps=function(){return this.cached||(this.cached=U([this.context].concat(this.args)))},e.prototype.apply=function(e){return e.desc=this,e},e.prototype.toString=function(){return _.toString(this.context)+"."+_.toString(this.method)+"("+_.map(_.toString,this.args)+")"},e}(),$=function(){var e,t,n;return t=arguments[0],n=arguments[1],e=3<=arguments.length?we.call(arguments,2):[],(t||n)instanceof s?t||n:new s(t,n,e)},ve=function(){var e,t,n;return e=2<=arguments.length?we.call(arguments,0,t=arguments.length-1):(t=0,[]),n=arguments[t++],$.apply(null,e).apply(n)},U=function(e){return V(e)?_.flatMap(U,e):Y(e)?[e]:e instanceof w?[e.obs]:[]},ge=function(e){return function(){var t,n,r,i;return r=arguments[0],t=2<=arguments.length?we.call(arguments,1):[],"object"==typeof r&&t.length&&(n=r,i=t[0],r=function(){return n[i].apply(n,arguments)},t=t.slice(1)),e.apply(null,[r].concat(we.call(t)))}},J=function(e){return e=Array.prototype.slice.call(e),ee.apply(null,e)},oe=function(e,t){return function(){var n;return n=1<=arguments.length?we.call(arguments,0):[],e.apply(null,t.concat(n))}},he=function(e){return function(t){return function(n){var r;return null==n?void 0:(r=n[t],_.isFunction(r)?r.apply(n,e):r)}}},me=function(e,t){var n,r;return r=e.slice(1).split("."),n=_.map(he(t),r),function(t){var r,i;for(r=0,i=n.length;i>r;r++)e=n[r],t=e(t);return t}},X=function(e){return"string"==typeof e&&e.length>1&&"."===e.charAt(0)},ee=ge(function(){var e,t;return t=arguments[0],e=2<=arguments.length?we.call(arguments,1):[],_.isFunction(t)?e.length?oe(t,e):t:X(t)?me(t,e):_.always(t)}),Q=function(e,t){return ee.apply(null,[e].concat(we.call(t)))},z=function(e,t,n,r){var i;return t instanceof g?(i=t.sampledBy(e,function(e,t){return[e,t]}),r.call(i,function(e){var t,n;return t=e[0],n=e[1],t}).map(function(e){var t,n;return t=e[0],n=e[1]})):(t=Q(t,n),r.call(e,t))},le=function(e){var t;if(_.isFunction(e))return e;if(X(e))return t=de(e),function(e,n){return e[t](n)};throw new d("not a function or a field key: "+e)},de=function(e){return e.slice(1)},x=function(){function e(e){this.value=e}return e.prototype.getOrElse=function(){return this.value},e.prototype.get=function(){return this.value},e.prototype.filter=function(t){return t(this.value)?new e(this.value):b},e.prototype.map=function(t){return new e(t(this.value))},e.prototype.forEach=function(e){return e(this.value)},e.prototype.isDefined=!0,e.prototype.toArray=function(){return[this.value]},e.prototype.inspect=function(){return"Some("+this.value+")"},e.prototype.toString=function(){return this.inspect()},e}(),b={getOrElse:function(e){return e},filter:function(){return b},map:function(){return b},forEach:function(){},isDefined:!1,toArray:function(){return[]},inspect:function(){return"None"},toString:function(){return this.inspect()}},pe=function(e){return e instanceof x||e===b?e:new x(e)},n.noMore=["<no-more>"],n.more=["<more>"],C=0,f=function(){function e(){this.id=++C}return e.prototype.isEvent=function(){return!0},e.prototype.isEnd=function(){return!1},e.prototype.isInitial=function(){return!1},e.prototype.isNext=function(){return!1},e.prototype.isError=function(){return!1},e.prototype.hasValue=function(){return!1},e.prototype.filter=function(){return!0},e.prototype.inspect=function(){return this.toString()},e.prototype.log=function(){return this.toString()},e}(),h=function(e){function t(e,n){t.__super__.constructor.call(this),!n&&_.isFunction(e)||e instanceof t?(this.valueF=e,this.valueInternal=void 0):(this.valueF=void 0,this.valueInternal=e)}return xe(t,e),t.prototype.isNext=function(){return!0},t.prototype.hasValue=function(){return!0},t.prototype.value=function(){return this.valueF instanceof t?(this.valueInternal=this.valueF.value(),this.valueF=void 0):this.valueF&&(this.valueInternal=this.valueF(),this.valueF=void 0),this.valueInternal},t.prototype.fmap=function(e){var t,n;return this.valueInternal?(n=this.valueInternal,this.apply(function(){return e(n)})):(t=this,this.apply(function(){return e(t.value())}))},t.prototype.apply=function(e){return new t(e)},t.prototype.filter=function(e){return e(this.value())},t.prototype.toString=function(){return _.toString(this.value())},t.prototype.log=function(){return this.value()},t}(f),p=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return xe(t,e),t.prototype.isInitial=function(){return!0},t.prototype.isNext=function(){return!1},t.prototype.apply=function(e){return new t(e)},t.prototype.toNext=function(){return new h(this)},t}(h),c=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return xe(t,e),t.prototype.isEnd=function(){return!0},t.prototype.fmap=function(){return this},t.prototype.apply=function(){return this},t.prototype.toString=function(){return"<end>"},t}(f),l=function(e){function t(e){this.error=e}return xe(t,e),t.prototype.isError=function(){return!0},t.prototype.fmap=function(){return this},t.prototype.apply=function(){return this},t.prototype.toString=function(){return"<error> "+_.toString(this.error)},t}(f),n.Event=f,n.Initial=p,n.Next=h,n.End=c,n.Error=l,H=function(e){return new p(e,!0)},re=function(e){return new h(e,!0)},F=function(){return new c},fe=function(e){return e instanceof f?e:re(e)},W=0,ue=function(){},v=function(){function e(e){this.id=++W,ve(e,this),this.initialDesc=this.desc}return e.prototype.subscribe=function(e){return j.wrappedSubscribe(this,e)},e.prototype.subscribeInternal=function(e){return this.dispatcher.subscribe(e)},e.prototype.onValue=function(){var e;return e=J(arguments),this.subscribe(function(t){return t.hasValue()?e(t.value()):void 0})},e.prototype.onValues=function(e){return this.onValue(function(t){return e.apply(null,t)})},e.prototype.onError=function(){var e;return e=J(arguments),this.subscribe(function(t){return t.isError()?e(t.error):void 0})},e.prototype.onEnd=function(){var e;return e=J(arguments),this.subscribe(function(t){return t.isEnd()?e():void 0})},e.prototype.name=function(e){return this._name=e,this},e.prototype.withDescription=function(){return $.apply(null,arguments).apply(this)},e.prototype.toString=function(){return this._name?this._name:this.desc.toString()},e.prototype.internalDeps=function(){return this.initialDesc.deps()},e}(),v.prototype.assign=v.prototype.onValue,v.prototype.forEach=v.prototype.onValue,v.prototype.inspect=v.prototype.toString,n.Observable=v,o=function(){function e(e){var t,n,r;for(null==e&&(e=[]),this.unsubscribe=je(this.unsubscribe,this),this.unsubscribed=!1,this.subscriptions=[],this.starting=[],t=0,n=e.length;n>t;t++)r=e[t],this.add(r)}return e.prototype.add=function(e){var t,n,r;if(!this.unsubscribed)return t=!1,n=ie,this.starting.push(e),r=function(r){return function(){return r.unsubscribed?void 0:(t=!0,r.remove(n),_.remove(e,r.starting))}}(this),n=e(this.unsubscribe,r),this.unsubscribed||t?n():this.subscriptions.push(n),_.remove(e,this.starting),n},e.prototype.remove=function(e){return this.unsubscribed?void 0:void 0!==_.remove(e,this.subscriptions)?e():void 0},e.prototype.unsubscribe=function(){var e,t,n,r;if(!this.unsubscribed){for(this.unsubscribed=!0,n=this.subscriptions,e=0,t=n.length;t>e;e++)(r=n[e])();return this.subscriptions=[],this.starting=[]}},e.prototype.count=function(){return this.unsubscribed?0:this.subscriptions.length+this.starting.length},e.prototype.empty=function(){return 0===this.count()},e}(),n.CompositeUnsubscribe=o,u=function(){function e(e,t){this._subscribe=e,this._handleEvent=t,this.subscribe=je(this.subscribe,this),this.handleEvent=je(this.handleEvent,this),this.subscriptions=[],this.queue=[],this.pushing=!1,this.ended=!1,this.prevError=void 0,this.unsubSrc=void 0}return e.prototype.hasSubscribers=function(){return this.subscriptions.length>0},e.prototype.removeSub=function(e){return this.subscriptions=_.without(e,this.subscriptions)},e.prototype.push=function(e){return e.isEnd()&&(this.ended=!0),j.inTransaction(e,this,this.pushIt,[e])},e.prototype.pushToSubscriptions=function(e){var t,r,i,o,a,s;try{for(s=this.subscriptions,r=0,i=s.length;i>r;r++)a=s[r],o=a.sink(e),(o===n.noMore||e.isEnd())&&this.removeSub(a);return!0}catch(u){throw t=u,this.pushing=!1,this.queue=[],t}},e.prototype.pushIt=function(e){if(this.pushing)return this.queue.push(e),n.more;if(e!==this.prevError){for(e.isError()&&(this.prevError=e),this.pushing=!0,this.pushToSubscriptions(e),this.pushing=!1;this.queue.length;)e=this.queue.shift(),this.push(e);return this.hasSubscribers()?n.more:(this.unsubscribeFromSource(),n.noMore)}},e.prototype.handleEvent=function(e){return this._handleEvent?this._handleEvent(e):this.push(e)},e.prototype.unsubscribeFromSource=function(){return this.unsubSrc&&this.unsubSrc(),this.unsubSrc=void 0},e.prototype.subscribe=function(e){var t;return this.ended?(e(F()),ie):(A(e),t={sink:e},this.subscriptions.push(t),1===this.subscriptions.length&&(this.unsubSrc=this._subscribe(this.handleEvent),A(this.unsubSrc)),function(e){return function(){return e.removeSub(t),e.hasSubscribers()?void 0:e.unsubscribeFromSource()}}(this))},e}(),m=function(e){function t(e,n,r){_.isFunction(e)&&(r=n,n=e,e=[]),t.__super__.constructor.call(this,e),A(n),this.dispatcher=new u(n,r),ue(this)}return xe(t,e),t.prototype.toProperty=function(e){var t,r;return r=0===arguments.length?b:pe(function(){return e}),t=this.dispatcher,new g($(this,"toProperty",e),function(e){var i,o,a,s;return i=!1,s=ie,o=n.more,a=function(){return i?void 0:r.forEach(function(t){return i=!0,o=e(new p(t)),o===n.noMore?(s(),s=ie):void 0})},s=t.subscribe(function(t){return t.hasValue()?i&&t.isInitial()?n.more:(t.isInitial()||a(),i=!0,r=new x(t),e(t)):(t.isEnd()&&(o=a()),o!==n.noMore?e(t):void 0)}),a(),s})},t.prototype.toEventStream=function(){return this},t.prototype.withHandler=function(e){return new t($(this,"withHandler",e),this.dispatcher.subscribe,e)},t}(v),n.EventStream=m,n.never=function(){return new m($(n,"never"),function(e){return e(F()),ie})},n.when=function(){var e,t,r,i,o,a,s,u,c,l,f,d,p,h,b,v,g,y,x,E;if(0===arguments.length)return n.never();for(s=arguments.length,E="when: expecting arguments in the form (Observable+,function)+",T(E,s%2===0),y=[],p=[],t=0,h=[];s>t;){for(h[t]=arguments[t],h[t+1]=arguments[t+1],d=_.toArray(arguments[t]),e=D(arguments[t+1]),f={f:e,ixs:[]},x=!1,o=0,u=d.length;u>o;o++){for(g=d[o],r=_.indexOf(y,g),x||(x=w.isTrigger(g)),0>r&&(y.push(g),r=y.length-1),b=f.ixs,a=0,c=b.length;c>a;a++)i=b[a],i.index===r&&i.count++;f.ixs.push({index:r,count:1})}T("At least one EventStream required",x||!d.length),d.length>0&&p.push(f),t+=2}return y.length?(y=_.map(w.fromObservable,y),l=_.any(y,function(e){return e.flatten})&&P(_.map(function(e){return e.obs},y)),v=new m($.apply(null,[n,"when"].concat(we.call(h))),function(e){var r,i,o,a,s,u,c;return c=[],o=!1,a=function(e){var n,r,i;for(i=e.ixs,n=0,r=i.length;r>n;n++)if(t=i[n],!y[t.index].hasAtLeast(t.count))return!1;return!0},i=function(e){return!e.sync||e.ended},r=function(e){var n,r,i;for(i=e.ixs,n=0,r=i.length;r>n;n++)if(t=i[n],!y[t.index].mayHave(t.count))return!0},s=function(e){return!e.source.flatten},u=function(u){return function(f){var m,d,h;return d=function(){return j.whenDoneWith(v,m)},h=function(){var r,i,o,u,l,f;if(!(c.length>0))return n.more;for(l=n.more,f=c.pop(),i=0,o=p.length;o>i;i++)if(u=p[i],a(u))return r=function(){var e,n,r,i;for(r=u.ixs,i=[],n=0,e=r.length;e>n;n++)t=r[n],i.push(y[t.index].consume());return i}(),l=e(f.e.apply(function(){var e,t;return t=function(){var t,n,i;for(i=[],n=0,t=r.length;t>n;n++)e=r[n],i.push(e.value());return i}(),u.f.apply(u,t)})),c.length&&(c=_.filter(s,c)),l===n.noMore?l:h()},m=function(){var t;return t=h(),o&&(o=!1,(_.all(y,i)||_.all(p,r))&&(t=n.noMore,e(F()))),t===n.noMore&&f(),t},u.subscribe(function(t){var r;return t.isEnd()?(o=!0,u.markEnded(),d()):t.isError()?r=e(t):(u.push(t),u.sync&&(c.push({source:u,e:t}),l||j.hasWaiters()?d():m())),r===n.noMore&&f(),r||n.more})}},new n.CompositeUnsubscribe(function(){var e,t,n;for(n=[],e=0,t=y.length;t>e;e++)g=y[e],n.push(u(g));return n}()).unsubscribe})):n.never()},P=function(e,t){var n;return null==t&&(t=[]),n=function(e){var r;return _.contains(t,e)?!0:(r=e.internalDeps(),r.length?(t.push(e),_.any(r,n)):(t.push(e),!1))},_.any(e,n)},D=function(e){return _.isFunction(e)?e:_.always(e)},n.groupSimultaneous=function(){var e,t,i;return i=1<=arguments.length?we.call(arguments,0):[],1===i.length&&V(i[0])&&(i=i[0]),t=function(){var t,n,o;for(o=[],t=0,n=i.length;n>t;t++)e=i[t],o.push(new r(e));return o}(),ve.apply(null,[n,"groupSimultaneous"].concat(we.call(i),[n.when(t,function(){var e;return e=1<=arguments.length?we.call(arguments,0):[]})]))},y=function(e){function t(e,n,r){this.property=e,this.subscribe=je(this.subscribe,this),t.__super__.constructor.call(this,n,r),this.current=b,this.currentValueRootId=void 0,this.propertyEnded=!1}return xe(t,e),t.prototype.push=function(e){return e.isEnd()&&(this.propertyEnded=!0),e.hasValue()&&(this.current=new x(e),this.currentValueRootId=j.currentEventId()),t.__super__.push.call(this,e)},t.prototype.maybeSubSource=function(e,t){return t===n.noMore?ie:this.propertyEnded?(e(F()),ie):u.prototype.subscribe.call(this,e)},t.prototype.subscribe=function(e){var t,r,i,o;return r=!1,i=n.more,this.current.isDefined&&(this.hasSubscribers()||this.propertyEnded)?(t=j.currentEventId(),o=this.currentValueRootId,!this.propertyEnded&&o&&t&&t!==o?(j.whenDoneWith(this.property,function(t){return function(){return t.currentValueRootId===o?e(H(t.current.get().value())):void 0}}(this)),this.maybeSubSource(e,i)):(j.inTransaction(void 0,this,function(){return i=e(H(this.current.get().value()))},[]),this.maybeSubSource(e,i))):this.maybeSubSource(e,i)},t}(u),g=function(e){function t(e,n,r){_.isFunction(e)&&(r=n,n=e,e=[]),t.__super__.constructor.call(this,e),A(n),this.dispatcher=new y(this,n,r),ue(this)}return xe(t,e),t.prototype.changes=function(){return new m($(this,"changes"),function(e){return function(t){return e.dispatcher.subscribe(function(e){return e.isInitial()?void 0:t(e)})}}(this))},t.prototype.withHandler=function(e){return new t($(this,"withHandler",e),this.dispatcher.subscribe,e)},t.prototype.toProperty=function(){return k(arguments),this},t.prototype.toEventStream=function(){return new m($(this,"toEventStream"),function(e){return function(t){return e.dispatcher.subscribe(function(e){return e.isInitial()&&(e=e.toNext()),t(e)})}}(this))},t}(v),n.Property=g,n.constant=function(e){return new g($(n,"constant",e),function(t){return t(H(e)),t(F()),ie})},n.fromBinder=function(e,t){return null==t&&(t=_.id),new m($(n,"fromBinder",e,t),function(r){var i,o,a,s;return s=!1,i=!1,o=function(){return s?void 0:"undefined"!=typeof a&&null!==a?(a(),s=!0):i=!0},a=e(function(){var e,i,a,s,u,c;for(e=1<=arguments.length?we.call(arguments,0):[],c=t.apply(this,e),V(c)&&_.last(c)instanceof f||(c=[c]),u=n.more,a=0,s=c.length;s>a;a++)if(i=c[a],u=r(i=fe(i)),u===n.noMore||i.isEnd())return o(),u;return u}),i&&o(),o})},N=[["addEventListener","removeEventListener"],["addListener","removeListener"],["on","off"],["bind","unbind"]],B=function(e){var t,n,r,i;for(t=0,n=N.length;n>t;t++)if(i=N[t],r=[e[i[0]],e[i[1]]],r[0]&&r[1])return r;throw new l("No suitable event methods in "+e)},n.fromEventTarget=function(e,t,r){var i,o,a;return i=B(e),o=i[0],a=i[1],ve(n,"fromEvent",e,t,n.fromBinder(function(n){return o.call(e,t,n),function(){return a.call(e,t,n)}},r))},n.fromEvent=n.fromEventTarget,n.Observable.prototype.map=function(){var e,t;return t=arguments[0],e=2<=arguments.length?we.call(arguments,1):[],z(this,t,e,function(e){return ve(this,"map",e,this.withHandler(function(t){return this.push(t.fmap(e))}))})},n.combineAsArray=function(){var e,t,r,i,o,a,s;for(s=1<=arguments.length?we.call(arguments,0):[],1===s.length&&V(s[0])&&(s=s[0]),e=t=0,r=s.length;r>t;e=++t)a=s[e],Y(a)||(s[e]=n.constant(a));return s.length?(o=function(){var e,t,n;for(n=[],e=0,t=s.length;t>e;e++)i=s[e],n.push(new w(i,!0));return n}(),ve.apply(null,[n,"combineAsArray"].concat(we.call(s),[n.when(o,function(){var e;return e=1<=arguments.length?we.call(arguments,0):[]}).toProperty()]))):n.constant([])},n.onValues=function(){var e,t,r;return r=2<=arguments.length?we.call(arguments,0,t=arguments.length-1):(t=0,[]),e=arguments[t++],n.combineAsArray(r).onValues(e)},n.combineWith=function(){var e,t;return e=arguments[0],t=2<=arguments.length?we.call(arguments,1):[],ve.apply(null,[n,"combineWith",e].concat(we.call(t),[n.combineAsArray(t).map(function(t){return e.apply(null,t)})]))},n.combineTemplate=function(e){var t,r,i,o,a,s,u,c,l,f;return u=[],f=[],s=function(e){return e[e.length-1]},l=function(e,t,n){return s(e)[t]=n},t=function(e,t){return function(n,r){return l(n,e,r[t])}},a=function(e,t){return function(n){return l(n,e,t)}},c=function(e){return V(e)?[]:{}},i=function(e,n){var r,i;return Y(n)?(f.push(n),u.push(t(e,f.length-1))):n!==Object(n)||"function"==typeof n||n instanceof RegExp||n instanceof Date?u.push(a(e,n)):(i=function(e){return function(t){var r;return r=c(n),l(t,e,r),t.push(r)}},r=function(e){return e.pop()},u.push(i(e)),o(n),u.push(r))},o=function(e){return _.each(e,i)},o(e),r=function(t){var n,r,i,o,a;for(a=c(e),n=[a],i=0,o=u.length;o>i;i++)(r=u[i])(n,t);return a},ve(n,"combineTemplate",e,n.combineAsArray(f).map(r))},n.Observable.prototype.combine=function(e,t){var r;return r=le(t),ve(this,"combine",e,t,n.combineAsArray(this,e).map(function(e){return r(e[0],e[1])}))},n.Observable.prototype.decode=function(e){return ve(this,"decode",e,this.combine(n.combineTemplate(e),function(e,t){return t[e]}));
},n.Observable.prototype.withStateMachine=function(e,t){var r;return r=e,ve(this,"withStateMachine",e,t,this.withHandler(function(e){var i,o,a,s,u,c,l;for(i=t(r,e),s=i[0],c=i[1],r=s,l=n.more,o=0,a=c.length;a>o;o++)if(u=c[o],l=this.push(u),l===n.noMore)return l;return l}))},n.Observable.prototype.skipDuplicates=function(e){return null==e&&(e=function(e,t){return e===t}),ve(this,"skipDuplicates",this.withStateMachine(b,function(t,n){return n.hasValue()?n.isInitial()||t===b||!e(t.get(),n.value())?[new x(n.value()),[n]]:[t,[]]:[t,[n]]}))},n.Observable.prototype.awaiting=function(e){return ve(this,"awaiting",e,n.groupSimultaneous(this,e).map(function(e){var t,n;return t=e[0],n=e[1],0===n.length}).toProperty(!1).skipDuplicates())},n.Observable.prototype.not=function(){return ve(this,"not",this.map(function(e){return!e}))},n.Property.prototype.and=function(e){return ve(this,"and",e,this.combine(e,function(e,t){return e&&t}))},n.Property.prototype.or=function(e){return ve(this,"or",e,this.combine(e,function(e,t){return e||t}))},n.scheduler={setTimeout:function(e,t){return setTimeout(e,t)},setInterval:function(e,t){return setInterval(e,t)},clearInterval:function(e){return clearInterval(e)},clearTimeout:function(e){return clearTimeout(e)},now:function(){return(new Date).getTime()}},n.EventStream.prototype.bufferWithTime=function(e){return ve(this,"bufferWithTime",e,this.bufferWithTimeOrCount(e,Number.MAX_VALUE))},n.EventStream.prototype.bufferWithCount=function(e){return ve(this,"bufferWithCount",e,this.bufferWithTimeOrCount(void 0,e))},n.EventStream.prototype.bufferWithTimeOrCount=function(e,t){var n;return n=function(n){return n.values.length===t?n.flush():void 0!==e?n.schedule():void 0},ve(this,"bufferWithTimeOrCount",e,t,this.buffer(e,n,n))},n.EventStream.prototype.buffer=function(e,t,r){var i,o,a;return null==t&&(t=ie),null==r&&(r=ie),i={scheduled:null,end:void 0,values:[],flush:function(){var e;if(this.scheduled&&(n.scheduler.clearTimeout(this.scheduled),this.scheduled=null),this.values.length>0){if(e=this.push(re(this.values)),this.values=[],null!=this.end)return this.push(this.end);if(e!==n.noMore)return r(this)}else if(null!=this.end)return this.push(this.end)},schedule:function(){return this.scheduled?void 0:this.scheduled=e(function(e){return function(){return e.flush()}}(this))}},a=n.more,_.isFunction(e)||(o=e,e=function(e){return n.scheduler.setTimeout(e,o)}),ve(this,"buffer",this.withHandler(function(e){return i.push=function(e){return function(t){return e.push(t)}}(this),e.isError()?a=this.push(e):e.isEnd()?(i.end=e,i.scheduled||i.flush()):(i.values.push(e.value()),t(i)),a}))},n.Observable.prototype.filter=function(){var e,t;return t=arguments[0],e=2<=arguments.length?we.call(arguments,1):[],L(t),z(this,t,e,function(e){return ve(this,"filter",e,this.withHandler(function(t){return t.filter(e)?this.push(t):n.more}))})},n.once=function(e){return new m($(n,"once",e),function(t){return t(fe(e)),t(F()),ie})},n.EventStream.prototype.concat=function(e){var t;return t=this,new m($(t,"concat",e),function(n){var r,i;return i=ie,r=t.dispatcher.subscribe(function(t){return t.isEnd()?i=e.dispatcher.subscribe(n):n(t)}),function(){return r(),i()}})},n.Observable.prototype.flatMap=function(){return G(this,ne(arguments))},n.Observable.prototype.flatMapFirst=function(){return G(this,ne(arguments),!0)},G=function(e,t,r,i){var a,s,u;return u=[e],a=[],s=new m($(e,"flatMap"+(r?"First":""),t),function(s){var u,c,l,f,m;return l=new o,f=[],m=function(e){var r;return r=te(t(e.value())),a.push(r),l.add(function(e,t){return r.dispatcher.subscribe(function(i){var o;return i.isEnd()?(_.remove(r,a),c(),u(t),n.noMore):(i instanceof p&&(i=i.toNext()),o=s(i),o===n.noMore&&e(),o)})})},c=function(){var e;return e=f.shift(),e?m(e):void 0},u=function(e){return e(),l.empty()?s(F()):void 0},l.add(function(t,o){return e.dispatcher.subscribe(function(e){return e.isEnd()?u(o):e.isError()?s(e):r&&l.count()>1?n.more:l.unsubscribed?n.noMore:i&&l.count()>i?f.push(e):m(e)})}),l.unsubscribe}),s.internalDeps=function(){return a.length?u.concat(a):u},s},ne=function(e){return 1===e.length&&Y(e[0])?_.always(e[0]):J(e)},te=function(e){return Y(e)?e:n.once(e)},n.Observable.prototype.flatMapWithConcurrencyLimit=function(){var e,t;return t=arguments[0],e=2<=arguments.length?we.call(arguments,1):[],ve.apply(null,[this,"flatMapWithConcurrencyLimit",t].concat(we.call(e),[G(this,ne(e),!1,t)]))},n.Observable.prototype.flatMapConcat=function(){return ve.apply(null,[this,"flatMapConcat"].concat(we.call(arguments),[this.flatMapWithConcurrencyLimit.apply(this,[1].concat(we.call(arguments)))]))},n.later=function(e,t){return ve(n,"later",e,t,n.fromBinder(function(r){var i,o;return o=function(){return r([t,F()])},i=n.scheduler.setTimeout(o,e),function(){return n.scheduler.clearTimeout(i)}}))},n.Observable.prototype.bufferingThrottle=function(e){return ve(this,"bufferingThrottle",e,this.flatMapConcat(function(t){return n.once(t).concat(n.later(e).filter(!1))}))},n.Property.prototype.bufferingThrottle=function(){return n.Observable.prototype.bufferingThrottle.apply(this,arguments).toProperty()},i=function(e){function t(){this.guardedSink=je(this.guardedSink,this),this.subscribeAll=je(this.subscribeAll,this),this.unsubAll=je(this.unsubAll,this),this.sink=void 0,this.subscriptions=[],this.ended=!1,t.__super__.constructor.call(this,$(n,"Bus"),this.subscribeAll)}return xe(t,e),t.prototype.unsubAll=function(){var e,t,n,r;for(n=this.subscriptions,e=0,t=n.length;t>e;e++)r=n[e],"function"==typeof r.unsub&&r.unsub();return void 0},t.prototype.subscribeAll=function(e){var t,n,r,i;if(this.ended)e(F());else for(this.sink=e,r=I(this.subscriptions),t=0,n=r.length;n>t;t++)i=r[t],this.subscribeInput(i);return this.unsubAll},t.prototype.guardedSink=function(e){return function(t){return function(r){return r.isEnd()?(t.unsubscribeInput(e),n.noMore):t.sink(r)}}(this)},t.prototype.subscribeInput=function(e){return e.unsub=e.input.dispatcher.subscribe(this.guardedSink(e.input))},t.prototype.unsubscribeInput=function(e){var t,n,r,i,o;for(i=this.subscriptions,t=n=0,r=i.length;r>n;t=++n)if(o=i[t],o.input===e)return"function"==typeof o.unsub&&o.unsub(),void this.subscriptions.splice(t,1)},t.prototype.plug=function(e){var t;return O(e),this.ended?void 0:(t={input:e},this.subscriptions.push(t),null!=this.sink&&this.subscribeInput(t),function(t){return function(){return t.unsubscribeInput(e)}}(this))},t.prototype.end=function(){return this.ended=!0,this.unsubAll(),"function"==typeof this.sink?this.sink(F()):void 0},t.prototype.push=function(e){return this.ended?void 0:"function"==typeof this.sink?this.sink(re(e)):void 0},t.prototype.error=function(e){return"function"==typeof this.sink?this.sink(new l(e)):void 0},t}(m),n.Bus=i,Z=function(e,t){return ge(function(){var r,i,o;return i=arguments[0],r=2<=arguments.length?we.call(arguments,1):[],o=oe(t,[function(e,t){return i.apply(null,we.call(e).concat([t]))}]),ve.apply(null,[n,e,i].concat(we.call(r),[n.combineAsArray(r).flatMap(o)]))})},n.fromCallback=Z("fromCallback",function(){var e,t;return t=arguments[0],e=2<=arguments.length?we.call(arguments,1):[],n.fromBinder(function(n){return Q(t,e)(n),ie},function(e){return[e,F()]})}),n.fromNodeCallback=Z("fromNodeCallback",function(){var e,t;return t=arguments[0],e=2<=arguments.length?we.call(arguments,1):[],n.fromBinder(function(n){return Q(t,e)(n),ie},function(e,t){return e?[new l(e),F()]:[t,F()]})}),E=function(e,t){var r;return r=new m($(e,"justInitValue"),function(t){var i,o;return o=void 0,i=e.dispatcher.subscribe(function(e){return e.isEnd()||(o=e),n.noMore}),j.whenDoneWith(r,function(){return null!=o&&t(o),t(F())}),i}),r.concat(t).toProperty()},n.Observable.prototype.mapEnd=function(){var e;return e=J(arguments),ve(this,"mapEnd",e,this.withHandler(function(t){return t.isEnd()?(this.push(re(e(t))),this.push(F()),n.noMore):this.push(t)}))},n.Observable.prototype.skipErrors=function(){return ve(this,"skipErrors",this.withHandler(function(e){return e.isError()?n.more:this.push(e)}))},n.EventStream.prototype.takeUntil=function(e){var t;return t={},ve(this,"takeUntil",e,n.groupSimultaneous(this.mapEnd(t),e.skipErrors()).withHandler(function(r){var i,o,a,s,u,c;if(r.hasValue()){if(s=r.value(),i=s[0],e=s[1],e.length)return this.push(F());for(u=n.more,o=0,a=i.length;a>o;o++)c=i[o],u=this.push(c===t?F():re(c));return u}return this.push(r)}))},n.Property.prototype.takeUntil=function(e){var t;return t=this.changes().takeUntil(e),ve(this,"takeUntil",e,E(this,t))},n.Observable.prototype.flatMapLatest=function(){var e,t;return e=ne(arguments),t=this.toEventStream(),ve(this,"flatMapLatest",e,t.flatMap(function(n){return te(e(n)).takeUntil(t)}))},n.Property.prototype.delayChanges=function(){var e,t,n;return e=2<=arguments.length?we.call(arguments,0,n=arguments.length-1):(n=0,[]),t=arguments[n++],ve.apply(null,[this].concat(we.call(e),[E(this,t(this.changes()))]))},n.EventStream.prototype.delay=function(e){return ve(this,"delay",e,this.flatMap(function(t){return n.later(e,t)}))},n.Property.prototype.delay=function(e){return this.delayChanges("delay",e,function(t){return t.delay(e)})},n.EventStream.prototype.debounce=function(e){return ve(this,"debounce",e,this.flatMapLatest(function(t){return n.later(e,t)}))},n.Property.prototype.debounce=function(e){return this.delayChanges("debounce",e,function(t){return t.debounce(e)})},n.EventStream.prototype.debounceImmediate=function(e){return ve(this,"debounceImmediate",e,this.flatMapFirst(function(t){return n.once(t).concat(n.later(e).filter(!1))}))},n.Observable.prototype.scan=function(e,t){var r,i,o;return t=le(t),r=pe(e),o=function(e){return function(o){var a,s,u,c;return a=!1,c=ie,s=n.more,u=function(){return a?void 0:r.forEach(function(e){return a=!0,s=o(new p(function(){return e})),s===n.noMore?(c(),c=ie):void 0})},c=e.dispatcher.subscribe(function(e){var i,c;return e.hasValue()?a&&e.isInitial()?n.more:(e.isInitial()||u(),a=!0,c=r.getOrElse(void 0),i=t(c,e.value()),r=new x(i),o(e.apply(function(){return i}))):(e.isEnd()&&(s=u()),s!==n.noMore?o(e):void 0)}),j.whenDoneWith(i,u),c}}(this),i=new g($(this,"scan",e,t),o)},n.Observable.prototype.diff=function(e,t){return t=le(t),ve(this,"diff",e,t,this.scan([e],function(e,n){return[n,t(e[0],n)]}).filter(function(e){return 2===e.length}).map(function(e){return e[1]}))},n.Observable.prototype.doAction=function(){var e;return e=J(arguments),ve(this,"doAction",e,this.withHandler(function(t){return t.hasValue()&&e(t.value()),this.push(t)}))},n.Observable.prototype.endOnError=function(){var e,t;return t=arguments[0],e=2<=arguments.length?we.call(arguments,1):[],null==t&&(t=!0),z(this,t,e,function(e){return ve(this,"endOnError",this.withHandler(function(t){return t.isError()&&e(t.error)?(this.push(t),this.push(F())):this.push(t)}))})},v.prototype.errors=function(){return ve(this,"errors",this.filter(function(){return!1}))},be=function(e){return[e,F()]},n.fromPromise=function(e,t){return ve(n,"fromPromise",e,n.fromBinder(function(n){var r;return null!=(r=e.then(n,function(e){return n(new l(e))}))&&"function"==typeof r.done&&r.done(),function(){return t&&"function"==typeof e.abort?e.abort():void 0}},be))},n.Observable.prototype.mapError=function(){var e;return e=J(arguments),ve(this,"mapError",e,this.withHandler(function(t){return this.push(t.isError()?re(e(t.error)):t)}))},n.Observable.prototype.flatMapError=function(e){return ve(this,"flatMapError",e,this.mapError(function(e){return new l(e)}).flatMap(function(t){return t instanceof l?e(t.error):n.once(t)}))},n.EventStream.prototype.sampledBy=function(e,t){return ve(this,"sampledBy",e,t,this.toProperty().sampledBy(e,t))},n.Property.prototype.sampledBy=function(e,t){var r,i,o,a,s;return null!=t?t=le(t):(r=!0,t=function(e){return e.value()}),s=new w(this,!1,r),o=new w(e,!0,r),a=n.when([s,o],t),i=e instanceof g?a.toProperty():a,ve(this,"sampledBy",e,t,i)},n.Property.prototype.sample=function(e){return ve(this,"sample",e,this.sampledBy(n.interval(e,{})))},n.Observable.prototype.map=function(){var e,t;return t=arguments[0],e=2<=arguments.length?we.call(arguments,1):[],t instanceof g?t.sampledBy(this,q):z(this,t,e,function(e){return ve(this,"map",e,this.withHandler(function(t){return this.push(t.fmap(e))}))})},n.Observable.prototype.fold=function(e,t){return ve(this,"fold",e,t,this.scan(e,t).sampledBy(this.filter(!1).mapEnd().toProperty()))},v.prototype.reduce=v.prototype.fold,n.fromPoll=function(e,t){return ve(n,"fromPoll",e,t,n.fromBinder(function(t){var r;return r=n.scheduler.setInterval(t,e),function(){return n.scheduler.clearInterval(r)}},t))},n.EventStream.prototype.merge=function(e){var t;return M(e),t=this,ve(t,"merge",e,n.mergeAll(this,e))},n.mergeAll=function(){var e;return e=1<=arguments.length?we.call(arguments,0):[],V(e[0])&&(e=e[0]),e.length?new m($.apply(null,[n,"mergeAll"].concat(we.call(e))),function(t){var r,i,o;return r=0,o=function(i){return function(o){return i.dispatcher.subscribe(function(i){var a;return i.isEnd()?(r++,r===e.length?t(F()):n.more):(a=t(i),a===n.noMore&&o(),a)})}},i=_.map(o,e),new n.CompositeUnsubscribe(i).unsubscribe}):n.never()},n.Observable.prototype.take=function(e){return 0>=e?n.never():ve(this,"take",e,this.withHandler(function(t){return t.hasValue()?(e--,e>0?this.push(t):(0===e&&this.push(t),this.push(F()),n.noMore)):this.push(t)}))},n.fromArray=function(e){var t;return S(e),e.length?(t=0,new m($(n,"fromArray",e),function(r){var i,o,a,s,u;return u=!1,s=n.more,a=!1,o=!1,i=function(){var c;if(o=!0,!a){for(a=!0;o;)o=!1,s===n.noMore||u||(c=e[t++],s=r(fe(c)),s!==n.noMore&&(t===e.length?r(F()):j.afterTransaction(i)));return a=!1}},i(),function(){return u=!0}})):ve(n,"fromArray",e,n.never())},n.EventStream.prototype.holdWhen=function(e){var t,r,i;return i=e.startWith(!1),r=i.filter(function(e){return!e}),t=i.filter(_.id),ve(this,"holdWhen",e,this.filter(!1).merge(i.flatMapConcat(function(e){return function(i){return i?e.scan([],function(e,t){return e.concat([t])}).sampledBy(r).take(1).flatMap(n.fromArray):e.takeUntil(t)}}(this))))},n.interval=function(e,t){return null==t&&(t={}),ve(n,"interval",e,t,n.fromPoll(e,function(){return re(t)}))},n.$={},n.$.asEventStream=function(e,t,r){var i;return _.isFunction(t)&&(i=[t,void 0],r=i[0],t=i[1]),ve(this.selector||this,"asEventStream",e,n.fromBinder(function(n){return function(r){return n.on(e,t,r),function(){return n.off(e,t,r)}}}(this),r))},null!=(se="undefined"!=typeof jQuery&&null!==jQuery?jQuery:"undefined"!=typeof Zepto&&null!==Zepto?Zepto:void 0)&&(se.fn.asEventStream=n.$.asEventStream),n.Observable.prototype.log=function(){var e;return e=1<=arguments.length?we.call(arguments,0):[],this.subscribe(function(t){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log.apply(console,we.call(e).concat([t.log()])):void 0}),this},n.repeatedly=function(e,t){var r;return r=0,ve(n,"repeatedly",e,t,n.fromPoll(e,function(){return t[r++%t.length]}))},n.repeat=function(e){var t;return t=0,n.fromBinder(function(r){var i,o,a,s,u;return i=!1,a=n.more,u=function(){},o=function(e){return e.isEnd()?i?s():i=!0:a=r(e)},s=function(){var s;for(i=!0;i&&a!==n.noMore;)s=e(t++),i=!1,s?u=s.subscribeInternal(o):r(F());return i=!0},s(),function(){return u()}})},n.retry=function(e){var t,r,i,o,a,s,u;if(!_.isFunction(e.source))throw new d("'source' option has to be a function");return u=e.source,s=e.retries||0,a=e.maxRetries||s,t=e.delay||function(){return 0},o=e.isRetryable||function(){return!0},i=!1,r=null,ve(n,"retry",e,n.repeat(function(){var e,c,l;return i?null:(l=function(){return u().endOnError().withHandler(function(e){return e.isError()?(r=e,o(r.error)&&s>0?void 0:(i=!0,this.push(e))):(e.hasValue()&&(r=null,i=!0),this.push(e))})},r?(e={error:r.error,retriesDone:a-s},c=n.later(t(e)).filter(!1),s-=1,c.concat(n.once().flatMap(l))):l())}))},n.sequentially=function(e,t){var r;return r=0,ve(n,"sequentially",e,t,n.fromPoll(e,function(){var e;return e=t[r++],r<t.length?e:r===t.length?[e,F()]:F()}))},n.Observable.prototype.skip=function(e){return ve(this,"skip",e,this.withHandler(function(t){return t.hasValue()&&e>0?(e--,n.more):this.push(t)}))},n.EventStream.prototype.skipUntil=function(e){var t;return t=e.take(1).map(!0).toProperty(!1),ve(this,"skipUntil",e,this.filter(t))},n.EventStream.prototype.skipWhile=function(){var e,t,r;return t=arguments[0],e=2<=arguments.length?we.call(arguments,1):[],L(t),r=!1,z(this,t,e,function(e){return ve(this,"skipWhile",e,this.withHandler(function(t){return!r&&t.hasValue()&&e(t.value())?n.more:(t.hasValue()&&(r=!0),this.push(t))}))})},n.Observable.prototype.slidingWindow=function(e,t){return null==t&&(t=0),ve(this,"slidingWindow",e,t,this.scan([],function(t,n){return t.concat([n]).slice(-e)}).filter(function(e){return e.length>=t}))},n.spy=function(e){return ce.push(e)},ce=[],ue=function(e){var t,n,r;if(ce.length&&!ue.running)try{for(ue.running=!0,t=0,n=ce.length;n>t;t++)(r=ce[t])(e)}finally{delete ue.running}return void 0},n.Property.prototype.startWith=function(e){return ve(this,"startWith",e,this.scan(e,function(e,t){return t}))},n.EventStream.prototype.startWith=function(e){return ve(this,"startWith",e,n.once(e).concat(this))},n.Observable.prototype.takeWhile=function(){var e,t;return t=arguments[0],e=2<=arguments.length?we.call(arguments,1):[],L(t),z(this,t,e,function(e){return ve(this,"takeWhile",e,this.withHandler(function(t){return t.filter(e)?this.push(t):(this.push(F()),n.noMore)}))})},n.update=function(){var e,t,r,i;for(t=arguments[0],i=2<=arguments.length?we.call(arguments,1):[],r=function(e){return function(){var t;return t=1<=arguments.length?we.call(arguments,0):[],function(n){return e.apply(null,[n].concat(t))}}},e=i.length-1;e>0;)i[e]instanceof Function||(i[e]=function(e){return function(){return e}}(i[e])),i[e]=r(i[e]),e-=2;return ve.apply(null,[n,"update",t].concat(we.call(i),[n.when.apply(n,i).scan(t,function(e,t){return t(e)})]))},n.zipAsArray=function(){var e;return e=1<=arguments.length?we.call(arguments,0):[],V(e[0])&&(e=e[0]),ve.apply(null,[n,"zipAsArray"].concat(we.call(e),[n.zipWith(e,function(){var e;return e=1<=arguments.length?we.call(arguments,0):[]})]))},n.zipWith=function(){var e,t,r;return e=arguments[0],r=2<=arguments.length?we.call(arguments,1):[],_.isFunction(e)||(t=[e,r[0]],r=t[0],e=t[1]),r=_.map(function(e){return e.toEventStream()},r),ve.apply(null,[n,"zipWith",e].concat(we.call(r),[n.when(r,e)]))},n.Observable.prototype.zip=function(e,t){return null==t&&(t=Array),ve(this,"zip",e,n.zipWith([this,e],t))},n.Observable.prototype.first=function(){return ve(this,"first",this.take(1))},n.Observable.prototype.last=function(){var e;return ve(this,"last",this.withHandler(function(t){return t.isEnd()?(e&&this.push(e),this.push(F()),n.noMore):void(e=t)}))},n.EventStream.prototype.throttle=function(e){return ve(this,"throttle",e,this.bufferWithTime(e).map(function(e){return e[e.length-1]}))},n.Property.prototype.throttle=function(e){return this.delayChanges("throttle",e,function(t){return t.throttle(e)})},v.prototype.firstToPromise=function(e){var t=this;if("function"!=typeof e){if("function"!=typeof Promise)throw new d("There isn't default Promise, use shim or parameter");e=Promise}return new e(function(e,r){return t.subscribe(function(t){return t.hasValue()&&e(t.value()),t.isError()&&r(t.error),n.noMore})})},v.prototype.toPromise=function(e){return this.last().firstToPromise(e)},"undefined"!=typeof t&&null!==t&&null!=t.amd?(e.register("github:baconjs/bacon.js@0.7.58/dist/Bacon",[],!1,function(e,t,r){return function(){return n}.call(this)}),this.Bacon=n):"undefined"!=typeof module&&null!==module&&null!=module.exports?(module.exports=n,n.Bacon=n):this.Bacon=n}.call(this)}(),e.register("npm:core-js@0.9.10/library/modules/$",["npm:core-js@0.9.10/library/modules/$.fw"],!0,function(require,t,n){function r(e){return isNaN(e=+e)?0:(e>0?b:h)(e)}function i(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}function o(e,t,n){return e[t]=n,e}function a(e){return y?function(t,n,r){return w.setDesc(t,n,i(e,r))}:o}function s(e){return null!==e&&("object"==typeof e||"function"==typeof e)}function u(e){return"function"==typeof e}function c(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}var l=e.global,f=l.define;l.define=void 0;var l="undefined"!=typeof self?self:Function("return this")(),m={},d=Object.defineProperty,p={}.hasOwnProperty,h=Math.ceil,b=Math.floor,v=Math.max,g=Math.min,y=!!function(){try{return 2==d({},"a",{get:function(){return 2}}).a}catch(e){}}(),x=a(1),w=n.exports=require("npm:core-js@0.9.10/library/modules/$.fw")({g:l,core:m,html:l.document&&document.documentElement,isObject:s,isFunction:u,it:function(e){return e},that:function(){return this},toInteger:r,toLength:function(e){return e>0?g(r(e),9007199254740991):0},toIndex:function(e,t){return e=r(e),0>e?v(e+t,0):g(e,t)},has:function(e,t){return p.call(e,t)},create:Object.create,getProto:Object.getPrototypeOf,DESC:y,desc:i,getDesc:Object.getOwnPropertyDescriptor,setDesc:d,setDescs:Object.defineProperties,getKeys:Object.keys,getNames:Object.getOwnPropertyNames,getSymbols:Object.getOwnPropertySymbols,assertDefined:c,ES5Object:Object,toObject:function(e){return w.ES5Object(c(e))},hide:x,def:a(0),set:l.Symbol?o:x,each:[].forEach});return"undefined"!=typeof __e&&(__e=m),"undefined"!=typeof __g&&(__g=l),l.define=f,n.exports}),e.register("npm:core-js@0.9.10/library/modules/es6.object.statics-accept-primitives",["npm:core-js@0.9.10/library/modules/$","npm:core-js@0.9.10/library/modules/$.def"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:core-js@0.9.10/library/modules/$"),a=require("npm:core-js@0.9.10/library/modules/$.def"),s=o.isObject,u=o.toObject;return o.each.call("freeze,seal,preventExtensions,isFrozen,isSealed,isExtensible,getOwnPropertyDescriptor,getPrototypeOf,keys,getOwnPropertyNames".split(","),function(e,t){var n=(o.core.Object||{})[e]||Object[e],r=0,i={};i[e]=0==t?function(e){return s(e)?n(e):e}:1==t?function(e){return s(e)?n(e):e}:2==t?function(e){return s(e)?n(e):e}:3==t?function(e){return s(e)?n(e):!0}:4==t?function(e){return s(e)?n(e):!0}:5==t?function(e){return s(e)?n(e):!1}:6==t?function(e,t){return n(u(e),t)}:7==t?function(e){return n(Object(o.assertDefined(e)))}:8==t?function(e){return n(u(e))}:function(e){return n(u(e))};try{n("z")}catch(c){r=1}a(a.S+a.F*r,"Object",i)}),r.define=i,n.exports}),e.register("npm:babel-runtime@5.4.3/core-js/object/define-property",["npm:core-js@0.9.10/library/fn/object/define-property"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports={"default":require("npm:core-js@0.9.10/library/fn/object/define-property"),__esModule:!0},r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/modules/$.wks",["npm:core-js@0.9.10/library/modules/$","npm:core-js@0.9.10/library/modules/$.uid"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var r=require("npm:core-js@0.9.10/library/modules/$").g,o={};return n.exports=function(e){return o[e]||(o[e]=r.Symbol&&r.Symbol[e]||require("npm:core-js@0.9.10/library/modules/$.uid").safe("Symbol."+e))},r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/modules/$.iter",["npm:core-js@0.9.10/library/modules/$","npm:core-js@0.9.10/library/modules/$.cof","npm:core-js@0.9.10/library/modules/$.assert","npm:core-js@0.9.10/library/modules/$.wks"],!0,function(require,t,n){function r(e,t){a.hide(e,c,t),l in[]&&a.hide(e,l,t)}var i=e.global,o=i.define;i.define=void 0;var a=require("npm:core-js@0.9.10/library/modules/$"),s=require("npm:core-js@0.9.10/library/modules/$.cof"),u=require("npm:core-js@0.9.10/library/modules/$.assert").obj,c=require("npm:core-js@0.9.10/library/modules/$.wks")("iterator"),l="@@iterator",f={},m={};return r(m,a.that),n.exports={BUGGY:"keys"in[]&&!("next"in[].keys()),Iterators:f,step:function(e,t){return{value:t,done:!!e}},is:function(e){var t=Object(e),n=a.g.Symbol,r=n&&n.iterator||l;return r in t||c in t||a.has(f,s.classof(t))},get:function(e){var t=a.g.Symbol,n=e[t&&t.iterator||l],r=n||e[c]||f[s.classof(e)];return u(r.call(e))},set:r,create:function(e,t,n,r){e.prototype=a.create(r||m,{next:a.desc(1,n)}),s.set(e,t+" Iterator")}},i.define=o,n.exports}),e.register("npm:core-js@0.9.10/library/modules/es6.array.iterator",["npm:core-js@0.9.10/library/modules/$","npm:core-js@0.9.10/library/modules/$.unscope","npm:core-js@0.9.10/library/modules/$.uid","npm:core-js@0.9.10/library/modules/$.iter","npm:core-js@0.9.10/library/modules/$.iter-define"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:core-js@0.9.10/library/modules/$"),a=require("npm:core-js@0.9.10/library/modules/$.unscope"),s=require("npm:core-js@0.9.10/library/modules/$.uid").safe("iter"),u=require("npm:core-js@0.9.10/library/modules/$.iter"),c=u.step,l=u.Iterators;return require("npm:core-js@0.9.10/library/modules/$.iter-define")(Array,"Array",function(e,t){o.set(this,s,{o:o.toObject(e),i:0,k:t})},function(){var e=this[s],t=e.o,n=e.k,r=e.i++;return!t||r>=t.length?(e.o=void 0,c(1)):"keys"==n?c(0,r):"values"==n?c(0,t[r]):c(0,[r,t[r]])},"values"),l.Arguments=l.Array,a("keys"),a("values"),a("entries"),r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/modules/$.for-of",["npm:core-js@0.9.10/library/modules/$.ctx","npm:core-js@0.9.10/library/modules/$.iter","npm:core-js@0.9.10/library/modules/$.iter-call"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:core-js@0.9.10/library/modules/$.ctx"),a=require("npm:core-js@0.9.10/library/modules/$.iter").get,s=require("npm:core-js@0.9.10/library/modules/$.iter-call");return n.exports=function(e,t,n,r){for(var i,u=a(e),c=o(n,r,t?2:1);!(i=u.next()).done;)if(s(u,c,i.value,t)===!1)return s.close(u)},r.define=i,n.exports}),e.register("npm:process@0.10.1",["npm:process@0.10.1/browser"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=require("npm:process@0.10.1/browser"),r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/modules/$.collection-weak",["npm:core-js@0.9.10/library/modules/$","npm:core-js@0.9.10/library/modules/$.uid","npm:core-js@0.9.10/library/modules/$.assert","npm:core-js@0.9.10/library/modules/$.for-of","npm:core-js@0.9.10/library/modules/$.array-methods","npm:core-js@0.9.10/library/modules/$.mix"],!0,function(require,t,n){function r(e,t){return x(e.array,function(e){return e[0]===t})}function i(e){return e[g]||d(e,g,{array:[],get:function(e){var t=r(this,e);return t?t[1]:void 0},has:function(e){return!!r(this,e)},set:function(e,t){var n=r(this,e);n?n[1]=t:this.array.push([e,t])},"delete":function(e){var t=w(this.array,function(t){return t[0]===e});return~t&&this.array.splice(t,1),!!~t}})[g]}var o=e.global,a=o.define;o.define=void 0;var s=require("npm:core-js@0.9.10/library/modules/$"),u=require("npm:core-js@0.9.10/library/modules/$.uid").safe,c=require("npm:core-js@0.9.10/library/modules/$.assert"),l=require("npm:core-js@0.9.10/library/modules/$.for-of"),f=s.has,m=s.isObject,d=s.hide,p=Object.isFrozen||s.core.Object.isFrozen,h=0,b=u("id"),v=u("weak"),g=u("leak"),y=require("npm:core-js@0.9.10/library/modules/$.array-methods"),x=y(5),w=y(6);return n.exports={getConstructor:function(e,t,n){function r(){s.set(c.inst(this,r,e),b,h++);var i=arguments[0];void 0!=i&&l(i,t,this[n],this)}return require("npm:core-js@0.9.10/library/modules/$.mix")(r.prototype,{"delete":function(e){return m(e)?p(e)?i(this)["delete"](e):f(e,v)&&f(e[v],this[b])&&delete e[v][this[b]]:!1},has:function(e){return m(e)?p(e)?i(this).has(e):f(e,v)&&f(e[v],this[b]):!1}}),r},def:function(e,t,n){return p(c.obj(t))?i(e).set(t,n):(f(t,v)||d(t,v,{}),t[v][e[b]]=n),e},leakStore:i,WEAK:v,ID:b},o.define=a,n.exports}),e.register("npm:core-js@0.9.10/library/fn/get-iterator",["npm:core-js@0.9.10/library/modules/web.dom.iterable","npm:core-js@0.9.10/library/modules/es6.string.iterator","npm:core-js@0.9.10/library/modules/core.iter-helpers","npm:core-js@0.9.10/library/modules/$"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,require("npm:core-js@0.9.10/library/modules/web.dom.iterable"),require("npm:core-js@0.9.10/library/modules/es6.string.iterator"),require("npm:core-js@0.9.10/library/modules/core.iter-helpers"),n.exports=require("npm:core-js@0.9.10/library/modules/$").core.getIterator,r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/fn/weak-set",["npm:core-js@0.9.10/library/modules/es6.object.to-string","npm:core-js@0.9.10/library/modules/web.dom.iterable","npm:core-js@0.9.10/library/modules/es6.weak-set","npm:core-js@0.9.10/library/modules/$"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,require("npm:core-js@0.9.10/library/modules/es6.object.to-string"),require("npm:core-js@0.9.10/library/modules/web.dom.iterable"),require("npm:core-js@0.9.10/library/modules/es6.weak-set"),n.exports=require("npm:core-js@0.9.10/library/modules/$").core.WeakSet,r.define=i,n.exports}),function(){function t(){}t.amd={},e.register("github:toji/gl-matrix@master",["github:toji/gl-matrix@master/dist/gl-matrix"],!1,function(e,t,n){return function(e){return e}.call(this,e("github:toji/gl-matrix@master/dist/gl-matrix"))})}(),e.register("npm:babel-runtime@5.4.3/core-js/object/keys",["npm:core-js@0.9.10/library/fn/object/keys"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports={"default":require("npm:core-js@0.9.10/library/fn/object/keys"),__esModule:!0},r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/fn/array/from",["npm:core-js@0.9.10/library/modules/es6.string.iterator","npm:core-js@0.9.10/library/modules/es6.array.from","npm:core-js@0.9.10/library/modules/$"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,require("npm:core-js@0.9.10/library/modules/es6.string.iterator"),require("npm:core-js@0.9.10/library/modules/es6.array.from"),n.exports=require("npm:core-js@0.9.10/library/modules/$").core.Array.from,r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/modules/es6.map",["npm:core-js@0.9.10/library/modules/$.collection-strong","npm:core-js@0.9.10/library/modules/$.collection"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:core-js@0.9.10/library/modules/$.collection-strong");return require("npm:core-js@0.9.10/library/modules/$.collection")("Map",{get:function(e){var t=o.getEntry(this,e);return t&&t.v},set:function(e,t){return o.def(this,0===e?0:e,t)}},o,!0),r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/modules/es7.map.to-json",["npm:core-js@0.9.10/library/modules/$.collection-to-json"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,require("npm:core-js@0.9.10/library/modules/$.collection-to-json")("Map"),r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/fn/set",["npm:core-js@0.9.10/library/modules/es6.object.to-string","npm:core-js@0.9.10/library/modules/es6.string.iterator","npm:core-js@0.9.10/library/modules/web.dom.iterable","npm:core-js@0.9.10/library/modules/es6.set","npm:core-js@0.9.10/library/modules/es7.set.to-json","npm:core-js@0.9.10/library/modules/$"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,require("npm:core-js@0.9.10/library/modules/es6.object.to-string"),require("npm:core-js@0.9.10/library/modules/es6.string.iterator"),require("npm:core-js@0.9.10/library/modules/web.dom.iterable"),require("npm:core-js@0.9.10/library/modules/es6.set"),require("npm:core-js@0.9.10/library/modules/es7.set.to-json"),n.exports=require("npm:core-js@0.9.10/library/modules/$").core.Set,r.define=i,n.exports}),e.register("github:mrdoob/stats.js@master",["github:mrdoob/stats.js@master/src/Stats"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=require("github:mrdoob/stats.js@master/src/Stats"),r.define=i,n.exports}),e.register("npm:babel-runtime@5.4.3/core-js/symbol/iterator",["npm:core-js@0.9.10/library/fn/symbol/iterator"],!0,function(require,t,n){
var r=e.global,i=r.define;return r.define=void 0,n.exports={"default":require("npm:core-js@0.9.10/library/fn/symbol/iterator"),__esModule:!0},r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/modules/es6.symbol",["npm:core-js@0.9.10/library/modules/$","npm:core-js@0.9.10/library/modules/$.cof","npm:core-js@0.9.10/library/modules/$.uid","npm:core-js@0.9.10/library/modules/$.def","npm:core-js@0.9.10/library/modules/$.redef","npm:core-js@0.9.10/library/modules/$.keyof","npm:core-js@0.9.10/library/modules/$.enum-keys","npm:core-js@0.9.10/library/modules/$.assert","npm:core-js@0.9.10/library/modules/$.wks"],!0,function(require,t,n){function r(e){var t=D[e]=d.set(j(A.prototype),O,e);return d.DESC&&k&&E(Object.prototype,e,{configurable:!0,set:function(t){w(this,L)&&w(this[L],e)&&(this[L][e]=!1),E(this,e,T(1,t))}}),t}function i(e,t,n){return n&&w(D,t)&&(n.enumerable?(w(e,L)&&e[L][t]&&(e[L][t]=!1),n=j(n,{enumerable:T(0,!1)})):(w(e,L)||E(e,L,T(1,{})),e[L][t]=!0)),E(e,t,n)}function o(e,t){x(e);for(var n,r=y(t=M(t)),o=0,a=r.length;a>o;)i(e,n=r[o++],t[n]);return e}function a(e,t){return void 0===t?j(e):o(j(e),t)}function s(e){var t=R.call(this,e);return t||!w(this,e)||!w(D,e)||w(this,L)&&this[L][e]?t:!0}function u(e,t){var n=_(e=M(e),t);return!n||!w(D,t)||w(e,L)&&e[L][t]||(n.enumerable=!0),n}function c(e){for(var t,n=S(M(e)),r=[],i=0;n.length>i;)w(D,t=n[i++])||t==L||r.push(t);return r}function l(e){for(var t,n=S(M(e)),r=[],i=0;n.length>i;)w(D,t=n[i++])&&r.push(D[t]);return r}var f=e.global,m=f.define;f.define=void 0;var d=require("npm:core-js@0.9.10/library/modules/$"),p=require("npm:core-js@0.9.10/library/modules/$.cof").set,h=require("npm:core-js@0.9.10/library/modules/$.uid"),b=require("npm:core-js@0.9.10/library/modules/$.def"),v=require("npm:core-js@0.9.10/library/modules/$.redef"),g=require("npm:core-js@0.9.10/library/modules/$.keyof"),y=require("npm:core-js@0.9.10/library/modules/$.enum-keys"),x=require("npm:core-js@0.9.10/library/modules/$.assert").obj,w=d.has,j=d.create,_=d.getDesc,E=d.setDesc,T=d.desc,S=d.getNames,M=d.toObject,A=d.g.Symbol,k=!1,O=h("tag"),L=h("hidden"),R={}.propertyIsEnumerable,I={},D={},P=d.isFunction(A);P||(A=function(){if(this instanceof A)throw TypeError("Symbol is not a constructor");return r(h(arguments[0]))},v(A.prototype,"toString",function(){return this[O]}),d.create=a,d.setDesc=i,d.getDesc=u,d.setDescs=o,d.getNames=c,d.getSymbols=l,d.DESC&&d.FW&&v(Object.prototype,"propertyIsEnumerable",s,!0));var z={"for":function(e){return w(I,e+="")?I[e]:I[e]=A(e)},keyFor:function(e){return g(I,e)},useSetter:function(){k=!0},useSimple:function(){k=!1}};return d.each.call("hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),function(e){var t=require("npm:core-js@0.9.10/library/modules/$.wks")(e);z[e]=P?t:r(t)}),k=!0,b(b.G+b.W,{Symbol:A}),b(b.S,"Symbol",z),b(b.S+b.F*!P,"Object",{create:a,defineProperty:i,defineProperties:o,getOwnPropertyDescriptor:u,getOwnPropertyNames:c,getOwnPropertySymbols:l}),p(A,"Symbol"),p(Math,"Math",!0),p(d.g.JSON,"JSON",!0),f.define=m,n.exports}),e.register("npm:es5-ext@0.10.7/math/sign/index",["npm:es5-ext@0.10.7/math/sign/is-implemented","npm:es5-ext@0.10.7/math/sign/shim"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=require("npm:es5-ext@0.10.7/math/sign/is-implemented")()?Math.sign:require("npm:es5-ext@0.10.7/math/sign/shim"),r.define=i,n.exports}),e.register("npm:es5-ext@0.10.7/object/_iterate",["npm:es5-ext@0.10.7/object/is-callable","npm:es5-ext@0.10.7/object/valid-callable","npm:es5-ext@0.10.7/object/valid-value"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:es5-ext@0.10.7/object/is-callable"),a=require("npm:es5-ext@0.10.7/object/valid-callable"),s=require("npm:es5-ext@0.10.7/object/valid-value"),u=Function.prototype.call,c=Object.keys,l=Object.prototype.propertyIsEnumerable;return n.exports=function(e,t){return function(n,r){var i,f=arguments[2],m=arguments[3];return n=Object(s(n)),a(r),i=c(n),m&&i.sort(o(m)?m.bind(n):void 0),i[e](function(e,i){return l.call(n,e)?u.call(r,f,n[e],e,n,i):t})}},r.define=i,n.exports}),e.register("npm:es5-ext@0.10.7/object/keys/index",["npm:es5-ext@0.10.7/object/keys/is-implemented","npm:es5-ext@0.10.7/object/keys/shim"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=require("npm:es5-ext@0.10.7/object/keys/is-implemented")()?Object.keys:require("npm:es5-ext@0.10.7/object/keys/shim"),r.define=i,n.exports}),e.register("npm:es5-ext@0.10.7/function/_define-length",["npm:es5-ext@0.10.7/number/to-pos-integer","npm:es5-ext@0.10.7/object/mixin"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o,a,s,u,c=require("npm:es5-ext@0.10.7/number/to-pos-integer"),l=function(e,t){};try{Object.defineProperty(l,"length",{configurable:!0,writable:!1,enumerable:!1,value:1})}catch(f){}return 1===l.length?(o={configurable:!0,writable:!1,enumerable:!1},a=Object.defineProperty,n.exports=function(e,t){return t=c(t),e.length===t?e:(o.value=t,a(e,"length",o))}):(u=require("npm:es5-ext@0.10.7/object/mixin"),s=function(){var e=[];return function(t){var n,r=0;if(e[t])return e[t];for(n=[];t--;)n.push("a"+(++r).toString(36));return new Function("fn","return function ("+n.join(", ")+") { return fn.apply(this, arguments); };")}}(),n.exports=function(e,t){var n;if(t=c(t),e.length===t)return e;n=s(t)(e);try{u(n,e)}catch(r){}return n}),r.define=i,n.exports}),e.register("npm:es5-ext@0.10.7/string/#/contains/index",["npm:es5-ext@0.10.7/string/#/contains/is-implemented","npm:es5-ext@0.10.7/string/#/contains/shim"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=require("npm:es5-ext@0.10.7/string/#/contains/is-implemented")()?String.prototype.contains:require("npm:es5-ext@0.10.7/string/#/contains/shim"),r.define=i,n.exports}),e.register("npm:event-emitter@0.3.3",["npm:event-emitter@0.3.3/index"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=require("npm:event-emitter@0.3.3/index"),r.define=i,n.exports}),e.register("npm:es6-symbol@2.0.1/validate-symbol",["npm:es6-symbol@2.0.1/is-symbol"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:es6-symbol@2.0.1/is-symbol");return n.exports=function(e){if(!o(e))throw new TypeError(e+" is not a symbol");return e},r.define=i,n.exports}),e.register("npm:es5-ext@0.10.7/function/is-function",["npm:es5-ext@0.10.7/function/noop"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=Object.prototype.toString,a=o.call(require("npm:es5-ext@0.10.7/function/noop"));return n.exports=function(e){return"function"==typeof e&&o.call(e)===a},r.define=i,n.exports}),e.register("npm:memoizee@0.3.8/normalizers/get",["npm:es5-ext@0.10.7/array/#/e-index-of"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:es5-ext@0.10.7/array/#/e-index-of"),a=Object.create;return n.exports=function(){var e=0,t=[],n=a(null);return{get:function(e){var n,r=0,i=t,a=e.length;if(0===a)return i[a]||null;if(i=i[a]){for(;a-1>r;){if(n=o.call(i[0],e[r]),-1===n)return null;i=i[1][n],++r}return n=o.call(i[0],e[r]),-1===n?null:i[1][n]||null}return null},set:function(r){var i,a=0,s=t,u=r.length;if(0===u)s[u]=++e;else{for(s[u]||(s[u]=[[],[]]),s=s[u];u-1>a;)i=o.call(s[0],r[a]),-1===i&&(i=s[0].push(r[a])-1,s[1].push([[],[]])),s=s[1][i],++a;i=o.call(s[0],r[a]),-1===i&&(i=s[0].push(r[a])-1),s[1][i]=++e}return n[e]=r,e},"delete":function(e){var r,i=0,a=t,s=n[e],u=s.length,c=[];if(0===u)delete a[u];else if(a=a[u]){for(;u-1>i;){if(r=o.call(a[0],s[i]),-1===r)return;c.push(a,r),a=a[1][r],++i}if(r=o.call(a[0],s[i]),-1===r)return;for(e=a[1][r],a[0].splice(r,1),a[1].splice(r,1);!a[0].length&&c.length;)r=c.pop(),a=c.pop(),a[0].splice(r,1),a[1].splice(r,1)}delete n[e]},clear:function(){t=[],n=a(null)}}},r.define=i,n.exports}),e.register("npm:next-tick@0.2.2",["npm:next-tick@0.2.2/index"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=require("npm:next-tick@0.2.2/index"),r.define=i,n.exports}),e.register("npm:timers-ext@0.1.0/valid-timeout",["npm:es5-ext@0.10.7/number/to-pos-integer","npm:timers-ext@0.1.0/max-timeout"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:es5-ext@0.10.7/number/to-pos-integer"),a=require("npm:timers-ext@0.1.0/max-timeout");return n.exports=function(e){if(e=o(e),e>a)throw new TypeError(e+" exceeds maximum possible timeout");return e},r.define=i,n.exports}),e.register("npm:lru-queue@0.1.0",["npm:lru-queue@0.1.0/index"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=require("npm:lru-queue@0.1.0/index"),r.define=i,n.exports}),e.register("npm:babel-runtime@5.4.3/core-js/is-iterable",["npm:core-js@0.9.10/library/fn/is-iterable"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports={"default":require("npm:core-js@0.9.10/library/fn/is-iterable"),__esModule:!0},r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/modules/es6.object.assign",["npm:core-js@0.9.10/library/modules/$.def","npm:core-js@0.9.10/library/modules/$.assign"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:core-js@0.9.10/library/modules/$.def");return o(o.S,"Object",{assign:require("npm:core-js@0.9.10/library/modules/$.assign")}),r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/fn/math/log2",["npm:core-js@0.9.10/library/modules/es6.math","npm:core-js@0.9.10/library/modules/$"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,require("npm:core-js@0.9.10/library/modules/es6.math"),n.exports=require("npm:core-js@0.9.10/library/modules/$").core.Math.log2,r.define=i,n.exports}),e.register("npm:babel-runtime@5.4.3/core-js/object/freeze",["npm:core-js@0.9.10/library/fn/object/freeze"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports={"default":require("npm:core-js@0.9.10/library/fn/object/freeze"),__esModule:!0},r.define=i,n.exports}),function(){function t(){}t.amd={},e.register("github:baconjs/bacon.js@0.7.58",["github:baconjs/bacon.js@0.7.58/dist/Bacon"],!1,function(e,t,n){return function(e){return e}.call(this,e("github:baconjs/bacon.js@0.7.58/dist/Bacon"))})}(),e.register("npm:core-js@0.9.10/library/fn/object/create",["npm:core-js@0.9.10/library/modules/$"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:core-js@0.9.10/library/modules/$");return n.exports=function(e,t){return o.create(e,t)},r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/fn/object/get-own-property-descriptor",["npm:core-js@0.9.10/library/modules/$","npm:core-js@0.9.10/library/modules/es6.object.statics-accept-primitives"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:core-js@0.9.10/library/modules/$");return require("npm:core-js@0.9.10/library/modules/es6.object.statics-accept-primitives"),n.exports=function(e,t){return o.getDesc(e,t)},r.define=i,n.exports}),e.register("npm:babel-runtime@5.4.3/helpers/create-class",["npm:babel-runtime@5.4.3/core-js/object/define-property"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:babel-runtime@5.4.3/core-js/object/define-property")["default"];return t["default"]=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),t.__esModule=!0,r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/modules/$.cof",["npm:core-js@0.9.10/library/modules/$","npm:core-js@0.9.10/library/modules/$.wks"],!0,function(require,t,n){function r(e){return u.call(e).slice(8,-1)}var i=e.global,o=i.define;i.define=void 0;var a=require("npm:core-js@0.9.10/library/modules/$"),s=require("npm:core-js@0.9.10/library/modules/$.wks")("toStringTag"),u={}.toString;return r.classof=function(e){var t,n;return void 0==e?void 0===e?"Undefined":"Null":"string"==typeof(n=(t=Object(e))[s])?n:r(t)},r.set=function(e,t,n){e&&!a.has(e=n?e:e.prototype,s)&&a.hide(e,s,t)},n.exports=r,i.define=o,n.exports}),e.register("npm:core-js@0.9.10/library/modules/es6.string.iterator",["npm:core-js@0.9.10/library/modules/$","npm:core-js@0.9.10/library/modules/$.string-at","npm:core-js@0.9.10/library/modules/$.uid","npm:core-js@0.9.10/library/modules/$.iter","npm:core-js@0.9.10/library/modules/$.iter-define"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:core-js@0.9.10/library/modules/$").set,a=require("npm:core-js@0.9.10/library/modules/$.string-at")(!0),s=require("npm:core-js@0.9.10/library/modules/$.uid").safe("iter"),u=require("npm:core-js@0.9.10/library/modules/$.iter"),c=u.step;return require("npm:core-js@0.9.10/library/modules/$.iter-define")(String,"String",function(e){o(this,s,{o:String(e),i:0})},function(){var e,t=this[s],n=t.o,r=t.i;return r>=n.length?c(1):(e=a(n,r),t.i+=e.length,c(0,e))}),r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/modules/web.dom.iterable",["npm:core-js@0.9.10/library/modules/es6.array.iterator","npm:core-js@0.9.10/library/modules/$","npm:core-js@0.9.10/library/modules/$.iter","npm:core-js@0.9.10/library/modules/$.wks"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0,require("npm:core-js@0.9.10/library/modules/es6.array.iterator");var o=require("npm:core-js@0.9.10/library/modules/$"),a=require("npm:core-js@0.9.10/library/modules/$.iter").Iterators,s=require("npm:core-js@0.9.10/library/modules/$.wks")("iterator"),u=a.Array,c=o.g.NodeList;return!o.FW||!c||s in c.prototype||o.hide(c.prototype,s,u),a.NodeList=u,r.define=i,n.exports}),e.register("github:jspm/nodelibs-process@0.1.1/index",["npm:process@0.10.1"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=e._nodeRequire?process:require("npm:process@0.10.1"),r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/modules/es6.weak-map",["npm:core-js@0.9.10/library/modules/$","npm:core-js@0.9.10/library/modules/$.collection-weak","npm:core-js@0.9.10/library/modules/$.collection","npm:core-js@0.9.10/library/modules/$.redef"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:core-js@0.9.10/library/modules/$"),a=require("npm:core-js@0.9.10/library/modules/$.collection-weak"),s=a.leakStore,u=a.ID,c=a.WEAK,l=o.has,f=o.isObject,m=Object.isFrozen||o.core.Object.isFrozen,d={},p=require("npm:core-js@0.9.10/library/modules/$.collection")("WeakMap",{get:function(e){if(f(e)){if(m(e))return s(this).get(e);if(l(e,c))return e[c][this[u]]}},set:function(e,t){return a.def(this,e,t)}},a,!0,!0);return o.FW&&7!=(new p).set((Object.freeze||Object)(d),7).get(d)&&o.each.call(["delete","has","get","set"],function(e){var t=p.prototype[e];require("npm:core-js@0.9.10/library/modules/$.redef")(p.prototype,e,function(n,r){if(f(n)&&m(n)){var i=s(this)[e](n,r);return"set"==e?this:i}return t.call(this,n,r)})}),r.define=i,n.exports}),e.register("npm:babel-runtime@5.4.3/core-js/get-iterator",["npm:core-js@0.9.10/library/fn/get-iterator"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports={"default":require("npm:core-js@0.9.10/library/fn/get-iterator"),__esModule:!0},r.define=i,n.exports}),e.register("npm:babel-runtime@5.4.3/core-js/weak-set",["npm:core-js@0.9.10/library/fn/weak-set"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports={"default":require("npm:core-js@0.9.10/library/fn/weak-set"),__esModule:!0},r.define=i,n.exports}),e.register("npm:babel-runtime@5.4.3/core-js/array/from",["npm:core-js@0.9.10/library/fn/array/from"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports={"default":require("npm:core-js@0.9.10/library/fn/array/from"),__esModule:!0},r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/fn/map",["npm:core-js@0.9.10/library/modules/es6.object.to-string","npm:core-js@0.9.10/library/modules/es6.string.iterator","npm:core-js@0.9.10/library/modules/web.dom.iterable","npm:core-js@0.9.10/library/modules/es6.map","npm:core-js@0.9.10/library/modules/es7.map.to-json","npm:core-js@0.9.10/library/modules/$"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,require("npm:core-js@0.9.10/library/modules/es6.object.to-string"),require("npm:core-js@0.9.10/library/modules/es6.string.iterator"),require("npm:core-js@0.9.10/library/modules/web.dom.iterable"),require("npm:core-js@0.9.10/library/modules/es6.map"),require("npm:core-js@0.9.10/library/modules/es7.map.to-json"),n.exports=require("npm:core-js@0.9.10/library/modules/$").core.Map,r.define=i,n.exports}),e.register("npm:babel-runtime@5.4.3/core-js/set",["npm:core-js@0.9.10/library/fn/set"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports={"default":require("npm:core-js@0.9.10/library/fn/set"),__esModule:!0},r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/fn/symbol/index",["npm:core-js@0.9.10/library/modules/es6.symbol","npm:core-js@0.9.10/library/modules/$"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,require("npm:core-js@0.9.10/library/modules/es6.symbol"),n.exports=require("npm:core-js@0.9.10/library/modules/$").core.Symbol,r.define=i,n.exports}),e.register("npm:es5-ext@0.10.7/number/to-integer",["npm:es5-ext@0.10.7/math/sign/index"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:es5-ext@0.10.7/math/sign/index"),a=Math.abs,s=Math.floor;return n.exports=function(e){return isNaN(e)?0:(e=Number(e),0!==e&&isFinite(e)?o(e)*s(a(e)):e)},r.define=i,n.exports}),e.register("npm:es5-ext@0.10.7/object/for-each",["npm:es5-ext@0.10.7/object/_iterate"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=require("npm:es5-ext@0.10.7/object/_iterate")("forEach"),r.define=i,n.exports}),e.register("npm:es5-ext@0.10.7/object/assign/shim",["npm:es5-ext@0.10.7/object/keys/index","npm:es5-ext@0.10.7/object/valid-value"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:es5-ext@0.10.7/object/keys/index"),a=require("npm:es5-ext@0.10.7/object/valid-value"),s=Math.max;return n.exports=function(e,t){var n,r,i,u=s(arguments.length,2);for(e=Object(a(e)),i=function(r){try{e[r]=t[r]}catch(i){n||(n=i)}},r=1;u>r;++r)t=arguments[r],o(t).forEach(i);if(void 0!==n)throw n;return e},r.define=i,n.exports}),e.register("npm:es5-ext@0.10.7/string/#/contains",["npm:es5-ext@0.10.7/string/#/contains/index"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=require("npm:es5-ext@0.10.7/string/#/contains/index"),r.define=i,n.exports}),e.register("npm:es6-symbol@2.0.1/polyfill",["npm:d@0.1.1","npm:es6-symbol@2.0.1/validate-symbol"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o,a,s=require("npm:d@0.1.1"),u=require("npm:es6-symbol@2.0.1/validate-symbol"),c=Object.create,l=Object.defineProperties,f=Object.defineProperty,m=Object.prototype,d=c(null),p=function(){var e=c(null);return function(t){for(var n,r=0;e[t+(r||"")];)++r;return t+=r||"",e[t]=!0,n="@@"+t,f(m,n,s.gs(null,function(e){f(this,n,s(e))})),n}}();return a=function h(e){if(this instanceof a)throw new TypeError("TypeError: Symbol is not a constructor");return h(e)},n.exports=o=function b(e){var t;if(this instanceof b)throw new TypeError("TypeError: Symbol is not a constructor");return t=c(a.prototype),e=void 0===e?"":String(e),l(t,{__description__:s("",e),__name__:s("",p(e))})},l(o,{"for":s(function(e){return d[e]?d[e]:d[e]=o(String(e))}),keyFor:s(function(e){var t;u(e);for(t in d)if(d[t]===e)return t}),hasInstance:s("",o("hasInstance")),isConcatSpreadable:s("",o("isConcatSpreadable")),iterator:s("",o("iterator")),match:s("",o("match")),replace:s("",o("replace")),search:s("",o("search")),species:s("",o("species")),split:s("",o("split")),toPrimitive:s("",o("toPrimitive")),toStringTag:s("",o("toStringTag")),unscopables:s("",o("unscopables"))}),l(a.prototype,{constructor:s(o),toString:s("",function(){return this.__name__})}),l(o.prototype,{toString:s(function(){return"Symbol ("+u(this).__description__+")"}),valueOf:s(function(){return u(this)})}),f(o.prototype,o.toPrimitive,s("",function(){return u(this)})),f(o.prototype,o.toStringTag,s("c","Symbol")),f(a.prototype,o.toPrimitive,s("c",o.prototype[o.toPrimitive])),f(a.prototype,o.toStringTag,s("c",o.prototype[o.toStringTag])),r.define=i,n.exports}),e.register("npm:memoizee@0.3.8/ext/async",["npm:es5-ext@0.10.7/array/from","npm:es5-ext@0.10.7/object/mixin","npm:es5-ext@0.10.7/function/_define-length","npm:next-tick@0.2.2","npm:memoizee@0.3.8/lib/registered-extensions","github:jspm/nodelibs-process@0.1.1"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,function(e){"use strict";var t=require("npm:es5-ext@0.10.7/array/from"),n=require("npm:es5-ext@0.10.7/object/mixin"),r=require("npm:es5-ext@0.10.7/function/_define-length"),i=require("npm:next-tick@0.2.2"),o=Array.prototype.slice,a=Function.prototype.apply,s=Object.create,u=Object.prototype.hasOwnProperty;require("npm:memoizee@0.3.8/lib/registered-extensions").async=function(e,c){var l,f,m,d=s(null),p=s(null),h=c.memoized,b=c.original;c.memoized=r(function(e){var t=arguments,n=t[t.length-1];return"function"==typeof n&&(l=n,t=o.call(t,0,-1)),h.apply(f=this,m=t)},h);try{n(c.memoized,h)}catch(v){}c.on("get",function(e){var t,n,r;if(l){if(d[e])return"function"==typeof d[e]?d[e]=[d[e],l]:d[e].push(l),void(l=null);t=l,n=f,r=m,l=f=m=null,i(function(){var i;u.call(p,e)?(i=p[e],c.emit("getasync",e,r,n),a.call(t,i.context,i.args)):(l=t,f=n,m=r,h.apply(n,r))})}}),c.original=function(){var e,n,r,o;return l?(e=t(arguments),n=function s(e){var n,r,u=s.id;return null==u?void i(a.bind(s,this,arguments)):(delete s.id,n=d[u],delete d[u],n?(r=t(arguments),c.has(u)&&(e?c["delete"](u):(p[u]={context:this,args:r},c.emit("setasync",u,"function"==typeof n?1:n.length))),"function"==typeof n?o=a.call(n,this,r):n.forEach(function(e){o=a.call(e,this,r)},this),o):void 0)},r=l,l=f=m=null,e.push(n),o=a.call(b,this,e),n.cb=r,l=n,o):a.call(b,this,arguments)},c.on("set",function(e){return l?(d[e]?"function"==typeof d[e]?d[e]=[d[e],l.cb]:d[e].push(l.cb):d[e]=l.cb,delete l.cb,l.id=e,void(l=null)):void c["delete"](e)}),c.on("delete",function(e){var t;u.call(d,e)||p[e]&&(t=p[e],delete p[e],c.emit("deleteasync",e,t))}),c.on("clear",function(){var e=p;p=s(null),c.emit("clearasync",e)})}}(require("github:jspm/nodelibs-process@0.1.1")),r.define=i,n.exports}),e.register("npm:memoizee@0.3.8/ext/max-age",["npm:es5-ext@0.10.7/array/from","npm:es5-ext@0.10.7/function/noop","npm:es5-ext@0.10.7/object/for-each","npm:timers-ext@0.1.0/valid-timeout","npm:memoizee@0.3.8/lib/registered-extensions"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:es5-ext@0.10.7/array/from"),a=require("npm:es5-ext@0.10.7/function/noop"),s=require("npm:es5-ext@0.10.7/object/for-each"),u=require("npm:timers-ext@0.1.0/valid-timeout"),c=require("npm:memoizee@0.3.8/lib/registered-extensions"),l=Math.max,f=Math.min,m=Object.create;return c.maxAge=function(e,t,n){var r,i,d,p;e=u(e),e&&(r=m(null),i=n.async&&c.async?"async":"",t.on("set"+i,function(n){r[n]=setTimeout(function(){t["delete"](n)},e),p&&(p[n]&&clearTimeout(p[n]),p[n]=setTimeout(function(){delete p[n]},d))}),t.on("delete"+i,function(e){clearTimeout(r[e]),delete r[e],p&&(clearTimeout(p[e]),delete p[e])}),n.preFetch&&(d=n.preFetch===!0||isNaN(n.preFetch)?.333:l(f(Number(n.preFetch),1),0),d&&(p={},d=(1-d)*e,t.on("get"+i,function(e,r,i){p[e]||(p[e]=setTimeout(function(){delete p[e],t["delete"](e),n.async&&(r=o(r),r.push(a)),t.memoized.apply(i,r)},0))}))),t.on("clear"+i,function(){s(r,function(e){clearTimeout(e)}),r={},p&&(s(p,function(e){clearTimeout(e)}),p={})}))},r.define=i,n.exports}),e.register("npm:memoizee@0.3.8/ext/max",["npm:es5-ext@0.10.7/number/to-pos-integer","npm:lru-queue@0.1.0","npm:memoizee@0.3.8/lib/registered-extensions"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:es5-ext@0.10.7/number/to-pos-integer"),a=require("npm:lru-queue@0.1.0"),s=require("npm:memoizee@0.3.8/lib/registered-extensions");return s.max=function(e,t,n){var r,i,u;e=o(e),e&&(i=a(e),r=n.async&&s.async?"async":"",t.on("set"+r,u=function(e){e=i.hit(e),void 0!==e&&t["delete"](e)}),t.on("get"+r,u),t.on("delete"+r,i["delete"]),t.on("clear"+r,i.clear))},r.define=i,n.exports}),e.register("npm:babel-runtime@5.4.3/helpers/sliced-to-array",["npm:babel-runtime@5.4.3/core-js/is-iterable","npm:babel-runtime@5.4.3/core-js/get-iterator"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:babel-runtime@5.4.3/core-js/is-iterable")["default"],a=require("npm:babel-runtime@5.4.3/core-js/get-iterator")["default"];return t["default"]=function(e,t){if(Array.isArray(e))return e;if(o(Object(e))){var n=[],r=!0,i=!1,s=void 0;try{for(var u,c=a(e);!(r=(u=c.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(l){i=!0,s=l}finally{try{!r&&c["return"]&&c["return"]()}finally{if(i)throw s}}return n}throw new TypeError("Invalid attempt to destructure non-iterable instance")},t.__esModule=!0,r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/fn/object/assign",["npm:core-js@0.9.10/library/modules/es6.object.assign","npm:core-js@0.9.10/library/modules/$"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,require("npm:core-js@0.9.10/library/modules/es6.object.assign"),n.exports=require("npm:core-js@0.9.10/library/modules/$").core.Object.assign,r.define=i,n.exports}),e.register("npm:babel-runtime@5.4.3/core-js/math/log2",["npm:core-js@0.9.10/library/fn/math/log2"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports={"default":require("npm:core-js@0.9.10/library/fn/math/log2"),__esModule:!0},r.define=i,n.exports}),e.register("npm:babel-runtime@5.4.3/core-js/object/create",["npm:core-js@0.9.10/library/fn/object/create"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports={"default":require("npm:core-js@0.9.10/library/fn/object/create"),__esModule:!0},r.define=i,n.exports}),e.register("npm:babel-runtime@5.4.3/core-js/object/get-own-property-descriptor",["npm:core-js@0.9.10/library/fn/object/get-own-property-descriptor"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports={"default":require("npm:core-js@0.9.10/library/fn/object/get-own-property-descriptor"),__esModule:!0},r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/modules/es6.object.to-string",["npm:core-js@0.9.10/library/modules/$.cof","npm:core-js@0.9.10/library/modules/$.wks","npm:core-js@0.9.10/library/modules/$","npm:core-js@0.9.10/library/modules/$.redef"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:core-js@0.9.10/library/modules/$.cof"),a={};return a[require("npm:core-js@0.9.10/library/modules/$.wks")("toStringTag")]="z",require("npm:core-js@0.9.10/library/modules/$").FW&&"z"!=o(a)&&require("npm:core-js@0.9.10/library/modules/$.redef")(Object.prototype,"toString",function(){return"[object "+o.classof(this)+"]"},!0),r.define=i,n.exports}),e.register("github:jspm/nodelibs-process@0.1.1",["github:jspm/nodelibs-process@0.1.1/index"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=require("github:jspm/nodelibs-process@0.1.1/index"),r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/fn/weak-map",["npm:core-js@0.9.10/library/modules/es6.object.to-string","npm:core-js@0.9.10/library/modules/es6.array.iterator","npm:core-js@0.9.10/library/modules/es6.weak-map","npm:core-js@0.9.10/library/modules/$"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,require("npm:core-js@0.9.10/library/modules/es6.object.to-string"),require("npm:core-js@0.9.10/library/modules/es6.array.iterator"),require("npm:core-js@0.9.10/library/modules/es6.weak-map"),n.exports=require("npm:core-js@0.9.10/library/modules/$").core.WeakMap,r.define=i,n.exports}),e.register("npm:babel-runtime@5.4.3/helpers/to-consumable-array",["npm:babel-runtime@5.4.3/core-js/array/from"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:babel-runtime@5.4.3/core-js/array/from")["default"];return t["default"]=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return o(e)},t.__esModule=!0,r.define=i,n.exports}),e.register("npm:babel-runtime@5.4.3/core-js/map",["npm:core-js@0.9.10/library/fn/map"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports={"default":require("npm:core-js@0.9.10/library/fn/map"),__esModule:!0},r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/fn/symbol",["npm:core-js@0.9.10/library/fn/symbol/index"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=require("npm:core-js@0.9.10/library/fn/symbol/index"),r.define=i,n.exports}),e.register("npm:es5-ext@0.10.7/number/to-pos-integer",["npm:es5-ext@0.10.7/number/to-integer"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:es5-ext@0.10.7/number/to-integer"),a=Math.max;return n.exports=function(e){return a(0,o(e))},r.define=i,n.exports}),e.register("npm:es5-ext@0.10.7/object/assign/index",["npm:es5-ext@0.10.7/object/assign/is-implemented","npm:es5-ext@0.10.7/object/assign/shim"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=require("npm:es5-ext@0.10.7/object/assign/is-implemented")()?Object.assign:require("npm:es5-ext@0.10.7/object/assign/shim"),r.define=i,n.exports}),e.register("npm:d@0.1.1/index",["npm:es5-ext@0.10.7/object/assign","npm:es5-ext@0.10.7/object/normalize-options","npm:es5-ext@0.10.7/object/is-callable","npm:es5-ext@0.10.7/string/#/contains"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o,a=require("npm:es5-ext@0.10.7/object/assign"),s=require("npm:es5-ext@0.10.7/object/normalize-options"),u=require("npm:es5-ext@0.10.7/object/is-callable"),c=require("npm:es5-ext@0.10.7/string/#/contains");return o=n.exports=function(e,t){var n,r,i,o,u;return arguments.length<2||"string"!=typeof e?(o=t,t=e,e=null):o=arguments[2],null==e?(n=i=!0,r=!1):(n=c.call(e,"c"),r=c.call(e,"e"),i=c.call(e,"w")),u={value:t,configurable:n,enumerable:r,writable:i},o?a(s(o),u):u},o.gs=function(e,t,n){var r,i,o,l;return"string"!=typeof e?(o=n,n=t,t=e,e=null):o=arguments[3],null==t?t=void 0:u(t)?null==n?n=void 0:u(n)||(o=n,n=void 0):(o=t,t=n=void 0),null==e?(r=!0,i=!1):(r=c.call(e,"c"),i=c.call(e,"e")),l={get:t,set:n,configurable:r,enumerable:i},o?a(s(o),l):l},r.define=i,n.exports}),e.register("npm:es6-symbol@2.0.1/index",["npm:es6-symbol@2.0.1/is-implemented","npm:es6-symbol@2.0.1/polyfill"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=require("npm:es6-symbol@2.0.1/is-implemented")()?Symbol:require("npm:es6-symbol@2.0.1/polyfill"),r.define=i,n.exports}),e.register("npm:babel-runtime@5.4.3/core-js/object/assign",["npm:core-js@0.9.10/library/fn/object/assign"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports={"default":require("npm:core-js@0.9.10/library/fn/object/assign"),__esModule:!0},r.define=i,n.exports}),e.register("npm:babel-runtime@5.4.3/helpers/inherits",["npm:babel-runtime@5.4.3/core-js/object/create"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:babel-runtime@5.4.3/core-js/object/create")["default"];return t["default"]=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);
e.prototype=o(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},t.__esModule=!0,r.define=i,n.exports}),e.register("npm:babel-runtime@5.4.3/helpers/get",["npm:babel-runtime@5.4.3/core-js/object/get-own-property-descriptor"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:babel-runtime@5.4.3/core-js/object/get-own-property-descriptor")["default"];return t["default"]=function(e,t,n){for(var r=!0;r;){var i=e,a=t,s=n;u=l=c=void 0,r=!1;var u=o(i,a);if(void 0!==u){if("value"in u)return u.value;var c=u.get;return void 0===c?void 0:c.call(s)}var l=Object.getPrototypeOf(i);if(null===l)return void 0;e=l,t=a,n=s,r=!0}},t.__esModule=!0,r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/modules/$.task",["npm:core-js@0.9.10/library/modules/$","npm:core-js@0.9.10/library/modules/$.ctx","npm:core-js@0.9.10/library/modules/$.cof","npm:core-js@0.9.10/library/modules/$.invoke","npm:core-js@0.9.10/library/modules/$.dom-create","github:jspm/nodelibs-process@0.1.1"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,function(e){"use strict";function t(){var e=+this;if(s.has(w,e)){var t=w[e];delete w[e],t()}}function r(e){t.call(e.data)}var i,o,a,s=require("npm:core-js@0.9.10/library/modules/$"),u=require("npm:core-js@0.9.10/library/modules/$.ctx"),c=require("npm:core-js@0.9.10/library/modules/$.cof"),l=require("npm:core-js@0.9.10/library/modules/$.invoke"),f=require("npm:core-js@0.9.10/library/modules/$.dom-create"),m=s.g,d=s.isFunction,p=s.html,e=m.process,h=m.setImmediate,b=m.clearImmediate,v=m.postMessage,g=m.addEventListener,y=m.MessageChannel,x=0,w={},j="onreadystatechange";d(h)&&d(b)||(h=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return w[++x]=function(){l(d(e)?e:Function(e),t)},i(x),x},b=function(e){delete w[e]},"process"==c(e)?i=function(n){e.nextTick(u(t,n,1))}:g&&d(v)&&!m.importScripts?(i=function(e){v(e,"*")},g("message",r,!1)):d(y)?(o=new y,a=o.port2,o.port1.onmessage=r,i=u(a.postMessage,a,1)):i=j in f("script")?function(e){p.appendChild(f("script"))[j]=function(){p.removeChild(this),t.call(e)}}:function(e){setTimeout(u(t,e,1),0)}),n.exports={set:h,clear:b}}(require("github:jspm/nodelibs-process@0.1.1")),r.define=i,n.exports}),e.register("npm:babel-runtime@5.4.3/core-js/weak-map",["npm:core-js@0.9.10/library/fn/weak-map"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports={"default":require("npm:core-js@0.9.10/library/fn/weak-map"),__esModule:!0},r.define=i,n.exports}),e.register("npm:babel-runtime@5.4.3/core-js/symbol",["npm:core-js@0.9.10/library/fn/symbol"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports={"default":require("npm:core-js@0.9.10/library/fn/symbol"),__esModule:!0},r.define=i,n.exports}),e.register("npm:memoizee@0.3.8/lib/resolve-length",["npm:es5-ext@0.10.7/number/to-pos-integer"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:es5-ext@0.10.7/number/to-pos-integer");return n.exports=function(e,t,n){var r;return isNaN(e)?(r=t,r>=0?n&&r?r-1:r:1):e===!1?!1:o(e)},r.define=i,n.exports}),e.register("npm:es5-ext@0.10.7/error/custom",["npm:es5-ext@0.10.7/object/assign/index"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:es5-ext@0.10.7/object/assign/index"),a=Error.captureStackTrace;return t=n.exports=function(e){var n=new Error,r=arguments[1],i=arguments[2];return null==i&&r&&"object"==typeof r&&(i=r,r=null),null!=i&&o(n,i),n.message=String(e),null!=r&&(n.code=String(r)),a&&a(n,t),n},r.define=i,n.exports}),e.register("npm:d@0.1.1",["npm:d@0.1.1/index"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=require("npm:d@0.1.1/index"),r.define=i,n.exports}),e.register("npm:es6-symbol@2.0.1",["npm:es6-symbol@2.0.1/index"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=require("npm:es6-symbol@2.0.1/index"),r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/modules/es6.promise",["npm:core-js@0.9.10/library/modules/$","npm:core-js@0.9.10/library/modules/$.ctx","npm:core-js@0.9.10/library/modules/$.cof","npm:core-js@0.9.10/library/modules/$.def","npm:core-js@0.9.10/library/modules/$.assert","npm:core-js@0.9.10/library/modules/$.for-of","npm:core-js@0.9.10/library/modules/$.set-proto","npm:core-js@0.9.10/library/modules/$.species","npm:core-js@0.9.10/library/modules/$.wks","npm:core-js@0.9.10/library/modules/$.uid","npm:core-js@0.9.10/library/modules/$.task","npm:core-js@0.9.10/library/modules/$.mix","npm:core-js@0.9.10/library/modules/$.iter-detect","github:jspm/nodelibs-process@0.1.1"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,function(e){"use strict";function t(e){var t=E(e)[h];return void 0!=t?t:e}function n(e){var t;return j(e)&&(t=e.then),w(t)?t:!1}function r(e){var t=e.c;t.length&&y(function(){function r(t){var r,a,s=o?t.ok:t.fail;try{s?(o||(e.h=!0),r=s===!0?i:s(i),r===t.P?t.rej(TypeError("Promise-chain cycle")):(a=n(r))?a.call(r,t.res,t.rej):t.res(r)):t.rej(i)}catch(u){t.rej(u)}}for(var i=e.v,o=1==e.s,a=0;t.length>a;)r(t[a++]);t.length=0})}function i(e){var t,n=e[b],r=n.a||n.c,o=0;if(n.h)return!1;for(;r.length>o;)if(t=r[o++],t.fail||!i(t.P))return!1;return!0}function o(t){var n,o=this;o.d||(o.d=!0,o=o.r||o,o.v=t,o.s=2,o.a=o.c.slice(),setTimeout(function(){y(function(){i(n=o.p)&&("process"==c(e)?e.emit("unhandledRejection",t,n):g.console&&w(console.error)&&console.error("Unhandled promise rejection",t)),o.a=void 0})},1),r(o))}function a(e){var t,i,s=this;if(!s.d){s.d=!0,s=s.r||s;try{(t=n(e))?(i={r:s,d:!1},t.call(e,u(a,i,1),u(o,i,1))):(s.v=e,s.s=1,r(s))}catch(c){o.call(i||{r:s,d:!1},c)}}}var s=require("npm:core-js@0.9.10/library/modules/$"),u=require("npm:core-js@0.9.10/library/modules/$.ctx"),c=require("npm:core-js@0.9.10/library/modules/$.cof"),l=require("npm:core-js@0.9.10/library/modules/$.def"),f=require("npm:core-js@0.9.10/library/modules/$.assert"),m=require("npm:core-js@0.9.10/library/modules/$.for-of"),d=require("npm:core-js@0.9.10/library/modules/$.set-proto").set,p=require("npm:core-js@0.9.10/library/modules/$.species"),h=require("npm:core-js@0.9.10/library/modules/$.wks")("species"),b=require("npm:core-js@0.9.10/library/modules/$.uid").safe("record"),v="Promise",g=s.g,e=g.process,y=e&&e.nextTick||require("npm:core-js@0.9.10/library/modules/$.task").set,x=g[v],w=s.isFunction,j=s.isObject,_=f.fn,E=f.obj,T=function(){function e(t){var n=new x(t);return d(n,e.prototype),n}var t,n=!1;try{n=w(x)&&w(x.resolve)&&x.resolve(t=new x(function(){}))==t,d(e,x),e.prototype=s.create(x.prototype,{constructor:{value:e}}),e.resolve(5).then(function(){})instanceof e||(n=!1)}catch(r){n=!1}return n}();T||(x=function(e){_(e);var t={p:f.inst(this,x,v),c:[],a:void 0,s:0,d:!1,v:void 0,h:!1};s.hide(this,b,t);try{e(u(a,t,1),u(o,t,1))}catch(n){o.call(t,n)}},require("npm:core-js@0.9.10/library/modules/$.mix")(x.prototype,{then:function(e,t){var n=E(E(this).constructor)[h],i={ok:w(e)?e:!0,fail:w(t)?t:!1},o=i.P=new(void 0!=n?n:x)(function(e,t){i.res=_(e),i.rej=_(t)}),a=this[b];return a.c.push(i),a.a&&a.a.push(i),a.s&&r(a),o},"catch":function(e){return this.then(void 0,e)}})),l(l.G+l.W+l.F*!T,{Promise:x}),c.set(x,v),p(x),p(s.core[v]),l(l.S+l.F*!T,v,{reject:function(e){return new(t(this))(function(t,n){n(e)})},resolve:function(e){return j(e)&&b in e&&s.getProto(e)===this.prototype?e:new(t(this))(function(t){t(e)})}}),l(l.S+l.F*!(T&&require("npm:core-js@0.9.10/library/modules/$.iter-detect")(function(e){x.all(e)["catch"](function(){})})),v,{all:function(e){var n=t(this),r=[];return new n(function(t,i){m(e,!1,r.push,r);var o=r.length,a=Array(o);o?s.each.call(r,function(e,r){n.resolve(e).then(function(e){a[r]=e,--o||t(a)},i)}):t(a)})},race:function(e){var n=t(this);return new n(function(t,r){m(e,!1,function(e){n.resolve(e).then(t,r)})})}})}(require("github:jspm/nodelibs-process@0.1.1")),r.define=i,n.exports}),e.register("npm:babel-runtime@5.4.3/regenerator/runtime",["npm:babel-runtime@5.4.3/core-js/symbol","npm:babel-runtime@5.4.3/core-js/symbol/iterator","npm:babel-runtime@5.4.3/core-js/object/create","npm:babel-runtime@5.4.3/core-js/promise"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:babel-runtime@5.4.3/core-js/symbol")["default"],a=require("npm:babel-runtime@5.4.3/core-js/symbol/iterator")["default"],s=require("npm:babel-runtime@5.4.3/core-js/object/create")["default"],u=require("npm:babel-runtime@5.4.3/core-js/promise")["default"];return!function(e){"use strict";function t(e,t,n,r){var o=s((t||i).prototype);return o._invoke=f(e,n||null,new h(r||[])),o}function r(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}function i(){}function c(){}function l(){}function f(e,t,n){var i=_;return function(o,a){if(i===T)throw new Error("Generator is already running");if(i===S)return v();for(;;){var s=n.delegate;if(s){if("return"===o||"throw"===o&&s.iterator[o]===g){n.delegate=null;var u=s.iterator["return"];if(u){var c=r(u,s.iterator,a);if("throw"===c.type){o="throw",a=c.arg;continue}}if("return"===o)continue}var c=r(s.iterator[o],s.iterator,a);if("throw"===c.type){n.delegate=null,o="throw",a=c.arg;continue}o="next",a=g;var l=c.arg;if(!l.done)return i=E,l;n[s.resultName]=l.value,n.next=s.nextLoc,n.delegate=null}if("next"===o)i===E?n.sent=a:delete n.sent;else if("throw"===o){if(i===_)throw i=S,a;n.dispatchException(a)&&(o="next",a=g)}else"return"===o&&n.abrupt("return",a);i=T;var c=r(e,t,n);if("normal"===c.type){i=n.done?S:E;var l={value:c.arg,done:n.done};if(c.arg!==M)return l;n.delegate&&"next"===o&&(a=g)}else"throw"===c.type&&(i=S,o="throw",a=c.arg)}}}function m(e){A[e]=function(t){return this._invoke(e,t)}}function d(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function p(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function h(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(d,this),this.reset()}function b(e){if(e){var t=e[x];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function i(){for(;++n<e.length;)if(y.call(e,n))return i.value=e[n],i.done=!1,i;return i.value=g,i.done=!0,i};return r.next=r}}return{next:v}}function v(){return{value:g,done:!0}}var g,y=Object.prototype.hasOwnProperty,x="function"==typeof o&&a||"@@iterator",w="object"==typeof n,j=e.regeneratorRuntime;if(j)return void(w&&(n.exports=j));j=e.regeneratorRuntime=w?n.exports:{},j.wrap=t;var _="suspendedStart",E="suspendedYield",T="executing",S="completed",M={},A=l.prototype=i.prototype;c.prototype=A.constructor=l,l.constructor=c,c.displayName="GeneratorFunction",j.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return t?t===c||"GeneratorFunction"===(t.displayName||t.name):!1},j.mark=function(e){return e.__proto__=l,e.prototype=s(A),e},j.async=function(e,n,i,o){return new u(function(a,s){function c(e,t){var n=r(l[e],l,t);if("throw"===n.type)return void s(n.arg);var i=n.arg;i.done?a(i.value):u.resolve(i.value).then(f,m)}var l=t(e,n,i,o),f=c.bind(l,"next"),m=c.bind(l,"throw");f()})},m("next"),m("throw"),m("return"),A[x]=function(){return this},A.toString=function(){return"[object Generator]"},j.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},j.values=b,h.prototype={constructor:h,reset:function(){this.prev=0,this.next=0,this.sent=g,this.done=!1,this.delegate=null,this.tryEntries.forEach(p);for(var e,t=0;y.call(this,e="t"+t)||20>t;++t)this[e]=null},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,r){return o.type="throw",o.arg=e,n.next=t,!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=y.call(i,"catchLoc"),s=y.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&y.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?this.next=i.finallyLoc:this.complete(o),M},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=e.arg,this.next="end"):"normal"===e.type&&t&&(this.next=t),M},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc)}},"catch":function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;p(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:b(e),resultName:t,nextLoc:n},M}}}("object"==typeof r?r:"object"==typeof window?window:"object"==typeof self?self:void 0),r.define=i,n.exports}),e.register("npm:es5-ext@0.10.7/array/from/shim",["npm:es6-symbol@2.0.1","npm:es5-ext@0.10.7/function/is-arguments","npm:es5-ext@0.10.7/function/is-function","npm:es5-ext@0.10.7/number/to-pos-integer","npm:es5-ext@0.10.7/object/valid-callable","npm:es5-ext@0.10.7/object/valid-value","npm:es5-ext@0.10.7/string/is-string"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:es6-symbol@2.0.1").iterator,a=require("npm:es5-ext@0.10.7/function/is-arguments"),s=require("npm:es5-ext@0.10.7/function/is-function"),u=require("npm:es5-ext@0.10.7/number/to-pos-integer"),c=require("npm:es5-ext@0.10.7/object/valid-callable"),l=require("npm:es5-ext@0.10.7/object/valid-value"),f=require("npm:es5-ext@0.10.7/string/is-string"),m=Array.isArray,d=Function.prototype.call,p={configurable:!0,enumerable:!0,writable:!0,value:null},h=Object.defineProperty;return n.exports=function(e){var t,n,r,i,b,v,g,y,x,w,j=arguments[1],_=arguments[2];if(e=Object(l(e)),null!=j&&c(j),this&&this!==Array&&s(this))t=this;else{if(!j){if(a(e))return b=e.length,1!==b?Array.apply(null,e):(i=new Array(1),i[0]=e[0],i);if(m(e)){for(i=new Array(b=e.length),n=0;b>n;++n)i[n]=e[n];return i}}i=[]}if(!m(e))if(void 0!==(x=e[o])){for(g=c(x).call(e),t&&(i=new t),y=g.next(),n=0;!y.done;)w=j?d.call(j,_,y.value,n):y.value,t?(p.value=w,h(i,n,p)):i[n]=w,y=g.next(),++n;b=n}else if(f(e)){for(b=e.length,t&&(i=new t),n=0,r=0;b>n;++n)w=e[n],b>n+1&&(v=w.charCodeAt(0),v>=55296&&56319>=v&&(w+=e[++n])),w=j?d.call(j,_,w,r):w,t?(p.value=w,h(i,r,p)):i[r]=w,++r;b=r}if(void 0===b)for(b=u(e.length),t&&(i=new t(b)),n=0;b>n;++n)w=j?d.call(j,_,e[n],n):e[n],t?(p.value=w,h(i,n,p)):i[n]=w;return t&&(p.value=null,i.length=b),i},r.define=i,n.exports}),e.register("npm:core-js@0.9.10/library/fn/promise",["npm:core-js@0.9.10/library/modules/es6.object.to-string","npm:core-js@0.9.10/library/modules/es6.string.iterator","npm:core-js@0.9.10/library/modules/web.dom.iterable","npm:core-js@0.9.10/library/modules/es6.promise","npm:core-js@0.9.10/library/modules/$"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,require("npm:core-js@0.9.10/library/modules/es6.object.to-string"),require("npm:core-js@0.9.10/library/modules/es6.string.iterator"),require("npm:core-js@0.9.10/library/modules/web.dom.iterable"),require("npm:core-js@0.9.10/library/modules/es6.promise"),n.exports=require("npm:core-js@0.9.10/library/modules/$").core.Promise,r.define=i,n.exports}),e.register("npm:babel-runtime@5.4.3/regenerator/index",["npm:babel-runtime@5.4.3/regenerator/runtime"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o="object"==typeof r?r:"object"==typeof window?window:"object"==typeof self?self:this,a=o.regeneratorRuntime&&Object.getOwnPropertyNames(o).indexOf("regeneratorRuntime")>=0,s=a&&o.regeneratorRuntime;return delete o.regeneratorRuntime,n.exports=require("npm:babel-runtime@5.4.3/regenerator/runtime"),a?o.regeneratorRuntime=s:delete o.regeneratorRuntime,n.exports={"default":n.exports,__esModule:!0},r.define=i,n.exports}),e.register("npm:es5-ext@0.10.7/array/from/index",["npm:es5-ext@0.10.7/array/from/is-implemented","npm:es5-ext@0.10.7/array/from/shim"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=require("npm:es5-ext@0.10.7/array/from/is-implemented")()?Array.from:require("npm:es5-ext@0.10.7/array/from/shim"),r.define=i,n.exports}),e.register("npm:babel-runtime@5.4.3/core-js/promise",["npm:core-js@0.9.10/library/fn/promise"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports={"default":require("npm:core-js@0.9.10/library/fn/promise"),__esModule:!0},r.define=i,n.exports}),e.register("npm:babel-runtime@5.4.3/regenerator",["npm:babel-runtime@5.4.3/regenerator/index"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=require("npm:babel-runtime@5.4.3/regenerator/index"),r.define=i,n.exports}),e.register("npm:es5-ext@0.10.7/array/to-array",["npm:es5-ext@0.10.7/array/from/index"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:es5-ext@0.10.7/array/from/index"),a=Array.isArray;return n.exports=function(e){return a(e)?e:o(e)},r.define=i,n.exports}),e.register("npm:memoizee@0.3.8/lib/resolve-resolve",["npm:es5-ext@0.10.7/array/to-array","npm:es5-ext@0.10.7/object/valid-callable"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o,a=require("npm:es5-ext@0.10.7/array/to-array"),s=require("npm:es5-ext@0.10.7/object/valid-callable"),u=Array.prototype.slice;return o=function(e){return this.map(function(t,n){return t?t(e[n]):e[n]}).concat(u.call(e,this.length))},n.exports=function(e){return e=a(e),e.forEach(function(e){null!=e&&s(e)}),o.bind(e)},r.define=i,n.exports}),e.register("npm:memoizee@0.3.8/lib/configure-map",["npm:es5-ext@0.10.7/error/custom","npm:es5-ext@0.10.7/function/_define-length","npm:d@0.1.1","npm:event-emitter@0.3.3","npm:memoizee@0.3.8/lib/resolve-resolve","npm:memoizee@0.3.8/lib/resolve-normalize"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:es5-ext@0.10.7/error/custom"),a=require("npm:es5-ext@0.10.7/function/_define-length"),s=require("npm:d@0.1.1"),u=require("npm:event-emitter@0.3.3").methods,c=require("npm:memoizee@0.3.8/lib/resolve-resolve"),l=require("npm:memoizee@0.3.8/lib/resolve-normalize"),f=Function.prototype.apply,m=Function.prototype.call,d=Object.create,p=Object.prototype.hasOwnProperty,h=Object.defineProperties,b=u.on,v=u.emit;return n.exports=function(e,t,n){var r,i,u,g,y,x,w,j,_,E,T,S,M,A=d(null);return i=t!==!1?t:isNaN(e.length)?1:e.length,n.normalizer&&(j=l(n.normalizer),u=j.get,g=j.set,y=j["delete"],x=j.clear),null!=n.resolvers&&(M=c(n.resolvers)),S=u?a(function(t){var n,i,a=arguments;if(M&&(a=M(a)),n=u(a),null!==n&&p.call(A,n))return _&&r.emit("get",n,a,this),A[n];if(i=1===a.length?m.call(e,this,t):f.call(e,this,a),null===n){if(n=u(a),null!==n)throw o("Circular invocation","CIRCULAR_INVOCATION");n=g(a)}else if(p.call(A,n))throw o("Circular invocation","CIRCULAR_INVOCATION");return A[n]=i,E&&r.emit("set",n),i},i):0===t?function(){var t;if(p.call(A,"data"))return _&&r.emit("get","data",arguments,this),A.data;if(t=arguments.length?f.call(e,this,arguments):m.call(e,this),p.call(A,"data"))throw o("Circular invocation","CIRCULAR_INVOCATION");return A.data=t,E&&r.emit("set","data"),t}:function(t){var n,i,a=arguments;if(M&&(a=M(arguments)),i=String(a[0]),p.call(A,i))return _&&r.emit("get",i,a,this),A[i];if(n=1===a.length?m.call(e,this,a[0]):f.call(e,this,a),p.call(A,i))throw o("Circular invocation","CIRCULAR_INVOCATION");return A[i]=n,E&&r.emit("set",i),n},r={original:e,memoized:S,get:function(e){return M&&(e=M(e)),u?u(e):String(e[0])},has:function(e){return p.call(A,e)},"delete":function(e){var t;p.call(A,e)&&(y&&y(e),t=A[e],delete A[e],T&&r.emit("delete",e,t))},clear:function(){var e=A;x&&x(),A=d(null),r.emit("clear",e)},on:function(e,t){return"get"===e?_=!0:"set"===e?E=!0:"delete"===e&&(T=!0),b.call(this,e,t)},emit:v,updateEnv:function(){e=r.original}},w=u?a(function(e){var t,n=arguments;M&&(n=M(n)),t=u(n),null!==t&&r["delete"](t)},i):0===t?function(){return r["delete"]("data")}:function(e){return M&&(e=M(arguments)[0]),r["delete"](e)},h(S,{__memoized__:s(!0),"delete":s(w),clear:s(r.clear)}),r},r.define=i,n.exports}),e.register("npm:memoizee@0.3.8/plain",["npm:es5-ext@0.10.7/object/valid-callable","npm:es5-ext@0.10.7/object/for-each","npm:memoizee@0.3.8/lib/registered-extensions","npm:memoizee@0.3.8/lib/configure-map","npm:memoizee@0.3.8/lib/resolve-length"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:es5-ext@0.10.7/object/valid-callable"),a=require("npm:es5-ext@0.10.7/object/for-each"),s=require("npm:memoizee@0.3.8/lib/registered-extensions"),u=require("npm:memoizee@0.3.8/lib/configure-map"),c=require("npm:memoizee@0.3.8/lib/resolve-length"),l=Object.prototype.hasOwnProperty;return n.exports=function f(e){var t,n,r;return o(e),t=Object(arguments[1]),l.call(e,"__memoized__")&&!t.force?e:(n=c(t.length,e.length,t.async&&s.async),r=u(e,n,t),a(s,function(e,n){t[n]&&e(t[n],r,t)}),f.__profiler__&&f.__profiler__(r),r.updateEnv(),r.memoized)},r.define=i,n.exports}),e.register("npm:memoizee@0.3.8/index",["npm:es5-ext@0.10.7/object/normalize-options","npm:memoizee@0.3.8/lib/resolve-length","npm:memoizee@0.3.8/plain","npm:memoizee@0.3.8/normalizers/primitive","npm:memoizee@0.3.8/normalizers/get-primitive-fixed","npm:memoizee@0.3.8/normalizers/get","npm:memoizee@0.3.8/normalizers/get-1","npm:memoizee@0.3.8/normalizers/get-fixed","npm:memoizee@0.3.8/ext/async","npm:memoizee@0.3.8/ext/dispose","npm:memoizee@0.3.8/ext/max-age","npm:memoizee@0.3.8/ext/max","npm:memoizee@0.3.8/ext/ref-counter"],!0,function(require,t,n){var r=e.global,i=r.define;r.define=void 0;var o=require("npm:es5-ext@0.10.7/object/normalize-options"),a=require("npm:memoizee@0.3.8/lib/resolve-length"),s=require("npm:memoizee@0.3.8/plain");return n.exports=function(e){var t,n=o(arguments[1]);return n.normalizer||(t=n.length=a(n.length,e.length,n.async),0!==t&&(n.primitive?t===!1?n.normalizer=require("npm:memoizee@0.3.8/normalizers/primitive"):t>1&&(n.normalizer=require("npm:memoizee@0.3.8/normalizers/get-primitive-fixed")(t)):t===!1?n.normalizer=require("npm:memoizee@0.3.8/normalizers/get")():1===t?n.normalizer=require("npm:memoizee@0.3.8/normalizers/get-1")():n.normalizer=require("npm:memoizee@0.3.8/normalizers/get-fixed")(t))),n.async&&require("npm:memoizee@0.3.8/ext/async"),n.dispose&&require("npm:memoizee@0.3.8/ext/dispose"),n.maxAge&&require("npm:memoizee@0.3.8/ext/max-age"),n.max&&require("npm:memoizee@0.3.8/ext/max"),n.refCounter&&require("npm:memoizee@0.3.8/ext/ref-counter"),s(e,n)},r.define=i,n.exports}),e.register("npm:memoizee@0.3.8",["npm:memoizee@0.3.8/index"],!0,function(require,t,n){var r=e.global,i=r.define;return r.define=void 0,n.exports=require("npm:memoizee@0.3.8/index"),r.define=i,n.exports}),e.register("github:maxdavidson/tribus@master/extra/bounding-box",["npm:babel-runtime@5.4.3/helpers/create-class","npm:babel-runtime@5.4.3/helpers/class-call-check","npm:babel-runtime@5.4.3/core-js/array/from"],function(e){var t,n,r,i,o;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){r=e["default"]}],execute:function(){"use strict";i=new Float64Array([1/0,-(1/0),1/0,-(1/0),1/0,-(1/0)]),o=function(){function e(){n(this,e),this.points=new Float64Array(24),this.intervals=new Float64Array(6),this.center=new Float64Array(3)}return t(e,[{key:"toString",value:function(){return"("+r(this.intervals,function(e){return e.toFixed(2)}).join(", ")+")"}},{key:"resetIntervals",value:function(){this.intervals.set(i)}},{key:"expandIntervals",value:function(e){for(var t=void 0===arguments[1]?3:arguments[1],n=this.intervals,r=0,i=e.length;i>r;r+=t){var o=e[r],a=e[r+1],s=e[r+2];o<n[0]?n[0]=o:o>n[1]&&(n[1]=o),a<n[2]?n[2]=a:a>n[3]&&(n[3]=a),s<n[4]?n[4]=s:s>n[5]&&(n[5]=s)}}},{key:"expandFromIntervals",value:function(e){var t=this.intervals;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1]),e[2]<t[2]&&(t[2]=e[2]),e[3]>t[3]&&(t[3]=e[3]),e[4]<t[4]&&(t[4]=e[4]),e[5]>t[5]&&(t[5]=e[5])}},{key:"computePoints",value:function(){var e=this.points,t=this.center,n=this.intervals;e[0]=n[0],e[1]=n[2],e[2]=n[4],e[3]=n[0],e[4]=n[2],e[5]=n[5],e[6]=n[0],e[7]=n[3],e[8]=n[4],e[9]=n[0],e[10]=n[3],e[11]=n[5],e[12]=n[1],e[13]=n[2],e[14]=n[4],e[15]=n[1],e[16]=n[2],e[17]=n[5],e[18]=n[1],e[19]=n[3],e[20]=n[4],e[21]=n[1],e[22]=n[3],e[23]=n[5],t[0]=(n[0]+n[1])/2,t[1]=(n[2]+n[3])/2,t[2]=(n[4]+n[5])/2}}]),e}(),e("default",o)}}}),e.register("github:maxdavidson/tribus@master/camera/perspective-camera",["npm:babel-runtime@5.4.3/helpers/inherits","npm:babel-runtime@5.4.3/helpers/get","npm:babel-runtime@5.4.3/helpers/create-class","npm:babel-runtime@5.4.3/helpers/class-call-check","github:maxdavidson/tribus@master/camera/base","github:toji/gl-matrix@master"],function(e){var t,n,r,i,o,a,s,u;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){r=e["default"]},function(e){i=e["default"]},function(e){o=e["default"]},function(e){a=e["default"]}],execute:function(){"use strict";s=Math.PI/180,u=function(e){function o(){var e=void 0===arguments[0]?{}:arguments[0];i(this,o),n(Object.getPrototypeOf(o.prototype),"constructor",this).call(this,e);var t=e.fov,r=void 0===t?60:t,a=e.aspect,s=void 0===a?4/3:a,u=e.near,c=void 0===u?.1:u,l=e.far,f=void 0===l?100:l;this.fov=r,this.aspect=s,this.near=c,this.far=f,this._lastFov=this.fov,this._lastAspect=this.aspect,this._lastNear=this.near,this._lastFar=this.far}return t(o,e),r(o,[{key:"recalculate",value:function(e){return this.dirty=this.dirty||null!==this.parent&&this.parent.dirty||this.fov!==this._lastFov||this.aspect!==this._lastAspect||this.near!==this._lastNear||this.far!==this._lastFar,this.dirty&&(a.mat4.perspective(this.projectionMatrix,this.fov*s,this.aspect,this.near,this.far),this._lastFov=this.fov,this._lastAspect=this.aspect,this._lastNear=this.near,this._lastFar=this.far),n(Object.getPrototypeOf(o.prototype),"recalculate",this).call(this,e)}}]),o}(o),e("default",u)}}}),e.register("github:maxdavidson/tribus@master/webgl/buffer",["npm:babel-runtime@5.4.3/helpers/create-class","npm:babel-runtime@5.4.3/helpers/class-call-check"],function(e){var t,n,r,i;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]}],execute:function(){"use strict";r=WebGLRenderingContext,i=function(){function e(t,i,o){var a=void 0===arguments[3]?{}:arguments[3],s=a.mode,u=void 0===s?r.STATIC_DRAW:s,c=a.size,l=void 0===c?3:c,f=a.bufferType,m=void 0===f?r.ARRAY_BUFFER:f,d=a.dataType,p=void 0===d?r.FLOAT:d;n(this,e),this.gl=t,void 0!==o&&(this.vao=o,this.vaoExtension=t.getExtension("OES_vertex_array_object")),this.size=l,this.mode=u,this.bufferType=m,this.dataType=p,this.vbo=t.createBuffer(),this.data=null,this.attribLocation=null,this.updateData(i)}return t(e,[{key:"bind",value:function(){var e=this.data&&0!==this.data.length&&this.bufferType!==r.ELEMENT_ARRAY_BUFFER;e&&this.gl.enableVertexAttribArray(this.attribLocation),this.gl.bindBuffer(this.bufferType,this.vbo),e&&this.gl.vertexAttribPointer(this.attribLocation,this.size,this.dataType,!1,4*this.size,0)}},{key:"_executeBound",value:function(e){this.vao&&this.vaoExtension.bindVertexArrayOES(this.vao),this.gl.bindBuffer(this.bufferType,this.vbo),e(),this.vao&&this.vaoExtension.bindVertexArrayOES(null)}},{key:"updateData",value:function(e){var t=this;this.data=e,this._executeBound(function(){t.gl.bufferData(t.bufferType,t.data,t.mode)})}},{key:"updateSubData",value:function(e,t){var n=this;this.data.set(e,t),this._executeBound(function(){n.gl.bufferSubData(n.bufferType,e,n.mode)})}},{key:"setAttribLocation",value:function(e,t){var n=this;t.gl!==this.gl&&console.error("Couldn't set attribute location: the program's WebGL context is not the same as the buffer's!");var r=t.getAttribLocation(e);-1===r&&console.error("Couldn't bind buffer to location: \""+e+'"'),this._executeBound(function(){n.gl.vertexAttribPointer(r,n.size,n.dataType,!1,0,0),n.gl.enableVertexAttribArray(r)}),this.attribLocation=r}},{key:"destroy",value:function(){var e=this;this._executeBound(function(){e.gl.deleteBuffer(e.vbo)})}}]),e}(),e("default",i)}}}),e.register("github:maxdavidson/tribus@master/extra/ajax",["npm:babel-runtime@5.4.3/core-js/promise"],function(e){function t(e){return i(e)}function n(e){return i(e,{responseType:"json"})}function r(e){return i(e,{responseType:"arraybuffer"})}function i(e){var t=void 0===arguments[1]?{}:arguments[1],n=t.responseType,r=void 0===n?"text":n,i=new XMLHttpRequest;return new o(function(t,n){i.open("GET",e),i.responseType=r,i.onload=function(){200==i.status?t(i.response):n(new Error(i.statusText))},i.onerror=function(){n(new Error("Network Error"))},i.send()})}var o;return{setters:[function(e){o=e["default"]}],execute:function(){"use strict";e("getString",t),e("getJson",n),e("getArrayBuffer",r),e("ajax",i)}}}),e.register("github:maxdavidson/tribus@master/extra/functional",["npm:babel-runtime@5.4.3/helpers/bind"],function(e){var t,n,r;return{setters:[function(e){t=e["default"]}],execute:function(){"use strict";n=function(e){return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];return new(t.apply(e,[null].concat(r)))}},e("construct",n),r=function(e){return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return e.apply(void 0,n).apply(void 0,n)}},e("delegate",r)}}}),e.register("github:maxdavidson/tribus@master/extra/errors",["npm:babel-runtime@5.4.3/helpers/inherits","npm:babel-runtime@5.4.3/helpers/get","npm:babel-runtime@5.4.3/helpers/create-class","npm:babel-runtime@5.4.3/helpers/class-call-check"],function(e){var t,n,r,i,o;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){r=e["default"]},function(e){i=e["default"]}],execute:function(){"use strict";o=function(e){function o(){var e=void 0===arguments[0]?"Method not implemented!":arguments[0];i(this,o),n(Object.getPrototypeOf(o.prototype),"constructor",this).call(this,e)}return t(o,e),r(o,[{key:"name",get:function(){return"UnimplementedMethod"}}]),o}(Error),e("UnimplementedMethodError",o)}}}),e.register("github:maxdavidson/tribus@master/extra/atlas",["npm:babel-runtime@5.4.3/helpers/create-class","npm:babel-runtime@5.4.3/helpers/class-call-check","npm:babel-runtime@5.4.3/core-js/get-iterator","npm:babel-runtime@5.4.3/core-js/math/log2","npm:babel-runtime@5.4.3/regenerator","npm:babel-runtime@5.4.3/core-js/symbol/iterator"],function(e){var t,n,r,i,o,a,s,u;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){r=e["default"]},function(e){i=e["default"]},function(e){o=e["default"]},function(e){a=e["default"]}],execute:function(){"use strict";s=function(){function e(t){var r=t.maxSize,i=void 0===r?10:r,o=t.initialSize,a=void 0===o?0:o;n(this,e),this.regions=[new u(0,0,1<<a,1<<a)],this.maxSize=i}return t(e,[{key:"insert",value:function(t){if(e.getFittingSize(t)>this.maxSize)return[e.FAILED,"Image size is too large!"];for(var n=void 0,i=0,o=this.regions.length;o>i;++i)if(n=this.regions[i].insert(t))return[e.SUCCESS,i,n];var a=[t],s=!0,c=!1,l=void 0;try{for(var f,m=r(this.regions);!(s=(f=m.next()).done);s=!0){var d=f.value,p=!0,h=!1,b=void 0;try{for(var v,g=r(d.images());!(p=(v=g.next()).done);p=!0){
var y=v.value;a.push(y)}}catch(x){h=!0,b=x}finally{try{!p&&g["return"]&&g["return"]()}finally{if(h)throw b}}}}catch(x){c=!0,l=x}finally{try{!s&&m["return"]&&m["return"]()}finally{if(c)throw l}}a.sort(e.imageComparator);var w=e.getFittingSize(a[0]);this.regions.length=1;e:for(;;){for(var i=0;i<this.regions.length-1;++i)this.regions[i]=new u(0,0,1<<this.maxSize,1<<this.maxSize);this.regions[this.regions.length-1]=new u(0,0,1<<w,1<<w);var j=0,d=this.regions[j],_=!0,E=!1,T=void 0;try{for(var S,M=r(a);!(_=(S=M.next()).done);_=!0){var y=S.value;if(!d.insert(y)){if(w++,w<=this.maxSize)continue e;d=this.regions[++j],d||(w=e.getFittingSize(y),d=this.regions[j]=new u(0,0,1<<w,1<<w)),d.insert(y)}}}catch(x){E=!0,T=x}finally{try{!_&&M["return"]&&M["return"]()}finally{if(E)throw T}}break}return[e.RESET]}}],[{key:"FAILED",value:0,enumerable:!0},{key:"SUCCESS",value:1,enumerable:!0},{key:"RESET",value:2,enumerable:!0},{key:"imageComparator",value:function(t,n){return e.getImageSize(n)-e.getImageSize(t)}},{key:"getImageSize",value:function(e){return Math.max(e.width,e.height)}},{key:"getFittingSize",value:function(t){return Math.ceil(i(e.getImageSize(t)))}}]),e}(),e("Atlas",s),u=function(){function e(){var t=void 0===arguments[0]?0:arguments[0],r=void 0===arguments[1]?0:arguments[1],i=void 0===arguments[2]?0:arguments[2],o=void 0===arguments[3]?0:arguments[3];n(this,e),this.left=t,this.top=r,this.right=i,this.bottom=o,this.image=null,this.downRegion=null,this.rightRegion=null}return t(e,[{key:"outerWidth",get:function(){return this.right-this.left}},{key:"outerHeight",get:function(){return this.bottom-this.top}},{key:"innerWidth",get:function(){return this.image.width}},{key:"innerHeight",get:function(){return this.image.height}},{key:"isFilled",get:function(){return null!==this.image}},{key:"toString",value:function(){return""+this.constructor.name+"("+this.left+", "+this.top+", "+this.right+", "+this.bottom+")"}},{key:"images",value:o.mark(function i(){var e,t,n,a,s,u;return o.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:e=!0,t=!1,n=void 0,i.prev=3,a=r(this);case 5:if(e=(s=a.next()).done){i.next=12;break}return u=s.value,i.next=9,u.image;case 9:e=!0,i.next=5;break;case 12:i.next=18;break;case 14:i.prev=14,i.t5=i["catch"](3),t=!0,n=i.t5;case 18:i.prev=18,i.prev=19,!e&&a["return"]&&a["return"]();case 21:if(i.prev=21,!t){i.next=24;break}throw n;case 24:return i.finish(21);case 25:return i.finish(18);case 26:case"end":return i.stop()}},i,this,[[3,14,18,26],[19,,21,25]])})},{key:a,value:o.mark(function s(){return o.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isFilled){e.next=5;break}return e.next=3,this;case 3:return e.delegateYield(this.downRegion,"t6",4);case 4:return e.delegateYield(this.rightRegion,"t7",5);case 5:case"end":return e.stop()}},s,this)})},{key:"insert",value:function(t){if(this.isFilled)return this.image===t?this:this.downRegion.insert(t)||this.rightRegion.insert(t);if(t.height>this.outerHeight||t.width>this.outerWidth)return void 0;this.image=t;var n=this.outerWidth-this.innerWidth,r=this.outerHeight-this.innerHeight;return n>r?(this.downRegion=new e(this.left,this.top+this.innerHeight,this.right,this.bottom),this.rightRegion=new e(this.left+this.innerWidth,this.top,this.right,this.top+this.innerHeight)):(this.downRegion=new e(this.left,this.top+this.innerHeight,this.left+this.innerWidth,this.bottom),this.rightRegion=new e(this.left+this.innerWidth,this.top,this.right,this.bottom)),this}}]),e}(),e("Region",u)}}}),e.register("github:maxdavidson/tribus@master/extra/color",["github:toji/gl-matrix@master"],function(e){"use strict";function t(e){var t=void 0===arguments[1]?r.create():arguments[1];return"number"==typeof e?r.set(t,((16711680&e)>>16)/255,((65280&e)>>8)/255,(255&e)/255):"length"in e&&r.copy(t,e),t}var n,r;return e("convertColorToVector",t),{setters:[function(e){n=e["default"]}],execute:function(){r=n.vec3}}}),e.register("github:maxdavidson/tribus@master/light/pointlight",["npm:babel-runtime@5.4.3/helpers/inherits","npm:babel-runtime@5.4.3/helpers/get","npm:babel-runtime@5.4.3/helpers/class-call-check","npm:babel-runtime@5.4.3/helpers/create-class","npm:babel-runtime@5.4.3/helpers/object-without-properties","npm:babel-runtime@5.4.3/core-js/object/freeze","github:maxdavidson/tribus@master/extra/functional","github:maxdavidson/tribus@master/light/base","npm:memoizee@0.3.8"],function(e){var t,n,r,i,o,a,s,u,c,l,f,m;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){r=e["default"]},function(e){i=e["default"]},function(e){o=e["default"]},function(e){a=e["default"]},function(e){s=e.construct},function(e){u=e.Light,c=e.LightRenderer},function(e){l=e["default"]}],execute:function(){"use strict";f=function(e){function i(){var e=void 0===arguments[0]?{}:arguments[0],t=e.constant,a=void 0===t?1:t,s=e.linear,u=void 0===s?.7:s,c=e.quadratic,l=void 0===c?1.8:c,f=o(e,["constant","linear","quadratic"]);r(this,i),n(Object.getPrototypeOf(i.prototype),"constructor",this).call(this,"pointlight",m,f),this.constant=a,this.linear=u,this.quadratic=l}return t(i,e),i}(u),e("default",f),m=function(e){function o(e,t){r(this,o),n(Object.getPrototypeOf(o.prototype),"constructor",this).call(this,e,t)}return t(o,e),i(o,[{key:"getLocations",value:function(e){return a({position:e.getUniformLocation("pointLights["+this.id+"].position"),diffuse:e.getUniformLocation("pointLights["+this.id+"].diffuse"),specular:e.getUniformLocation("pointLights["+this.id+"].specular"),constant:e.getUniformLocation("pointLights["+this.id+"].constant"),linear:e.getUniformLocation("pointLights["+this.id+"].linear"),quadratic:e.getUniformLocation("pointLights["+this.id+"].quadratic")})}},{key:"render",value:function(e){var t=this.gl,n=this.light,r=this.getLocations(e);t.uniform3fv(r.position,n.worldPosition),t.uniform3fv(r.diffuse,n._diffuseVector),t.uniform3fv(r.specular,n._specularVector),t.uniform1f(r.constant,n.constant),t.uniform1f(r.linear,n.linear),t.uniform1f(r.quadratic,n.quadratic)}}]),o}(c)}}}),e.register("github:maxdavidson/tribus@master/light/spotlight",["npm:babel-runtime@5.4.3/helpers/inherits","npm:babel-runtime@5.4.3/helpers/get","npm:babel-runtime@5.4.3/helpers/create-class","npm:babel-runtime@5.4.3/helpers/class-call-check","npm:babel-runtime@5.4.3/helpers/object-without-properties","npm:babel-runtime@5.4.3/core-js/object/freeze","github:toji/gl-matrix@master","github:maxdavidson/tribus@master/extra/functional","github:maxdavidson/tribus@master/light/base","npm:memoizee@0.3.8"],function(e){var t,n,r,i,o,a,s,u,c,l,f,m,d,p,h;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){r=e["default"]},function(e){i=e["default"]},function(e){o=e["default"]},function(e){a=e["default"]},function(e){s=e["default"]},function(e){u=e.construct},function(e){c=e.Light,l=e.LightRenderer},function(e){f=e["default"]}],execute:function(){"use strict";m=s.vec3,d=Math.PI/180,p=function(e){function a(){var e=void 0===arguments[0]?{}:arguments[0],t=e.constant,r=void 0===t?1:t,s=e.linear,u=void 0===s?.7:s,c=e.quadratic,l=void 0===c?1.8:c,f=e.cutoff,d=void 0===f?40:f,p=e.outerCutoff,b=void 0===p?35:p,v=o(e,["constant","linear","quadratic","cutoff","outerCutoff"]);i(this,a),n(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,"spotlight",h,v),this.constant=r,this.linear=u,this.quadratic=l,this.cutoff=d,this.outerCutoff=b,this.direction=m.create(),this.worldDirection=m.create()}return t(a,e),r(a,[{key:"recalculate",value:function(e){var t=n(Object.getPrototypeOf(a.prototype),"recalculate",this).call(this,e),r=this.direction,i=this.orientation;if(t){var o=i[0],s=i[1],u=i[2],c=i[3];r[0]=-2*(o*u+s*c),r[1]=2*(o*c-s*u),r[2]=o*o+s*s-(u*u+c*c),this.parent?m.transformMat3(this.worldDirection,this.direction,this.parent.normalMatrix):m.copy(this.worldDirection,this.direction)}return t}}]),a}(c),e("default",p),h=function(e){function o(e,t){i(this,o),n(Object.getPrototypeOf(o.prototype),"constructor",this).call(this,e,t)}return t(o,e),r(o,[{key:"getLocations",value:function(e){return a({position:e.getUniformLocation("spotLights["+this.id+"].position"),direction:e.getUniformLocation("spotLights["+this.id+"].direction"),diffuse:e.getUniformLocation("spotLights["+this.id+"].diffuse"),specular:e.getUniformLocation("spotLights["+this.id+"].specular"),constant:e.getUniformLocation("spotLights["+this.id+"].constant"),linear:e.getUniformLocation("spotLights["+this.id+"].linear"),quadratic:e.getUniformLocation("spotLights["+this.id+"].quadratic"),cutoff:e.getUniformLocation("spotLights["+this.id+"].cutoff"),outerCutoff:e.getUniformLocation("spotLights["+this.id+"].outerCutoff")})}},{key:"render",value:function(e){var t=this.gl,n=this.light,r=this.getLocations(e);t.uniform3fv(r.position,n.worldPosition),t.uniform3fv(r.direction,n.worldDirection),t.uniform3fv(r.diffuse,n._diffuseVector),t.uniform3fv(r.specular,n._specularVector),t.uniform1f(r.constant,n.constant),t.uniform1f(r.linear,n.linear),t.uniform1f(r.quadratic,n.quadratic),t.uniform1f(r.cutoff,n.cutoff*d),t.uniform1f(r.outerCutoff,n.outerCutoff*d)}}]),o}(l)}}}),e.register("github:maxdavidson/tribus@master/scene/group",["npm:babel-runtime@5.4.3/helpers/bind","npm:babel-runtime@5.4.3/helpers/inherits","npm:babel-runtime@5.4.3/helpers/get","npm:babel-runtime@5.4.3/helpers/create-class","npm:babel-runtime@5.4.3/helpers/class-call-check","npm:babel-runtime@5.4.3/helpers/to-consumable-array","npm:babel-runtime@5.4.3/core-js/array/from","npm:babel-runtime@5.4.3/core-js/symbol/iterator","npm:babel-runtime@5.4.3/regenerator","npm:babel-runtime@5.4.3/core-js/get-iterator","github:maxdavidson/tribus@master/scene/base","github:maxdavidson/tribus@master/scene/model","github:toji/gl-matrix@master"],function(e){function t(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];return new(n.apply(g,[null].concat(t)))}var n,r,i,o,a,s,u,c,l,f,m,d,p,h,b,v,g,y;return{setters:[function(e){n=e["default"]},function(e){r=e["default"]},function(e){i=e["default"]},function(e){o=e["default"]},function(e){a=e["default"]},function(e){s=e["default"]},function(e){u=e["default"]},function(e){c=e["default"]},function(e){l=e["default"]},function(e){f=e["default"]},function(e){m=e["default"]},function(e){d=e["default"]},function(e){p=e["default"]}],execute:function(){"use strict";e("group",t),h=p.vec3,b=new Float64Array(24),v=function(e){return e.dirty},g=function(e){function t(e){var n=void 0===arguments[1]?{}:arguments[1],r=void 0===arguments[2]?[]:arguments[2];a(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n),this.children=u(r),this.splitSize=64;for(var o=0,s=r.length;s>o;++o)r[o].parent=this}return r(t,e),o(t,[{key:"toString",value:function(){var e=void 0===arguments[0]?["name","dirty"]:arguments[0],n=void 0===arguments[1]?0:arguments[1];return i(Object.getPrototypeOf(t.prototype),"toString",this).call(this,e,n)+this.children.map(function(t){return"\n"+t.toString(e,n+1)}).join("")}},{key:"forEach",value:function(e){e(this);for(var t=0,n=this.children,r=n.length;r>t;++t)n[t].forEach(e)}},{key:"recalculate",value:function(e){var n=i(Object.getPrototypeOf(t.prototype),"recalculate",this).call(this,e),r=this.aabb,o=this.children,a=this.children.length,s=!1,u=void 0,c=void 0;for(u=0;c=o[u];++u)s=s||c.processing,c.dirty=c.dirty||n,n=c.recalculate(e)||n;if(n){for(r.resetIntervals(),u=0;a>u;++u)r.expandFromIntervals(o[u].aabb.intervals);r.computePoints()}return this.processing=s,!this.processing&&o.length>this.splitSize&&this.split(),n}},{key:"recalculateSubtreeIds",value:function(){this.subtreeIds.length=1,this.subtreeIds[0]=this.id;for(var e=0,t=this.children,n=(t.length,void 0);n=t[e];++e){var r;n.recalculateSubtreeIds(),(r=this.subtreeIds).push.apply(r,s(n.subtreeIds))}}},{key:"add",value:function(e){e.parent=this,this.children.push(e)}},{key:"remove",value:function(e){e.parent=null,this.children.splice(this.children.indexOf(e),1)}},{key:c,value:l.mark(function n(){var e,t,r,i,o,a;return l.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this;case 2:e=!0,t=!1,r=void 0,n.prev=5,i=f(this.children);case 7:if(e=(o=i.next()).done){n.next=13;break}return a=o.value,n.delegateYield(a,"t8",10);case 10:e=!0,n.next=7;break;case 13:n.next=19;break;case 15:n.prev=15,n.t9=n["catch"](5),t=!0,r=n.t9;case 19:n.prev=19,n.prev=20,!e&&i["return"]&&i["return"]();case 22:if(n.prev=22,!t){n.next=25;break}throw r;case 25:return n.finish(22);case 26:return n.finish(19);case 27:case"end":return n.stop()}},n,this,[[5,15,19,27],[20,,22,26]])})},{key:"split",value:function(){for(var e=this.aabb.intervals,t=(e[0]+e[1])/2,n=(e[2]+e[3])/2,r=(e[4]+e[5])/2,i=[[],[],[],[],[],[],[],[]],o=0,a=this.children,s=(a.length,void 0);s=a[o];++o){var u=s.aabb.center;i[((u[0]<t)<<2)+((u[1]<n)<<1)+(u[2]<r)].push(s)}for(var c=[],o=0,l=(i.length,void 0);l=i[o];++o)if(l.length){var f=new y(this,{},l);f.parent=this,c.push(f)}this.children=c}}]),t}(m),e("default",g),y=function(e){function t(e){var n=void 0===arguments[1]?{}:arguments[1],r=void 0===arguments[2]?[]:arguments[2];a(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,"split",n,r),this.orientation=e.orientation,this.position=e.position,this.scale=e.scale,this.localTransform=e.localTransform,this.worldTransform=e.worldTransform,this.direction=e.direction,this.worldDirection=e.worldDirection,this.worldPosition=e.worldPosition,this.normalMatrix=e.normalMatrix,this.processing=!1}return r(t,e),o(t,[{key:"recalculate",value:function(e){for(var t=this.aabb,n=this.children,r=this.children.length,i=this.dirty,o=0,a=void 0;a=n[o];++o)a.dirty=a.dirty||this.dirty,i=a.recalculate(e)||i;if(i){t.resetIntervals();for(var o=0;r>o;++o)t.expandFromIntervals(n[o].aabb.intervals);t.computePoints()}return!this.processing&&n.length>this.splitSize&&this.split(),e.set(this.id),this.dirty=!1,i}}]),t}(g)}}}),e.register("github:maxdavidson/tribus@master/environment/environment",["npm:babel-runtime@5.4.3/helpers/create-class","npm:babel-runtime@5.4.3/helpers/class-call-check","github:maxdavidson/tribus@master/extra/color"],function(e){var t,n,r,i,o;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){r=e.convertColorToVector}],execute:function(){"use strict";i=WebGLRenderingContext,o=function(){function e(){var t=void 0===arguments[0]?{}:arguments[0],i=t.ambient,o=void 0===i?0:i;n(this,e),this.ambient=o,this._ambientVector=r(this.ambient)}return t(e,[{key:"initialize",value:function(e){this.gl=e.gl;var t=this._ambientVector;this.gl.clearColor(t[0],t[1],t[2],1)}},{key:"render",value:function(){this.gl.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT)}},{key:"renderLast",value:function(){}}]),e}(),e("default",o)}}}),e.register("github:maxdavidson/tribus@master/extra/bitfield",["npm:babel-runtime@5.4.3/helpers/create-class","npm:babel-runtime@5.4.3/helpers/class-call-check","npm:babel-runtime@5.4.3/core-js/array/from"],function(e){var t,n,r,i;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){r=e["default"]}],execute:function(){"use strict";i=function(){function e(){var t=void 0===arguments[0]?8:arguments[0],r=void 0===arguments[1]?{}:arguments[1],i=r.grow,o=void 0===i?!0:i;n(this,e);var a=Math.ceil((t+1)/32);this._grow=o,this._buffer=new Uint32Array(a),this._emptyBuffer=new Uint32Array(a)}return t(e,[{key:"isEmpty",get:function(){for(var e=0,t=this._buffer,n=t.length;n>e;++e)if(0!==t[e])return!1;return!0}},{key:"toString",value:function(){return r(this._buffer,function(e){var t="00000000000000000000000000000000",n=e.toString(2);return(t.substring(0,32-n.length)+n).split("").reverse().join("")}).join("")}},{key:"toArray",value:function(){for(var e=this._buffer,t=e.length<<5,n=[],r=0;t>r;++r)0!==(e[r>>5]&1<<r%32)&&n.push(r);return n}},{key:"toBitArray",value:function(){for(var e=this._buffer,t=e.length<<5,n=new Array(t),r=0;t>r;++r)n[r]=0!==(e[r>>5]&1<<r%32);return n}},{key:"get",value:function(e){return 0!==(this._buffer[e>>5]&1<<e%32)}},{key:"set",value:function(e){var t=e>>5;this._grow&&t>=this._buffer.length&&this._resize(e),this._buffer[t]|=1<<e%32}},{key:"unset",value:function(e){var t=e>>5;this._grow&&t>=this._buffer.length&&this._resize(e),this._buffer[t]&=~(1<<e%32)}},{key:"reset",value:function(){this._buffer.set(this._emptyBuffer)}},{key:"forEach",value:function(e){var t=this._buffer,n=void 0,r=void 0,i=void 0,o=void 0;for(i=0,r=t.length;r>i;++i)for(n=t[i],o=0;32>o;++o)n&1<<o!==0&&e((i<<5)+o)}},{key:"diff",value:function(t){var n=void 0===arguments[1]?new e:arguments[1],r=this._buffer,i=t._buffer,o=n._buffer,a=Math.max(r.length,i.length);o.length<a&&(n._resize((a<<5)-1),o=n._buffer);for(var s=0;a>s;++s)o[s]=r[s]^i[s];return n}},{key:"union",value:function(t){var n=void 0===arguments[1]?new e:arguments[1],r=this._buffer,i=t._buffer,o=n._buffer,a=Math.max(r.length,i.length);o.length<a&&(n._resize((a<<5)-1),o=n._buffer);for(var s=0;a>s;++s)o[s]=r[s]|i[s];return n}},{key:"intersect",value:function(t){var n=void 0===arguments[1]?new e:arguments[1],r=this._buffer,i=t._buffer,o=n._buffer,a=Math.max(r.length,i.length);o.length<a&&(n._resize((a<<5)-1),o=n._buffer);for(var s=0;a>s;++s)o[s]=r[s]&i[s];return n}},{key:"_resize",value:function(e){var t=this._buffer,n=Math.ceil((e+1)/32);this._buffer=new Uint32Array(n),this._emptyBuffer=new Uint32Array(n),this._buffer.set(t)}}]),e}(),e("default",i)}}}),e.register("github:maxdavidson/tribus@master/texture/cubemap",["npm:babel-runtime@5.4.3/helpers/create-class","npm:babel-runtime@5.4.3/helpers/class-call-check","npm:babel-runtime@5.4.3/helpers/to-consumable-array","npm:babel-runtime@5.4.3/helpers/bind","npm:babel-runtime@5.4.3/core-js/promise","npm:babel-runtime@5.4.3/core-js/math/log2","github:maxdavidson/tribus@master/texture/common"],function(e){var t,n,r,i,o,a,s,u,c,l;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){r=e["default"]},function(e){i=e["default"]},function(e){o=e["default"]},function(e){a=e["default"]},function(e){s=e.resizeImageData,u=e.getImage}],execute:function(){"use strict";c=function(){var e=document.createElement("canvas"),t=e.getContext("webgl")||e.getContext("experimental-webgl");return t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE)}(),l=function(){function e(t,r,i,o,a,s){n(this,e),this.right=t,this.left=r,this.top=i,this.bottom=o,this.front=a,this.back=s}return t(e,null,[{key:"fromFiles",value:function(t,n,l,f,m,d,p){return o.all([t,n,l,f,m,d].map(function(e){return u(e,p)})).then(function(t){var n=function(e){return 0!=e&&!(e&e-1)};return(t[0].width!==t[0].height||t[0].width>c||!n(t[0].width)||t.slice(0).some(function(e){return e.width!==t[0].width||e.height!==t[0].height}))&&!function(){var e=function(e){return 1<<Math.floor(a(Math.max(e.width,e.height)))},n=t.reduce(function(t,n){return Math.max(t,e(n))},0),r=Math.min(c,n);t=t.map(function(e){return s(e,r,r)})}(),new(i.apply(e,[null].concat(r(t))))})}}]),e}(),e("default",l)}}}),e.register("github:maxdavidson/tribus@master/geometry/shapes",["npm:babel-runtime@5.4.3/helpers/inherits","npm:babel-runtime@5.4.3/helpers/get","npm:babel-runtime@5.4.3/helpers/class-call-check","npm:babel-runtime@5.4.3/helpers/create-class","github:maxdavidson/tribus@master/geometry/geometry","github:toji/gl-matrix@master"],function(e){var t,n,r,i,o,a,s,u,c,l,f,m;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){r=e["default"]},function(e){i=e["default"]},function(e){o=e["default"]},function(e){a=e["default"]}],execute:function(){"use strict";s=a.vec3,u=a.mat4,c=s.create(),l=u.create(),f=function(e){function i(){r(this,i);var e=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,1,-1,1,1,1,1,1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,1,-1,-1,1,-1,1,-1,-1,-1,-1,-1,-1,-1,1,-1];n(Object.getPrototypeOf(i.prototype),"constructor",this).call(this,{vertices:e.map(function(e){return.5*e}),normals:e.map(function(e){return Math.sqrt(3)/3*e}),texcoords:[0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,0,0,1,1,1],indices:[0,1,2,0,2,3,4,5,6,4,6,7,8,1,9,8,9,10,11,12,13,11,13,14,15,16,2,15,2,17,15,18,19,15,19,10]})}return t(i,e),i}(o),e("Cube",f),m=function(e){function o(){var e=void 0===arguments[0]?{}:arguments[0],t=e.size,i=void 0===t?8:t,a=e.heightmap,s=void 0===a?null:a,u=e.repeat,c=void 0===u?!1:u;r(this,o);var l=null,f=void 0,m=void 0;null===s?(f=i,m=i):(f=s.width,m=s.height,l=s.imageData.data);var d=f*m,p=(f-1)*m*2,h=new Float32Array(3*d),b=new Float32Array(2*d),v=new Uint16Array(3*p),g=void 0,y=void 0,x=void 0;for(g=0;f>g;++g)for(y=0;m>y;++y)x=g+y*f,h[3*x]=g/(f-1)-.5,h[3*x+1]=l?l[4*x]/255:0,h[3*x+2]=y/(m-1)-.5,b[2*x]=c?g%2==1:g/f,b[2*x+1]=c?y%2==1:1-y/m;for(g=0;f-1>g;++g)for(y=0;m-1>y;++y)x=6*(g+y*(f-1)),v[x]=g+y*f,v[x+1]=g+(y+1)*f,v[x+2]=g+1+y*f,v[x+3]=g+1+y*f,v[x+4]=g+(y+1)*f,v[x+5]=g+1+(y+1)*f;var w={vertices:h,texcoords:b,indices:v};if(!l){for(var j=new Float32Array(h.length),_=1,E=h.length;E>_;_+=3)j[_]=1;w.normals=j}n(Object.getPrototypeOf(o.prototype),"constructor",this).call(this,w),this.heightmap=s}return t(o,e),i(o,[{key:"getHeightAtWorldPosition",value:function(e,t){var n=this,r=s.transformMat4(c,e.worldPosition,u.invert(l,t.worldTransform));null===this.heightmap?r[1]=0:!function(){var e=function(e,t,n){return Math.min(Math.max(e,t),n)},t=n.heightmap.imageData.width,i=n.heightmap.imageData.height,o=e(t*(r[0]+.5),0,t-1),a=e(i*(r[2]+.5),0,i-1),s=Math.floor(o),u=Math.ceil(o),c=Math.floor(a),l=(Math.ceil(a),function(e,r){return n.heightmap.imageData.data[4*(e+r*t)]/256}),f=function(e,t,n){return e+n*(t-e)};r[1]=f(l(s,c),l(u,c),o%1)}();var i=s.transformMat4(c,r,t.worldTransform);return i[1]}}]),o}(o),e("Plane",m)}}}),e.register("github:maxdavidson/tribus@master/camera/orthographic-camera",["npm:babel-runtime@5.4.3/helpers/inherits","npm:babel-runtime@5.4.3/helpers/get","npm:babel-runtime@5.4.3/helpers/create-class","npm:babel-runtime@5.4.3/helpers/class-call-check","github:maxdavidson/tribus@master/camera/base","github:toji/gl-matrix@master"],function(e){var t,n,r,i,o,a,s;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){r=e["default"]},function(e){i=e["default"]},function(e){o=e["default"]},function(e){a=e["default"]}],execute:function(){"use strict";s=function(e){function o(){var e=void 0===arguments[0]?{}:arguments[0];i(this,o),n(Object.getPrototypeOf(o.prototype),"constructor",this).call(this,e);var t=e.left,r=void 0===t?-1:t,a=e.right,s=void 0===a?1:a,u=e.bottom,c=void 0===u?-1:u,l=e.top,f=void 0===l?1:l,m=e.near,d=void 0===m?.1:m,p=e.far,h=void 0===p?1e3:p;this.left=r,this.right=s,this.bottom=c,this.top=f,this.near=d,this.far=h,this._lastLeft=this.left,this._lastRight=this.right,this._lastBottom=this.bottom,this._lastTop=this.top,this._lastNear=this.near,this._lastFar=this.far}return t(o,e),r(o,[{key:"recalculate",value:function(e){return this.dirty=this.dirty||null!==this.parent&&this.parent.dirty||this.left!==this._lastLeft||this.right!==this._lastRight||this.bottom!==this._lastBottom||this.top!==this._lastTop||this.near!==this._lastNear||this.far!==this._lastFar,this.dirty&&(a.mat4.ortho(this.projectionMatrix,this.left,this.right,this.bottom,this.top,this.near,this.far),this._lastLeft=this.left,this._lastRight=this.right,this._lastBottom=this.bottom,this._lastTop=this.top,this._lastNear=this.near,this._lastFar=this.far),n(Object.getPrototypeOf(o.prototype),"recalculate",this).call(this,e)}}]),o}(o),e("default",s)}}}),e.register("github:maxdavidson/tribus@master/environment/skybox",["npm:babel-runtime@5.4.3/helpers/inherits","npm:babel-runtime@5.4.3/helpers/get","npm:babel-runtime@5.4.3/helpers/create-class","npm:babel-runtime@5.4.3/helpers/class-call-check","npm:babel-runtime@5.4.3/core-js/promise","github:toji/gl-matrix@master","github:maxdavidson/tribus@master/environment/environment","github:maxdavidson/tribus@master/webgl/program","github:maxdavidson/tribus@master/webgl/shader","github:maxdavidson/tribus@master/geometry/shapes","github:maxdavidson/tribus@master/texture/common"],function(e){var t,n,r,i,o,a,s,u,c,l,f,m,d,p,h,b,v;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){r=e["default"]},function(e){i=e["default"]},function(e){o=e["default"]},function(e){a=e["default"]},function(e){s=e["default"]},function(e){u=e["default"]},function(e){c=e["default"]},function(e){l=e.Cube},function(e){f=e.allocateTextureUnit}],execute:function(){"use strict";m=a.mat4,d=WebGLRenderingContext,p="\n    uniform mat4 cameraMatrix;\n    attribute mediump vec3 vertex;\n    varying mediump vec3 texcoord;\n\n    void main() {\n        gl_Position = cameraMatrix * vec4(vertex, 1.0);\n        texcoord = vertex;\n    }\n",h="\n    uniform mat4 cameraMatrix;\n    attribute mediump vec3 vertex;\n    varying mediump vec3 texcoord;\n\n    void main() {\n        vec4 pos = cameraMatrix * vec4(vertex, 1.0);\n        gl_Position = pos.xyww;\n        texcoord = vertex;\n    }\n",b="\n    precision mediump float;\n    varying vec3 texcoord;\n    uniform samplerCube skybox;\n\n    void main() {\n        gl_FragColor = textureCube(skybox, texcoord);\n    }\n",v=function(e){function a(e){var t=this,r=void 0===arguments[1]?{}:arguments[1];i(this,a),n(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,r),this.cubemap=null,this._onCubemapReady=o.resolve(e).then(function(e){t.cubemap=e}),this.cube=new l,this.program=null,this.unit=null,this.handle=null,this.cubeRenderer=null,this.locations=null,this.initialized=!1,this.cameraMatrix=m.create()}return t(a,e),r(a,[{key:"initialize",value:function(e){var t=this;n(Object.getPrototypeOf(a.prototype),"initialize",this).call(this,e);var r=this.gl=e.gl;this.program=new u(r,new c(r,b,d.FRAGMENT_SHADER),new c(r,h,d.VERTEX_SHADER)),this.unit=f(r),this.handle=r.createTexture(),this.cubeRenderer=this.cube.getRenderer(r),this.locations={sampler:this.program.getUniformLocation("skybox"),cameraMatrix:this.program.getUniformLocation("cameraMatrix")},this.cubeRenderer.vertexBuffer.setAttribLocation("vertex",this.program),this._onCubemapReady.then(function(){r.activeTexture(d.TEXTURE0+t.unit),r.bindTexture(d.TEXTURE_CUBE_MAP,t.handle),r.texParameteri(d.TEXTURE_CUBE_MAP,d.TEXTURE_MIN_FILTER,d.LINEAR),r.texParameteri(d.TEXTURE_CUBE_MAP,d.TEXTURE_MAG_FILTER,d.LINEAR),r.texParameteri(d.TEXTURE_CUBE_MAP,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),r.texParameteri(d.TEXTURE_CUBE_MAP,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),r.texImage2D(d.TEXTURE_CUBE_MAP_POSITIVE_X,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,t.cubemap.right),r.texImage2D(d.TEXTURE_CUBE_MAP_NEGATIVE_X,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,t.cubemap.left),r.texImage2D(d.TEXTURE_CUBE_MAP_POSITIVE_Y,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,t.cubemap.top),r.texImage2D(d.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,t.cubemap.bottom),r.texImage2D(d.TEXTURE_CUBE_MAP_POSITIVE_Z,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,t.cubemap.back),r.texImage2D(d.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,t.cubemap.front),r.generateMipmap(d.TEXTURE_CUBE_MAP),r.bindTexture(d.TEXTURE_CUBE_MAP,null),t.initialized=!0})}},{key:"render",value:function(){this.gl.clear(d.DEPTH_BUFFER_BIT)}},{key:"renderLast",value:function(e){if(this.initialized){var t=this.program.gl;t.disable(d.CULL_FACE),t.depthFunc(d.LEQUAL),this.program.use(),t.uniform1i(this.locations.sampler,this.unit),t.activeTexture(d.TEXTURE0+this.unit),t.bindTexture(d.TEXTURE_CUBE_MAP,this.handle),m.copy(this.cameraMatrix,e.camera.viewMatrix),this.cameraMatrix[12]=0,this.cameraMatrix[13]=0,this.cameraMatrix[14]=0,m.multiply(this.cameraMatrix,e.camera.projectionMatrix,this.cameraMatrix),t.uniformMatrix4fv(this.locations.cameraMatrix,!1,this.cameraMatrix),this.cubeRenderer.render(),t.enable(d.CULL_FACE),t.depthFunc(d.LESS)}}}]),a}(s),e("default",v)}}}),e.register("github:maxdavidson/tribus@master/webgl/shader",["npm:babel-runtime@5.4.3/helpers/create-class","npm:babel-runtime@5.4.3/helpers/class-call-check","github:maxdavidson/tribus@master/extra/ajax"],function(e){var t,n,r,i,o;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){r=e.getString}],execute:function(){"use strict";i=WebGLRenderingContext,o=function(){function e(t,r,i){n(this,e),this.gl=t,this.type=i,this.handle=t.createShader(i),t.shaderSource(this.handle,r),t.compileShader(this.handle);var o=this.getInfoLog();""!==o&&console.error(o)}return t(e,[{key:"destroy",value:function(){this.gl.deleteShader(this.handle)}},{key:"getInfoLog",value:function(){return this.gl.getShaderInfoLog(this.handle)}},{key:"getSource",value:function(){return this.gl.getShaderSource(this.handle)}},{key:"getTranslatedSource",value:function(){return this.gl.getExtension("WEBGL_debug_shaders").getTranslatedShaderSource(this.handle)}}],[{key:"fromFile",value:function(t,n){var o={vert:i.VERTEX_SHADER,frag:i.FRAGMENT_SHADER}[n.split(".").pop()];return r(n).then(function(n){return new e(t,n,o)})}}]),e}(),e("default",o)}}}),e.register("github:maxdavidson/tribus@master/workers/normal-vectors",["github:maxdavidson/tribus@master/workers/worker-pool","github:toji/gl-matrix@master/src/gl-matrix/vec3.js!github:systemjs/plugin-text@0.0.2"],function(e){"use strict";function t(e,t){console.time("Calculating normals");for(var n=e.vertices,r=e.indices,i=new Float32Array(n.length),o=new Array(n.length/3),a=new Float32Array(r.length),s=0,u=o.length;u>s;++s)o[s]=[];for(var c=0,u=r.length;u>c;c+=3){var l=r[c],f=r[c+1],m=r[c+2],d=3*l,p=3*f,h=3*m,b=vec3.set(tmp0,n[d],n[d+1],n[d+2]),v=vec3.set(tmp1,n[p],n[p+1],n[p+2]),g=vec3.set(tmp2,n[h],n[h+1],n[h+2]);o[l].push(c),o[f].push(c),o[m].push(c);var y=vec3.cross(tmp0,vec3.subtract(tmp1,v,b),vec3.subtract(tmp2,g,b));a[c]=y[0],a[c+1]=y[1],a[c+2]=y[2]}for(var x=0,w=o.length;w>x;++x){for(var j=vec3.set(tmp0,0,0,0),_=o[x],E=0,T=_.length;T>E;++E){var S=_[E];j[0]+=a[S],j[1]+=a[S+1],j[2]+=a[S+2]}vec3.normalize(j,j);var c=3*x;i[c]=j[0],i[c+1]=j[1],i[c+2]=j[2]}console.timeEnd("Calculating normals"),t({indices:r,vertices:n,normals:i},[r.buffer,n.buffer,i.buffer])}var n,r,i;return{setters:[function(e){n=e["default"]},function(e){r=e["default"]}],execute:function(){i=n.fromFunction(t,["var GLMAT_ARRAY_TYPE = Float32Array;",r,"var tmp0 = vec3.create(), tmp1 = vec3.create(), tmp2 = vec3.create();"]),e("workerpool",i)}}}),e.register("github:maxdavidson/tribus@master/material/base",["npm:babel-runtime@5.4.3/helpers/create-class","npm:babel-runtime@5.4.3/helpers/class-call-check","github:maxdavidson/tribus@master/extra/errors"],function(e){var t,n,r,i,o,a;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){r=e.UnimplementedMethodError}],execute:function(){"use strict";i=WebGLRenderingContext,o=function(){function e(){n(this,e)}return t(e,[{key:"getRenderer",value:function(e){throw new r}}]),e}(),e("Material",o),a=function(){function e(t){n(this,e),this.material=t,this.program=null,this.geometryRenderer=null}return t(e,[{key:"init",value:function(e){throw new r}},{key:"setGeometryRenderer",value:function(e){}},{key:"beforeRender",value:function(e){}},{key:"render",value:function(e,t){}},{key:"afterRender",value:function(e){}}]),e}(),e("MaterialRenderer",a)}}}),e.register("github:maxdavidson/tribus@master/workers/tga",["github:maxdavidson/tribus@master/workers/worker-pool","github:maxdavidson/jsTGALoader@master/tga.js!github:systemjs/plugin-text@0.0.2"],function(e){"use strict";function t(e,t){var n=new TGA;n.load(new Uint8Array(e));var r=n.getImageData(),i=r.data.buffer;t({buffer:i,height:r.height,width:r.width},[i])}var n,r,i;return{setters:[function(e){n=e["default"]},function(e){r=e["default"]}],execute:function(){i=n.fromFunction(t,[r]),e("workerpool",i)}}}),e.register("github:maxdavidson/tribus@master/light/base",["npm:babel-runtime@5.4.3/helpers/inherits","npm:babel-runtime@5.4.3/helpers/get","npm:babel-runtime@5.4.3/helpers/create-class","npm:babel-runtime@5.4.3/helpers/class-call-check","npm:babel-runtime@5.4.3/helpers/object-without-properties","npm:babel-runtime@5.4.3/core-js/weak-map","github:toji/gl-matrix@master","github:maxdavidson/tribus@master/scene/base","npm:memoizee@0.3.8","github:maxdavidson/tribus@master/extra/color"],function(e){
var t,n,r,i,o,a,s,u,c,l,f,m,d,p;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){r=e["default"]},function(e){i=e["default"]},function(e){o=e["default"]},function(e){a=e["default"]},function(e){s=e["default"]},function(e){u=e["default"]},function(e){c=e["default"]},function(e){l=e.convertColorToVector}],execute:function(){"use strict";f=s.vec3,m=function(e){function a(e,t){var r=this,s=void 0===arguments[2]?{}:arguments[2],u=s.diffuse,m=void 0===u?16777215:u,d=s.specular,p=void 0===d?m:d,h=o(s,["diffuse","specular"]);i(this,a),n(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,e,h),this.diffuse=m,this.specular=p,this.worldPosition=f.create(),this._lastDiffuse=null,this._lastSpecular=null,this._diffuseVector=l(this.diffuse),this._specularVector=l(this.specular),this.getRenderer=c(function(e){return new t(r,e)})}return t(a,e),r(a,[{key:"recalculate",value:function(e){(this.diffuse!==this._lastDiffuse||this.specular!==this._lastSpecular)&&(l(this.diffuse,this._diffuseVector),l(this.specular,this._specularVector),this._lastDiffuse=this.diffuse,this._lastSpecular=this.specular);var t=n(Object.getPrototypeOf(a.prototype),"recalculate",this).call(this,e);return t&&(this.parent?f.transformMat4(this.worldPosition,this.position,this.parent.worldTransform):f.copy(this.worldPosition,this.position)),t}}]),a}(u),e("Light",m),d=new a,p=function(){function e(t,n){i(this,e),this.light=t,this.gl=n,this.id=e.allocateLight(t.constructor),this.getLocations=c(this.getLocations.bind(this))}return r(e,[{key:"getLocations",value:function(e){}},{key:"render",value:function(){}}],[{key:"allocateLight",value:function(e){var t=d.get(e)||0;return d.set(e,t+1),t}}]),e}(),e("LightRenderer",p)}}}),e.register("github:maxdavidson/tribus@master/extra/helpers",["npm:babel-runtime@5.4.3/helpers/bind","npm:babel-runtime@5.4.3/helpers/define-property","npm:babel-runtime@5.4.3/helpers/to-consumable-array","npm:babel-runtime@5.4.3/core-js/promise","npm:babel-runtime@5.4.3/core-js/object/keys","npm:babel-runtime@5.4.3/core-js/object/assign","github:maxdavidson/tribus@master/scene/model","github:maxdavidson/tribus@master/scene/group","github:maxdavidson/tribus@master/camera/perspective-camera","github:maxdavidson/tribus@master/geometry/geometry","github:maxdavidson/tribus@master/material/phong","github:maxdavidson/tribus@master/texture/texture2d","github:maxdavidson/tribus@master/texture/cubemap","github:maxdavidson/tribus@master/geometry/shapes"],function(e){function t(e){return E.fromFile(e).then(function(e){return new S({heightmap:e})}).then(function(e){return e.generateNormals()})}function n(){return new M}function r(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return new(d.apply(S,[null].concat(t)))}function i(){var e=void 0===arguments[0]?{}:arguments[0];return new w(e)}function o(){var e=void 0===arguments[0]?{}:arguments[0];return new PointLight(e)}function a(){var e=void 0===arguments[0]?{}:arguments[0];return new SpotLight(e)}function s(e){return j.fromFile(e)}function u(e){return E.fromFile(e)}function c(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return T.fromFiles.apply(T,t)}function l(){var e=void 0===arguments[0]?{}:arguments[0];return b.all(v(e).map(function(t){return b.resolve(e[t]).then(function(e){return p({},t,e)})})).then(function(e){return g.apply(Object,[{}].concat(h(e)))}).then(function(e){return new _(e)})}function f(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return new(d.apply(y,[null].concat(t)))}function m(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return new(d.apply(x,[null].concat(t)))}var d,p,h,b,v,g,y,x,w,j,_,E,T,S,M;return{setters:[function(e){d=e["default"]},function(e){p=e["default"]},function(e){h=e["default"]},function(e){b=e["default"]},function(e){v=e["default"]},function(e){g=e["default"]},function(e){y=e["default"]},function(e){x=e["default"]},function(e){w=e["default"]},function(e){j=e["default"]},function(e){_=e["default"]},function(e){E=e["default"]},function(e){T=e["default"]},function(e){S=e.Plane,M=e.Cube}],execute:function(){"use strict";e("terrain",t),e("cube",n),e("plane",r),e("camera",i),e("pointlight",o),e("spotlight",a),e("geometry",s),e("texture2d",u),e("cubemap",c),e("phong",l),e("model",f),e("group",m)}}}),e.register("github:maxdavidson/tribus@master/extra/webgl-debug",["npm:babel-runtime@5.4.3/core-js/object/keys"],function(e){function t(e){if(null==h){h={},b={};for(var t in e)"number"==typeof e[t]&&(h[e[t]]=t,b[t]=e[t])}}function n(){if(null==h)throw"WebGLDebugUtils.init(ctx) not called"}function r(e){return n(),void 0!==h[e]}function i(e){n();var t=h[e];return void 0!==t?"gl."+t:"/*UNKNOWN WebGL ENUM*/ 0x"+e.toString(16)}function o(e,t,n,r){var o=p[e];if(void 0!==o){var o=o[t];if(void 0!==o&&o[n]){if("object"==typeof o[n]&&void 0!==o[n].enumBitwiseOr){for(var a=o[n].enumBitwiseOr,s=0,u=[],c=0;c<a.length;++c){var l=b[a[c]];0!==(r&l)&&(s|=l,u.push(i(l)))}return s===r?u.join(" | "):i(r)}return i(r)}}return null===r?"null":void 0===r?"undefined":r.toString()}function a(e,t){for(var n="",r=t.length,i=0;r>i;++i)n+=(0==i?"":", ")+o(e,r,i,t[i]);return n}function s(e,t,n){e.__defineGetter__(n,function(){return t[n]}),e.__defineSetter__(n,function(e){t[n]=e})}function u(e,n,r,a){function c(e,t){return function(){r&&r(t,arguments);var i=e[t].apply(e,arguments),o=a.getError();return 0!=o&&(l[o]=!0,n(o,t,arguments)),i}}a=a||e,t(e),n=n||function(e,t,n){for(var r="",a=n.length,s=0;a>s;++s)r+=(0==s?"":", ")+o(t,a,s,n[s]);d("WebGL error "+i(e)+" in "+t+"("+r+")")};var l={},f={};for(var m in e)if("function"==typeof e[m])if("getExtension"!=m)f[m]=c(e,m);else{var p=c(e,m);f[m]=function(){var t=p.apply(e,arguments);return u(t,n,r,a)}}else s(f,e,m);return f.getError=function(){for(var t in l)if(l.hasOwnProperty(t)&&l[t])return l[t]=!1,t;return e.NO_ERROR},f}function c(e){var t=e.getParameter(e.MAX_VERTEX_ATTRIBS),n=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,n);for(var r=0;t>r;++r)e.disableVertexAttribArray(r),e.vertexAttribPointer(r,4,e.FLOAT,!1,0,0),e.vertexAttrib1f(r,0);e.deleteBuffer(n);for(var i=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),r=0;i>r;++r)e.activeTexture(e.TEXTURE0+r),e.bindTexture(e.TEXTURE_CUBE_MAP,null),e.bindTexture(e.TEXTURE_2D,null);for(e.activeTexture(e.TEXTURE0),e.useProgram(null),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.DITHER),e.disable(e.SCISSOR_TEST),e.blendColor(0,0,0,0),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.clearColor(0,0,0,0),e.clearDepth(1),e.clearStencil(-1),e.colorMask(!0,!0,!0,!0),e.cullFace(e.BACK),e.depthFunc(e.LESS),e.depthMask(!0),e.depthRange(0,1),e.frontFace(e.CCW),e.hint(e.GENERATE_MIPMAP_HINT,e.DONT_CARE),e.lineWidth(1),e.pixelStorei(e.PACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.UNPACK_COLORSPACE_CONVERSION_WEBGL&&e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.BROWSER_DEFAULT_WEBGL),e.polygonOffset(0,0),e.sampleCoverage(1,!1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilMask(4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.viewport(0,0,e.canvas.width,e.canvas.height),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT);e.getError(););}function l(e){function t(e){return"function"==typeof e?e:function(t){e.handleEvent(t)}}function n(e){var t=e.addEventListener;e.addEventListener=function(n,r,i){switch(n){case"webglcontextlost":E(r);break;case"webglcontextrestored":T(r);break;default:t.apply(e,arguments)}}}function r(){for(var e=f(_),t=0;t<e.length;++t)delete _[e]}function i(){++x,v||y==x&&e.loseContext()}function o(e,t){var n=e[t];return function(){if(i(),!v){var t=n.apply(e,arguments);return t}}}function a(){for(var e=0;e<g.length;++e){var t=g[e];t instanceof WebGLBuffer?m.deleteBuffer(t):t instanceof WebGLFramebuffer?m.deleteFramebuffer(t):t instanceof WebGLProgram?m.deleteProgram(t):t instanceof WebGLRenderbuffer?m.deleteRenderbuffer(t):t instanceof WebGLShader?m.deleteShader(t):t instanceof WebGLTexture&&m.deleteTexture(t)}}function u(e){return{statusMessage:e,preventDefault:function(){w=!0}}}function l(e){for(var t in e)"function"==typeof e[t]?d[t]=o(e,t):s(d,e,t);d.getError=function(){if(i(),!v)for(var e;e=m.getError();)_[e]=!0;for(var e in _)if(_[e])return delete _[e],e;return d.NO_ERROR};for(var n=["createBuffer","createFramebuffer","createProgram","createRenderbuffer","createShader","createTexture"],r=0;r<n.length;++r){var a=n[r];d[a]=function(t){return function(){if(i(),v)return null;var n=t.apply(e,arguments);return n.__webglDebugContextLostId__=b,g.push(n),n}}(e[a])}for(var u=["getActiveAttrib","getActiveUniform","getBufferParameter","getContextAttributes","getAttachedShaders","getFramebufferAttachmentParameter","getParameter","getProgramParameter","getProgramInfoLog","getRenderbufferParameter","getShaderParameter","getShaderInfoLog","getShaderSource","getTexParameter","getUniform","getUniformLocation","getVertexAttrib"],r=0;r<u.length;++r){var a=u[r];d[a]=function(t){return function(){return i(),v?null:t.apply(e,arguments)}}(d[a])}for(var c=["isBuffer","isEnabled","isFramebuffer","isProgram","isRenderbuffer","isShader","isTexture"],r=0;r<c.length;++r){var a=c[r];d[a]=function(t){return function(){return i(),v?!1:t.apply(e,arguments)}}(d[a])}return d.checkFramebufferStatus=function(t){return function(){return i(),v?d.FRAMEBUFFER_UNSUPPORTED:t.apply(e,arguments)}}(d.checkFramebufferStatus),d.getAttribLocation=function(t){return function(){return i(),v?-1:t.apply(e,arguments)}}(d.getAttribLocation),d.getVertexAttribOffset=function(t){return function(){return i(),v?0:t.apply(e,arguments)}}(d.getVertexAttribOffset),d.isContextLost=function(){return v},d}var m,d,p=[],h=[],d={},b=1,v=!1,g=[],y=0,x=0,w=!1,j=0,_={};e.getContext=function(t){return function(){var n=t.apply(e,arguments);if(n instanceof WebGLRenderingContext){if(n!=m){if(m)throw"got different context";m=n,d=l(m)}return d}return n}}(e.getContext);var E=function(e){p.push(t(e))},T=function(e){h.push(t(e))};return n(e),e.loseContext=function(){if(!v){for(v=!0,y=0,++b;m.getError(););r(),_[m.CONTEXT_LOST_WEBGL]=!0;var t=u("context lost"),n=p.slice();setTimeout(function(){for(var r=0;r<n.length;++r)n[r](t);j>=0&&setTimeout(function(){e.restoreContext()},j)},0)}},e.restoreContext=function(){v&&h.length&&setTimeout(function(){if(!w)throw"can not restore. webglcontestlost listener did not call event.preventDefault";a(),c(m),v=!1,x=0,w=!1;for(var e=h.slice(),t=u("context restored"),n=0;n<e.length;++n)e[n](t)},0)},e.loseContextInNCalls=function(e){if(v)throw"You can not ask a lost contet to be lost";y=x+e},e.getNumCalls=function(){return x},e.setRestoreTimeout=function(e){j=e},e}var f,m,d,p,h,b;return{setters:[function(e){f=e["default"]}],execute:function(){"use strict";m=function(e){window.console&&window.console.log&&window.console.log(e)},d=function(e){window.console&&window.console.error?window.console.error(e):m(e)},p={enable:{1:{0:!0}},disable:{1:{0:!0}},getParameter:{1:{0:!0}},drawArrays:{3:{0:!0}},drawElements:{4:{0:!0,2:!0}},createShader:{1:{0:!0}},getShaderParameter:{2:{1:!0}},getProgramParameter:{2:{1:!0}},getShaderPrecisionFormat:{2:{0:!0,1:!0}},getVertexAttrib:{2:{1:!0}},vertexAttribPointer:{6:{2:!0}},bindTexture:{2:{0:!0}},activeTexture:{1:{0:!0}},getTexParameter:{2:{0:!0,1:!0}},texParameterf:{3:{0:!0,1:!0}},texParameteri:{3:{0:!0,1:!0,2:!0}},texImage2D:{9:{0:!0,2:!0,6:!0,7:!0},6:{0:!0,2:!0,3:!0,4:!0}},texSubImage2D:{9:{0:!0,6:!0,7:!0},7:{0:!0,4:!0,5:!0}},copyTexImage2D:{8:{0:!0,2:!0}},copyTexSubImage2D:{8:{0:!0}},generateMipmap:{1:{0:!0}},compressedTexImage2D:{7:{0:!0,2:!0}},compressedTexSubImage2D:{8:{0:!0,6:!0}},bindBuffer:{2:{0:!0}},bufferData:{3:{0:!0,2:!0}},bufferSubData:{3:{0:!0}},getBufferParameter:{2:{0:!0,1:!0}},pixelStorei:{2:{0:!0,1:!0}},readPixels:{7:{4:!0,5:!0}},bindRenderbuffer:{2:{0:!0}},bindFramebuffer:{2:{0:!0}},checkFramebufferStatus:{1:{0:!0}},framebufferRenderbuffer:{4:{0:!0,1:!0,2:!0}},framebufferTexture2D:{5:{0:!0,1:!0,2:!0}},getFramebufferAttachmentParameter:{3:{0:!0,1:!0,2:!0}},getRenderbufferParameter:{2:{0:!0,1:!0}},renderbufferStorage:{4:{0:!0,1:!0}},clear:{1:{0:{enumBitwiseOr:["COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT"]}}},depthFunc:{1:{0:!0}},blendFunc:{2:{0:!0,1:!0}},blendFuncSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},blendEquation:{1:{0:!0}},blendEquationSeparate:{2:{0:!0,1:!0}},stencilFunc:{3:{0:!0}},stencilFuncSeparate:{4:{0:!0,1:!0}},stencilMaskSeparate:{2:{0:!0}},stencilOp:{3:{0:!0,1:!0,2:!0}},stencilOpSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},cullFace:{1:{0:!0}},frontFace:{1:{0:!0}},drawArraysInstancedANGLE:{4:{0:!0}},drawElementsInstancedANGLE:{5:{0:!0,2:!0}},blendEquationEXT:{1:{0:!0}}},h=null,b=null,e("default",{init:t,mightBeEnum:r,glEnumToString:i,glFunctionArgToString:o,glFunctionArgsToString:a,makeDebugContext:u,makeLostContextSimulatingCanvas:l,resetToInitialState:c})}}}),e.register("github:maxdavidson/tribus@master/webgl/program",["npm:babel-runtime@5.4.3/helpers/create-class","npm:babel-runtime@5.4.3/helpers/class-call-check","npm:babel-runtime@5.4.3/helpers/to-consumable-array","npm:babel-runtime@5.4.3/helpers/bind","npm:babel-runtime@5.4.3/core-js/map","npm:babel-runtime@5.4.3/core-js/promise","github:maxdavidson/tribus@master/webgl/shader"],function(e){var t,n,r,i,o,a,s,u,c,l;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){r=e["default"]},function(e){i=e["default"]},function(e){o=e["default"]},function(e){a=e["default"]},function(e){s=e["default"]}],execute:function(){"use strict";u=WebGLRenderingContext,c={35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT"},l=function(){function e(t){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;r>a;a++)i[a-1]=arguments[a];if(n(this,e),this.gl=t,this.handle=t.createProgram(),this.vertexShader=i.filter(function(e){return e.type===u.VERTEX_SHADER})[0]||null,this.fragmentShader=i.filter(function(e){return e.type===u.FRAGMENT_SHADER})[0]||null,this._attribLocationCache=new o,this._uniformLocationCache=new o,[this.vertexShader,this.fragmentShader].some(function(e){return null===e}))throw"You need to supply both a vertex and a fragment shader!";t.attachShader(this.handle,this.vertexShader.handle),t.attachShader(this.handle,this.fragmentShader.handle),t.linkProgram(this.handle);var s=this.getInfoLog();""!==s&&console.error(s)}return t(e,[{key:"use",value:function(){this.gl.useProgram(this.handle)}},{key:"destroy",value:function(){this.gl.deleteProgram(this.handle)}},{key:"getUniformLocation",value:function(e){var t=this._uniformLocationCache.get(e);return void 0===t&&(t=this.gl.getUniformLocation(this.handle,e),null===t&&console.error("Couldn't get uniform location: "+e),this._uniformLocationCache.set(e,t)),t}},{key:"getAttribLocation",value:function(e){var t=this._attribLocationCache.get(e);return void 0===t&&(t=this.gl.getAttribLocation(this.handle,e),null===t&&console.error("Couldn't get attribute location: "+e),this._attribLocationCache.set(e,t)),t}},{key:"getInfoLog",value:function(){return this.gl.getProgramInfoLog(this.handle)}},{key:"getActiveUniforms",value:function(){for(var e=[],t=0;t<this.gl.getProgramParameter(this.handle,u.ACTIVE_UNIFORMS);++t){var n=this.gl.getActiveUniform(this.handle,t);n.typeName=c[n.type],n.value=this.gl.getUniform(this.handle,this.gl.getUniformLocation(this.handle,n.name)),e.push(n)}return e}},{key:"getActiveAttributes",value:function(){for(var e=[],t=0;t<this.gl.getProgramParameter(this.handle,u.ACTIVE_ATTRIBUTES);++t){var n=this.gl.getActiveAttrib(this.handle,t);n.typeName=c[n.type],e.push(n)}return e}},{key:"setUniform",value:function(e,t){this.gl.uniform1f(this.getUniformLocation(e),t)}},{key:"setUniformInt",value:function(e,t){this.gl.uniform1i(this.getUniformLocation(e),t)}},{key:"setUniformVector",value:function(e,t){var n=this.getUniformLocation(e);switch(t.length){case 1:this.gl.uniform1fv(n,t);break;case 2:this.gl.uniform2fv(n,t);break;case 3:this.gl.uniform3fv(n,t);break;case 4:this.gl.uniform4fv(n,t)}}},{key:"setUniformIntVector",value:function(e,t){var n=this.getUniformLocation(e);switch(t.length){case 1:this.gl.uniform1iv(n,t);break;case 2:this.gl.uniform2iv(n,t);break;case 3:this.gl.uniform3iv(n,t);break;case 4:this.gl.uniform4iv(n,t)}}},{key:"setUniformMatrix",value:function(e,t){var n=void 0===arguments[2]?!1:arguments[2],r=this.getUniformLocation(e);switch(t.length){case 4:this.gl.uniformMatrix2fv(r,n,t);break;case 9:this.gl.uniformMatrix3fv(r,n,t);break;case 16:this.gl.uniformMatrix4fv(r,n,t)}}}],[{key:"fromShaderPromises",value:function(t){for(var n=arguments.length,o=Array(n>1?n-1:0),s=1;n>s;s++)o[s-1]=arguments[s];return a.all(o).then(function(n){return new(i.apply(e,[null].concat([t],r(n))))})}},{key:"fromShaderFiles",value:function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;n>i;i++)r[i-1]=arguments[i];return e.fromShaderPromises(t,r.map(function(e){return s.fromFile(t,e)}))}}]),e}(),e("default",l)}}}),e.register("github:maxdavidson/tribus@master/texture/common",["npm:babel-runtime@5.4.3/core-js/map","npm:babel-runtime@5.4.3/core-js/promise","github:maxdavidson/tribus@master/extra/ajax","github:maxdavidson/tribus@master/workers/tga"],function(e){function t(e){var t=l.get(e)||0;return l.set(e,t+1),t}function n(e){var t=void 0===arguments[1]?e.width:arguments[1],n=void 0===arguments[2]?e.height:arguments[2];return function(){return f.canvas.width=e.width,f.canvas.height=e.height,f.putImageData(e,0,0),m.canvas.width=t,m.canvas.height=n,m.drawImage(f.canvas,0,0,t,n),m.getImageData(0,0,t,n)}()}function r(e){var t=void 0===arguments[1]?e.split(".").pop():arguments[1];return function(){return(d[t]||i)(e)}()}function i(e){return new s(function(t,n){var r=document.createElement("img"),i=function(){f.canvas.width=r.width,f.canvas.height=r.height,f.drawImage(r,0,0);var e=f.getImageData(0,0,r.width,r.height);a(),t(e)},o=function(e){n(e),a()},a=function(){r.removeEventListener("load",i),r.removeEventListener("error",o)};r.addEventListener("error",o,!1),r.addEventListener("load",i,!1),r.src=e})}function o(e){return u(e).then(function(e){return c.run(e,{transfers:[e]})}).then(function(e){var t=e.buffer,n=e.width,r=e.height,i=new Uint8ClampedArray(t),o=void 0;try{o=new ImageData(i,n,r)}catch(a){f.canvas.height=r,f.canvas.width=n,o=f.createImageData(n,r),o.data.set(i)}return o})}var a,s,u,c,l,f,m,d;return{setters:[function(e){a=e["default"]},function(e){s=e["default"]},function(e){u=e.getArrayBuffer},function(e){c=e.workerpool}],execute:function(){"use strict";e("allocateTextureUnit",t),e("resizeImageData",n),e("getImage",r),l=new a,f=document.createElement("canvas").getContext("2d"),m=document.createElement("canvas").getContext("2d"),d={tga:o}}}}),e.register("github:maxdavidson/tribus@master/light/directional-light",["npm:babel-runtime@5.4.3/helpers/inherits","npm:babel-runtime@5.4.3/helpers/get","npm:babel-runtime@5.4.3/helpers/create-class","npm:babel-runtime@5.4.3/helpers/class-call-check","npm:babel-runtime@5.4.3/core-js/object/freeze","github:toji/gl-matrix@master","npm:memoizee@0.3.8","github:maxdavidson/tribus@master/extra/functional","github:maxdavidson/tribus@master/light/base"],function(e){var t,n,r,i,o,a,s,u,c,l,f,m,d,p;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){r=e["default"]},function(e){i=e["default"]},function(e){o=e["default"]},function(e){a=e["default"]},function(e){s=e["default"]},function(e){u=e.construct},function(e){c=e.Light,l=e.LightRenderer}],execute:function(){"use strict";f=a.vec3,m=f.fromValues(0,0,-1),d=function(e){function o(){var e=void 0===arguments[0]?{}:arguments[0];i(this,o),n(Object.getPrototypeOf(o.prototype),"constructor",this).call(this,"directional-light",p,e),this.direction=f.create()}return t(o,e),r(o,[{key:"recalculate",value:function(e){var t=n(Object.getPrototypeOf(o.prototype),"recalculate",this).call(this,e);if(t){var r=this.direction,i=this.orientation,a=i[0],s=i[1],u=i[2],c=i[3];r[0]=-2*(a*u+s*c),r[1]=2*(a*c-s*u),r[2]=a*a+s*s-(u*u+c*c)}return t}}]),o}(c),e("default",d),p=function(e){function a(e,t){i(this,a),n(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,e,t)}return t(a,e),r(a,[{key:"getLocations",value:function(e){return o({direction:e.getUniformLocation("directionalLights["+this.id+"].direction"),diffuse:e.getUniformLocation("directionalLights["+this.id+"].diffuse"),specular:e.getUniformLocation("directionalLights["+this.id+"].specular")})}},{key:"render",value:function(e){var t=this.gl,n=this.light,r=this.getLocations(e);t.uniform3fv(r.direction,n.direction),t.uniform3fv(r.diffuse,n._diffuseVector),t.uniform3fv(r.specular,n._specularVector)}}]),a}(l)}}}),e.register("github:maxdavidson/tribus@master/control/mouseview",["npm:babel-runtime@5.4.3/helpers/create-class","npm:babel-runtime@5.4.3/helpers/class-call-check","npm:babel-runtime@5.4.3/helpers/sliced-to-array","github:baconjs/bacon.js@0.7.58","github:toji/gl-matrix@master"],function(e){var t,n,r,i,o,a,s,u,c,l,f;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){r=e["default"]},function(e){i=e["default"]},function(e){o=e["default"]}],execute:function(){"use strict";a=o.vec3,s=o.mat4,u=o.quat,c=function(e){return function(t){return e===t}},l=a.create(),f=function(){function e(t,o){function a(e){var t=void 0!==e.movementX?e.movementX:e.mozMovementX,n=void 0!==e.movementY?e.movementY:e.mozMovementY;I.pitch=Math.max(-90,Math.min(90,I.pitch+D*n)),I.yaw+=D*t,I.yaw=I.yaw%360}function s(){document.pointerLockElement===p||document.mozPointerLockElement===p?(console.log("The pointer lock status is now locked"),document.addEventListener("mousemove",a,!1),I.locked=!0):(console.log("The pointer lock status is now unlocked"),document.removeEventListener("mousemove",a,!1),I.locked=!1)}function u(e){e.preventDefault(),N=e.touches[0].pageX,U=e.touches[0].pageY;var t=F-N,n=C-U;I.pitch=Math.max(-90,Math.min(90,z+P*n)),I.yaw=$+P*t,I.yaw=I.yaw%360}var l=this,f=void 0===arguments[2]?{}:arguments[2],m=f.speed,d=void 0===m?1:m;n(this,e),this.target=t,this.yaw=0,this.pitch=0,this.roll=0,this.forward=0,this.sideways=0,this.turn=0,this.locked=!1,this.moving=!1,this.first=!0,this.speed=d;var p=o.canvas,h=["keydown","keyup"].map(function(e){return i.fromEventTarget(document.body,e).map(function(e){return e.keyCode})}),b=r(h,2),v=b[0],g=b[1],y=function(e){return i.mergeAll(v.filter(c(e)).map(function(){return!0}),g.filter(c(e)).map(function(){return!1})).skipDuplicates().toProperty(!1)},x="WASDQE".split("").map(function(e){return e.charCodeAt(0)}).map(y),w=r(x,6),j=w[0],_=w[1],E=w[2],T=w[3],S=w[4],M=w[5],A=[[T,_],[E,j],[S,M]].map(function(e){var t=r(e,2),n=t[0],o=t[1];return i.combineWith(function(e,t){return e+t},n.map(function(e){return+e}),o.map(function(e){return-e}))}),k=r(A,3),O=k[0],L=k[1],R=k[2];O.onValue(function(e){l.sideways=e}),L.onValue(function(e){l.forward=e}),R.onValue(function(e){l.turn=e});var I=this;i.combineWith(function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return t.some(function(e){return e})},j,_,E,T,S,M).onValue(function(e){I.moving=e}),v.filter(c("F".charCodeAt(0))).onValue(function(e){p.requestFullscreen?p.requestFullscreen():p.msRequestFullscreen?p.msRequestFullscreen():p.mozRequestFullScreen?p.mozRequestFullScreen():p.webkitRequestFullscreen&&p.webkitRequestFullscreen()}),v.filter(c("C".charCodeAt(0))).onValue(function(){window.cull=!window.cull}),p.requestPointerLock=p.requestPointerLock||p.mozRequestPointerLock||function(){},p.addEventListener("click",function(){p.requestPointerLock()},!1);var D=.1;document.addEventListener("pointerlockchange",s,!1),document.addEventListener("mozpointerlockchange",s,!1),this.touching=!1;var P=.2,z=void 0,$=void 0,F=void 0,C=void 0,N=void 0,U=void 0;p.addEventListener("touchstart",function(e){p.addEventListener("touchmove",u,!1),z=l.pitch,$=l.yaw,F=e.touches[0].pageX,C=e.touches[0].pageY,I.touching=!0},!1),p.addEventListener("touchend",function(e){p.removeEventListener("touchmove",u,!1),I.touching=0!==e.touches.length},!1),o.on("tick",this.tick.bind(this))}return t(e,[{key:"tick",value:function(e){if(this.first||this.moving||this.locked||this.touching){var t=this.target;t.lookForward(),t.rotateY(-this.yaw),a.set(l,e/200*this.speed*this.sideways,0,e/200*this.speed*this.forward),t.translateRelatively(l),t.rotateX(-this.pitch),t.rotateZ(-this.roll),this.first=!1}}}]),e}(),e("default",f)}}}),e.register("github:maxdavidson/tribus@master/workers/worker-pool",["npm:babel-runtime@5.4.3/helpers/create-class","npm:babel-runtime@5.4.3/helpers/class-call-check","npm:babel-runtime@5.4.3/helpers/to-consumable-array","npm:babel-runtime@5.4.3/helpers/sliced-to-array","npm:babel-runtime@5.4.3/core-js/map","npm:babel-runtime@5.4.3/core-js/promise","npm:babel-runtime@5.4.3/core-js/get-iterator","npm:babel-runtime@5.4.3/core-js/object/keys"],function(e){var t,n,r,i,o,a,s,u,c,l,f;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){r=e["default"]},function(e){i=e["default"]},function(e){o=e["default"]},function(e){a=e["default"]},function(e){s=e["default"]},function(e){u=e["default"]}],execute:function(){"use strict";c=0,l=0,f=function(){function e(t){var r=void 0===arguments[1]?{}:arguments[1],i=r.poolSize,a=void 0===i?2:i,s=r.spawnLazily,u=void 0===s?!0:s,c=r.timeout,l=void 0===c?5:c;if(n(this,e),this._workerState=new o,this._timeout=l,this._sourceURL=t,this.poolSize=a,this._completers=new o,this._taskQueue=[],!u)for(var f=0;a>f;++f)this.spawnWorker()}return t(e,[{key:"_grabWork",value:function(e){var t=this._workerState.get(e);window.clearTimeout(t.timeout),t.ready=!1;var n=this._taskQueue.shift(),r=n.id,i=n.message,o=n.transfers;e.postMessage({id:r,message:i},o)}},{key:"spawnWorker",value:function(){var e=this;if(this._workerState.size<this.poolSize){var t=function(){var t=new Worker(e._sourceURL),n=e,r=function(e){var r=e.data,o=r.id,a=r.message,s=n._workerState.get(t),u=n._completers.get(o),c=u.resolve;u.reject;c(a),n._completers["delete"](o),s.ready=!0,s.timeout=i(),0!==n._taskQueue.length&&n._grabWork(t)},i=function(){return window.setTimeout(function(){n._workerState["delete"](t),t.removeEventListener("message",r,!1),t.terminate()},1e3*n._timeout)};return t.addEventListener("message",r,!1),e._workerState.set(t,{ready:!0,timeout:i(),id:++c}),{v:t}}();if("object"==typeof t)return t.v}}},{key:"run",value:function(e){var t=this,n=void 0===arguments[1]?{}:arguments[1],r=n.transfers,o=++l;return new a(function(n,a){t._completers.set(o,{resolve:n,reject:a}),t._taskQueue.push({id:o,message:e,transfers:r});var u=void 0,c=!0,l=!1,f=void 0;try{for(var m,d=s(t._workerState.entries());!(c=(m=d.next()).done);c=!0){var p=i(m.value,2),h=p[0],b=p[1];if(b.ready){u=h;break}}}catch(v){l=!0,f=v}finally{try{!c&&d["return"]&&d["return"]()}finally{if(l)throw f}}void 0===u&&(u=t.spawnWorker()),void 0!==u&&t._grabWork(u)})}}],[{key:"fromFunction",value:function(t){for(var n=void 0===arguments[1]?[]:arguments[1],i=void 0===arguments[2]?{}:arguments[2],o={location:window.location},a=0;a<n.length;++a)switch(typeof n[a]){case"function":n[a]=n[a].toString();break;case"object":var c=!0,l=!1,f=void 0;try{for(var m,d=s(u(n[a]));!(c=(m=d.next()).done);c=!0){var p=m.value;o[p]=n[a][p]}}catch(h){l=!0,f=h}finally{try{!c&&d["return"]&&d["return"]()}finally{if(l)throw f}}}var b=u(o).map(function(e){return"var "+e+" = "+JSON.stringify(o[e])+";"}),v="self.onmessage = function(event) {\n                ("+t.toString()+")(event.data.message, function resolve(message, transfers) {\n                    self.postMessage({ id: event.data.id, message: message }, transfers);\n                });\n            };",g=new Blob([[].concat(r(b),r(n),[v]).join(";\n")],{type:"application/javascript"}),y=window.URL.createObjectURL(g);return new e(y,i)}}]),e}(),e("default",f)}}}),e.register("github:maxdavidson/tribus@master/texture/texture2d",["npm:babel-runtime@5.4.3/helpers/create-class","npm:babel-runtime@5.4.3/helpers/class-call-check","github:maxdavidson/tribus@master/texture/common"],function(e){var t,n,r,i,o,a;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){r=e.resizeImageData,i=e.getImage}],execute:function(){"use strict";o=function(){var e=document.createElement("canvas"),t=e.getContext("webgl")||e.getContext("experimental-webgl");return t.getParameter(t.MAX_TEXTURE_SIZE)}(),a=function(){function e(t){n(this,e),this.imageData=t}return t(e,[{key:"width",get:function(){return this.imageData.width}},{key:"height",get:function(){return this.imageData.height}}],[{key:"fromFile",value:function(t,n){return i(t,n).then(function(t){return(t.height>o||t.width>o)&&(t=r(t,Math.min(o,t.width),Math.min(o,t.height))),new e(t)})}}]),e}(),e("default",a)}}}),e.register("github:maxdavidson/tribus@master/extra/event-aggregator",["npm:babel-runtime@5.4.3/helpers/create-class","npm:babel-runtime@5.4.3/helpers/class-call-check","npm:babel-runtime@5.4.3/helpers/to-consumable-array","npm:babel-runtime@5.4.3/core-js/map","npm:babel-runtime@5.4.3/core-js/set","npm:babel-runtime@5.4.3/core-js/get-iterator","npm:babel-runtime@5.4.3/core-js/weak-map"],function(e){var t,n,r,i,o,a,s,u,c;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){r=e["default"]},function(e){i=e["default"]},function(e){o=e["default"]},function(e){a=e["default"]},function(e){s=e["default"]}],execute:function(){"use strict";u=!0,c=function(){function e(){var t=void 0===arguments[0]?null:arguments[0];n(this,e),e.privates.set(this,{callbacks:new i,buffers:new i,bubbleTarget:t})}return t(e,[{key:"_callbacks",get:function(){return e.privates.get(this).callbacks||(e.privates.get(this).callbacks=new i)}},{key:"_buffers",get:function(){return e.privates.get(this).buffers||(e.privates.get(this).buffers=new i)}},{key:"on",value:function(e){var t=void 0===arguments[1]?null:arguments[1];this._callbacks.has(e)||this._callbacks.set(e,new o),u&&console.log(""+this.constructor.name+" bound handler to: "+e),this._callbacks.get(e).add(t);var n=this._buffers.get(e);if(void 0!==n){var i=!0,s=!1,c=void 0;try{for(var l,f=a(n);!(i=(l=f.next()).done);i=!0){var m=l.value,d=m.args,p=m.options;this.trigger.apply(this,[e,p].concat(r(d))),u&&console.log(""+this.constructor.name+" released: "+e)}}catch(h){s=!0,c=h}finally{try{!i&&f["return"]&&f["return"]()}finally{if(s)throw c}}this._buffers["delete"](e)}}},{key:"off",value:function(e){var t=void 0===arguments[1]?null:arguments[1];this._callbacks.has(e)&&(null===t&&this._callbacks["delete"](e),this._callbacks.get(e)["delete"](t),0===this._callbacks.get(e).size&&this._callbacks["delete"](e))}},{key:"once",value:function(e,t){var n=this,r=function i(){for(var r=arguments.length,o=Array(r),a=0;r>a;a++)o[a]=arguments[a];t.apply(void 0,o),n.off(e,i)};this.on(e,r)}},{key:"trigger",value:function(t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;n>i;i++)r[i-2]=arguments[i];var o=void 0===arguments[1]?{}:arguments[1],s=o.bubble,u=void 0===s?!1:s,c=o.buffer,l=void 0===c?!1:c,f=o.sync,m=void 0===f?!1:f,d=o.target,p=void 0===d?this:d,h=o.delay,b=void 0===h?0:h;if(this._callbacks.has(t)){var v=!0,g=!1,y=void 0;try{for(var x,w=function(){var e=x.value;m?e.apply(void 0,r.concat([p])):window.setTimeout(function(){return e.apply(void 0,r.concat([p]))},b)},j=a(this._callbacks.get(t));!(v=(x=j.next()).done);v=!0)w();
}catch(_){g=!0,y=_}finally{try{!v&&j["return"]&&j["return"]()}finally{if(g)throw y}}}else if(u&&null!==e.privates.get(this).bubbleTarget){var E;(E=e.privates.get(this).bubbleTarget).trigger.apply(E,[t,o].concat(r))}else l&&(this._buffers.has(t)||this._buffers.set(t,[]),this._buffers.get(t).push({args:r,options:o}))}}],[{key:"privates",value:new s,enumerable:!0}]),e}(),e("default",c)}}}),e.register("github:maxdavidson/tribus@master/workers/wavefront",["github:maxdavidson/tribus@master/workers/worker-pool"],function(e){"use strict";function t(e,t){var n="Parsing OBJ file";console.time(n);for(var r,i,o,a,s,u={v:[],vt:[],vn:[],i:[]},c=new Uint8Array(e),l=[],f=c.length,m=0;f>m;){switch(i=c[m++],i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:r=i;break;case 12:case 13:o=c[m++],r=(31&i)<<6|63&o;break;case 14:o=c[m++],a=c[m++],r=(15&i)<<12|(63&o)<<6|(63&a)<<0}if(10===r){var d=String.fromCharCode.apply(void 0,l).trim().split(/\s+/),p=d[0],h=d.slice(1);switch(p){case"v":case"vn":case"vt":for(var b=0,v=h.length;v>b;++b)u[p].push(parseFloat(h[b]));break;case"f":for(var g=[],b=0,v=h.length;v>b;++b)g.push(h[b].split("/").map(function(e,t){return e=parseInt(e),0>e?e+u[["v","vt","vn"][t]].length/[3,2,3][t]:e-1}));if(g.length<3)for(var b=g.length;3>=b;++b)g[b]=g[g.length-1];for(var b=1,v=g.length;v-1>b;++b)u.i.push(g[0],g[b],g[b+1])}l=[]}else l.push(r)}var y={},x=0,w=[],j=[],_=[],E=[];for(m=0,f=u.i.length;f>m;m+=3)for(var b=0;3>b;++b){var T=u.i[m+b],S=T[0],M=T[1],A=T[2],k=T.join(":"),O=y[k];void 0===O&&(O=y[k]=x++,j.push(S),void 0!==M&&_.push(M),void 0!==A&&E.push(A)),w.push(O)}var g=new Uint16Array(w),L=new Float32Array(3*j.length),R=new Float32Array(3*E.length),I=new Float32Array(2*_.length);for(m=0,f=j.length;f>m;++m){s=3*m;var D=3*j[m];L[s]=u.v[D],L[s+1]=u.v[D+1],L[s+2]=u.v[D+2]}for(m=0,f=E.length;f>m;++m){s=3*m;var P=3*E[m];R[s]=u.vn[P],R[s+1]=u.vn[P+1],R[s+2]=u.vn[P+2]}for(m=0,f=_.length;f>m;++m){s=2*m;var z=2*_[m];I[s]=u.vt[z],I[s+1]=u.vt[z+1]}console.timeEnd(n),t({indices:g,vertices:L,normals:R,texcoords:I},[g.buffer,L.buffer,R.buffer,I.buffer])}var n,r;return{setters:[function(e){n=e["default"]}],execute:function(){r=n.fromFunction(t),e("workerpool",r)}}}),e.register("github:maxdavidson/tribus@master/material/phong",["npm:babel-runtime@5.4.3/helpers/inherits","npm:babel-runtime@5.4.3/helpers/get","npm:babel-runtime@5.4.3/helpers/create-class","npm:babel-runtime@5.4.3/helpers/class-call-check","npm:babel-runtime@5.4.3/helpers/to-array","npm:babel-runtime@5.4.3/helpers/sliced-to-array","npm:babel-runtime@5.4.3/core-js/get-iterator","npm:babel-runtime@5.4.3/core-js/object/assign","npm:babel-runtime@5.4.3/core-js/math/log2","npm:babel-runtime@5.4.3/core-js/map","npm:babel-runtime@5.4.3/core-js/set","github:toji/gl-matrix@master","npm:memoizee@0.3.8","github:maxdavidson/tribus@master/extra/atlas","github:maxdavidson/tribus@master/material/base","github:maxdavidson/tribus@master/texture/texture2d","github:maxdavidson/tribus@master/extra/functional","github:maxdavidson/tribus@master/light/directional-light","github:maxdavidson/tribus@master/light/pointlight","github:maxdavidson/tribus@master/light/spotlight","github:maxdavidson/tribus@master/webgl/program","github:maxdavidson/tribus@master/webgl/shader","github:maxdavidson/tribus@master/material/shaders/phong.vert.dot!github:maxdavidson/tribus@master/plugins/dot","github:maxdavidson/tribus@master/material/shaders/phong.frag.dot!github:maxdavidson/tribus@master/plugins/dot","github:maxdavidson/tribus@master/extra/color","github:maxdavidson/tribus@master/texture/common"],function(e){var t,n,r,i,o,a,s,u,c,l,f,m,d,p,h,b,v,g,y,x,w,j,_,E,T,S,M,A,k,O,L,R,I,D,P,z,$,F,C,N,U;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){r=e["default"]},function(e){i=e["default"]},function(e){o=e["default"]},function(e){a=e["default"]},function(e){s=e["default"]},function(e){u=e["default"]},function(e){c=e["default"]},function(e){l=e["default"]},function(e){f=e["default"]},function(e){m=e["default"]},function(e){d=e["default"]},function(e){p=e.Atlas,h=e.Region},function(e){b=e.Material,v=e.MaterialRenderer},function(e){g=e["default"]},function(e){y=e.construct,x=e.delegate},function(e){w=e["default"]},function(e){j=e["default"]},function(e){_=e["default"]},function(e){E=e["default"]},function(e){T=e["default"]},function(e){S=e["default"]},function(e){M=e["default"]},function(e){A=e.convertColorToVector},function(e){k=e.allocateTextureUnit}],execute:function(){"use strict";O=m.vec3,L=m.vec4,R=m.mat3,I=m.mat4,D=WebGLRenderingContext,P=function(e){function o(){var e=void 0===arguments[0]?{}:arguments[0],t=e.shininess,r=void 0===t?40:t,a=e.ambient,s=void 0===a?0:a,u=e.diffuse,c=void 0===u?8421504:u,l=e.specular,f=void 0===l?c:l;i(this,o),n(Object.getPrototypeOf(o.prototype),"constructor",this).call(this),this.shininess=r,this.ambient=s,this.diffuse=c,this.specular=f}return t(o,e),r(o,[{key:"getRenderer",value:function(e){return z.create(this,e)}},{key:"config",get:function(){return{ambient:o.getSourceType(this.ambient),diffuse:o.getSourceType(this.diffuse),specular:o.getSourceType(this.specular)}}}],[{key:"getSourceType",value:function(e){switch(e.constructor){case Number:case Array:case Float32Array:return"static";case g:return"texture";default:console.error("Incompatible material source color type")}}}]),o}(b),e("default",P),z=function(e){function o(e,t){i(this,o),n(Object.getPrototypeOf(o.prototype),"constructor",this).call(this,e),this.gl=t,this.locations=null,this.ambientStrategy=null,this.diffuseStrategy=null,this.specularStrategy=null}return t(o,e),r(o,[{key:"init",value:function(){var e=void 0===arguments[0]?{}:arguments[0],t=e._lightRenderers,n=void 0===t?[]:t,r={MAX_DIRECTIONAL_LIGHTS:0,MAX_SPOT_LIGHTS:0,MAX_POINT_LIGHTS:0},i=!0,a=!1,c=void 0;try{for(var l,f=s(n);!(i=(l=f.next()).done);i=!0){var m=l.value,d=m.light;d instanceof w?r.MAX_DIRECTIONAL_LIGHTS+=1:d instanceof _?r.MAX_SPOT_LIGHTS+=1:d instanceof j&&(r.MAX_POINT_LIGHTS+=1)}}catch(p){a=!0,c=p}finally{try{!i&&f["return"]&&f["return"]()}finally{if(a)throw c}}var h=u({},r,this.material.config);this.program=o.createProgram(this.gl,JSON.stringify(h),h),this.ambientStrategy=$.select("ambient",this.material.ambient,this.program),this.diffuseStrategy=$.select("diffuse",this.material.diffuse,this.program),this.specularStrategy=$.select("specular",this.material.specular,this.program),this.geometryRenderer&&this.setGeometryRenderer(this.geometryRenderer)}},{key:"setGeometryRenderer",value:function(e){this.geometryRenderer=e;var t=e.vertexBuffer,n=e.normalBuffer,r=e.texcoordBuffer;t.setAttribLocation("vertex",this.program),n.setAttribLocation("normal",this.program),this.locations={mvpMatrix:this.program.getUniformLocation("mvpMatrix"),modelMatrix:this.program.getUniformLocation("modelMatrix"),normalMatrix:this.program.getUniformLocation("normalMatrix"),viewPos:this.program.getUniformLocation("viewPos"),shininess:this.program.getUniformLocation("material.shininess"),environmentAmbient:this.program.getUniformLocation("environmentAmbient")},this.ambientStrategy.init(r),this.diffuseStrategy.init(r),this.specularStrategy.init(r)}},{key:"beforeRender",value:function(e){for(var t=e.camera,n=e.environment,r=e._lightRenderers,i=this.program.gl,o=this.locations,a=0,s=r.length;s>a;++a)r[a].render(this.program);i.uniform3fv(o.viewPos,t.worldPosition),i.uniform1f(o.shininess,this.material.shininess),i.uniform3fv(o.environmentAmbient,n._ambientVector),this.ambientStrategy.update(),this.diffuseStrategy.update(),this.specularStrategy.update()}},{key:"render",value:function(e,t){var n=this.program.gl,r=this.locations;n.uniformMatrix4fv(r.mvpMatrix,!1,e.mvpMatrix),n.uniformMatrix4fv(r.modelMatrix,!1,e.worldTransform),n.uniformMatrix3fv(r.normalMatrix,!1,e.normalMatrix)}}],[{key:"create",value:d(y(o),{length:2}),enumerable:!0},{key:"createProgram",value:d(function(e,t,n){return new E(e,new T(e,S(n),D.VERTEX_SHADER),new T(e,M(n),D.FRAGMENT_SHADER))},{length:2}),enumerable:!0}]),o}(v),$=function(){function e(t,n,r){i(this,e),this.locations={},this.target=t,this.source=n,this.program=r}return r(e,[{key:"init",value:function(e){}},{key:"update",value:function(){}}],[{key:"select",value:d(function(e,t,n){return{"static":F.create,texture:U.create}[P.getSourceType(t)](e,t,n)}),enumerable:!0}]),e}(),F=function(e){function o(e,t,r){i(this,o),n(Object.getPrototypeOf(o.prototype),"constructor",this).call(this,e,t,r),this.color=t,this.colorVector=A(this.color)}return t(o,e),r(o,[{key:"init",value:function(e){this.locations.target=this.program.getUniformLocation("material."+this.target)}},{key:"update",value:function(){A(this.color,this.colorVector),this.program.gl.uniform3fv(this.locations.target,this.colorVector)}}],[{key:"create",value:d(y(o),{length:3}),enumerable:!0}]),o}($),C=L.create(),N=function(){function e(t,n,r){i(this,e),this.gl=t,this.region=n,this.unit=k(),this.handle=t.createTexture(),this.ctx=document.createElement("canvas").getContext("2d"),this.strategies=r,document.body.appendChild(this.ctx.canvas)}return r(e,[{key:"bind",value:function(){this.gl.activeTexture(D.TEXTURE0+this.unit),this.gl.bindTexture(D.TEXTURE_2D,this.handle)}},{key:"updateTexcoordBounds",value:function(e){var t=this.region.outerWidth;L.set(C,e.left/t,(e.top+e.innerHeight)/t,e.innerWidth/t,-(e.innerHeight/t));var n=!0,r=!1,i=void 0;try{for(var o,a=s(this.strategies.get(e.image));!(n=(o=a.next()).done);n=!0){var u=o.value;L.copy(u.texcoordBounds,C),u.textureRegion=this}}catch(c){r=!0,i=c}finally{try{!n&&a["return"]&&a["return"]()}finally{if(r)throw i}}}},{key:"uploadRegion",value:function(){this.ctx.canvas.width=this.region.outerWidth,this.ctx.canvas.height=this.region.outerHeight,this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height);var e=!0,t=!1,n=void 0;try{for(var r,i=s(this.region);!(e=(r=i.next()).done);e=!0){var o=r.value;this.ctx.putImageData(o.image,o.left,o.top),this.updateTexcoordBounds(o)}}catch(a){t=!0,n=a}finally{try{!e&&i["return"]&&i["return"]()}finally{if(t)throw n}}this.bind(),this.gl.texImage2D(D.TEXTURE_2D,0,D.RGBA,D.RGBA,D.UNSIGNED_BYTE,this.ctx.canvas),this.gl.texParameteri(D.TEXTURE_2D,D.TEXTURE_MAG_FILTER,D.LINEAR),this.gl.texParameteri(D.TEXTURE_2D,D.TEXTURE_MIN_FILTER,D.LINEAR),this.gl.generateMipmap(D.TEXTURE_2D)}},{key:"uploadSubregion",value:function(e){this.ctx.putImageData(e.image,e.left,e.top),this.updateTexcoordBounds(e),this.bind(),this.gl.texSubImage2D(D.TEXTURE_2D,0,e.left,e.top,D.RGBA,D.UNSIGNED_BYTE,e.image),this.gl.generateMipmap(D.TEXTURE_2D)}}]),e}(),U=function(e){function s(e,t,r){i(this,s),n(Object.getPrototypeOf(s.prototype),"constructor",this).call(this,e,t,r),this.texcoordBounds=L.create(),this.textureRegion=null,s.getConfig(r.gl)(this)}return t(s,e),r(s,[{key:"init",value:function(e){e.setAttribLocation("texcoord",this.program),this.locations.sampler=this.program.getUniformLocation(""+this.target+"Sampler"),this.locations.bounds=this.program.getUniformLocation(""+this.target+"TexcoordBounds")}},{key:"update",value:function(){var e=this.program.gl;e.uniform1i(this.locations.sampler,this.textureRegion.unit),e.uniform4fv(this.locations.bounds,this.texcoordBounds),this.textureRegion.bind()}}],[{key:"getConfig",value:d(function(e){var t=new p({maxSize:c(e.getParameter(D.MAX_TEXTURE_SIZE))}),n=new l,r=[new N(e,t.regions[0],n)];return function(i){var s=i.source,u=n.get(s.imageData);void 0===u&&(u=new f,n.set(s.imageData,u)),u.add(i);var c=t.insert(s.imageData),l=o(c),m=l[0],d=l.slice(1);switch(m){case p.SUCCESS:var h=a(d,2),b=h[0],v=h[1];return r[b].uploadSubregion(v),r[b];case p.RESET:for(var g=0,y=t.regions.length;y>g;++g)void 0===r[g]?r[g]=new N(e,t.regions[g],n):r[g].region=t.regions[g],r[g].uploadRegion();break;case p.FAILED:var x=a(d,1),w=x[0];throw w}}}),enumerable:!0},{key:"create",value:d(y(s),{length:3}),enumerable:!0}]),s}($)}}}),e.register("github:maxdavidson/tribus@master/scene/base",["npm:babel-runtime@5.4.3/helpers/inherits","npm:babel-runtime@5.4.3/helpers/get","npm:babel-runtime@5.4.3/helpers/create-class","npm:babel-runtime@5.4.3/helpers/class-call-check","npm:babel-runtime@5.4.3/core-js/get-iterator","npm:babel-runtime@5.4.3/core-js/symbol/iterator","npm:babel-runtime@5.4.3/regenerator","github:toji/gl-matrix@master","github:maxdavidson/tribus@master/extra/event-aggregator","github:maxdavidson/tribus@master/extra/bounding-box"],function(e){function t(e,t,n,r){var i=t[0],o=t[1],a=t[2],s=t[3],u=i+i,c=o+o,l=a+a,f=i*u,m=i*c,d=i*l,p=o*c,h=o*l,b=a*l,v=s*u,g=s*c,y=s*l,x=r[0],w=r[1],j=r[2];return e[0]=(1-(p+b))*x,e[1]=(m+y)*x,e[2]=(d-g)*x,e[3]=0,e[4]=(m-y)*w,e[5]=(1-(f+b))*w,e[6]=(h+v)*w,e[7]=0,e[8]=(d+g)*j,e[9]=(h-v)*j,e[10]=(1-(f+p))*j,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}var n,r,i,o,a,s,u,c,l,f,m,d,p,h,b,v,g,y;return{setters:[function(e){n=e["default"]},function(e){r=e["default"]},function(e){i=e["default"]},function(e){o=e["default"]},function(e){a=e["default"]},function(e){s=e["default"]},function(e){u=e["default"]},function(e){c=e["default"]},function(e){l=e["default"]},function(e){f=e["default"]}],execute:function(){"use strict";m=c.vec3,d=c.mat3,p=c.mat4,h=c.quat,b=Math.PI/180,v=m.create(),g=[],y=function(e){function c(e){var t=void 0===arguments[1]?{}:arguments[1],n=t.parent,i=void 0===n?null:n,a=t.position,s=void 0===a?[0,0,0]:a,u=t.rotateX,l=void 0===u?0:u,b=t.rotateY,v=void 0===b?0:b,g=t.rotateZ,y=void 0===g?0:g,x=t.scale,w=void 0===x?1:x;o(this,c),r(Object.getPrototypeOf(c.prototype),"constructor",this).call(this,i),this.id=c.instances.length,c.instances.push(this),this.name=e,this.parent=i,this.orientation=h.create(),this.position=m.create(),this.scale=m.fromValues(1,1,1),this.localTransform=p.create(),this.worldTransform=p.create(),this.normalMatrix=d.create(),this.subtreeIds=[this.id],this.aabb=new f,this.dirty=!0,this.processing=!0,this.resize(w),this.rotateX(l),this.rotateZ(y),this.rotateY(v),this.translate(s)}return n(c,e),i(c,[{key:"toString",value:function(){for(var e=this,t=void 0===arguments[0]?["name","dirty"]:arguments[0],n=void 0===arguments[1]?0:arguments[1],r="",i=" ",o=0;2*n>o;++o)r+=i;return r+this.constructor.name+": { "+t.map(function(t){return t+": "+e[t]}).join(", ")+" }"}},{key:"query",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=a(this);!(t=(i=o.next()).done);t=!0){var s=i.value;if(s.name===e)return s}}catch(u){n=!0,r=u}finally{try{!t&&o["return"]&&o["return"]()}finally{if(n)throw r}}}},{key:"forEach",value:function(e){e(this)}},{key:s,value:u.mark(function l(){return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this;case 2:case"end":return e.stop()}},l,this)})},{key:"recalculate",value:function(e){if(this.dirty){var n=this.localTransform,r=this.worldTransform;t(n,this.orientation,this.position,this.scale),this.parent?p.multiply(r,this.parent.worldTransform,n):p.copy(r,n),d.normalFromMat4(this.normalMatrix,r)}e.set(this.id);var i=this.dirty;return this.dirty=!1,i}},{key:"recalculateSubtreeIds",value:function(){}},{key:"resize",value:function(e){("number"==typeof e?m.scale:m.multiply)(this.scale,this.scale,e),this.dirty=!0}},{key:"rotateX",value:function(e){h.rotateX(this.orientation,this.orientation,e*b),this.dirty=!0}},{key:"rotateY",value:function(e){h.rotateY(this.orientation,this.orientation,e*b),this.dirty=!0}},{key:"rotateZ",value:function(e){h.rotateZ(this.orientation,this.orientation,e*b),this.dirty=!0}},{key:"lookForward",value:function(){h.identity(this.orientation),this.dirty=!0}},{key:"translate",value:function(e){m.add(this.position,this.position,e),this.dirty=!0}},{key:"translateRelatively",value:function(e){m.add(this.position,this.position,m.transformQuat(v,e,this.orientation)),this.dirty=!0}},{key:"getEulerAngles",value:function(){var e=this.orientation,t=Math.atan2(2*(e[0]*e[1]+e[2]*e[3]),1-2*(e[1]*e[1]+e[2]*e[2])),n=Math.asin(2*(e[0]*e[2]-e[3]*e[1])),r=Math.atan2(2*(e[0]*e[3]+e[1]*e[2]),1-2*(e[2]*e[2]+e[3]*e[3]));return{roll:t,pitch:n,yaw:r}}}],[{key:"instances",value:[],enumerable:!0}]),c}(l),e("default",y)}}}),e.register("github:maxdavidson/tribus@master/camera/base",["npm:babel-runtime@5.4.3/helpers/inherits","npm:babel-runtime@5.4.3/helpers/get","npm:babel-runtime@5.4.3/helpers/create-class","npm:babel-runtime@5.4.3/helpers/class-call-check","github:toji/gl-matrix@master","github:maxdavidson/tribus@master/scene/base"],function(e){var t,n,r,i,o,a,s,u,c,l,f;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){r=e["default"]},function(e){i=e["default"]},function(e){o=e["default"]},function(e){a=e["default"]}],execute:function(){"use strict";s=o.mat3,u=o.mat4,c=o.vec3,l=o.vec4,f=function(e){function o(){var e=void 0===arguments[0]?{}:arguments[0];i(this,o),n(Object.getPrototypeOf(o.prototype),"constructor",this).call(this,"camera",e),this.projectionMatrix=u.create(),this.viewMatrix=u.create(),this.cameraMatrix=u.create(),this.worldPosition=c.create(),this.planes=new Float64Array(24),this.npOffsets=new Uint8Array(12),this._lastFailedPlanes=[]}return t(o,e),r(o,[{key:"recalculate",value:function(e){if(this.dirty=n(Object.getPrototypeOf(o.prototype),"recalculate",this).call(this,e),this.dirty){u.invert(this.viewMatrix,this.worldTransform),u.multiply(this.cameraMatrix,this.projectionMatrix,this.viewMatrix);var t=this.planes,r=this.cameraMatrix;t[0]=r[0]+r[3],t[1]=r[4]+r[7],t[2]=r[8]+r[11],t[3]=r[12]+r[15],t[4]=-r[0]+r[3],t[5]=-r[4]+r[7],t[6]=-r[8]+r[11],t[7]=-r[12]+r[15],t[8]=r[1]+r[3],t[9]=r[5]+r[7],t[10]=r[9]+r[11],t[11]=r[13]+r[15],t[12]=-r[1]+r[3],t[13]=-r[5]+r[7],t[14]=-r[9]+r[11],t[15]=-r[13]+r[15],t[16]=r[2]+r[3],t[17]=r[6]+r[7],t[18]=r[10]+r[11],t[19]=r[14]+r[15],t[20]=-r[2]+r[3],t[21]=-r[6]+r[7],t[22]=-r[10]+r[11],t[23]=-r[14]+r[15];for(var i=this.npOffsets,a=void 0,s=void 0,l=void 0,f=void 0,m=void 0,d=0;24>d;d+=4)a=t[d],s=t[d+1],l=t[d+2],f=t[d+3],m=2*(2*(a>0?1:0)+(s>0?1:0))+(l>0?1:0),i[d>>1]=3*m,i[(d>>1)+1]=3*(7-m);this.parent?c.transformMat4(this.worldPosition,this.position,this.parent.worldTransform):c.copy(this.worldPosition,this.position)}return this.dirty}},{key:"canSee",value:function(e,t){var n=e.aabb.points,r=this.planes,i=this._lastFailedPlanes[e.id],o=this.npOffsets,a=t[0],s=0,u=1,c=void 0,l=void 0,f=void 0,m=void 0,d=void 0,p=void 0,h=1<<(i>>2),b=i;if(-1!==i&&h&a){if(d=o[b>>1],c=r[b],l=r[b+1],f=r[b+2],m=r[b+3],c*n[d]+l*n[d+1]+f*n[d+2]<-m)return t[0]=s,0;p=o[(b>>1)+1],c*n[p]+l*n[p+1]+f*n[p+2]<-m&&(s|=h,u=2)}for(b=0,h=1;a>=h;b+=4,h+=h)if(b!==i&&h&a){if(c=r[b],l=r[b+1],f=r[b+2],m=r[b+3],d=o[b>>1],c*n[d]+l*n[d+1]+f*n[d+2]<-m)return this._lastFailedPlanes[e.id]=b,t[0]=s,0;p=o[(b>>1)+1],c*n[p]+l*n[p+1]+f*n[p+2]<-m&&(s|=h,u=2)}return t[0]=s,u}}]),o}(a),e("default",f)}}}),e.register("github:maxdavidson/tribus@master/geometry/geometry",["npm:babel-runtime@5.4.3/helpers/create-class","npm:babel-runtime@5.4.3/helpers/class-call-check","npm:memoizee@0.3.8","github:maxdavidson/tribus@master/extra/bounding-box","github:maxdavidson/tribus@master/webgl/buffer","github:maxdavidson/tribus@master/webgl/program","github:maxdavidson/tribus@master/extra/functional","github:maxdavidson/tribus@master/extra/ajax","github:maxdavidson/tribus@master/workers/wavefront","github:maxdavidson/tribus@master/workers/normal-vectors"],function(e){var t,n,r,i,o,a,s,u,c,l,f,m,d;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){r=e["default"]},function(e){i=e["default"]},function(e){o=e["default"]},function(e){a=e["default"]},function(e){s=e.construct},function(e){u=e.getArrayBuffer},function(e){c=e.workerpool},function(e){l=e.workerpool}],execute:function(){"use strict";f=WebGLRenderingContext,m=function(){function e(){var t=void 0===arguments[0]?{}:arguments[0],r=t.vertices,o=t.indices,a=t.texcoords,s=t.normals,u=void 0===s?new Float32Array(r.length):s;n(this,e);var c=function(e,t){return e instanceof t?e:new t(e)};this.vertices=c(r,Float32Array),this.indices=c(o,Uint16Array),this.normals=c(u,Float32Array),this.texcoords=c(a,Float32Array),this.bounds=new i,this.bounds.expandIntervals(this.vertices),this.bounds.computePoints()}return t(e,[{key:"generateNormals",value:function(){var e=this;return l.run({vertices:this.vertices,indices:this.indices},{transfers:[this.vertices.buffer,this.indices.buffer]}).then(function(t){var n=t.vertices,r=t.indices,i=t.normals;return e.vertices=n,e.indices=r,e.normals=i,e})}},{key:"getRenderer",value:function(e){return d.create(this,e)}}],[{key:"fromFile",value:function(t){var n=t.split(".").pop();switch(n){case"obj":return u(t).then(function(e){return c.run(e,{transfers:[e]})}).then(function(t){var n=new e(t);return 0===n.normals.length?n.generateNormals():n});default:throw new Error('Unsupported geometry file extension: ".'+n+'"')}}}]),e}(),e("default",m),d=function(){function e(t,r){n(this,e),this.gl=r,this.geometry=t;var i=r.getExtension("OES_vertex_array_object");i&&(this.vaoExtension=i,this.vao=this.vaoExtension.createVertexArrayOES()),this.vertexBuffer=new o(r,t.vertices,this.vao),this.normalBuffer=new o(r,t.normals,this.vao),this.texcoordBuffer=new o(r,t.texcoords,this.vao,{size:2}),this.indexBuffer=new o(r,t.indices,this.vao,{bufferType:f.ELEMENT_ARRAY_BUFFER})}return t(e,[{key:"render",value:function(){this.vao?this.vaoExtension.bindVertexArrayOES(this.vao):(this.vertexBuffer.bind(),this.normalBuffer.bind(),this.texcoordBuffer.bind(),this.indexBuffer.bind()),this.gl.drawElements(f.TRIANGLES,this.indexBuffer.data.length,f.UNSIGNED_SHORT,0),this.vao&&this.vaoExtension.bindVertexArrayOES(null)}}],[{key:"create",value:r(s(e),{length:2}),enumerable:!0}]),e}(),e("GeometryRenderer",d)}}}),e.register("github:maxdavidson/tribus@master/scene/model",["npm:babel-runtime@5.4.3/helpers/inherits","npm:babel-runtime@5.4.3/helpers/get","npm:babel-runtime@5.4.3/helpers/create-class","npm:babel-runtime@5.4.3/helpers/class-call-check","npm:babel-runtime@5.4.3/core-js/promise","github:maxdavidson/tribus@master/scene/base","github:maxdavidson/tribus@master/geometry/geometry","github:maxdavidson/tribus@master/material/base","github:maxdavidson/tribus@master/material/phong","github:toji/gl-matrix@master"],function(e){var t,n,r,i,o,a,s,u,c,l,f,m,d,p;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){r=e["default"]},function(e){i=e["default"]},function(e){o=e["default"]},function(e){a=e["default"]},function(e){s=e["default"]},function(e){u=e.Material},function(e){c=e["default"]},function(e){l=e["default"]}],execute:function(){"use strict";f=l.vec3,m=l.mat4,d=new Float64Array(24),p=function(e){function a(e,t,r){var l=this,f=void 0===arguments[3]?new c:arguments[3];i(this,a),n(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,e,t),this.geometry=r instanceof s?r:null,this.material=f instanceof u?f:null,this.onGeometryLoaded=o.resolve(r).then(function(e){return l.geometry=e,l.dirty=!0,e}),this.onMaterialLoaded=o.resolve(f).then(function(e){return l.material=e}),this.onReady=o.all([this.onGeometryLoaded,this.onMaterialLoaded]).then(function(){l.processing=!1}),this.mvpMatrix=m.create()}return t(a,e),r(a,[{key:"recalculate",value:function(e){var t=n(Object.getPrototypeOf(a.prototype),"recalculate",this).call(this,e);return t&&this.geometry&&(d.set(this.geometry.bounds.points),f.forEach(d,0,0,0,f.transformMat4,this.worldTransform),this.aabb.resetIntervals(),this.aabb.expandIntervals(d),this.aabb.computePoints()),this.dirty=t,t}}]),a}(a),e("default",p)}}}),e.register("github:maxdavidson/tribus@master/renderer",["npm:babel-runtime@5.4.3/helpers/inherits","npm:babel-runtime@5.4.3/helpers/get","npm:babel-runtime@5.4.3/helpers/create-class","npm:babel-runtime@5.4.3/helpers/class-call-check","npm:babel-runtime@5.4.3/core-js/promise","npm:babel-runtime@5.4.3/core-js/weak-map","npm:babel-runtime@5.4.3/core-js/get-iterator","npm:babel-runtime@5.4.3/core-js/weak-set","github:toji/gl-matrix@master","github:maxdavidson/tribus@master/extra/webgl-debug","github:maxdavidson/tribus@master/extra/event-aggregator","github:mrdoob/stats.js@master","github:maxdavidson/tribus@master/camera/base","github:maxdavidson/tribus@master/camera/perspective-camera","github:maxdavidson/tribus@master/scene/base","github:maxdavidson/tribus@master/scene/model","github:maxdavidson/tribus@master/scene/group","github:maxdavidson/tribus@master/light/base","github:maxdavidson/tribus@master/environment/environment","github:maxdavidson/tribus@master/extra/bitfield"],function(e){function t(e,t,n,r,i){for(var o=!0;o;){var a=e,s=t,u=n,c=r,l=i;f=void 0,o=!1,c=c||0,l=l||s.length;var f=Math.floor(c+(l-c)/2);if(s[f]===a)return f;if(1>=l-c)return s[f]>a?f-1:f;u(s[f],a)<0?(e=a,t=s,n=u,r=f,i=l,o=!0):(e=a,t=s,n=u,r=c,i=f,o=!0)}}function n(e,n,r){return n.splice(t(e,n,r)+1,0,e),n}function r(e){return d.makeDebugContext(e,function(e,t){console.error(""+d.glEnumToString(e)+" was caused by call to: "+t)},function(e,t){console.log("gl."+e+"("+d.glFunctionArgsToString(e,t)+")");var n=!0,r=!1,i=void 0;try{for(var o,a=l(t);!(n=(o=a.next()).done);n=!0){var s=o.value;void 0===s&&console.error("undefined passed to gl."+e+"("+d.glFunctionArgsToString(e,t)+")")}}catch(u){r=!0,i=u}finally{try{!n&&a["return"]&&a["return"]()}finally{if(r)throw i}}})}var i,o,a,s,u,c,l,f,m,d,p,h,b,v,g,y,x,w,j,_,E,T,S,M,A;return{setters:[function(e){i=e["default"]},function(e){o=e["default"]},function(e){a=e["default"]},function(e){s=e["default"]},function(e){u=e["default"]},function(e){c=e["default"]},function(e){l=e["default"]},function(e){f=e["default"]},function(e){m=e["default"]},function(e){d=e["default"]},function(e){p=e["default"]},function(e){h=e["default"]},function(e){b=e["default"]},function(e){v=e["default"]},function(e){g=e["default"]},function(e){y=e["default"]},function(e){x=e["default"]},function(e){w=e.Light},function(e){j=e["default"]},function(e){_=e["default"]}],execute:function(){"use strict";E=m.mat4,T=WebGLRenderingContext,S=new Uint8Array(1),M=[],A=function(e){function t(e,n,i){var a=this,l=void 0===arguments[3]?{}:arguments[3],f=l.environment,m=void 0===f?0:f,d=l.debug,p=void 0===d?!1:d,b=l.showFPS,y=void 0===b?!1:b,x=l.hidpi,w=void 0===x?!0:x,E=l.antialias,S=void 0===E?!0:E,M=l.fullscreen,A=void 0===M?!0:M;s(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.scene=e,this.camera=n,this.canvas=i,u.resolve(m).then(function(e){a.environment=e instanceof j?e:new j({ambient:e}),a.environment.initialize(a)}),this._activeModels=[],this._geometryRenderers=[],this._materialRenderers=[],this._lightRenderers=[],this._materialsUsingGeometry=new c,this._newNodes=new _,this._processedNodes=new _,this._visibleNodes=new _;var k=w?devicePixelRatio:1;i.width=Math.round(i.clientWidth*k),i.height=Math.round(i.clientHeight*k);var O=i.getContext("webgl",{antialias:S})||i.getContext("experimental-webgl",{antialias:S});if(void 0===O)throw"Your browser does not seem to support WebGL! Too bad!";if(p&&(O=r(O)),y){var L=new h;L.setMode(0),L.domElement.style.position="absolute",L.domElement.style.left="0px",L.domElement.style.top="0px",document.body.appendChild(L.domElement),this._stats=L}A&&n instanceof v&&(n.aspect=i.clientWidth/i.clientHeight,window.addEventListener("resize",function(){i.width=Math.round(i.clientWidth*k),i.height=Math.round(i.clientHeight*k),O.viewport(0,0,i.width,i.height),n.aspect=i.clientWidth/i.clientHeight})),this.gl=O;var R=function P(e){return e.thenBy=function(t){return P(function(n,r){return e(n,r)||t(n,r)})},e},I=function(e){var t=void 0===arguments[1]?function(e,t){return t-e}:arguments[1];return function(n,r){return t(e(n),e(r))}},D=function(e,t){return e===t?0:-1};this._modelComparator=R(I(function(e){return a._materialRenderers[e].program},D)).thenBy(I(function(e){return g.instances[e].material},D)),this.start=this.start.bind(this),this._processNode=this._processNode.bind(this),O.enable(T.DEPTH_TEST),O.enable(T.CULL_FACE),O.cullFace(T.BACK)}return i(t,e),a(t,[{key:"start",value:function(){var e=void 0===arguments[0]?0:arguments[0],t=this._lastTime||0;this.render(e-t,e),this._lastTime=e,this._animationFrame=window.requestAnimationFrame(this.start)}},{key:"stop",value:function(){this._animationFrame&&window.cancelAnimationFrame(this._animationFrame)}},{key:"_processNode",value:function(e){var t=g.instances[e];if(t instanceof y)this._processModel(t);else if(t instanceof w){this._lightRenderers.push(t.getRenderer(this.gl));var n=!0,r=!1,i=void 0;try{for(var o,a=l(this._materialRenderers);!(n=(o=a.next()).done);n=!0){var s=o.value;s.init(this)}}catch(u){r=!0,i=u}finally{try{!n&&a["return"]&&a["return"]()}finally{if(r)throw i}}}}},{key:"_processModel",value:function(e){var t=this;e.onReady.then(function(){var r=e.geometry.getRenderer(t.gl),i=e.material.getRenderer(t.gl);i.init(t),t._geometryRenderers[e.id]=r,t._materialRenderers[e.id]=i;var o=t._materialsUsingGeometry.get(e.geometry);return void 0===o&&(o=new f,t._materialsUsingGeometry.set(e.geometry,new f)),o.has(e.material)||(i.setGeometryRenderer(r),o.add(e.material)),-1!==t._activeModels.indexOf(e.id),n(e.id,t._activeModels,t._modelComparator),e.dirty=!0,e})}},{key:"_markVisibleNodes",value:function(e){var t=this.camera,n=this._visibleNodes,r=0;M[r++]=e,M[r++]=63;var i=void 0,o=void 0;do switch(S[0]=M[--r],e=M[--r],i=t.canSee(e,S),o=S[0],i){case 1:for(var a=0,s=e.subtreeIds,u=s.length;u>a;++a)n.set(s[a]);break;case 2:if(n.set(e.id),e instanceof x)for(var a=0,u=e.children.length;u>a;++a)M[r++]=e.children[a],M[r++]=o}while(r>0)}},{key:"render",value:function(e,t){this._stats&&this._stats.begin();var n=this.scene,r=this.camera,i=this._geometryRenderers,o=this._materialRenderers,a=this._activeModels,s=this._visibleNodes,u=this._newNodes,c=this._processedNodes,l=g.instances;this.trigger("tick",{sync:!0},e,t);var f=n.recalculate(u);if(u.diff(c,u),u.forEach(this._processNode),u.isEmpty||n.recalculateSubtreeIds(),c.union(u,c),f){this._markVisibleNodes(n),this.environment&&this.environment.render(this);for(var m=void 0,d=void 0,p=void 0,h=void 0,b=void 0,v=void 0,y=void 0,x=0,w=a.length;w>x;++x)m=a[x],y=l[m],s.get(m)&&((r.dirty||y.dirty)&&E.multiply(y.mvpMatrix,r.cameraMatrix,y.worldTransform),h=i[m],b=o[m],v=b.program,v!==d&&v.use(),b!==p&&b.beforeRender(this),b.render(y,this),h.render(this),b!==p&&b.afterRender(this),d=v,p=b),y.dirty=!1;r.dirty=!1,this.environment&&this.environment.renderLast(this),s.reset(),u.reset(),this._stats&&this._stats.end()}}}]),t}(p),e("default",A)}}}),e.register("github:maxdavidson/tribus@master/tribus",["github:maxdavidson/tribus@master/renderer","github:maxdavidson/tribus@master/extra/helpers","github:maxdavidson/tribus@master/scene/base","github:maxdavidson/tribus@master/scene/group","github:maxdavidson/tribus@master/scene/model","github:maxdavidson/tribus@master/control/mouseview","github:maxdavidson/tribus@master/light/directional-light","github:maxdavidson/tribus@master/light/pointlight","github:maxdavidson/tribus@master/light/spotlight","github:maxdavidson/tribus@master/camera/perspective-camera","github:maxdavidson/tribus@master/camera/orthographic-camera","github:maxdavidson/tribus@master/geometry/geometry","github:maxdavidson/tribus@master/geometry/shapes","github:maxdavidson/tribus@master/texture/texture2d","github:maxdavidson/tribus@master/texture/cubemap","github:maxdavidson/tribus@master/environment/skybox","github:maxdavidson/tribus@master/material/phong","github:maxdavidson/tribus@master/webgl/program","github:maxdavidson/tribus@master/webgl/shader","github:maxdavidson/tribus@master/webgl/buffer"],function(e){"use strict";return{setters:[function(t){e("Renderer",t["default"])},function(t){e("terrain",t.terrain),e("cube",t.cube),e("plane",t.plane),e("camera",t.camera),e("pointlight",t.pointlight),e("spotlight",t.spotlight),e("geometry",t.geometry),e("texture2d",t.texture2d),e("cubemap",t.cubemap),e("phong",t.phong),e("model",t.model),e("group",t.group)},function(t){e("Scene",t["default"])},function(t){e("Group",t["default"])},function(t){e("Model",t["default"])},function(t){e("MouseViewController",t["default"]);
},function(t){e("DirectionalLight",t["default"])},function(t){e("PointLight",t["default"])},function(t){e("SpotLight",t["default"])},function(t){e("PerspectiveCamera",t["default"])},function(t){e("OrthographicCamera",t["default"])},function(t){e("Geometry",t["default"])},function(t){e("Cube",t.Cube),e("Plane",t.Plane)},function(t){e("Texture2D",t["default"])},function(t){e("CubeMap",t["default"])},function(t){e("Skybox",t["default"])},function(t){e("PhongMaterial",t["default"])},function(t){e("GLProgram",t["default"])},function(t){e("GLShader",t["default"])},function(t){e("GLBuffer",t["default"])}],execute:function(){}}}),e.register("github:maxdavidson/tribus@master",["github:maxdavidson/tribus@master/tribus"],function(e){"use strict";return{setters:[function(t){for(var n in t)e(n,t[n])}],execute:function(){}}}),e.register("main",["github:maxdavidson/tribus@master"],function(e){"use strict";function t(){document.body.appendChild(h);var e=new n(p,m,h,{showFPS:!0});e.on("tick",function(e){f.rotateY(45*e/1e3)}),e.start()}var n,r,i,o,a,s,u,c,l,f,m,d,p,h;return{setters:[function(e){n=e.Renderer,r=e.Group,i=e.Model,o=e.Geometry,a=e.PhongMaterial,s=e.PerspectiveCamera,u=e.PointLight}],execute:function(){c=o.fromFile("bunny.obj"),l=new a({diffuse:[.5,.5,.5],specular:[0,0,1]}),f=new i("bunny",{position:[0,0,0],rotateY:45,rotateX:15},c,l),m=new s({position:[0,0,2]}),d=new u({position:[0,2,2],diffuse:[0,1,1]}),p=new r("world",{},[m,f,d]),h=document.createElement("canvas"),document.body?t():window.addEventListener("DOMContentLoaded",t)}}})});
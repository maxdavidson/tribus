!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var r=n(118)["default"],i=n(119),o=r(i),a=n(117),s=a.Geometry.fromFile("bunny.obj"),u=new a.PhongMaterial({diffuse:8421504,specular:255}),c=new a.Model("bunny",{position:[0,0,0],rotateY:45,rotateX:15},s,u),f=new a.PerspectiveCamera({position:[0,0,2]}),l=new a.PointLight({position:[0,2,2],color:65535}),h=new a.Group("world",{},[f,c,l]),d=document.createElement("canvas");o["default"](function(){document.body.appendChild(d);var t=new a.Renderer(h,f,d,{showFPS:!0});t.on("tick",function(t){c.rotateY(45*t/1e3)}),t.start()})},function(t,e){"use strict";e["default"]=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},e.__esModule=!0},function(t,e){"use strict";e["default"]=function(t){return t&&t.__esModule?t:{"default":t}},e.__esModule=!0},function(t,e){var n=t.exports={};"number"==typeof __e&&(__e=n)},function(t,e){var n=Object;t.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},function(t,e,n){e.glMatrix=n(11),e.mat2=n(187),e.mat2d=n(188),e.mat3=n(106),e.mat4=n(189),e.quat=n(190),e.vec2=n(191),e.vec3=n(107),e.vec4=n(108)},function(t,e,n){"use strict";var r=n(87)["default"],i=n(134)["default"];e["default"]=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=r(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i?i(t,e):t.__proto__=e)},e.__esModule=!0},function(t,e,n){var r=n(10),i=n(3),o="prototype",a=function(t,e){return function(){return t.apply(e,arguments)}},s=function(t,e,n){var u,c,f,l,h=t&s.G,d=t&s.P,p=h?r:t&s.S?r[e]:(r[e]||{})[o],v=h?i:i[e]||(i[e]={});h&&(n=e);for(u in n)c=!(t&s.F)&&p&&u in p,c&&u in v||(f=c?p[u]:n[u],h&&"function"!=typeof p[u]?l=n[u]:t&s.B&&c?l=a(f,r):t&s.W&&p[u]==f?!function(t){l=function(e){return this instanceof t?new t(e):t(e)},l[o]=t[o]}(f):l=d&&"function"==typeof f?a(Function.call,f):f,v[u]=l,d&&((v[o]||(v[o]={}))[u]=f))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,t.exports=s},function(t,e,n){var r=n(102)("wks"),i=n(10).Symbol;t.exports=function(t){return r[t]||(r[t]=i&&i[t]||(i||n(32))("Symbol."+t))}},function(t,e,n){t.exports={"default":n(152),__esModule:!0}},function(t,e){var n="undefined",r=t.exports=typeof window!=n&&window.Math==Math?window:typeof self!=n&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,e){var n={};n.EPSILON=1e-6,n.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,n.RANDOM=Math.random,n.setMatrixArrayType=function(t){GLMAT_ARRAY_TYPE=t};var r=Math.PI/180;n.toRadian=function(t){return t*r},t.exports=n},function(t,e,n){var r=n(15);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){var r=n(90);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(4),i=n(68);t.exports=n(20)?function(t,e,n){return r.setDesc(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e){t.exports=function(t){return null!==t&&("object"==typeof t||"function"==typeof t)}},function(t,e,n){"use strict";var r=n(214),i=Math.max;t.exports=function(t){return i(0,r(t))}},function(t,e){"use strict";t.exports=function(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t}},function(t,e,n){"use strict";var r=n(1)["default"],i=n(26)["default"],o=n(41)["default"],a=n(71)["default"],s=n(2)["default"];e.__esModule=!0;var u=n(5),c=n(53),f=s(c),l=n(77),h=s(l),d=Math.PI/180,p=u.vec3.create(),v=function(){function t(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=n.parent,o=void 0===i?null:i,a=n.position,s=void 0===a?[0,0,0]:a,c=n.rotateX,f=void 0===c?0:c,l=n.rotateY,d=void 0===l?0:l,p=n.rotateZ,v=void 0===p?0:p,m=n.scale,_=void 0===m?1:m;r(this,t),this.id=t.instances.length,t.instances.push(this),this.name=e,this.parent=o,this.orientation=u.quat.create(),this.position=u.vec3.create(),this.scale=u.vec3.fromValues(1,1,1),this.localTransform=u.mat4.create(),this.worldTransform=u.mat4.create(),this.normalMatrix=u.mat3.create(),this._subtreeIds=[this.id],this.aabb=new h["default"],this.dirty=!0,this.processing=!1,this.resize(_),this.rotateX(f),this.rotateZ(v),this.rotateY(d),this.translate(s)}return t.prototype.toString=function(){for(var t=this,e=arguments.length<=0||void 0===arguments[0]?["name","dirty"]:arguments[0],n=arguments.length<=1||void 0===arguments[1]?0:arguments[1],r="",i=" ",o=0;2*n>o;++o)r+=i;return r+this.constructor.name+": { "+e.map(function(e){return e+": "+t[e]}).join(", ")+" }"},t.prototype.query=function(t){for(var e=this,n=Array.isArray(e),r=0,e=n?e:i(e);;){var o;if(n){if(r>=e.length)break;o=e[r++]}else{if(r=e.next(),r.done)break;o=r.value}var a=o;if(a.name===t)return a}},t.prototype.forEach=function(t){t(this)},t.prototype[o]=a.mark(function e(){return a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this;case 2:case"end":return t.stop()}},e,this)}),t.prototype.recalculate=function(t,e){var n=this.dirty;return n&&u.mat4.fromRotationTranslationScale(this.localTransform,this.orientation,this.position,this.scale),e||n&&this.parent?u.mat4.multiply(this.worldTransform,this.parent.worldTransform,this.localTransform):n&&u.mat4.copy(this.worldTransform,this.localTransform),(e||n)&&u.mat3.normalFromMat4(this.normalMatrix,this.worldTransform),t.set(this.id),this.dirty=!1,n},t.prototype.recalculateSubtreeIds=function(){},t.prototype.resize=function(t){("number"==typeof t?u.vec3.scale:u.vec3.multiply)(this.scale,this.scale,t),this.dirty=!0},t.prototype.rotateX=function(t){u.quat.rotateX(this.orientation,this.orientation,t*d),this.dirty=!0},t.prototype.rotateY=function(t){u.quat.rotateY(this.orientation,this.orientation,t*d),this.dirty=!0},t.prototype.rotateZ=function(t){u.quat.rotateZ(this.orientation,this.orientation,t*d),this.dirty=!0},t.prototype.lookForward=function(){u.quat.identity(this.orientation),this.dirty=!0},t.prototype.translate=function(t){u.vec3.add(this.position,this.position,t),this.dirty=!0},t.prototype.translateRelatively=function(t){u.vec3.add(this.position,this.position,u.vec3.transformQuat(p,t,this.orientation)),this.dirty=!0},t}();e["default"]=v,v.instances=[],v.dirtyNodes=new f["default"],t.exports=e["default"]},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){t.exports=!n(63)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){"use strict";var r=n(167)(!0);n(65)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){n(105);var r=n(29);r.NodeList=r.HTMLCollection=r.Array},function(t,e,n){"use strict";var r=n(116),i=n(110),o=n(235);t.exports=function(t){var e,a=r(arguments[1]);return a.normalizer||(e=a.length=i(a.length,t.length,a.async),0!==e&&(a.primitive?e===!1?a.normalizer=n(234):e>1&&(a.normalizer=n(232)(e)):e===!1?a.normalizer=n(233)():1===e?a.normalizer=n(230)():a.normalizer=n(231)(e))),a.async&&n(192),a.dispose&&n(193),a.maxAge&&n(194),a.max&&n(195),a.refCounter&&n(196),o(t,a)}},function(t,e){"use strict"},function(t,e,n){"use strict";var r=n(61)["default"];e.__esModule=!0;var i=function(t){return function(){for(var e=arguments.length,n=Array(e),i=0;e>i;i++)n[i]=arguments[i];return new(r.apply(t,[null].concat(n)))}};e.construct=i;var o=function(t){return function(){return t.apply(void 0,arguments).apply(void 0,arguments)}};e.delegate=o},function(t,e,n){t.exports={"default":n(142),__esModule:!0}},function(t,e,n){"use strict";var r=n(88)["default"];e["default"]=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r(t,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),e.__esModule=!0},function(t,e,n){var r=n(13),i=n(98),o=n(96),a=n(12),s=n(69),u=n(70);t.exports=function(t,e,n,c){var f,l,h,d=u(t),p=r(n,c,e?2:1),v=0;if("function"!=typeof d)throw TypeError(t+" is not iterable!");if(o(d))for(f=s(t.length);f>v;v++)e?p(a(l=t[v])[0],l[1]):p(t[v]);else for(h=d.call(t);!(l=h.next()).done;)i(h,p,l.value,e)}},function(t,e){t.exports={}},function(t,e,n){var r=n(19),i=n(14),o=n(8)("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,o)&&i(t,o,e)}},function(t,e,n){var r=n(64),i=n(44);t.exports=function(t){return r(i(t))}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e){},function(t,e){"use strict";t.exports=function(t){if(null==t)throw new TypeError("Cannot use null or undefined");return t}},function(t,e,n){"use strict";function r(t){return fetch(t).then(function(t){return t.arrayBuffer()}).then(function(t){return v.workerpool.run({type:"buffer",buffer:t}).filter(function(t){var e=t[0];t[1];return"geometry"===e}).take(1).toPromise()}).then(function(t){var e=(t[0],t[1]);return new g(e)}).then(g.fillInBlanks)}var i=n(1)["default"],o=n(9)["default"],a=n(2)["default"];e.__esModule=!0;var s=n(23),u=a(s),c=n(77),f=a(c),l=n(85),h=a(l),d=n(38),p=(a(d),n(25)),v=n(86),m=n(129),_={obj:r};e.fileLoaders=_;var g=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=e.vertices,r=e.indices,o=e.texcoords,a=e.normals,s=void 0===a?new Float32Array(n.length):a,u=e.name;i(this,t);var c=function(t,e){return t instanceof e?t:new e(t)};this.vertices=c(n,Float32Array),this.indices=c(r,Uint32Array),this.normals=c(s,Float32Array),this.texcoords=c(o,Float32Array),this.name=u,this.bounds=new f["default"],this.bounds.reset(),this.bounds.expandFromPoints(this.vertices),this.bounds.computePoints()}return t.fromFile=function(t){var e=arguments.length<=1||void 0===arguments[1]?t.split(".").pop():arguments[1];return function(){var n=_[e];if(n)return n(t);throw new Error('Unsupported geometry file extension: ".'+extension+'"')}()},t.fillInBlanks=function(t){var e=[];if(0===t.normals.length){var n=function(t){return m.workerpool.run({vertices:t.vertices,indices:t.indices},[t.vertices.buffer,t.indices.buffer]).toPromise().then(function(e){var n=e.vertices,r=e.indices,i=e.normals;return t.vertices=n,t.indices=r,t.normals=i,t})};e.push(n)}return 0===t.texcoords.length,e.reduce(function(t,e){return t.then(e)},o.resolve(t))},t.prototype.generateNormals=function(){var t=this;return m.workerpool.run({vertices:this.vertices,indices:this.indices},[this.vertices.buffer,this.indices.buffer]).toPromise().then(function(e){var n=e.vertices,r=e.indices,i=e.normals;return t.vertices=n,t.indices=r,t.normals=i,t})},t.prototype.getRenderer=function(t){return y.create(this,t)},t}();e["default"]=g;var y=function(){function t(e,n){i(this,t),this.gl=n,this.geometry=e;var r=n.getExtension("OES_vertex_array_object");r&&(this.vaoExtension=r,this.vao=this.vaoExtension.createVertexArrayOES()),this.indexLength=e.indices.length,this.vertexBuffer=new h["default"](n,e.vertices,this.vao),this.normalBuffer=new h["default"](n,e.normals,this.vao),this.texcoordBuffer=new h["default"](n,e.texcoords,this.vao,{size:2}),this.indexBuffer=new h["default"](n,e.indices,this.vao,{bufferType:n.ELEMENT_ARRAY_BUFFER})}return t.prototype.render=function(){this.vao?this.vaoExtension.bindVertexArrayOES(this.vao):(this.vertexBuffer.bind(),this.normalBuffer.bind(),this.texcoordBuffer.bind(),this.indexBuffer.bind()),this.gl.drawElements(4,this.indexLength,5125,0),this.vao&&this.vaoExtension.bindVertexArrayOES(null)},t}();e.GeometryRenderer=y,y.create=u["default"](p.construct(y),{length:2})},function(t,e,n){"use strict";var r=n(6)["default"],i=n(1)["default"],o=n(89)["default"],a=n(2)["default"];e.__esModule=!0;var s=n(5),u=n(18),c=a(u),f=n(23),l=a(f),h=n(54),d=function(t){function e(n,r){var o=this,a=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];i(this,e),t.call(this,n,a);var u=a.color,c=void 0===u?16777215:u;this.color=c,this._lastColor=null,this._colorVector=h.convertColorToVector(this.color),this.worldPosition=s.vec3.create(),this.getRenderer=l["default"](function(t){return new r(o,t)})}return r(e,t),e.prototype.recalculate=function(e,n){this.color!==this._lastColor&&(h.convertColorToVector(this.color,this._colorVector),this._lastColor=this.color);var r=t.prototype.recalculate.call(this,e,n);return n||r&&this.parent?s.vec3.transformMat4(this.worldPosition,this.position,this.parent.worldTransform):s.vec3.copy(this.worldPosition,this.position),r},e}(c["default"]);e.LightBase=d;var p=new o,v=function(){function t(e,n){i(this,t),this.light=e,this.gl=n,this.id=t.allocateLight(e.constructor),this.getLocations=l["default"](this.getLocations.bind(this))}return t.allocateLight=function(t){var e=p.get(t)||0;return p.set(t,e+1),e},t.prototype.getLocations=function(t){return{}},t.prototype.render=function(t){},t}();e.LightRendererBase=v},function(t,e,n){"use strict";function r(t){var e=l.get(t)||0;return l.set(t,e+1),e}function i(t){var e=arguments.length<=1||void 0===arguments[1]?t.width:arguments[1],n=arguments.length<=2||void 0===arguments[2]?t.height:arguments[2];return function(){var r=document.createElement("canvas");r.width=e,r.height=n;var i=r.getContext("2d");return t instanceof ImageData?i.putImageData(t,0,0,e,n):i.drawImage(t,0,0,e,n),r}()}function o(t){var e=arguments.length<=1||void 0===arguments[1]?t.split(".").pop():arguments[1];return function(){return(h[e]||a)(t)}()}function a(t){return new c(function(e,n){function r(){o(),e(a)}function i(e){n('Image "'+t+"\" failed to load with the browser's built-in image loader."),o()}function o(){a.removeEventListener("load",r),a.removeEventListener("error",i)}var a=document.createElement("img");a.addEventListener("error",i,!1),a.addEventListener("load",r,!1),a.src=t})}function s(t){return fetch(t).then(function(t){return t.arrayBuffer()}).then(function(t){return f.workerpool.run(t,[t]).toPromise()}).then(function(t){var e=t.data,n=t.width,r=t.height,i=d.createImageData(n,r);return i.data.set(e),i})}var u=n(40)["default"],c=n(9)["default"];e.__esModule=!0,e.allocateTextureUnit=r,e.resizeImage=i,e.getImage=o;var f=n(130),l=new u,h={tga:s};e.converters=h;var d=document.createElement("canvas").getContext("2d")},function(t,e,n){"use strict";var r=n(1)["default"],i=n(61)["default"],o=n(40)["default"],a=n(9)["default"],s=n(2)["default"];e.__esModule=!0;var u=n(39),c=s(u),f={35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT"},l=function(){function t(e,n,i){r(this,t),this.gl=e,this.handle=e.createProgram(),this._attribLocationCache=new o,this._uniformLocationCache=new o,this.vertexShader=n,this.fragmentShader=i,e.attachShader(this.handle,this.vertexShader.handle),e.attachShader(this.handle,this.fragmentShader.handle),e.linkProgram(this.handle);var a=this.getInfoLog();""!==a&&console.error(a)}return t.prototype.use=function(){this.gl.useProgram(this.handle)},t.prototype.destroy=function(){this.gl.deleteProgram(this.handle),this.fragmentShader.destroy(),this.vertexShader.destroy()},t.prototype.getUniformLocation=function(t){var e=this._uniformLocationCache.get(t);return void 0===e&&(e=this.gl.getUniformLocation(this.handle,t),null===e&&console.error("Couldn't get uniform location: "+t),this._uniformLocationCache.set(t,e)),e},t.prototype.getAttribLocation=function(t){var e=this._attribLocationCache.get(t);return void 0===e&&(e=this.gl.getAttribLocation(this.handle,t),null===e&&console.error("Couldn't get attribute location: "+t),this._attribLocationCache.set(t,e)),e},t.prototype.getInfoLog=function(){return this.gl.getProgramInfoLog(this.handle)},t.prototype.getActiveUniforms=function(){for(var t=[],e=0;e<this.gl.getProgramParameter(this.handle,this.gl.ACTIVE_UNIFORMS);++e){var n=this.gl.getActiveUniform(this.handle,e);n.typeName=f[n.type],n.value=this.gl.getUniform(this.handle,this.gl.getUniformLocation(this.handle,n.name)),t.push(n)}return t},t.prototype.getActiveAttributes=function(){for(var t=[],e=0;e<this.gl.getProgramParameter(this.handle,this.gl.ACTIVE_ATTRIBUTES);++e){var n=this.gl.getActiveAttrib(this.handle,e);n.typeName=f[n.type],t.push(n)}return t},t.fromShaderPromises=function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;n>o;o++)r[o-1]=arguments[o];return a.all(r).then(function(n){return new(i.apply(t,[null].concat([e],n)))})},t.fromShaderFiles=function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;n>i;i++)r[i-1]=arguments[i];return t.fromShaderPromises(e,r.map(function(t){return c["default"].fromFile(e,t)}))},t.prototype.setUniform=function(t,e){this.gl.uniform1f(this.getUniformLocation(t),e)},t.prototype.setUniformInt=function(t,e){this.gl.uniform1i(this.getUniformLocation(t),e)},t.prototype.setUniformVector=function(t,e){var n=this.getUniformLocation(t);switch(e.length){case 1:this.gl.uniform1fv(n,e);break;case 2:this.gl.uniform2fv(n,e);break;case 3:this.gl.uniform3fv(n,e);break;case 4:this.gl.uniform4fv(n,e)}},t.prototype.setUniformIntVector=function(t,e){var n=this.getUniformLocation(t);switch(e.length){case 1:this.gl.uniform1iv(n,e);break;case 2:this.gl.uniform2iv(n,e);break;case 3:this.gl.uniform3iv(n,e);break;case 4:this.gl.uniform4iv(n,e)}},t.prototype.setUniformMatrix=function(t,e){var n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],r=this.getUniformLocation(t);switch(e.length){case 4:this.gl.uniformMatrix2fv(r,n,e);break;case 9:this.gl.uniformMatrix3fv(r,n,e);break;case 16:this.gl.uniformMatrix4fv(r,n,e)}},t}();e["default"]=l,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(1)["default"];e.__esModule=!0;var i=function(){function t(e,n,i){r(this,t),this.gl=e,this.type=i,this.handle=e.createShader(i),e.shaderSource(this.handle,n),e.compileShader(this.handle);var o=this.getInfoLog();""!==o&&console.error(o)}return t.prototype.destroy=function(){this.gl.deleteShader(this.handle)},t.prototype.getInfoLog=function(){return this.gl.getShaderInfoLog(this.handle)},t.prototype.getSource=function(){return this.gl.getShaderSource(this.handle)},t.prototype.getTranslatedSource=function(){return this.gl.getExtension("WEBGL_debug_shaders").getTranslatedShaderSource(this.handle)},t.fromFile=function(e,n){var r={vert:e.VERTEX_SHADER,frag:e.FRAGMENT_SHADER}[n.split(".").pop()];return fetch(n).then(function(t){return t.text()}).then(function(n){return new t(e,n,r)})},t}();e["default"]=i,t.exports=e["default"]},function(t,e,n){t.exports={"default":n(143),__esModule:!0}},function(t,e,n){t.exports={"default":n(155),__esModule:!0}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){"use strict";var r=n(4),i=n(7),o=n(14),a=n(97),s=n(28),u=n(47);t.exports=function(t,e,c,f,l,h){var d=n(10)[t],p=d,v=l?"set":"add",m=p&&p.prototype,_={};return n(20)&&"function"==typeof p&&(h||!a&&m.forEach&&m.entries)?(p=e(function(e,n){u(e,p,t),e._c=new d,void 0!=n&&s(n,l,e[v],e)}),r.each.call("add,clear,delete,forEach,get,has,set,keys,values,entries".split(","),function(t){var e="add"==t||"set"==t;t in m&&(!h||"clear"!=t)&&o(p.prototype,t,function(n,r){var i=this._c[t](0===n?0:n,r);return e?this:i})}),"size"in m&&r.setDesc(p.prototype,"size",{get:function(){return this._c.size}})):(p=f.getConstructor(e,t,l,v),n(45)(p.prototype,c)),n(30)(p,t),_[t]=p,i(i.G+i.W+i.F,_),h||f.setStrong(p,t,l),p}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(46);t.exports=function(t,e){for(var n in e)r(t,n,e[n]);return t}},function(t,e,n){t.exports=n(14)},function(t,e){t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError(n+": use the 'new' operator!");return t}},function(t,e,n){var r=n(44);t.exports=function(t){return Object(r(t))}},function(t,e,n){"use strict";var r,i=n(113),o=n(116),a=n(114),s=n(221);r=t.exports=function(t,e){var n,r,a,u,c;return arguments.length<2||"string"!=typeof t?(u=e,e=t,t=null):u=arguments[2],null==t?(n=a=!0,r=!1):(n=s.call(t,"c"),r=s.call(t,"e"),a=s.call(t,"w")),c={value:e,configurable:n,enumerable:r,writable:a},u?i(o(u),c):c},r.gs=function(t,e,n){var r,u,c,f;return"string"!=typeof t?(c=n,n=e,e=t,t=null):c=arguments[3],null==e?e=void 0:a(e)?null==n?n=void 0:a(n)||(c=n,n=void 0):(c=e,e=n=void 0),null==t?(r=!0,u=!1):(r=s.call(t,"c"),u=s.call(t,"e")),f={get:e,set:n,configurable:r,enumerable:u},c?i(o(c),f):f}},function(t,e){function n(){c=!1,a.length?u=a.concat(u):f=-1,u.length&&r()}function r(){if(!c){var t=setTimeout(n);c=!0;for(var e=u.length;e;){for(a=u,u=[];++f<e;)a[f].run();f=-1,e=u.length}a=null,c=!1,clearTimeout(t)}}function i(t,e){this.fun=t,this.array=e}function o(){}var a,s=t.exports={},u=[],c=!1,f=-1;s.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new i(t,e)),1!==u.length||c||setTimeout(r,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=o,s.addListener=o,s.once=o,s.off=o,s.removeListener=o,s.removeAllListeners=o,s.emit=o,s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(t,e,n){(function(t,r){function i(t,e){this._id=t,this._clearFn=e}var o=n(50).nextTick,a=Function.prototype.apply,s=Array.prototype.slice,u={},c=0;e.setTimeout=function(){return new i(a.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new i(a.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},e.setImmediate="function"==typeof t?t:function(t){var n=c++,r=arguments.length<2?!1:s.call(arguments,1);return u[n]=!0,o(function(){u[n]&&(r?t.apply(null,r):t.call(null),e.clearImmediate(n))}),n},e.clearImmediate="function"==typeof r?r:function(t){delete u[t]}}).call(e,n(51).setImmediate,n(51).clearImmediate)},function(t,e,n){"use strict";var r=n(6)["default"],i=n(1)["default"],o=n(2)["default"];e.__esModule=!0;var a=n(5),s=n(18),u=o(s),c=function(t){function e(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,e),t.call(this,"camera",n),this.projectionMatrix=a.mat4.create(),this.viewMatrix=a.mat4.create(),this.cameraMatrix=a.mat4.create(),this.worldPosition=a.vec3.create(),this._planes=new Float64Array(24),this._npOffsets=new Uint8Array(12),this._lastFailedPlanes=[]}return r(e,t),e.prototype.recalculate=function(e,n){if(this.dirty=t.prototype.recalculate.call(this,e,n),n||this.dirty){a.mat4.invert(this.viewMatrix,this.worldTransform),a.mat4.multiply(this.cameraMatrix,this.projectionMatrix,this.viewMatrix);var r=this._planes,i=this.cameraMatrix,o=i[0],s=i[1],u=i[2],c=i[3],f=i[4],l=i[5],h=i[6],d=i[7],p=i[8],v=i[9],m=i[10],_=i[11],g=i[12],y=i[13],b=i[14],x=i[15];r[0]=o+c,r[1]=f+d,r[2]=p+_,r[3]=g+x,r[4]=-o+c,r[5]=-f+d,r[6]=-p+_,r[7]=-g+x,r[8]=s+c,r[9]=l+d,r[10]=v+_,r[11]=y+x,r[12]=-s+c,r[13]=-l+d,r[14]=-v+_,r[15]=-y+x,r[16]=u+c,r[17]=h+d,r[18]=m+_,r[19]=b+x,r[20]=-u+c,r[21]=-h+d,r[22]=-m+_,r[23]=-b+x;for(var E=this._npOffsets,w=void 0,T=void 0,A=void 0,M=void 0,S=void 0,R=0;24>R;R+=4)w=r[R],T=r[R+1],A=r[R+2],M=r[R+3],S=2*(2*(w>0?1:0)+(T>0?1:0))+(A>0?1:0),E[R>>1]=3*S,E[(R>>1)+1]=3*(7-S);this.parent?a.vec3.transformMat4(this.worldPosition,this.position,this.parent.worldTransform):a.vec3.copy(this.worldPosition,this.position)}return this.dirty},e.prototype.canSee=function(t,e){var n=t.aabb.points,r=this._planes,i=this._lastFailedPlanes[t.id],o=this._npOffsets,a=e[0],s=0,u=1,c=void 0,f=void 0,l=void 0,h=void 0,d=void 0,p=void 0,v=1<<(i>>2),m=i;if(-1!==i&&v&a){if(d=o[m>>1],c=r[m],f=r[m+1],l=r[m+2],h=r[m+3],c*n[d]+f*n[d+1]+l*n[d+2]<-h)return e[0]=s,0;p=o[(m>>1)+1],c*n[p]+f*n[p+1]+l*n[p+2]<-h&&(s|=v,u=2)}for(m=0,v=1;a>=v;m+=4,v+=v)if(m!==i&&v&a){if(c=r[m],f=r[m+1],l=r[m+2],h=r[m+3],d=o[m>>1],c*n[d]+f*n[d+1]+l*n[d+2]<-h)return this._lastFailedPlanes[t.id]=m,e[0]=s,0;p=o[(m>>1)+1],c*n[p]+f*n[p+1]+l*n[p+2]<-h&&(s|=v,u=2)}return e[0]=s,u},e}(u["default"]);e["default"]=c,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return~t}function i(t,e){return t&e}function o(t,e){return~(t&e)}function a(t,e){return t|e}function s(t,e){return~(t|e)}function u(t,e){return t^e}function c(t,e){return~(t^e)}function f(t,e){return~t&e}function l(t,e){return t&~e}function h(t,e){var n=arguments.length<=2||void 0===arguments[2]?new m:arguments[2],r=e._buffer,i=n._buffer,o=r.length;i.length<o&&(n._resize((o<<5)-1),i=n._buffer);for(var a=0;o>a;++a)i[a]=t(r[a]);return n}function d(t,e,n){var r=arguments.length<=3||void 0===arguments[3]?new m:arguments[3],i=e._buffer,o=n._buffer,a=r._buffer,s=Math.max(i.length,o.length);a.length<s&&(r._resize((s<<5)-1),a=r._buffer);for(var u=0;s>u;++u)a[u]=t(i[u],o[u]);return r}var p=n(1)["default"],v=n(58)["default"];e.__esModule=!0,e.not=r,e.and=i,e.nand=o,e.or=a,e.nor=s,e.xor=u,e.xnor=c,e.added=f,e.removed=l,e.applyUnaryFunction=h,e.applyBinaryFunction=d;var m=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?8:arguments[0],n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=n.grow,i=void 0===r?!0:r;p(this,t);var o=(e>>5)+1;this._grow=i,this._buffer=new Uint32Array(o),this._emptyBuffer=new Uint32Array(o)}return t.prototype.isEmpty=function(){for(var t=0,e=this._buffer,n=e.length;n>t;++t)if(e[t])return!1;return!0},t.prototype.cardinality=function(){for(var t=this._buffer,e=t.length,n=0,r=0,i=0;e>i;++i)r=t[i],r&&(r-=r>>1&1431655765,r=(858993459&r)+(r>>2&858993459),n+=16843009*(r+(r>>4)&252645135)>>24);return n},t.prototype.toString=function(){return v(this._buffer,function(t){var e="00000000000000000000000000000000",n=t.toString(2);return(e.substring(0,32-n.length)+n).split("").reverse().join("")}).join("")},t.prototype.toArray=function(){for(var t=this._buffer,e=t.length<<5,n=[],r=0;e>r;++r)t[r>>5]&1<<r%32&&n.push(r);return n},t.prototype.toBitArray=function(){for(var t=this._buffer,e=t.length<<5,n=new Array(e),r=0;e>r;++r)n[r]=0!==(t[r>>5]&1<<r%32);return n},t.prototype.get=function(t){return 0!==(this._buffer[t>>5]&1<<t%32)},t.prototype.set=function(t){var e=t>>5;this._grow&&e>=this._buffer.length&&this._resize(t),this._buffer[e]|=1<<t%32},t.prototype.unset=function(t){var e=t>>5;this._grow&&e>=this._buffer.length&&this._resize(t),this._buffer[e]&=~(1<<t%32)},t.prototype.reset=function(){this._buffer.set(this._emptyBuffer)},t.prototype.forEach=function(t){for(var e=this._buffer,n=this._buffer.length,r=0,i=0,o=0;n>o;++o)r=0|e[o],i=o<<5,1&r&&t(i),2&r&&t(i+1),4&r&&t(i+2),8&r&&t(i+3),16&r&&t(i+4),32&r&&t(i+5),64&r&&t(i+6),128&r&&t(i+7),256&r&&t(i+8),512&r&&t(i+9),1024&r&&t(i+10),2048&r&&t(i+11),4096&r&&t(i+12),8192&r&&t(i+13),16384&r&&t(i+14),32768&r&&t(i+15),65536&r&&t(i+16),131072&r&&t(i+17),262144&r&&t(i+18),524288&r&&t(i+19),1048576&r&&t(i+20),2097152&r&&t(i+21),4194304&r&&t(i+22),8388608&r&&t(i+23),16777216&r&&t(i+24),33554432&r&&t(i+25),67108864&r&&t(i+26),134217728&r&&t(i+27),268435456&r&&t(i+28),536870912&r&&t(i+29),1073741824&r&&t(i+30),-2147483648&r&&t(i+31)},t.prototype.diff=function(t,e){return d(u,t,e)},t.prototype.union=function(t,e){return d(a,this,t,e)},t.prototype.intersection=function(t,e){return d(i,this,bitset,e)},t.prototype._resize=function(t){var e=this._buffer,n=(t>>5)+1;this._buffer=new Uint32Array(n),this._emptyBuffer=new Uint32Array(n),this._buffer.set(e)},t}();e["default"]=m},function(t,e,n){"use strict";function r(t){var e=arguments.length<=1||void 0===arguments[1]?i.vec3.create():arguments[1];return"number"==typeof t?i.vec3.set(e,((16711680&t)>>16)/255,((65280&t)>>8)/255,(255&t)/255):"length"in t&&i.vec3.copy(e,t),e}e.__esModule=!0,e.convertColorToVector=r;var i=n(5)},function(t,e,n){"use strict";var r=n(1)["default"],i=n(27)["default"],o=n(40)["default"],a=n(2)["default"];e.__esModule=!0;var s=n(109),u=a(s),c=function(){function t(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=n.timeout,a=void 0===i?5:i,s=n.poolSize,u=void 0===s?2:s;r(this,t),this.url=e,this.poolSize=u,this.timeout=a,this._taskQueue=[],this._workerCount=0,this._availableWorkers=[],this._timeouts=new o}return t.prototype.run=function(t){var e=this,n=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],r=new f(t,n),i=this._availableWorkers.shift();if(!i&&this._workerCount<this.poolSize&&(i=new Worker(this.url),this._workerCount++),i){var o=this._timeouts.get(i);o&&(window.clearTimeout(o),this._timeouts["delete"](i)),r.run(i)}else this._taskQueue.push(r);return r.onComplete.then(function(){var t=e._taskQueue.shift();t?t.run(r.worker):(e._availableWorkers.push(r.worker),e._timeouts.set(r.worker,window.setTimeout(function(){e._availableWorkers.splice(e._availableWorkers.indexOf(r.worker),1),r.worker.terminate(),e._workerCount--},1e3*e.timeout)))}),r.stream},t.fromFunction=function(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=n.dependencies,i=void 0===r?[]:r,o="self.onmessage = function (e) {\n                ("+e.toString()+")({\n                    progress: function progress(payload, transferList) {\n                        self.postMessage(['progress', payload], transferList);\n                    },\n                    error: function reject(payload, transferList) {\n                        self.postMessage(['error', payload], transferList);\n                    },\n                    done: function resolve(payload, transferList) {\n                        self.postMessage(['done', payload], transferList);\n                    }\n                }, e.data);\n            };",a=new Blob([[].concat(i,[o]).join(";\n")],{type:"application/javascript"}),s=URL.createObjectURL(a);return new t(s,n)},t}();e["default"]=c;var f=function(){function t(e){var n=this,i=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];r(this,t),this.id=t.count++,this.payload=e,this.transferList=i,this._workerStream=null,this._workerAdded=u["default"].pool(),this.stream=this._workerAdded.take(1).flatMap(function(){return n._workerStream})}return t.prototype.run=function(t){this.worker=t,t.postMessage(this.payload,this.transferList);var e=u["default"].fromEvents(t,"message");this._workerStream=e.withHandler(function(t,e){var n=e.type,r=e.value;switch(n){case"value":var i=r.data,o=i[0],a=i[1];switch(o){case"progress":t.emit(a);break;case"error":t.error(a);break;case"done":void 0!==a&&t.emit(a),t.end();break;default:console.error("Unknown eventType: "+o)}break;case"error":t.error(r);break;case"end":t.end();break;default:console.error("Unknown type: "+n)}}),this._workerAdded.plug(u["default"].constant(!0))},i(t,[{
key:"onComplete",get:function(){return this.stream.toPromise()}}]),t}();f.count=0,t.exports=e["default"]},function(t,e,n){"use strict";function r(t,e){return s(t).map(function(e){var n=t[e];switch(typeof n){case"boolean":return n?"#define "+e:"";case"number":return"#define "+e+" "+n;default:console.error("Incompatible type!")}}).join("\n")+"\n"+e}var i=n(6)["default"],o=n(27)["default"],a=n(1)["default"],s=n(60)["default"],u=n(9)["default"],c=n(26)["default"],f=n(131)["default"],l=n(59)["default"],h=n(40)["default"],d=n(135)["default"],p=n(2)["default"];e.__esModule=!0;var v=n(5),m=n(23),_=p(m),g=n(123),y=n(82),b=n(84),x=p(b),E=n(25),w=n(79),T=p(w),A=n(80),M=p(A),S=n(81),R=p(S),P=n(38),L=p(P),O=n(39),I=p(O),k=n(237),C=p(k),N=n(236),F=p(N),U=n(54),D=n(37),B=function(t){function e(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],r=n.shininess,i=void 0===r?10:r,o=n.ambient,s=void 0===o?0:o,u=n.diffuse,c=void 0===u?8421504:u,f=n.specular,l=void 0===f?c:f,h=n.name,d=void 0===h?"":h;a(this,e),t.call(this),this.shininess=i,this.ambient=s,this.diffuse=c,this.specular=l,this.name=d}return i(e,t),e.prototype.getRenderer=function(t){return V.create(this,t)},e.isMap=function(t){switch(t.constructor){case x["default"]:return!0;case Number:case Array:case Float32Array:return!1;default:console.error("Incompatible material source color type")}},e.fromMtlFile=function(t){return fetch(t).then(function(t){return t.text()}).then(function(n){for(var r=t.substr(0,t.lastIndexOf("/")+1),i={},o=void 0,a=void 0,s=function(){if(l){if(h>=f.length)return"break";d=f[h++]}else{if(h=f.next(),h.done)return"break";d=h.value}var t=d;t=t.split(/\s+/);var n=t[0],s=t.slice(1);switch(n){case"newmtl":o&&(i[o.name]=a.then(function(t){return new e(t)})),o={},a=u.resolve(o),o.name=s[0];break;case"Kd":o.diffuse=s.map(parseFloat);break;case"map_Kd":a=a.then(function(t){return x["default"].fromFile(r+s[0].replace(/^\//,"")).then(function(e){return t.diffuse=e,t})})}},f=n.split(/[\r\n]+\s*/),l=Array.isArray(f),h=0,f=l?f:c(f);;){var d,p=s();if("break"===p)break}return i})},o(e,[{key:"config",get:function(){var t={};return e.isMap(this.ambient)&&(t.AMBIENT_MAP=!0),e.isMap(this.diffuse)&&(t.DIFFUSE_MAP=!0),e.isMap(this.specular)&&(t.SPECULAR_MAP=!0),t}}]),e}(y.MaterialBase);e["default"]=B;var V=function(t){function e(n,r){a(this,e),t.call(this,n),this.gl=r,this.locations=null,this.ambientStrategy=null,this.diffuseStrategy=null,this.specularStrategy=null}return i(e,t),e.prototype.init=function(t){this.renderer=t;for(var n={DIRECTIONAL_LIGHT_COUNT:0,SPOTLIGHT_COUNT:0,POINT_LIGHT_COUNT:0},r=t._lightRenderers,i=0,o=r.length;o>i;++i){var a=r[i].light;a instanceof T["default"]?n.DIRECTIONAL_LIGHT_COUNT+=1:a instanceof R["default"]?n.SPOTLIGHT_COUNT+=1:a instanceof M["default"]&&(n.POINT_LIGHT_COUNT+=1)}var s=f({},n,this.material.config);this.program=e.createProgram(this.gl,JSON.stringify(s),s),this.ambientStrategy=j.select("ambient",this.material.ambient,this.program),this.diffuseStrategy=j.select("diffuse",this.material.diffuse,this.program),this.specularStrategy=j.select("specular",this.material.specular,this.program),this.geometryRenderer&&this.setGeometryRenderer(this.geometryRenderer)},e.prototype.setGeometryRenderer=function(t){this.geometryRenderer=t;var e=t.vertexBuffer,n=t.normalBuffer,r=t.texcoordBuffer;e.setAttribLocation("vertex",this.program),n.setAttribLocation("normal",this.program),this.locations={mvpMatrix:this.program.getUniformLocation("mvp_matrix"),modelMatrix:this.program.getUniformLocation("model_matrix"),normalMatrix:this.program.getUniformLocation("normal_matrix"),viewPos:this.program.getUniformLocation("view_pos"),shininess:this.program.getUniformLocation("material.shininess"),environmentAmbient:this.program.getUniformLocation("ambient")},this.ambientStrategy.init(r),this.diffuseStrategy.init(r),this.specularStrategy.init(r)},e.prototype.beforeRender=function(){for(var t=this.program,e=t.gl,n=this.locations,r=this.renderer,i=r._lightRenderers,o=0,a=i.length;a>o;++o)i[o].render(t);e.uniform3fv(n.viewPos,r.camera.worldPosition),e.uniform1f(n.shininess,this.material.shininess),e.uniform3fv(n.environmentAmbient,r.environment._ambientVector),this.ambientStrategy.update(),this.diffuseStrategy.update(),this.specularStrategy.update()},e.prototype.render=function(t){var e=this.program.gl,n=this.locations;e.uniformMatrix4fv(n.mvpMatrix,!1,t.mvpMatrix),e.uniformMatrix4fv(n.modelMatrix,!1,t.worldTransform),e.uniformMatrix3fv(n.normalMatrix,!1,t.normalMatrix)},e}(y.MaterialRendererBase);V.create=_["default"](E.construct(V),{length:2}),V.createProgram=_["default"](function(t,e,n){return new L["default"](t,new I["default"](t,r(n,C["default"]),t.VERTEX_SHADER),new I["default"](t,r(n,F["default"]),t.FRAGMENT_SHADER))},{length:2});var j=function(){function t(e,n,r){a(this,t),this.locations={},this.target=e,this.source=n,this.program=r}return t.prototype.init=function(t){},t.prototype.update=function(){},t}();j.select=_["default"](function(t,e,n){return(B.isMap(e)?H.create:G.create)(t,e,n)});var G=function(t){function e(n,r,i){a(this,e),t.call(this,n,r,i),this.color=r,this.colorVector=U.convertColorToVector(this.color)}return i(e,t),e.prototype.init=function(t){this.locations.target=this.program.getUniformLocation("material."+this.target)},e.prototype.update=function(){this.program.gl.uniform3fv(this.locations.target,this.colorVector)},e}(j);G.create=_["default"](E.construct(G),{length:3});var q=v.vec4.create(),z=function(){function t(e,n,r){a(this,t),this.gl=e,this.region=n,this.unit=D.allocateTextureUnit(),this.handle=e.createTexture(),this.ctx=document.createElement("canvas").getContext("2d"),this.strategies=r,document.body.appendChild(this.ctx.canvas),this.ctx.canvas.width=1,this.ctx.canvas.height=1,this.bind(),this.gl.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.ctx.canvas),this.gl.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),this.gl.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),this.gl.generateMipmap(e.TEXTURE_2D)}return t.prototype.bind=function(){this.gl.activeTexture(this.gl.TEXTURE0+this.unit),this.gl.bindTexture(this.gl.TEXTURE_2D,this.handle)},t.prototype.updateTexcoordBounds=function(t){var e=this.region.outerWidth;v.vec4.set(q,t.left/e,(t.top+t.innerHeight)/e,t.innerWidth/e,-(t.innerHeight/e));for(var n=this.strategies.get(t.image),r=Array.isArray(n),i=0,n=r?n:c(n);;){var o;if(r){if(i>=n.length)break;o=n[i++]}else{if(i=n.next(),i.done)break;o=i.value}var a=o;v.vec4.copy(a.texcoordBounds,q),a.textureRegion=this}},t.prototype.scheduleUpload=function(){var t=this;clearTimeout(this.nextUpload),this.nextUpload=setTimeout(function(){var e=t.gl;t.ctx.canvas.width=t.region.outerWidth,t.ctx.canvas.height=t.region.outerHeight;for(var n=t.region,r=Array.isArray(n),i=0,n=r?n:c(n);;){var o;if(r){if(i>=n.length)break;o=n[i++]}else{if(i=n.next(),i.done)break;o=i.value}var a=o;a.image instanceof ImageData?t.ctx.putImageData(a.image,a.left,a.top):t.ctx.drawImage(a.image,a.left,a.top),t.updateTexcoordBounds(a)}t.bind(),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t.ctx.canvas),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.generateMipmap(e.TEXTURE_2D)},1e3)},t.prototype.uploadRegion=function(){for(var t=this.region,e=Array.isArray(t),n=0,t=e?t:c(t);;){var r;if(e){if(n>=t.length)break;r=t[n++]}else{if(n=t.next(),n.done)break;r=n.value}var i=r;this.updateTexcoordBounds(i)}this.scheduleUpload()},t.prototype.uploadSubregion=function(t){this.updateTexcoordBounds(t),this.scheduleUpload()},t}(),H=function(t){function e(n,r,i){a(this,e),t.call(this,n,r,i),this.texcoordBounds=v.vec4.create(),this.textureRegion=null,e.getConfig(i.gl)(this)}return i(e,t),e.prototype.init=function(t){t.setAttribLocation("uv",this.program),this.locations.sampler=this.program.getUniformLocation(this.target+"_sampler"),this.locations.bounds=this.program.getUniformLocation(this.target+"_uv_bounds")},e.prototype.update=function(){var t=this.program.gl;t.uniform1i(this.locations.sampler,this.textureRegion.unit),t.uniform4fv(this.locations.bounds,this.texcoordBounds),this.textureRegion.bind()},e}(j);H.getConfig=_["default"](function(t){var e=new g.Atlas({maxSize:l(b.MAX_SIZE)}),n=new h,r=[new z(t,e.regions[0],n)];return function(i){var o=i.source,a=n.get(o.image);void 0===a&&(a=new d,n.set(o.image,a)),a.add(i);var s=e.insert(o.image),u=s[0],c=s.slice(1);switch(u){case g.Atlas.SUCCESS:var f=c[0],l=c[1];return r[f].uploadSubregion(l),r[f];case g.Atlas.RESET:for(var h=0,p=e.regions.length;p>h;++h)void 0===r[h]?r[h]=new z(t,e.regions[h],n):r[h].region=e.regions[h],r[h].uploadRegion();break;case g.Atlas.FAILED:var v=c[0];throw v}}}),H.create=_["default"](E.construct(H),{length:3}),t.exports=e["default"]},function(t,e,n){"use strict";function r(t){var e=a(t).filter(function(e){return null!==t[e]&&"object"==typeof t[e]}).map(function(e){return"then"in t[e]?s.resolve(t[e]).then(function(n){return t[e]=n,r(n)}):r(t[e])});return e.length?s.all(e):void 0}var i=n(6)["default"],o=n(1)["default"],a=n(60)["default"],s=n(9)["default"],u=n(2)["default"];e.__esModule=!0;var c=n(18),f=u(c),l=n(35),h=(u(l),n(82),n(56)),d=u(h),p=n(5),v=new Float64Array(24),m=function(t){function e(n,i,a){var s=this,u=arguments.length<=3||void 0===arguments[3]?new d["default"]:arguments[3];o(this,e),t.call(this,n,i),this.geometry=a,this.material=u,this.processing=!0;var c=r(this);this.onReady=void 0===c?null:c.then(function(){return s.processing=!1,s}),this.mvpMatrix=p.mat4.create()}return i(e,t),e.prototype.recalculate=function(e,n){var r=t.prototype.recalculate.call(this,e,n);return(r||n)&&!this.processing&&this.geometry&&(v.set(this.geometry.bounds.points),p.vec3.forEach(v,0,0,0,p.vec3.transformMat4,this.worldTransform),this.aabb.reset(),this.aabb.expandFromPoints(v),this.aabb.computePoints()),this.dirty=r||n,r},e}(f["default"]);e["default"]=m,t.exports=e["default"]},function(t,e,n){t.exports={"default":n(141),__esModule:!0}},function(t,e,n){t.exports={"default":n(144),__esModule:!0}},function(t,e,n){t.exports={"default":n(150),__esModule:!0}},function(t,e){"use strict";e["default"]=Function.prototype.bind,e.__esModule=!0},function(t,e,n){var r=n(42),i=n(8)("toStringTag"),o="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=(e=Object(t))[i])?n:o?r(e):"Object"==(a=r(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e,n){var r=n(42);t.exports=0 in Object("z")?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,n){"use strict";var r=n(66),i=n(7),o=n(46),a=n(14),s=n(19),u=n(8)("iterator"),c=n(29),f="@@iterator",l="keys",h="values",d=function(){return this};t.exports=function(t,e,p,v,m,_,g){n(163)(p,e,v);var y,b,x=function(t){switch(t){case l:return function(){return new p(this,t)};case h:return function(){return new p(this,t)}}return function(){return new p(this,t)}},E=e+" Iterator",w=t.prototype,T=w[u]||w[f]||m&&w[m],A=T||x(m);if(T){var M=n(4).getProto(A.call(new t));n(30)(M,E,!0),!r&&s(w,f)&&a(M,u,d)}if((!r||g)&&a(w,u,A),c[e]=A,c[E]=d,m)if(y={keys:_?A:x(l),values:m==h?A:x(h),entries:m!=h?A:x("entries")},g)for(b in y)b in w||o(w,b,y[b]);else i(i.P+i.F*n(97),e,y)}},function(t,e){t.exports=!0},function(t,e,n){t.exports=function(t,e){var r=n(7),i=(n(3).Object||{})[t]||Object[t],o={};o[t]=e(i),r(r.S+r.F*n(63)(function(){i(1)}),"Object",o)}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(104),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){var r=n(62),i=n(8)("iterator"),o=n(29);t.exports=n(3).getIteratorMethod=function(t){return void 0!=t?t[i]||t["@@iterator"]||o[r(t)]:void 0}},function(t,e,n){(function(e){var r="object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this,i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=i&&r.regeneratorRuntime;r.regeneratorRuntime=void 0,t.exports=n(186),i?r.regeneratorRuntime=o:delete r.regeneratorRuntime,t.exports={"default":t.exports,__esModule:!0}}).call(e,function(){return this}())},function(t,e,n){"use strict";var r=n(16),i=n(34),o=Array.prototype.indexOf,a=Object.prototype.hasOwnProperty,s=Math.abs,u=Math.floor;t.exports=function(t){var e,n,c,f;if(t===t)return o.apply(this,arguments);for(n=r(i(this).length),c=arguments[1],c=isNaN(c)?0:c>=0?u(c):r(this.length)-u(s(c)),e=c;n>e;++e)if(a.call(this,e)&&(f=this[e],f!==f))return e;return-1}},function(t,e,n){"use strict";t.exports=n(200)()?Array.from:n(201)},function(t,e,n){"use strict";t.exports=n(215)("forEach")},function(t,e,n){"use strict";var r=n(6)["default"],i=n(1)["default"],o=n(2)["default"];e.__esModule=!0;var a=n(52),s=o(a),u=n(5),c=o(u),f=Math.PI/180,l=function(t){function e(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,e),t.call(this,n);var r=n.fov,o=void 0===r?60:r,a=n.aspect,s=void 0===a?4/3:a,u=n.near,c=void 0===u?.1:u,f=n.far,l=void 0===f?100:f;this.fov=o,this.aspect=s,this.near=c,this.far=l,this._lastFov=this.fov,this._lastAspect=this.aspect,this._lastNear=this.near,this._lastFar=this.far}return r(e,t),e.prototype.recalculate=function(e,n){return(null!==this.parent&&this.parent.dirty||this.fov!==this._lastFov||this.aspect!==this._lastAspect||this.near!==this._lastNear||this.far!==this._lastFar)&&(this.dirty=!0,c["default"].mat4.perspective(this.projectionMatrix,this.fov*f,this.aspect,this.near,this.far),this._lastFov=this.fov,this._lastAspect=this.aspect,this._lastNear=this.near,this._lastFar=this.far),t.prototype.recalculate.call(this,e,n)},e}(s["default"]);e["default"]=l,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(1)["default"];e.__esModule=!0;var i=n(54),o=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=e.ambient,o=void 0===n?0:n;r(this,t),this.ambient=o,this._ambientVector=i.convertColorToVector(this.ambient)}return t.prototype.initialize=function(t){this.gl=t.gl;var e=this._ambientVector;this.gl.clearColor(e[0],e[1],e[2],1)},t.prototype.render=function(){var t=this.gl;t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)},t.prototype.renderLast=function(){},t}();e["default"]=o,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(1)["default"],i=n(58)["default"];e.__esModule=!0;var o=function(){function t(){r(this,t),this.points=new Float64Array(24),this.center=new Float64Array(3)}return t.prototype.toString=function(){return"("+i(this.intervals,function(t){return t.toFixed(2)}).join(", ")+")"},t.prototype.intersects=function(t){var e=this.points,n=t.points;return e[21]>n[0]&&e[0]<n[21]&&e[22]>n[1]&&e[1]<n[22]&&e[23]>n[2]&&e[2]<n[23]},t.prototype.reset=function(){var t=this.points;t[0]=1/0,t[1]=1/0,t[2]=1/0,t[21]=-(1/0),t[22]=-(1/0),t[23]=-(1/0)},t.prototype.expandFromPoints=function(t){for(var e=arguments.length<=1||void 0===arguments[1]?3:arguments[1],n=this.points,r=void 0,i=0,o=t.length;o>i;i+=e)r=t[i],r<n[0]?n[0]=r:r>n[21]&&(n[21]=r),r=t[i+1],r<n[1]?n[1]=r:r>n[22]&&(n[22]=r),r=t[i+2],r<n[2]?n[2]=r:r>n[23]&&(n[23]=r)},t.prototype.expandFromBox=function(t){var e=this.points,n=t.points;n[0]<e[0]&&(e[0]=n[0]),n[1]<e[1]&&(e[1]=n[1]),n[2]<e[2]&&(e[2]=n[2]),n[21]>e[21]&&(e[21]=n[21]),n[22]>e[22]&&(e[22]=n[22]),n[23]>e[23]&&(e[23]=n[23])},t.prototype.computePoints=function(){var t=this.points,e=this.center,n=t[0],r=t[1],i=t[2],o=t[21],a=t[22],s=t[23];t[3]=n,t[4]=r,t[5]=s,t[6]=n,t[7]=a,t[8]=i,t[9]=n,t[10]=a,t[11]=s,t[12]=o,t[13]=r,t[14]=i,t[15]=o,t[16]=r,t[17]=s,t[18]=o,t[19]=a,t[20]=i,e[0]=(n+o)/2,e[1]=(r+a)/2,e[2]=(i+s)/2},t}();e["default"]=o,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(6)["default"],i=n(1)["default"],o=n(2)["default"];e.__esModule=!0;var a=n(35),s=o(a),u=(n(5),function(t){function e(){i(this,e);var n=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,1,-1,1,1,1,1,1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,1,-1,-1,1,-1,1,-1,-1,-1,-1,-1,-1,-1,1,-1];t.call(this,{vertices:n.map(function(t){return.5*t}),normals:n.map(function(t){return Math.sqrt(3)/3*t}),texcoords:[0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,0,0,1,1,1],indices:[0,1,2,0,2,3,4,5,6,4,6,7,8,1,9,8,9,10,11,12,13,11,13,14,15,16,2,15,2,17,15,18,19,15,19,10]})}return r(e,t),e}(s["default"]));e.Cube=u;var c=function(t){function e(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],r=n.size,o=void 0===r?8:r,a=n.heightmap,s=void 0===a?null:a,u=n.repeat,c=void 0===u?!1:u;i(this,e);var f=null,l=void 0,h=void 0;null===s?(l=o,h=o):(l=s.width,h=s.height,f=s.image.data);var d=l*h,p=(l-1)*h*2,v=new Float32Array(3*d),m=new Float32Array(2*d),_=new Uint16Array(3*p),g=void 0,y=void 0,b=void 0;for(g=0;l>g;++g)for(y=0;h>y;++y)b=g+y*l,v[3*b]=g/(l-1)-.5,v[3*b+1]=f?f[4*b]/255:0,v[3*b+2]=y/(h-1)-.5,m[2*b]=c?g%2!==0:g/l,m[2*b+1]=c?y%2!==0:1-y/h;for(g=0;l-1>g;++g)for(y=0;h-1>y;++y)b=6*(g+y*(l-1)),_[b]=g+y*l,_[b+1]=g+(y+1)*l,_[b+2]=g+1+y*l,_[b+3]=g+1+y*l,_[b+4]=g+(y+1)*l,_[b+5]=g+1+(y+1)*l;var x={vertices:v,texcoords:m,indices:_};if(!f){for(var E=new Float32Array(v.length),w=1,T=v.length;T>w;w+=3)E[w]=1;x.normals=E}t.call(this,x),this.heightmap=s}return r(e,t),e}(s["default"]);e.Plane=c},function(t,e,n){"use strict";var r=n(6)["default"],i=n(1)["default"],o=n(2)["default"];e.__esModule=!0;var a=n(5),s=n(23),u=(o(s),n(25),n(36)),c=function(t){function e(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,e),t.call(this,"directional-light",f,n),this.direction=a.vec3.create()}return r(e,t),e.prototype.recalculate=function(e,n){var r=t.prototype.recalculate.call(this,e,n);if(r){var i=this.direction,o=this.orientation,a=o[0],s=o[1],u=o[2],c=o[3];i[0]=-2*(a*u+s*c),i[1]=2*(a*c-s*u),i[2]=a*a+s*s-(u*u+c*c)}return r},e}(u.LightBase);e["default"]=c;var f=function(t){function e(n,r){i(this,e),t.call(this,n,r)}return r(e,t),e.prototype.getLocations=function(t){return{direction:t.getUniformLocation("directional_lights["+this.id+"].direction"),color:t.getUniformLocation("directional_lights["+this.id+"].color")}},e.prototype.render=function(t){var e=this.gl,n=this.light,r=this.getLocations(t);e.uniform3fv(r.direction,n.direction),e.uniform3fv(r.color,n._colorVector)},e}(u.LightRendererBase);t.exports=e["default"]},function(t,e,n){"use strict";var r=n(6)["default"],i=n(1)["default"],o=n(2)["default"];e.__esModule=!0;var a=(n(25),n(36)),s=n(23),u=(o(s),function(t){function e(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,e),t.call(this,"pointlight",c,n);var r=n.constant,o=void 0===r?1:r,a=n.linear,s=void 0===a?0:a,u=n.quadratic,f=void 0===u?0:u;this.constant=o,this.linear=s,this.quadratic=f}return r(e,t),e}(a.LightBase));e["default"]=u;var c=function(t){function e(n,r){i(this,e),t.call(this,n,r)}return r(e,t),e.prototype.getLocations=function(t){return{position:t.getUniformLocation("point_lights["+this.id+"].position"),color:t.getUniformLocation("point_lights["+this.id+"].color"),constant:t.getUniformLocation("point_lights["+this.id+"].constant"),linear:t.getUniformLocation("point_lights["+this.id+"].linear"),quadratic:t.getUniformLocation("point_lights["+this.id+"].quadratic")}},e.prototype.render=function(t){var e=this.gl,n=this.light,r=this.getLocations(t);e.uniform3fv(r.position,n.worldPosition),e.uniform3fv(r.color,n._colorVector),e.uniform1f(r.constant,n.constant),e.uniform1f(r.linear,n.linear),e.uniform1f(r.quadratic,n.quadratic)},e}(a.LightRendererBase);t.exports=e["default"]},function(t,e,n){"use strict";var r=n(6)["default"],i=n(1)["default"],o=n(2)["default"];e.__esModule=!0;var a=n(5),s=(n(25),n(36)),u=n(23),c=(o(u),Math.PI/180),f=function(t){function e(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,e),t.call(this,"spotlight",l,n);var r=n.constant,o=void 0===r?1:r,s=n.linear,u=void 0===s?0:s,c=n.quadratic,f=void 0===c?0:c,h=n.cutoff,d=void 0===h?40:h,p=n.outerCutoff,v=void 0===p?35:p;this.constant=o,this.linear=u,this.quadratic=f,this.cutoff=d,this.outerCutoff=v,this.direction=a.vec3.create(),this.worldDirection=a.vec3.create()}return r(e,t),e.prototype.recalculate=function(e,n){var r=t.prototype.recalculate.call(this,e,n),i=this.direction,o=this.orientation;if(r){var s=o[0],u=o[1],c=o[2],f=o[3];i[0]=-2*(s*c+u*f),i[1]=2*(s*f-u*c),i[2]=s*s+u*u-(c*c+f*f)}return n||r&&this.parent?a.vec3.transformMat3(this.worldDirection,this.direction,this.parent.normalMatrix):r&&a.vec3.copy(this.worldDirection,this.direction),r},e}(s.LightBase);e["default"]=f;var l=function(t){function e(n,r){i(this,e),t.call(this,n,r)}return r(e,t),e.prototype.getLocations=function(t){return{position:t.getUniformLocation("spotlights["+this.id+"].position"),direction:t.getUniformLocation("spotlights["+this.id+"].direction"),color:t.getUniformLocation("spotlights["+this.id+"].color"),constant:t.getUniformLocation("spotlights["+this.id+"].constant"),linear:t.getUniformLocation("spotlights["+this.id+"].linear"),quadratic:t.getUniformLocation("spotlights["+this.id+"].quadratic"),cutoff:t.getUniformLocation("spotlights["+this.id+"].cutoff"),outerCutoff:t.getUniformLocation("spotlights["+this.id+"].outer_cutoff")}},e.prototype.render=function(t){var e=this.gl,n=this.light,r=this.getLocations(t);e.uniform3fv(r.position,n.worldPosition),e.uniform3fv(r.direction,n.worldDirection),e.uniform3fv(r.color,n._colorVector),e.uniform1f(r.constant,n.constant),e.uniform1f(r.linear,n.linear),e.uniform1f(r.quadratic,n.quadratic),e.uniform1f(r.cutoff,n.cutoff*c),e.uniform1f(r.outerCutoff,n.outerCutoff*c)},e}(s.LightRendererBase);t.exports=e["default"]},function(t,e,n){"use strict";var r=n(1)["default"];e.__esModule=!0;var i=n(124),o=function(){function t(){r(this,t)}return t.prototype.getRenderer=function(t){throw new i.UnimplementedMethodError},t}();e.MaterialBase=o;var a=function(){function t(e){r(this,t),this.material=e,this.program=null,this.geometryRenderer=null}return t.prototype.init=function(t){throw new i.UnimplementedMethodError},t.prototype.setGeometryRenderer=function(t){},t.prototype.beforeRender=function(){},t.prototype.render=function(t){},t.prototype.afterRender=function(){},t}();e.MaterialRendererBase=a},function(t,e,n){"use strict";var r=n(6)["default"],i=n(1)["default"],o=n(58)["default"],a=n(41)["default"],s=n(71)["default"],u=n(26)["default"],c=n(9)["default"],f=n(2)["default"];e.__esModule=!0;var l=n(109),h=f(l),d=n(18),p=f(d),v=n(57),m=f(v),_=n(35),g=f(_),y=n(56),b=f(y),x=(n(5),n(86)),E=(new Float64Array(24),64),w=function(t){function e(n){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=arguments.length<=2||void 0===arguments[2]?[]:arguments[2];i(this,e),t.call(this,n,r),this.children=o(a);for(var s=0,u=a.length;u>s;++s)a[s].parent=this}return r(e,t),e.prototype.toString=function(){var e=arguments.length<=0||void 0===arguments[0]?["name","dirty"]:arguments[0],n=arguments.length<=1||void 0===arguments[1]?0:arguments[1];return t.prototype.toString.call(this,e,n)+this.children.map(function(t){return"\n"+t.toString(e,n+1)}).join("")},e.prototype.recalculate=function(e,n){var r=t.prototype.recalculate.call(this,e,n),i=r,o=this.aabb,a=this.children,s=this.children.length,u=!1,c=void 0,f=void 0;for(c=0;s>c;++c)f=a[c],i=f.recalculate(e,r||n)||i,u=u||f.processing;if(i){for(o.reset(),c=0;s>c;++c)o.expandFromBox(a[c].aabb);o.computePoints()}return!u&&a.length>E&&this.split(),this.processing=u,i},e.prototype.recalculateSubtreeIds=function(){var t=this._subtreeIds;t.length=1,t[0]=this.id;for(var e=0,n=this.children,r=(n.length,void 0);r=n[e];++e)r.recalculateSubtreeIds(),t.push.apply(t,r._subtreeIds)},e.prototype.add=function(t){t.parent=this,this.children.push(t)},e.prototype.remove=function(t){t.parent=null,this.children.splice(this.children.indexOf(t),1)},e.prototype.forEach=function(t){t(this);for(var e=0,n=this.children,r=n.length;r>e;++e)n[e].forEach(t)},e.prototype[a]=s.mark(function n(){var t,e,r,i,o;return s.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this;case 2:t=this.children,e=Array.isArray(t),r=0,t=e?t:u(t);case 3:if(!e){n.next=9;break}if(!(r>=t.length)){n.next=6;break}return n.abrupt("break",17);case 6:i=t[r++],n.next=13;break;case 9:if(r=t.next(),!r.done){n.next=12;break}return n.abrupt("break",17);case 12:i=r.value;case 13:return o=i,n.delegateYield(o,"t0",15);case 15:n.next=3;break;case 17:case"end":return n.stop()}},n,this)}),e.prototype.split=function(){for(var t=this.aabb.center,e=[[],[],[],[],[],[],[],[]],n=t[0],r=t[1],i=t[2],o=void 0,a=void 0,s=0,u=this.children,c=u.length;c>s;++s)a=u[s],o=a.aabb.center,e[((o[0]<n)<<2)+((o[1]<r)<<1)+(o[2]<i)].push(a);for(var f=[],s=0,c=e.length,l=void 0;l=e[s];++s)if(l.length>0){var h=new T(this,{},l);h.parent=this,f.push(h)}this.children=f},e.fromObjFile=function(t){var n=new e,r=x.workerpool.run({type:"stream",filename:window.location.href+"/"+t}),i=r.filter(function(t){var e=t[0];t[1];return"mtllib"===e}).map(function(e){var n=(e[0],e[1]);return t.substr(0,t.lastIndexOf("/")+1)+n}).flatMap(function(t){return h["default"].fromPromise(b["default"].fromMtlFile(t))}).beforeEnd(function(){return{}}).take(1),o=r.filter(function(t){var e=t[0];t[1];return"geometry"===e}).flatMap(function(t){var e=(t[0],t[1]),n=new g["default"](e);return 0===n.normals.length?h["default"].fromPromise(n.generateNormals().then(function(){return[n,e]})):h["default"].constant([n,e])}),a=i.flatMap(function(t){return o.flatMap(function(e){var n=e[0],r=e[1];return h["default"].fromPromise(c.resolve(t[r.materialName])).map(function(t){return new m["default"](r.name,{},n,t)})})});return a.onValue(function(t){n.add(t)}),n},e}(p["default"]);e["default"]=w;var T=function(t){function e(n){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=arguments.length<=2||void 0===arguments[2]?[]:arguments[2];i(this,e),t.call(this,"split",r,o),this.orientation=n.orientation,this.position=n.position,this.scale=n.scale,this.localTransform=n.localTransform,this.worldTransform=n.worldTransform,this.direction=n.direction,this.worldDirection=n.worldDirection,this.worldPosition=n.worldPosition,this.normalMatrix=n.normalMatrix,this.processing=!1}return r(e,t),e.prototype.recalculate=function(t,e){for(var n=this.aabb,r=this.children,i=this.children.length,o=this.dirty,a=o,s=0,u=void 0;u=r[s];++s)a=u.recalculate(t,o||e)||a;if(a){n.reset();for(var s=0;i>s;++s)n.expandFromBox(r[s].aabb);n.computePoints()}return r.length>E&&this.split(),t.set(this.id),this.dirty=!1,a},e}(w);t.exports=e["default"]},function(t,e,n){"use strict";var r=n(27)["default"],i=n(1)["default"];e.__esModule=!0;var o=n(37),a=function(){var t=document.createElement("canvas"),e=t.getContext("webgl")||t.getContext("experimental-webgl");return Math.min(4096,e.getParameter(e.MAX_TEXTURE_SIZE))}();e.MAX_SIZE=a;var s=function(){function t(e){i(this,t),this.image=e}return t.fromFile=function(e,n){return o.getImage(e,n).then(function(e){return(e.height>a||e.width>a)&&(e=o.resizeImage(e,Math.min(a,e.width),Math.min(a,e.height))),new t(e)})},r(t,[{key:"width",get:function(){return this.image.width}},{key:"height",get:function(){return this.image.height}}]),t}();e["default"]=s},function(t,e,n){"use strict";var r=n(1)["default"];e.__esModule=!0;var i=function(){function t(e,n,i){var o=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],a=o.mode,s=void 0===a?e.STATIC_DRAW:a,u=o.size,c=void 0===u?3:u,f=o.bufferType,l=void 0===f?e.ARRAY_BUFFER:f,h=o.dataType,d=void 0===h?e.FLOAT:h;r(this,t),this.gl=e,void 0!==i&&(this.vao=i,this.vaoExtension=e.getExtension("OES_vertex_array_object")),this.size=c,this.mode=s,this.bufferType=l,this.dataType=d,this.vbo=e.createBuffer(),this.data=null,this.attribLocation=null,this.updateData(n)}return t.prototype.bind=function(){var t=this.data&&0!==this.data.length&&this.bufferType!==this.gl.ELEMENT_ARRAY_BUFFER;t&&this.gl.enableVertexAttribArray(this.attribLocation),this.gl.bindBuffer(this.bufferType,this.vbo),t&&this.gl.vertexAttribPointer(this.attribLocation,this.size,this.dataType,!1,4*this.size,0)},t.prototype._executeBound=function(t){this.vao&&this.vaoExtension.bindVertexArrayOES(this.vao),this.gl.bindBuffer(this.bufferType,this.vbo),t(),this.vao&&this.vaoExtension.bindVertexArrayOES(null)},t.prototype.updateData=function(t){var e=this;this.data=t,this._executeBound(function(){e.gl.bufferData(e.bufferType,e.data,e.mode)})},t.prototype.updateSubData=function(t,e){var n=this;this.data.set(t,e),this._executeBound(function(){n.gl.bufferSubData(n.bufferType,t,n.mode)})},t.prototype.setAttribLocation=function(t,e){var n=this;e.gl!==this.gl&&console.error("Couldn't set attribute location: the program's WebGL context is not the same as the buffer's!");var r=e.getAttribLocation(t);-1===r&&console.error("Couldn't bind buffer to location: \""+t+'"'),this._executeBound(function(){n.gl.vertexAttribPointer(r,n.size,n.dataType,!1,0,0),n.gl.enableVertexAttribArray(r)}),this.attribLocation=r},t.prototype.destroy=function(){var t=this;this._executeBound(function(){t.gl.deleteBuffer(t.vbo)})},t}();e["default"]=i,t.exports=e["default"]},function(t,e,n){"use strict";function r(t,e){var n="Parsing OBJ file",r=console.time.bind(console),i=console.timeEnd.bind(console);r(n);var o=65536,a=Uint16Array,s=self||window,u=new Array(o),c=new Array(o),f=new Array(o),l=new Array(o),h=0,d=0,p="default",v=function(){var e=new Array(o),n=new Array(o),r=new Array(o),i=new Array(o);return function(){var o={},s=0,v=0,m=0,_=0,g=0,y=0,b=0,x=0;for(y=h;d>y;y+=3){var E=l[y],w=l[y+1],T=l[y+2],A=E;A+=":",A+=w,A+=":",A+=T;var M=o[A];void 0===M&&(M=o[A]=s++,n[m++]=E,-1!==w&&(r[_++]=w),-1!==T&&(i[g++]=T)),e[v++]=M}var S=new a(v),R=new Float32Array(3*m),P=new Float32Array(3*g),L=new Float32Array(2*_);for(y=0;v>y;++y)S[y]=e[y];for(y=0,x=0;m>y;++y,x+=3)b=3*n[y],R[x]=u[b],R[x+1]=u[b+1],R[x+2]=u[b+2];for(y=0,x=0;g>y;++y,x+=3)b=3*i[y],P[x]=c[b],P[x+1]=c[b+1],P[x+2]=c[b+2];for(y=0,x=0;_>y;++y,x+=2)b=2*r[y],L[x]=f[b],L[x+1]=f[b+1];t.progress(["geometry",{indices:S,vertices:R,normals:P,texcoords:L,materialName:p}],[S.buffer,R.buffer,P.buffer,L.buffer]),h=d}}(),m=function(){var e=!0,n=0,r=0,i=0,o=[];return function(a){var s=0,h=a.length;switch(a[0]){case"mtllib":var m=a[1];for(s=2;h>s;++s)m+=a[s];t.progress(["mtllib",m]);break;case"usemtl":for(e||v(),p=a[1],s=2;h>s;++s)p+=" "+a[s];e=!1;break;case"v":u[n++]=+a[1],u[n++]=+a[2],u[n++]=+a[3];break;case"vt":f[i++]=+a[1],f[i++]=+a[2];break;case"vn":c[r++]=+a[1],c[r++]=+a[2],c[r++]=+a[3];break;case"f":var _;for(s=1;h>s;++s){_=a[s].split("/");var g=0;g=~~_[0],_[0]=g>=0?g-1:g+n/3,g=~~_[1],_[1]=g>=0?g-1:g+i/2,g=~~_[2],_[2]=g>=0?g-1:g+r/3,o[s-1]=_}if(4>h)for(s=h-1;3>=s;++s)o[s]=o[h-2];for(s=1;h-2>s;++s)_=o[0],l[d++]=_[0],l[d++]=_[1],l[d++]=_[2],_=o[s],l[d++]=_[0],l[d++]=_[1],l[d++]=_[2],_=o[s+1],l[d++]=_[0],l[d++]=_[1],l[d++]=_[2]}}}(),_="fetch"in s,g="Response"in s&&"body"in Response.prototype,y="TextDecoder"in s,b=-1!==navigator.userAgent.indexOf("Firefox");if("stream"===e.type){var x=e.filename;if(_&&g&&y)!function(){var e=function(t,e){var n=t.getReader();return function r(){return n.read().then(function(t){return e(t),t.done?void 0:r()})}()};fetch(x).then(function(t){var n=new TextDecoder,r="",i=new Uint8Array;return e(t.body,function(t){var e=n.decode(t.value||i,{stream:!t.done}),o=e.split(/[\r\n]+/),a=o.length-1;m((r+o[0]).split(/\s+/));for(var s=1;a>s;++s)m(o[s].split(/\s+/));r=o[a],t.done&&m(r)})}).then(function(){v(),i(n),t.done()})}();else{var E,w,T,A;!function(){var e=function(t,e){var n=t.split(/[\r\n]+/),r=n.length-1;m((w+n[0]).split(/\s+/));for(var i=1;r>i;++i)m(n[i].split(/\s+/));w=n[r],e&&m(w)},r=function(t){e(E.response.slice(T),t),T=E.response.length},o=function(t){e(E.response,t)};E=new XMLHttpRequest,E.open("GET",x,!0),E.responseType=b?"moz-chunked-text":"text",w="",T=0,A=b?o:r,E.onerror=function(e){t.error("Something went wrong!!!");
},E.onreadystatechange=function(){if(200===E.status&&E.response)switch(E.readyState){case E.LOADING:A(!1);break;case E.DONE:A(!0),v(),i(n),t.done()}else t.error("Couldn't do it! "+E.status)},E.send()}()}}else{var M,S=e.buffer;if(y){var R=new TextDecoder;M=R.decode(S)}else for(var P=32768,L=new Uint8Array(S),O=0,I=L.length;I>O;O+=P)M+=String.fromCharCode.apply(void 0,L.subarray(O,Math.min(O+P,I)));for(var k=M.split(/[\r\n]+/),O=0,I=k.length;I>O;++O)m(k[O].trim().split(/\s+/));v(),i(n),t.done()}}var i=n(2)["default"];e.__esModule=!0;var o=n(55),a=i(o),s=a["default"].fromFunction(r);e.workerpool=s},function(t,e,n){t.exports={"default":n(146),__esModule:!0}},function(t,e,n){t.exports={"default":n(147),__esModule:!0}},function(t,e,n){t.exports={"default":n(156),__esModule:!0}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){"use strict";var r=n(4),i=n(14),o=n(13),a=n(103),s=n(47),u=n(44),c=n(28),f=n(100),l=n(32)("id"),h=n(19),d=n(15),p=Object.isExtensible||d,v=n(20),m=v?"_s":"size",_=0,g=function(t,e){if(!d(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!h(t,l)){if(!p(t))return"F";if(!e)return"E";i(t,l,++_)}return"O"+t[l]},y=function(t,e){var n,r=g(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,i,a){var f=t(function(t,n){s(t,f,e),t._i=r.create(null),t._f=void 0,t._l=void 0,t[m]=0,void 0!=n&&c(n,i,t[a],t)});return n(45)(f.prototype,{clear:function(){for(var t=this,e=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete e[n.i];t._f=t._l=void 0,t[m]=0},"delete":function(t){var e=this,n=y(e,t);if(n){var r=n.n,i=n.p;delete e._i[n.i],n.r=!0,i&&(i.n=r),r&&(r.p=i),e._f==n&&(e._f=r),e._l==n&&(e._l=i),e[m]--}return!!n},forEach:function(t){for(var e,n=o(t,arguments[1],3);e=e?e.n:this._f;)for(n(e.v,e.k,this);e&&e.r;)e=e.p},has:function(t){return!!y(this,t)}}),v&&r.setDesc(f.prototype,"size",{get:function(){return u(this[m])}}),f},def:function(t,e,n){var r,i,o=y(t,e);return o?o.v=n:(t._l=o={i:i=g(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[m]++,"F"!==i&&(t._i[i]=o)),t},getEntry:y,setStrong:function(t,e,r){n(65)(t,e,function(t,e){this._t=t,this._k=e,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?"keys"==e?f(0,n.k):"values"==e?f(0,n.v):f(0,[n.k,n.v]):(t._t=void 0,f(1))},r?"entries":"values",!r,!0),a(t),a(n(3)[e])}}},function(t,e,n){var r=n(28),i=n(62);t.exports=function(t){return function(){if(i(this)!=t)throw TypeError(t+"#toJSON isn't generic");var e=[];return r(this,!1,e.push,e),e}}},function(t,e,n){"use strict";var r=n(14),i=n(12),o=n(47),a=n(28),s=n(158),u=n(32)("weak"),c=n(15),f=n(19),l=Object.isExtensible||c,h=s(5),d=s(6),p=0,v=function(t){return t._l||(t._l=new m)},m=function(){this.a=[]},_=function(t,e){return h(t.a,function(t){return t[0]===e})};m.prototype={get:function(t){var e=_(this,t);return e?e[1]:void 0},has:function(t){return!!_(this,t)},set:function(t,e){var n=_(this,t);n?n[1]=e:this.a.push([t,e])},"delete":function(t){var e=d(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,r,i){var s=t(function(t,n){o(t,s,e),t._i=p++,t._l=void 0,void 0!=n&&a(n,r,t[i],t)});return n(45)(s.prototype,{"delete":function(t){return c(t)?l(t)?f(t,u)&&f(t[u],this._i)&&delete t[u][this._i]:v(this)["delete"](t):!1},has:function(t){return c(t)?l(t)?f(t,u)&&f(t[u],this._i):v(this).has(t):!1}}),s},def:function(t,e,n){return l(i(e))?(f(e,u)||r(e,u,{}),e[u][t._i]=n):v(t).set(e,n),t},frozenStore:v,WEAK:u}},function(t,e,n){var r=n(4);t.exports=function(t){var e=r.getKeys(t),n=r.getSymbols;if(n)for(var i,o=n(t),a=r.isEnum,s=0;o.length>s;)a.call(t,i=o[s++])&&e.push(i);return e}},function(t,e,n){var r={}.toString,i=n(31),o=n(4).getNames,a="object"==typeof window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return o(t)}catch(e){return a.slice()}};t.exports.get=function(t){return a&&"[object Window]"==r.call(t)?s(t):o(i(t))}},function(t,e,n){var r=n(29),i=n(8)("iterator");t.exports=function(t){return(r.Array||Array.prototype[i])===t}},function(t,e){t.exports="keys"in[]&&!("next"in[].keys())},function(t,e,n){var r=n(12);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(o){var a=t["return"];throw void 0!==a&&r(a.call(t)),o}}},function(t,e,n){var r=n(8)("iterator"),i=!1;try{var o=[7][r]();o["return"]=function(){i=!0},Array.from(o,function(){throw 2})}catch(a){}t.exports=function(t){if(!i)return!1;var e=!1;try{var n=[7],o=n[r]();o.next=function(){e=!0},n[r]=function(){return o},t(n)}catch(a){}return e}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var r=n(4).getDesc,i=n(15),o=n(12),a=function(t,e){if(o(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e){try{e=n(13)(Function.call,r(Object.prototype,"__proto__").set,2),e({},[])}catch(i){t=!0}return function(n,r){return a(n,r),t?n.__proto__=r:e(n,r),n}}():void 0),check:a}},function(t,e,n){var r=n(10),i="__core-js_shared__",o=r[i]||(r[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e,n){"use strict";var r=n(4),i=n(8)("species");t.exports=function(t){!n(20)||i in t||r.setDesc(t,i,{configurable:!0,get:function(){return this}})}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){"use strict";var r=n(169),i=n(100),o=n(29),a=n(31);n(65)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):"keys"==e?i(0,n):"values"==e?i(0,t[n]):i(0,[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e,n){var r=n(11),i={};i.create=function(){var t=new r.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},i.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},i.clone=function(t){var e=new r.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},i.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},i.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},i.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8],l=f*a-s*c,h=-f*o+s*u,d=c*o-a*u,p=n*l+r*h+i*d;return p?(p=1/p,t[0]=l*p,t[1]=(-f*r+i*c)*p,t[2]=(s*r-i*a)*p,t[3]=h*p,t[4]=(f*n-i*u)*p,t[5]=(-s*n+i*o)*p,t[6]=d*p,t[7]=(-c*n+r*u)*p,t[8]=(a*n-r*o)*p,t):null},i.adjoint=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8];return t[0]=a*f-s*c,t[1]=i*c-r*f,t[2]=r*s-i*a,t[3]=s*u-o*f,t[4]=n*f-i*u,t[5]=i*o-n*s,t[6]=o*c-a*u,t[7]=r*u-n*c,t[8]=n*a-r*o,t},i.determinant=function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8];return e*(c*o-a*u)+n*(-c*i+a*s)+r*(u*i-o*s)},i.multiply=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=e[8],h=n[0],d=n[1],p=n[2],v=n[3],m=n[4],_=n[5],g=n[6],y=n[7],b=n[8];return t[0]=h*r+d*a+p*c,t[1]=h*i+d*s+p*f,t[2]=h*o+d*u+p*l,t[3]=v*r+m*a+_*c,t[4]=v*i+m*s+_*f,t[5]=v*o+m*u+_*l,t[6]=g*r+y*a+b*c,t[7]=g*i+y*s+b*f,t[8]=g*o+y*u+b*l,t},i.mul=i.multiply,i.translate=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=e[8],h=n[0],d=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=h*r+d*a+c,t[7]=h*i+d*s+f,t[8]=h*o+d*u+l,t},i.rotate=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=e[8],h=Math.sin(n),d=Math.cos(n);return t[0]=d*r+h*a,t[1]=d*i+h*s,t[2]=d*o+h*u,t[3]=d*a-h*r,t[4]=d*s-h*i,t[5]=d*u-h*o,t[6]=c,t[7]=f,t[8]=l,t},i.scale=function(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},i.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},i.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},i.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},i.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},i.fromQuat=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,c=n*a,f=r*a,l=r*s,h=i*a,d=i*s,p=i*u,v=o*a,m=o*s,_=o*u;return t[0]=1-l-p,t[3]=f-_,t[6]=h+m,t[1]=f+_,t[4]=1-c-p,t[7]=d-v,t[2]=h-m,t[5]=d+v,t[8]=1-c-l,t},i.normalFromMat4=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8],l=e[9],h=e[10],d=e[11],p=e[12],v=e[13],m=e[14],_=e[15],g=n*s-r*a,y=n*u-i*a,b=n*c-o*a,x=r*u-i*s,E=r*c-o*s,w=i*c-o*u,T=f*v-l*p,A=f*m-h*p,M=f*_-d*p,S=l*m-h*v,R=l*_-d*v,P=h*_-d*m,L=g*P-y*R+b*S+x*M-E*A+w*T;return L?(L=1/L,t[0]=(s*P-u*R+c*S)*L,t[1]=(u*M-a*P-c*A)*L,t[2]=(a*R-s*M+c*T)*L,t[3]=(i*R-r*P-o*S)*L,t[4]=(n*P-i*M+o*A)*L,t[5]=(r*M-n*R-o*T)*L,t[6]=(v*w-m*E+_*x)*L,t[7]=(m*b-p*w-_*y)*L,t[8]=(p*E-v*b+_*g)*L,t):null},i.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},i.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},t.exports=i},function(t,e,n){var r=n(11),i={};i.create=function(){var t=new r.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},i.clone=function(t){var e=new r.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},i.fromValues=function(t,e,n){var i=new r.ARRAY_TYPE(3);return i[0]=t,i[1]=e,i[2]=n,i},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},i.set=function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t},i.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},i.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t},i.sub=i.subtract,i.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t},i.mul=i.multiply,i.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t},i.div=i.divide,i.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},i.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},i.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},i.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t},i.distance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(n*n+r*r+i*i)},i.dist=i.distance,i.squaredDistance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i},i.sqrDist=i.squaredDistance,i.length=function(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)},i.len=i.length,i.squaredLength=function(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r},i.sqrLen=i.squaredLength,i.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},i.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},i.normalize=function(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t},i.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},i.cross=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t},i.lerp=function(t,e,n,r){var i=e[0],o=e[1],a=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t},i.hermite=function(t,e,n,r,i,o){var a=o*o,s=a*(2*o-3)+1,u=a*(o-2)+o,c=a*(o-1),f=a*(3-2*o);return t[0]=e[0]*s+n[0]*u+r[0]*c+i[0]*f,t[1]=e[1]*s+n[1]*u+r[1]*c+i[1]*f,t[2]=e[2]*s+n[2]*u+r[2]*c+i[2]*f,t},i.bezier=function(t,e,n,r,i,o){var a=1-o,s=a*a,u=o*o,c=s*a,f=3*o*s,l=3*u*a,h=u*o;return t[0]=e[0]*c+n[0]*f+r[0]*l+i[0]*h,t[1]=e[1]*c+n[1]*f+r[1]*l+i[1]*h,t[2]=e[2]*c+n[2]*f+r[2]*l+i[2]*h,t},i.random=function(t,e){e=e||1;var n=2*r.RANDOM()*Math.PI,i=2*r.RANDOM()-1,o=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(n)*o,t[1]=Math.sin(n)*o,t[2]=i*e,t},i.transformMat4=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t},i.transformMat3=function(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t},i.transformQuat=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2],c=n[3],f=c*r+s*o-u*i,l=c*i+u*r-a*o,h=c*o+a*i-s*r,d=-a*r-s*i-u*o;return t[0]=f*c+d*-a+l*-u-h*-s,t[1]=l*c+d*-s+h*-a-f*-u,t[2]=h*c+d*-u+f*-s-l*-a,t},i.rotateX=function(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},i.rotateY=function(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},i.rotateZ=function(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},i.forEach=function(){var t=i.create();return function(e,n,r,i,o,a){var s,u;for(n||(n=3),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;u>s;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}(),i.angle=function(t,e){var n=i.fromValues(t[0],t[1],t[2]),r=i.fromValues(e[0],e[1],e[2]);i.normalize(n,n),i.normalize(r,r);var o=i.dot(n,r);return o>1?0:Math.acos(o)},i.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},t.exports=i},function(t,e,n){var r=n(11),i={};i.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},i.clone=function(t){var e=new r.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},i.fromValues=function(t,e,n,i){var o=new r.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=i,o},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},i.set=function(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t},i.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},i.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t},i.sub=i.subtract,i.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t},i.mul=i.multiply,i.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t},i.div=i.divide,i.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},i.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},i.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},i.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},i.distance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(n*n+r*r+i*i+o*o)},i.dist=i.distance,i.squaredDistance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+i*i+o*o},i.sqrDist=i.squaredDistance,i.length=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.sqrt(e*e+n*n+r*r+i*i)},i.len=i.length,i.squaredLength=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i},i.sqrLen=i.squaredLength,i.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},i.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},i.normalize=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a),t},i.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},i.lerp=function(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t[3]=s+r*(n[3]-s),t},i.random=function(t,e){return e=e||1,t[0]=r.RANDOM(),t[1]=r.RANDOM(),t[2]=r.RANDOM(),t[3]=r.RANDOM(),i.normalize(t,t),i.scale(t,t,e),t},i.transformMat4=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t},i.transformQuat=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2],c=n[3],f=c*r+s*o-u*i,l=c*i+u*r-a*o,h=c*o+a*i-s*r,d=-a*r-s*i-u*o;return t[0]=f*c+d*-a+l*-u-h*-s,t[1]=l*c+d*-s+h*-a-f*-u,t[2]=h*c+d*-u+f*-s-l*-a,t[3]=e[3],t},i.forEach=function(){var t=i.create();return function(e,n,r,i,o,a){var s,u;for(n||(n=4),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;u>s;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}(),i.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},t.exports=i},function(t,e,n){/*! Kefir.js v2.8.1
	 *  https://github.com/rpominov/kefir
	 */
!function(e,n){t.exports=n()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t,e,n){return function(){if(i.DEPRECATION_WARNINGS&&"undefined"!=typeof console&&console.log){var r="Method `"+t+"` is deprecated, and to be removed in v3.0.0.\nUse `"+e+"` instead.\nTo disable all warnings like this set `Kefir.DEPRECATION_WARNINGS = false`.";console.log(r)}return n.apply(this,arguments)}}var i=t.exports={};i.Kefir=i;var o=i.Observable=n(1);i.Stream=n(6),i.Property=n(7),i.never=n(8),i.later=n(9),i.interval=n(11),i.sequentially=n(12),i.fromPoll=n(13),i.withInterval=n(14),i.fromCallback=n(16),i.fromNodeCallback=n(18),i.fromEvents=n(19),i.stream=n(17),i.constant=n(22),i.constantError=n(23),i.fromPromise=n(24);var a=n(25);o.prototype.toProperty=function(t){return a(this,t)};var s=n(27);o.prototype.changes=function(){return s(this)};var u=n(28);o.prototype.toPromise=function(t){return u(this,t)};var c=n(29);o.prototype.map=function(t){return c(this,t)};var f=n(30);o.prototype.filter=function(t){return f(this,t)};var l=n(31);o.prototype.take=function(t){return l(this,t)};var h=n(32);o.prototype.takeWhile=function(t){return h(this,t)};var d=n(33);o.prototype.last=function(){return d(this)};var p=n(34);o.prototype.skip=function(t){return p(this,t)};var v=n(35);o.prototype.skipWhile=function(t){return v(this,t)};var m=n(36);o.prototype.skipDuplicates=function(t){return m(this,t)};var _=n(37);o.prototype.diff=function(t,e){return _(this,t,e)};var g=n(38);o.prototype.scan=function(t,e){return g(this,t,e)};var y=n(39);o.prototype.flatten=function(t){return y(this,t)};var b=n(40);o.prototype.delay=function(t){return b(this,t)};var x=n(41);o.prototype.throttle=function(t,e){return x(this,t,e)};var E=n(43);o.prototype.debounce=function(t,e){return E(this,t,e)};var w=n(44);o.prototype.valuesToErrors=function(t){return w(this,t)};var T=n(45);o.prototype.errorsToValues=function(t){return T(this,t)};var A=n(46);o.prototype.mapErrors=function(t){return A(this,t)};var M=n(47);o.prototype.filterErrors=function(t){return M(this,t)};var S=n(48);o.prototype.endOnError=function(){return S(this)};var R=n(49);o.prototype.skipValues=function(){return R(this)};var P=n(50);o.prototype.skipErrors=function(){return P(this)};var L=n(51);o.prototype.skipEnd=function(){return L(this)};var O=n(52);o.prototype.beforeEnd=function(t){return O(this,t)};var I=n(53);o.prototype.slidingWindow=function(t,e){return I(this,t,e)};var k=n(54);o.prototype.bufferWhile=function(t,e){return k(this,t,e)};var C=n(55);o.prototype.transduce=function(t){return C(this,t)};var N=n(56);o.prototype.withHandler=function(t){return N(this,t)};var F=i.combine=n(57);o.prototype.combine=function(t,e){return F([this,t],e)};var U=i.zip=n(58);o.prototype.zip=function(t,e){return U([this,t],e)};var D=i.merge=n(59);o.prototype.merge=function(t){return D([this,t])};var B=i.concat=n(61);o.prototype.concat=function(t){return B([this,t])};var V=i.Pool=n(63);i.pool=function(){return new V},i.repeat=n(62);var j=n(64);o.prototype.flatMap=function(t){return new j(this,t).setName(this,"flatMap")},o.prototype.flatMapLatest=function(t){return new j(this,t,{concurLim:1,drop:"old"}).setName(this,"flatMapLatest")},o.prototype.flatMapFirst=function(t){return new j(this,t,{concurLim:1}).setName(this,"flatMapFirst")},o.prototype.flatMapConcat=function(t){return new j(this,t,{queueLim:-1,concurLim:1}).setName(this,"flatMapConcat")},o.prototype.flatMapConcurLimit=function(t,e){return new j(this,t,{queueLim:-1,concurLim:e}).setName(this,"flatMapConcurLimit")};var G=n(65);o.prototype.flatMapErrors=function(t){return new G(this,t).setName(this,"flatMapErrors")};var q=n(66);o.prototype.filterBy=function(t){return q(this,t)};var z=n(68);o.prototype.sampledBy=function(t,e){return z(this,t,e)};var H=n(69);o.prototype.skipUntilBy=function(t){return H(this,t)};var Y=n(70);o.prototype.takeUntilBy=function(t){return Y(this,t)};var W=n(71);o.prototype.bufferBy=function(t,e){return W(this,t,e)};var X=n(72);o.prototype.bufferWhileBy=function(t,e){return X(this,t,e)};var $=n(73);o.prototype.awaiting=function(t){return $(this,t)},i.DEPRECATION_WARNINGS=!0;var K=i.Emitter=n(74);i.emitter=r("Kefir.emitter()","Kefir.stream()",function(){return new K});var Z=i.Bus=n(75);i.bus=r("Kefir.bus()","Kefir.pool() or Kefir.stream()",function(){return new Z});var Q=n(76);o.prototype.reduce=r(".reduce(fn, seed)",".scan(fn, seed).last()",function(t,e){return Q(this,t,e)});var J=n(77);i.sampledBy=r("Kefir.sampledBy()","Kefir.combine()",J);var tt=n(78);i.repeatedly=r("Kefir.repeatedly()","Kefir.repeat(() => Kefir.sequentially(...)})",tt);var et=n(79);o.prototype.mapTo=r(".mapTo()",".map(() => value)",function(t){return et(this,t)});var nt=n(80);o.prototype.tap=r(".tap()",".map((v) => {fn(v); return v})",function(t){return nt(this,t)});var rt=n(81);o.prototype.pluck=r(".pluck()",".map((x) => x.foo)",function(t){return rt(this,t)});var it=n(82);o.prototype.invoke=r(".invoke()",".map((x) => x.foo())",function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;e>r;r++)n[r-1]=arguments[r];return it(this,t,n)});var ot=n(83);o.prototype.timestamp=r(".timestamp()",".map((x) => {value: x, time: Date.now()})",function(){return ot(this)});var at=n(84);i.and=r("Kefir.and()","Kefir.combine([a, b], (a, b) => a && b)",at),o.prototype.and=r(".and()",".combine(other, (a, b) => a && b)",function(t){return at([this,t])});var st=n(85);i.or=r("Kefir.or()","Kefir.combine([a, b], (a, b) => a || b)",st),o.prototype.or=r(".or()",".combine(other, (a, b) => a || b)",function(t){return st([this,t])});var ut=n(86);o.prototype.not=r(".not()",".map((x) => !x)",function(){return ut(this)});var ct=n(20);i.fromSubUnsub=r(".fromSubUnsub()","Kefir.stream()",ct);var ft=n(87);o.prototype.takeWhileBy=r(".takeWhileBy(foo)",".skipUntilBy(foo.filter((x) => !x))",function(t){return ft(this,t)});var lt=n(88);o.prototype.skipWhileBy=r(".skipWhileBy(foo)",".takeUntilBy(foo.filter((x) => !x))",function(t){return lt(this,t)})},function(t,e,n){"use strict";function r(){this._dispatcher=new h,this._active=!1,this._alive=!0,this._activating=!1,this._logHandlers=null}var i=n(2),o=i.extend,a=n(3),s=a.VALUE,u=a.ERROR,c=a.ANY,f=a.END,l=n(4),h=l.Dispatcher,d=l.callSubscriber,p=n(5),v=p.findByPred;o(r.prototype,{_name:"observable",_onActivation:function(){},_onDeactivation:function(){},_setActive:function(t){this._active!==t&&(this._active=t,t?(this._activating=!0,this._onActivation(),this._activating=!1):this._onDeactivation())},_clear:function(){this._setActive(!1),this._dispatcher.cleanup(),this._dispatcher=null,this._logHandlers=null},_emit:function(t,e){switch(t){case s:return this._emitValue(e);case u:return this._emitError(e);case f:return this._emitEnd()}},_emitValue:function(t){this._alive&&this._dispatcher.dispatch({type:s,value:t,current:this._activating})},_emitError:function(t){this._alive&&this._dispatcher.dispatch({type:u,value:t,current:this._activating})},_emitEnd:function(){this._alive&&(this._alive=!1,this._dispatcher.dispatch({type:f,current:this._activating}),this._clear())},_on:function(t,e){return this._alive?(this._dispatcher.add(t,e),this._setActive(!0)):d(t,e,{type:f,current:!0}),this},_off:function(t,e){if(this._alive){var n=this._dispatcher.remove(t,e);0===n&&this._setActive(!1)}return this},onValue:function(t){return this._on(s,t)},onError:function(t){return this._on(u,t)},onEnd:function(t){return this._on(f,t)},onAny:function(t){return this._on(c,t)},offValue:function(t){return this._off(s,t)},offError:function(t){return this._off(u,t)},offEnd:function(t){return this._off(f,t)},offAny:function(t){return this._off(c,t)},_ofSameType:function(t,e){return t.prototype.getType()===this.getType()?t:e},setName:function(t,e){return this._name=e?t._name+"."+e:t,this},log:function(){var t=arguments.length<=0||void 0===arguments[0]?this.toString():arguments[0],e=function(e){var n="<"+e.type+(e.current?":current":"")+">";e.type===f?console.log(t,n):console.log(t,n,e.value)};return this._alive&&(this._logHandlers||(this._logHandlers=[]),this._logHandlers.push({name:t,handler:e})),this.onAny(e),this},offLog:function(){var t=arguments.length<=0||void 0===arguments[0]?this.toString():arguments[0];if(this._logHandlers){var e=v(this._logHandlers,function(e){return e.name===t});-1!==e&&(this.offAny(this._logHandlers[e].handler),this._logHandlers.splice(e,1))}return this}}),r.prototype.toString=function(){return"["+this._name+"]"},t.exports=r},function(t,e){"use strict";function n(t){var e=function(){};return e.prototype=t,new e}function r(t){var e=arguments.length,n=void 0,r=void 0;for(n=1;e>n;n++)for(r in arguments[n])t[r]=arguments[n][r];return t}function i(t,e){var i=arguments.length,o=void 0;for(t.prototype=n(e.prototype),t.prototype.constructor=t,o=2;i>o;o++)r(t.prototype,arguments[o]);return t}t.exports={extend:r,inherit:i}},function(t,e){"use strict";e.NOTHING=["<nothing>"],e.END="end",e.VALUE="value",e.ERROR="error",e.ANY="any"},function(t,e,n){"use strict";function r(t,e,n){t===f?e(n):t===n.type&&(t===u||t===c?e(n.value):e())}function i(){this._items=[],this._inLoop=0,this._removedItems=null}var o=n(2),a=o.extend,s=n(3),u=s.VALUE,c=s.ERROR,f=s.ANY,l=n(5),h=l.concat,d=l.findByPred,p=l.remove,v=l.contains;a(i.prototype,{add:function(t,e){return this._items=h(this._items,[{type:t,fn:e}]),this._items.length},remove:function(t,e){var n=d(this._items,function(n){return n.type===t&&n.fn===e});return 0!==this._inLoop&&-1!==n&&(null===this._removedItems&&(this._removedItems=[]),this._removedItems.push(this._items[n])),this._items=p(this._items,n),this._items.length},dispatch:function(t){this._inLoop++;for(var e=0,n=this._items;e<n.length&&null!==this._items;e++)null!==this._removedItems&&v(this._removedItems,n[e])||r(n[e].type,n[e].fn,t);this._inLoop--,0===this._inLoop&&(this._removedItems=null)},cleanup:function(){this._items=null}}),t.exports={callSubscriber:r,Dispatcher:i}},function(t,e){"use strict";function n(t,e){var n=void 0,r=void 0,i=void 0,o=void 0;if(0===t.length)return e;if(0===e.length)return t;for(o=0,n=new Array(t.length+e.length),r=t.length,i=0;r>i;i++,o++)n[o]=t[i];for(r=e.length,i=0;r>i;i++,o++)n[o]=e[i];return n}function r(t,e){var n=t.length,r=new Array(n),i=void 0;for(i=0;n>i;i++)r[(i+e)%n]=t[i];return r}function i(t,e){var n=t.length,r=void 0;for(r=0;n>r;r++)if(t[r]===e)return r;return-1}function o(t,e){var n=t.length,r=void 0;for(r=0;n>r;r++)if(e(t[r]))return r;return-1}function a(t){var e=t.length,n=new Array(e),r=void 0;for(r=0;e>r;r++)n[r]=t[r];return n}function s(t,e){var n=t.length,r=void 0,i=void 0,o=void 0;if(e>=0&&n>e){if(1===n)return[];for(r=new Array(n-1),i=0,o=0;n>i;i++)i!==e&&(r[o]=t[i],o++);return r}return t}function u(t,e){return s(t,o(t,e))}function c(t,e){var n=t.length,r=new Array(n),i=void 0;for(i=0;n>i;i++)r[i]=e(t[i]);return r}function f(t,e){var n=t.length,r=void 0;for(r=0;n>r;r++)e(t[r])}function l(t,e){var n=t.length,r=void 0;for(r=0;n>r;r++)t[r]=e}function h(t,e){return-1!==i(t,e)}function d(t,e,n){var r=Math.min(n,t.length+1),i=t.length-r+1,o=new Array(r),a=void 0;for(a=i;r>a;a++)o[a-i]=t[a];return o[r-1]=e,o}t.exports={concat:n,circleShift:r,find:i,findByPred:o,cloneArray:a,remove:s,removeByPred:u,map:c,forEach:f,fillArray:l,contains:h,slide:d}},function(t,e,n){"use strict";function r(){a.call(this)}var i=n(2),o=i.inherit,a=n(1);o(r,a,{_name:"stream",getType:function(){return"stream"}}),t.exports=r},function(t,e,n){"use strict";function r(){h.call(this),this._currentEvent=null}var i=n(2),o=i.inherit,a=n(3),s=a.VALUE,u=a.ERROR,c=a.END,f=n(4),l=f.callSubscriber,h=n(1);o(r,h,{_name:"property",_emitValue:function(t){this._alive&&(this._activating||this._dispatcher.dispatch({type:s,value:t,current:this._activating}),this._currentEvent={type:s,value:t,current:!0})},_emitError:function(t){this._alive&&(this._activating||this._dispatcher.dispatch({type:u,value:t,current:this._activating}),this._currentEvent={type:u,value:t,current:!0})},_emitEnd:function(){this._alive&&(this._alive=!1,this._activating||this._dispatcher.dispatch({type:c,current:this._activating}),this._clear())},_on:function(t,e){return this._alive&&(this._dispatcher.add(t,e),this._setActive(!0)),null!==this._currentEvent&&l(t,e,this._currentEvent),this._alive||l(t,e,{type:c,current:!0}),this},getType:function(){return"property"}}),t.exports=r},function(t,e,n){"use strict";var r=n(6),i=new r;i._emitEnd(),i._name="never",t.exports=function(){return i}},function(t,e,n){"use strict";var r=n(10),i=r({_name:"later",_init:function(t){var e=t.x;this._x=e},_free:function(){this._x=null},_onTick:function(){this._emitValue(this._x),this._emitEnd()}});t.exports=function(t,e){return new i(t,{x:e})}},function(t,e,n){"use strict";var r=n(2),i=r.inherit,o=n(6);t.exports=function(t){function e(t,e){var n=this;o.call(this),this._wait=t,this._intervalId=null,this._$onTick=function(){return n._onTick()},this._init(e)}return i(e,o,{_init:function(t){},_free:function(){},_onTick:function(){},_onActivation:function(){this._intervalId=setInterval(this._$onTick,this._wait)},_onDeactivation:function(){null!==this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null)},_clear:function(){o.prototype._clear.call(this),this._$onTick=null,this._free()}},t),e}},function(t,e,n){"use strict";var r=n(10),i=r({_name:"interval",_init:function(t){var e=t.x;this._x=e},_free:function(){this._x=null},_onTick:function(){this._emitValue(this._x)}});t.exports=function(t,e){return new i(t,{x:e})}},function(t,e,n){"use strict";var r=n(10),i=n(5),o=i.cloneArray,a=n(8),s=r({_name:"sequentially",_init:function(t){var e=t.xs;this._xs=o(e)},_free:function(){this._xs=null},_onTick:function(){1===this._xs.length?(this._emitValue(this._xs[0]),this._emitEnd()):this._emitValue(this._xs.shift())}});t.exports=function(t,e){return 0===e.length?a():new s(t,{xs:e})}},function(t,e,n){"use strict";var r=n(10),i=r({_name:"fromPoll",_init:function(t){var e=t.fn;this._fn=e},_free:function(){this._fn=null},_onTick:function(){var t=this._fn;this._emitValue(t())}});t.exports=function(t,e){return new i(t,{fn:e})}},function(t,e,n){"use strict";var r=n(10),i=n(15),o=r({_name:"withInterval",_init:function(t){var e=t.fn;this._fn=e,this._emitter=i(this)},_free:function(){this._fn=null,this._emitter=null},_onTick:function(){var t=this._fn;t(this._emitter)}});t.exports=function(t,e){return new o(t,{fn:e})}},function(t,e){"use strict";t.exports=function(t){function e(e){return t._emitValue(e),t._active}function n(e){return t._emitError(e),t._active}function r(){return t._emitEnd(),t._active}function i(e){return t._emit(e.type,e.value),t._active}return{value:e,error:n,end:r,event:i,emit:e,emitEvent:i}}},function(t,e,n){"use strict";var r=n(17);t.exports=function(t){var e=!1;return r(function(n){e||(t(function(t){n.emit(t),n.end()}),e=!0)}).setName("fromCallback")}},function(t,e,n){"use strict";function r(t){a.call(this),this._fn=t,this._unsubscribe=null}var i=n(2),o=i.inherit,a=n(6),s=n(15);o(r,a,{_name:"stream",_onActivation:function(){var t=this._fn,e=t(s(this));this._unsubscribe="function"==typeof e?e:null,this._active||this._callUnsubscribe()},_callUnsubscribe:function(){null!==this._unsubscribe&&(this._unsubscribe(),this._unsubscribe=null)},_onDeactivation:function(){this._callUnsubscribe()},_clear:function(){a.prototype._clear.call(this),this._fn=null}}),t.exports=function(t){return new r(t)}},function(t,e,n){"use strict";var r=n(17);t.exports=function(t){var e=!1;return r(function(n){e||(t(function(t,e){t?n.error(t):n.emit(e),n.end()}),e=!0)}).setName("fromNodeCallback")}},function(t,e,n){"use strict";var r=n(20),i=[["addEventListener","removeEventListener"],["addListener","removeListener"],["on","off"]];t.exports=function(t,e,n){for(var o=void 0,a=void 0,s=0;s<i.length;s++)if("function"==typeof t[i[s][0]]&&"function"==typeof t[i[s][1]]){o=i[s][0],a=i[s][1];break}if(void 0===o)throw new Error("target don't support any of addEventListener/removeEventListener, addListener/removeListener, on/off method pair");return r(function(n){return t[o](e,n)},function(n){return t[a](e,n)},n).setName("fromEvents")}},function(t,e,n){"use strict";var r=n(17),i=n(21),o=i.apply;t.exports=function(t,e,n){return r(function(r){var i=n?function(){r.emit(o(n,this,arguments))}:r.emit;return t(i),function(){return e(i)}}).setName("fromSubUnsub")}},function(t,e){"use strict";function n(t,e){switch(e){case 0:return function(e){return t()};case 1:return function(e){return t(e[0])};case 2:return function(e){return t(e[0],e[1])};case 3:return function(e){return t(e[0],e[1],e[2])};case 4:return function(e){return t(e[0],e[1],e[2],e[3])};default:return function(e){return t.apply(null,e)}}}function r(t,e,n){var r=n?n.length:0;if(null==e)switch(r){case 0:return t();case 1:return t(n[0]);case 2:return t(n[0],n[1]);case 3:return t(n[0],n[1],n[2]);case 4:return t(n[0],n[1],n[2],n[3]);default:return t.apply(null,n)}else switch(r){case 0:return t.call(e);default:return t.apply(e,n)}}t.exports={spread:n,apply:r}},function(t,e,n){"use strict";function r(t){this._currentEvent={type:"value",value:t,current:!0}}var i=n(2),o=i.inherit,a=n(7);o(r,a,{_name:"constant",_active:!1,_activating:!1,_alive:!1,_dispatcher:null,_logHandlers:null}),t.exports=function(t){return new r(t)}},function(t,e,n){"use strict";function r(t){this._currentEvent={type:"error",value:t,current:!0}}var i=n(2),o=i.inherit,a=n(7);o(r,a,{_name:"constantError",_active:!1,_activating:!1,_alive:!1,_dispatcher:null,_logHandlers:null}),t.exports=function(t){return new r(t)}},function(t,e,n){"use strict";var r=n(17),i=n(25);t.exports=function(t){var e=!1,n=r(function(n){if(!e){var r=function(t){n.emit(t),n.end()},i=function(t){n.error(t),n.end()},o=t.then(r,i);o&&"function"==typeof o.done&&o.done(),e=!0}});return i(n,null).setName("fromPromise")}},function(t,e,n){"use strict";var r=n(26),i=r.createProperty,o=i("toProperty",{_init:function(t){var e=t.fn;this._getInitialCurrent=e},_onActivation:function(){if(null!==this._getInitialCurrent){var t=this._getInitialCurrent;this._emitValue(t())}this._source.onAny(this._$handleAny)}});t.exports=function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if(null!==e&&"function"!=typeof e)throw new Error("You should call toProperty() with a function or no arguments.");return new o(t,{fn:e})}},function(t,e,n){"use strict";function r(t,e){return function(n,r){var i=this;t.call(this),this._source=n,this._name=n._name+"."+e,this._init(r),this._$handleAny=function(t){return i._handleAny(t)}}}function i(t){return{_init:function(t){},_free:function(){},_handleValue:function(t){this._emitValue(t)},_handleError:function(t){this._emitError(t)},_handleEnd:function(){this._emitEnd()},_handleAny:function(t){switch(t.type){case h:return this._handleValue(t.value);case d:return this._handleError(t.value);case p:return this._handleEnd()}},_onActivation:function(){this._source.onAny(this._$handleAny)},_onDeactivation:function(){this._source.offAny(this._$handleAny)},_clear:function(){t.prototype._clear.call(this),this._source=null,this._$handleAny=null,this._free()}}}function o(t,e){var n=r(s,t);return f(n,s,i(s),e),n}function a(t,e){var n=r(u,t);return f(n,u,i(u),e),n}var s=n(6),u=n(7),c=n(2),f=c.inherit,l=n(3),h=l.VALUE,d=l.ERROR,p=l.END;t.exports={createStream:o,createProperty:a}},function(t,e,n){"use strict";var r=n(26),i=r.createStream,o=i("changes",{_handleValue:function(t){this._activating||this._emitValue(t)},_handleError:function(t){this._activating||this._emitError(t)}});t.exports=function(t){return new o(t)}},function(t,e){"use strict";function n(){if("function"==typeof Promise)return Promise;throw new Error("There isn't default Promise, use shim or parameter")}t.exports=function(t){var e=arguments.length<=1||void 0===arguments[1]?n():arguments[1],r=null;return new e(function(e,n){t.onAny(function(t){"end"===t.type&&null!==r?(("value"===r.type?e:n)(r.value),r=null):r=t})})}},function(t,e,n){"use strict";var r=n(26),i=r.createStream,o=r.createProperty,a={_init:function(t){var e=t.fn;this._fn=e},_free:function(){this._fn=null},_handleValue:function(t){var e=this._fn;this._emitValue(e(t))}},s=i("map",a),u=o("map",a),c=function(t){return t};t.exports=function(t){var e=arguments.length<=1||void 0===arguments[1]?c:arguments[1];return new(t._ofSameType(s,u))(t,{fn:e})}},function(t,e,n){"use strict";var r=n(26),i=r.createStream,o=r.createProperty,a={_init:function(t){var e=t.fn;this._fn=e},_free:function(){this._fn=null},_handleValue:function(t){var e=this._fn;e(t)&&this._emitValue(t)}},s=i("filter",a),u=o("filter",a),c=function(t){return t};t.exports=function(t){var e=arguments.length<=1||void 0===arguments[1]?c:arguments[1];return new(t._ofSameType(s,u))(t,{fn:e})}},function(t,e,n){"use strict";var r=n(26),i=r.createStream,o=r.createProperty,a={_init:function(t){var e=t.n;this._n=e,0>=e&&this._emitEnd()},_handleValue:function(t){this._n--,this._emitValue(t),0===this._n&&this._emitEnd()}},s=i("take",a),u=o("take",a);t.exports=function(t,e){return new(t._ofSameType(s,u))(t,{n:e})}},function(t,e,n){"use strict";var r=n(26),i=r.createStream,o=r.createProperty,a={_init:function(t){var e=t.fn;this._fn=e},_free:function(){this._fn=null},_handleValue:function(t){var e=this._fn;e(t)?this._emitValue(t):this._emitEnd()}},s=i("takeWhile",a),u=o("takeWhile",a),c=function(t){return t};t.exports=function(t){var e=arguments.length<=1||void 0===arguments[1]?c:arguments[1];return new(t._ofSameType(s,u))(t,{fn:e})}},function(t,e,n){"use strict";var r=n(26),i=r.createStream,o=r.createProperty,a=n(3),s=a.NOTHING,u={_init:function(){this._lastValue=s},_free:function(){this._lastValue=null},_handleValue:function(t){this._lastValue=t},_handleEnd:function(){this._lastValue!==s&&this._emitValue(this._lastValue),this._emitEnd()}},c=i("last",u),f=o("last",u);t.exports=function(t){return new(t._ofSameType(c,f))(t)}},function(t,e,n){"use strict";var r=n(26),i=r.createStream,o=r.createProperty,a={_init:function(t){var e=t.n;this._n=Math.max(0,e)},_handleValue:function(t){0===this._n?this._emitValue(t):this._n--}},s=i("skip",a),u=o("skip",a);t.exports=function(t,e){return new(t._ofSameType(s,u))(t,{n:e})}},function(t,e,n){"use strict";var r=n(26),i=r.createStream,o=r.createProperty,a={_init:function(t){var e=t.fn;this._fn=e},_free:function(){this._fn=null},_handleValue:function(t){var e=this._fn;null===this._fn||e(t)||(this._fn=null),null===this._fn&&this._emitValue(t)}},s=i("skipWhile",a),u=o("skipWhile",a),c=function(t){return t};t.exports=function(t){var e=arguments.length<=1||void 0===arguments[1]?c:arguments[1];return new(t._ofSameType(s,u))(t,{fn:e})}},function(t,e,n){"use strict";var r=n(26),i=r.createStream,o=r.createProperty,a=n(3),s=a.NOTHING,u={_init:function(t){var e=t.fn;this._fn=e,this._prev=s},_free:function(){this._fn=null,this._prev=null},_handleValue:function(t){var e=this._fn;this._prev!==s&&e(this._prev,t)||(this._prev=t,this._emitValue(t))}},c=i("skipDuplicates",u),f=o("skipDuplicates",u),l=function(t,e){return t===e};t.exports=function(t){var e=arguments.length<=1||void 0===arguments[1]?l:arguments[1];return new(t._ofSameType(c,f))(t,{fn:e})}},function(t,e,n){"use strict";function r(t,e){return[t,e]}var i=n(26),o=i.createStream,a=i.createProperty,s=n(3),u=s.NOTHING,c={_init:function(t){var e=t.fn,n=t.seed;this._fn=e,this._prev=n},_free:function(){this._prev=null,this._fn=null},_handleValue:function(t){if(this._prev!==u){var e=this._fn;this._emitValue(e(this._prev,t))}this._prev=t}},f=o("diff",c),l=a("diff",c);t.exports=function(t,e){var n=arguments.length<=2||void 0===arguments[2]?u:arguments[2];return new(t._ofSameType(f,l))(t,{fn:e||r,seed:n})}},function(t,e,n){"use strict";var r=n(26),i=r.createProperty,o=n(3),a=o.ERROR,s=o.NOTHING,u=i("scan",{_init:function(t){var e=t.fn,n=t.seed;this._fn=e,n!==s&&this._emitValue(n)},_free:function(){this._fn=null},_handleValue:function(t){if(null!==this._currentEvent&&this._currentEvent.type!==a){var e=this._fn;t=e(this._currentEvent.value,t)}this._emitValue(t)}});t.exports=function(t,e){var n=arguments.length<=2||void 0===arguments[2]?s:arguments[2];return new u(t,{fn:e,seed:n})}},function(t,e,n){"use strict";var r=n(26),i=r.createStream,o=r.createProperty,a={_init:function(t){var e=t.fn;this._fn=e},_free:function(){this._fn=null},_handleValue:function(t){for(var e=this._fn,n=e(t),r=0;r<n.length;r++)this._emitValue(n[r])}},s=i("flatten",a),u=o("flatten",a),c=function(t){return t};t.exports=function(t){var e=arguments.length<=1||void 0===arguments[1]?c:arguments[1];return new(t._ofSameType(s,u))(t,{fn:e})}},function(t,e,n){"use strict";var r=n(26),i=r.createStream,o=r.createProperty,a={},s={_init:function(t){var e=this,n=t.wait;this._wait=Math.max(0,n),this._buff=[],this._$shiftBuff=function(){var t=e._buff.shift();t===a?e._emitEnd():e._emitValue(t)}},_free:function(){this._buff=null,this._$shiftBuff=null},_handleValue:function(t){this._activating?this._emitValue(t):(this._buff.push(t),setTimeout(this._$shiftBuff,this._wait))},_handleEnd:function(){this._activating?this._emitEnd():(this._buff.push(a),setTimeout(this._$shiftBuff,this._wait))}},u=i("delay",s),c=o("delay",s);t.exports=function(t,e){return new(t._ofSameType(u,c))(t,{wait:e})}},function(t,e,n){"use strict";var r=n(26),i=r.createStream,o=r.createProperty,a=n(42),s={_init:function(t){var e=this,n=t.wait,r=t.leading,i=t.trailing;this._wait=Math.max(0,n),this._leading=r,this._trailing=i,this._trailingValue=null,this._timeoutId=null,this._endLater=!1,this._lastCallTime=0,this._$trailingCall=function(){return e._trailingCall()}},_free:function(){this._trailingValue=null,this._$trailingCall=null},_handleValue:function(t){if(this._activating)this._emitValue(t);else{var e=a();0!==this._lastCallTime||this._leading||(this._lastCallTime=e);var n=this._wait-(e-this._lastCallTime);0>=n?(this._cancelTrailing(),this._lastCallTime=e,this._emitValue(t)):this._trailing&&(this._cancelTrailing(),this._trailingValue=t,this._timeoutId=setTimeout(this._$trailingCall,n))}},_handleEnd:function(){this._activating?this._emitEnd():this._timeoutId?this._endLater=!0:this._emitEnd()},_cancelTrailing:function(){null!==this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=null)},_trailingCall:function(){this._emitValue(this._trailingValue),this._timeoutId=null,this._trailingValue=null,this._lastCallTime=this._leading?a():0,this._endLater&&this._emitEnd()}},u=i("throttle",s),c=o("throttle",s);t.exports=function(t,e){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],r=n.leading,i=void 0===r?!0:r,o=n.trailing,a=void 0===o?!0:o;return new(t._ofSameType(u,c))(t,{wait:e,leading:i,trailing:a})}},function(t,e){"use strict";t.exports=Date.now?function(){return Date.now()}:function(){return(new Date).getTime()}},function(t,e,n){"use strict";var r=n(26),i=r.createStream,o=r.createProperty,a=n(42),s={_init:function(t){var e=this,n=t.wait,r=t.immediate;this._wait=Math.max(0,n),this._immediate=r,this._lastAttempt=0,this._timeoutId=null,this._laterValue=null,this._endLater=!1,this._$later=function(){return e._later()}},_free:function(){this._laterValue=null,this._$later=null},_handleValue:function(t){this._activating?this._emitValue(t):(this._lastAttempt=a(),this._immediate&&!this._timeoutId&&this._emitValue(t),this._timeoutId||(this._timeoutId=setTimeout(this._$later,this._wait)),this._immediate||(this._laterValue=t))},_handleEnd:function(){this._activating?this._emitEnd():this._timeoutId&&!this._immediate?this._endLater=!0:this._emitEnd()},_later:function(){var t=a()-this._lastAttempt;t<this._wait&&t>=0?this._timeoutId=setTimeout(this._$later,this._wait-t):(this._timeoutId=null,this._immediate||(this._emitValue(this._laterValue),this._laterValue=null),this._endLater&&this._emitEnd())}},u=i("debounce",s),c=o("debounce",s);t.exports=function(t,e){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],r=n.immediate,i=void 0===r?!1:r;return new(t._ofSameType(u,c))(t,{wait:e,immediate:i})}},function(t,e,n){"use strict";var r=n(26),i=r.createStream,o=r.createProperty,a={_init:function(t){var e=t.fn;this._fn=e},_free:function(){this._fn=null},_handleValue:function(t){var e=this._fn,n=e(t);n.convert?this._emitError(n.error):this._emitValue(t)}},s=i("valuesToErrors",a),u=o("valuesToErrors",a),c=function(t){return{convert:!0,error:t}};t.exports=function(t){var e=arguments.length<=1||void 0===arguments[1]?c:arguments[1];return new(t._ofSameType(s,u))(t,{fn:e})}},function(t,e,n){"use strict";var r=n(26),i=r.createStream,o=r.createProperty,a={_init:function(t){var e=t.fn;this._fn=e},_free:function(){this._fn=null},_handleError:function(t){var e=this._fn,n=e(t);n.convert?this._emitValue(n.value):this._emitError(t)}},s=i("errorsToValues",a),u=o("errorsToValues",a),c=function(t){return{convert:!0,value:t}};t.exports=function(t){var e=arguments.length<=1||void 0===arguments[1]?c:arguments[1];return new(t._ofSameType(s,u))(t,{fn:e})}},function(t,e,n){"use strict";var r=n(26),i=r.createStream,o=r.createProperty,a={_init:function(t){var e=t.fn;this._fn=e},_free:function(){this._fn=null},_handleError:function(t){var e=this._fn;this._emitError(e(t))}},s=i("mapErrors",a),u=o("mapErrors",a),c=function(t){return t};t.exports=function(t){var e=arguments.length<=1||void 0===arguments[1]?c:arguments[1];return new(t._ofSameType(s,u))(t,{fn:e})}},function(t,e,n){"use strict";var r=n(26),i=r.createStream,o=r.createProperty,a={_init:function(t){var e=t.fn;this._fn=e},_free:function(){this._fn=null},_handleError:function(t){var e=this._fn;e(t)&&this._emitError(t)}},s=i("filterErrors",a),u=o("filterErrors",a),c=function(t){return t};t.exports=function(t){var e=arguments.length<=1||void 0===arguments[1]?c:arguments[1];return new(t._ofSameType(s,u))(t,{fn:e})}},function(t,e,n){"use strict";var r=n(26),i=r.createStream,o=r.createProperty,a={_handleError:function(t){this._emitError(t),this._emitEnd()}},s=i("endOnError",a),u=o("endOnError",a);t.exports=function(t){return new(t._ofSameType(s,u))(t)}},function(t,e,n){"use strict";var r=n(26),i=r.createStream,o=r.createProperty,a={_handleValue:function(){}},s=i("skipValues",a),u=o("skipValues",a);t.exports=function(t){return new(t._ofSameType(s,u))(t)}},function(t,e,n){"use strict";var r=n(26),i=r.createStream,o=r.createProperty,a={_handleError:function(){}},s=i("skipErrors",a),u=o("skipErrors",a);t.exports=function(t){return new(t._ofSameType(s,u))(t)}},function(t,e,n){"use strict";var r=n(26),i=r.createStream,o=r.createProperty,a={_handleEnd:function(){}},s=i("skipEnd",a),u=o("skipEnd",a);t.exports=function(t){return new(t._ofSameType(s,u))(t)}},function(t,e,n){"use strict";var r=n(26),i=r.createStream,o=r.createProperty,a={_init:function(t){var e=t.fn;this._fn=e},_free:function(){this._fn=null},_handleEnd:function(){var t=this._fn;this._emitValue(t()),this._emitEnd()}},s=i("beforeEnd",a),u=o("beforeEnd",a);t.exports=function(t,e){return new(t._ofSameType(s,u))(t,{fn:e})}},function(t,e,n){"use strict";var r=n(26),i=r.createStream,o=r.createProperty,a=n(5),s=a.slide,u={_init:function(t){var e=t.min,n=t.max;this._max=n,this._min=e,this._buff=[]},_free:function(){this._buff=null},_handleValue:function(t){this._buff=s(this._buff,t,this._max),this._buff.length>=this._min&&this._emitValue(this._buff)}},c=i("slidingWindow",u),f=o("slidingWindow",u);t.exports=function(t,e){var n=arguments.length<=2||void 0===arguments[2]?0:arguments[2];return new(t._ofSameType(c,f))(t,{min:n,max:e})}},function(t,e,n){"use strict";var r=n(26),i=r.createStream,o=r.createProperty,a={_init:function(t){var e=t.fn,n=t.flushOnEnd;this._fn=e,this._flushOnEnd=n,this._buff=[]},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&0!==this._buff.length&&(this._emitValue(this._buff),this._buff=[])},_handleValue:function(t){this._buff.push(t);var e=this._fn;e(t)||this._flush();
},_handleEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()}},s=i("bufferWhile",a),u=o("bufferWhile",a),c=function(t){return t};t.exports=function(t,e){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],r=n.flushOnEnd,i=void 0===r?!0:r;return new(t._ofSameType(s,u))(t,{fn:e||c,flushOnEnd:i})}},function(t,e,n){"use strict";function r(t){return{"@@transducer/step":function(e,n){return t._emitValue(n),null},"@@transducer/result":function(e){return t._emitEnd(),null}}}var i=n(26),o=i.createStream,a=i.createProperty,s={_init:function(t){var e=t.transducer;this._xform=e(r(this))},_free:function(){this._xform=null},_handleValue:function(t){null!==this._xform["@@transducer/step"](null,t)&&this._xform["@@transducer/result"](null)},_handleEnd:function(){this._xform["@@transducer/result"](null)}},u=o("transduce",s),c=a("transduce",s);t.exports=function(t,e){return new(t._ofSameType(u,c))(t,{transducer:e})}},function(t,e,n){"use strict";var r=n(26),i=r.createStream,o=r.createProperty,a=n(15),s={_init:function(t){var e=t.fn;this._handler=e,this._emitter=a(this)},_free:function(){this._handler=null,this._emitter=null},_handleAny:function(t){this._handler(this._emitter,t)}},u=i("withHandler",s),c=o("withHandler",s);t.exports=function(t,e){return new(t._ofSameType(u,c))(t,{fn:e})}},function(t,e,n){"use strict";function r(t){for(var e=void 0,n=0;n<t.length;n++)void 0!==t[n]&&(void 0===e||e.index<t[n].index)&&(e=t[n]);return e.error}function i(t,e,n){var r=this;o.call(this),this._activeCount=t.length,this._sources=d(t,e),this._combinator=n?m(n,this._sources.length):function(t){return t},this._aliveCount=0,this._latestValues=new Array(this._sources.length),this._latestErrors=new Array(this._sources.length),p(this._latestValues,c),this._emitAfterActivation=!1,this._endAfterActivation=!1,this._latestErrorIndex=0,this._$handlers=[];for(var i=function(t){r._$handlers.push(function(e){return r._handleAny(t,e)})},a=0;a<this._sources.length;a++)i(a)}var o=n(6),a=n(3),s=a.VALUE,u=a.ERROR,c=a.NOTHING,f=n(2),l=f.inherit,h=n(5),d=h.concat,p=h.fillArray,v=n(21),m=v.spread,_=n(8);l(i,o,{_name:"combine",_onActivation:function(){this._aliveCount=this._activeCount;for(var t=this._activeCount;t<this._sources.length;t++)this._sources[t].onAny(this._$handlers[t]);for(var t=0;t<this._activeCount;t++)this._sources[t].onAny(this._$handlers[t]);this._emitAfterActivation&&(this._emitAfterActivation=!1,this._emitIfFull()),this._endAfterActivation&&this._emitEnd()},_onDeactivation:function(){var t=this._sources.length,e=void 0;for(e=0;t>e;e++)this._sources[e].offAny(this._$handlers[e])},_emitIfFull:function(){for(var t=!0,e=!1,n=this._latestValues.length,i=new Array(n),o=new Array(n),a=0;n>a;a++)i[a]=this._latestValues[a],o[a]=this._latestErrors[a],i[a]===c&&(t=!1),void 0!==o[a]&&(e=!0);if(t){var s=this._combinator;this._emitValue(s(i))}e&&this._emitError(r(o))},_handleAny:function(t,e){e.type===s||e.type===u?(e.type===s&&(this._latestValues[t]=e.value,this._latestErrors[t]=void 0),e.type===u&&(this._latestValues[t]=c,this._latestErrors[t]={index:this._latestErrorIndex++,error:e.value}),t<this._activeCount&&(this._activating?this._emitAfterActivation=!0:this._emitIfFull())):t<this._activeCount&&(this._aliveCount--,0===this._aliveCount&&(this._activating?this._endAfterActivation=!0:this._emitEnd()))},_clear:function(){o.prototype._clear.call(this),this._sources=null,this._latestValues=null,this._latestErrors=null,this._combinator=null,this._$handlers=null}}),t.exports=function(t,e,n){return void 0===e&&(e=[]),"function"==typeof e&&(n=e,e=[]),0===t.length?_():new i(t,e,n)}},function(t,e,n){"use strict";function r(t,e){var n=this;i.call(this),this._buffers=h(t,function(t){return _(t)?d(t):[]}),this._sources=h(t,function(t){return _(t)?m():t}),this._combinator=e?v(e,this._sources.length):function(t){return t},this._aliveCount=0,this._$handlers=[];for(var r=function(t){n._$handlers.push(function(e){return n._handleAny(t,e)})},o=0;o<this._sources.length;o++)r(o)}var i=n(6),o=n(3),a=o.VALUE,s=o.ERROR,u=o.END,c=n(2),f=c.inherit,l=n(5),h=l.map,d=l.cloneArray,p=n(21),v=p.spread,m=n(8),_=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};f(r,i,{_name:"zip",_onActivation:function(){for(;this._isFull();)this._emit();var t=this._sources.length;this._aliveCount=t;for(var e=0;t>e&&this._active;e++)this._sources[e].onAny(this._$handlers[e])},_onDeactivation:function(){for(var t=0;t<this._sources.length;t++)this._sources[t].offAny(this._$handlers[t])},_emit:function(){for(var t=new Array(this._buffers.length),e=0;e<this._buffers.length;e++)t[e]=this._buffers[e].shift();var n=this._combinator;this._emitValue(n(t))},_isFull:function(){for(var t=0;t<this._buffers.length;t++)if(0===this._buffers[t].length)return!1;return!0},_handleAny:function(t,e){e.type===a&&(this._buffers[t].push(e.value),this._isFull()&&this._emit()),e.type===s&&this._emitError(e.value),e.type===u&&(this._aliveCount--,0===this._aliveCount&&this._emitEnd())},_clear:function(){i.prototype._clear.call(this),this._sources=null,this._buffers=null,this._combinator=null,this._$handlers=null}}),t.exports=function(t,e){return 0===t.length?m():new r(t,e)}},function(t,e,n){"use strict";function r(t){a.call(this),this._addAll(t),this._initialised=!0}var i=n(2),o=i.inherit,a=n(60),s=n(8);o(r,a,{_name:"merge",_onEmpty:function(){this._initialised&&this._emitEnd()}}),t.exports=function(t){return 0===t.length?s():new r(t)}},function(t,e,n){"use strict";function r(){var t=this,e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=e.queueLim,r=void 0===n?0:n,o=e.concurLim,a=void 0===o?-1:o,s=e.drop,u=void 0===s?"new":s;i.call(this),this._queueLim=0>r?-1:r,this._concurLim=0>a?-1:a,this._drop=u,this._queue=[],this._curSources=[],this._$handleSubAny=function(e){return t._handleSubAny(e)},this._$endHandlers=[],this._currentlyAdding=null,0===this._concurLim&&this._emitEnd()}var i=n(6),o=n(3),a=o.VALUE,s=o.ERROR,u=n(2),c=u.inherit,f=n(5),l=f.concat,h=f.forEach,d=f.findByPred,p=f.find,v=f.remove,m=f.cloneArray,_=function(t){return t};c(r,i,{_name:"abstractPool",_add:function(t,e){e=e||_,-1===this._concurLim||this._curSources.length<this._concurLim?this._addToCur(e(t)):-1===this._queueLim||this._queue.length<this._queueLim?this._addToQueue(e(t)):"old"===this._drop&&(this._removeOldest(),this._add(t,e))},_addAll:function(t){var e=this;h(t,function(t){return e._add(t)})},_remove:function(t){-1===this._removeCur(t)&&this._removeQueue(t)},_addToQueue:function(t){this._queue=l(this._queue,[t])},_addToCur:function(t){if(this._active){if(!t._alive)return void(t._currentEvent&&this._emit(t._currentEvent.type,t._currentEvent.value));this._currentlyAdding=t,t.onAny(this._$handleSubAny),this._currentlyAdding=null,t._alive&&(this._curSources=l(this._curSources,[t]),this._active&&this._subToEnd(t))}else this._curSources=l(this._curSources,[t])},_subToEnd:function(t){var e=this,n=function(){return e._removeCur(t)};this._$endHandlers.push({obs:t,handler:n}),t.onEnd(n)},_subscribe:function(t){t.onAny(this._$handleSubAny),this._active&&this._subToEnd(t)},_unsubscribe:function(t){t.offAny(this._$handleSubAny);var e=d(this._$endHandlers,function(e){return e.obs===t});-1!==e&&(t.offEnd(this._$endHandlers[e].handler),this._$endHandlers.splice(e,1))},_handleSubAny:function(t){t.type===a?this._emitValue(t.value):t.type===s&&this._emitError(t.value)},_removeQueue:function(t){var e=p(this._queue,t);return this._queue=v(this._queue,e),e},_removeCur:function(t){this._active&&this._unsubscribe(t);var e=p(this._curSources,t);return this._curSources=v(this._curSources,e),-1!==e&&(0!==this._queue.length?this._pullQueue():0===this._curSources.length&&this._onEmpty()),e},_removeOldest:function(){this._removeCur(this._curSources[0])},_pullQueue:function(){0!==this._queue.length&&(this._queue=m(this._queue),this._addToCur(this._queue.shift()))},_onActivation:function(){for(var t=0,e=this._curSources;t<e.length&&this._active;t++)this._subscribe(e[t])},_onDeactivation:function(){for(var t=0,e=this._curSources;t<e.length;t++)this._unsubscribe(e[t]);null!==this._currentlyAdding&&this._unsubscribe(this._currentlyAdding)},_isEmpty:function(){return 0===this._curSources.length},_onEmpty:function(){},_clear:function(){i.prototype._clear.call(this),this._queue=null,this._curSources=null,this._$handleSubAny=null,this._$endHandlers=null}}),t.exports=r},function(t,e,n){"use strict";var r=n(62);t.exports=function(t){return r(function(e){return t.length>e?t[e]:!1}).setName("concat")}},function(t,e,n){"use strict";function r(t){var e=this;a.call(this),this._generator=t,this._source=null,this._inLoop=!1,this._iteration=0,this._$handleAny=function(t){return e._handleAny(t)}}var i=n(2),o=i.inherit,a=n(6),s=n(3),u=s.END;o(r,a,{_name:"repeat",_handleAny:function(t){t.type===u?(this._source=null,this._getSource()):this._emit(t.type,t.value)},_getSource:function(){if(!this._inLoop){this._inLoop=!0;for(var t=this._generator;null===this._source&&this._alive&&this._active;)this._source=t(this._iteration++),this._source?this._source.onAny(this._$handleAny):this._emitEnd();this._inLoop=!1}},_onActivation:function(){this._source?this._source.onAny(this._$handleAny):this._getSource()},_onDeactivation:function(){this._source&&this._source.offAny(this._$handleAny)},_clear:function(){a.prototype._clear.call(this),this._generator=null,this._source=null,this._$handleAny=null}}),t.exports=function(t){return new r(t)}},function(t,e,n){"use strict";function r(){a.call(this)}var i=n(2),o=i.inherit,a=n(60);o(r,a,{_name:"pool",plug:function(t){return this._add(t),this},unplug:function(t){return this._remove(t),this}}),t.exports=r},function(t,e,n){"use strict";function r(t,e,n){var r=this;f.call(this,n),this._source=t,this._fn=e,this._mainEnded=!1,this._lastCurrent=null,this._$handleMain=function(t){return r._handleMain(t)}}var i=n(3),o=i.VALUE,a=i.ERROR,s=i.END,u=n(2),c=u.inherit,f=n(60);c(r,f,{_onActivation:function(){f.prototype._onActivation.call(this),this._active&&this._source.onAny(this._$handleMain)},_onDeactivation:function(){f.prototype._onDeactivation.call(this),this._source.offAny(this._$handleMain),this._hadNoEvSinceDeact=!0},_handleMain:function(t){if(t.type===o){var e=this._activating&&this._hadNoEvSinceDeact&&this._lastCurrent===t.value;e||this._add(t.value,this._fn),this._lastCurrent=t.value,this._hadNoEvSinceDeact=!1}t.type===a&&this._emitError(t.value),t.type===s&&(this._isEmpty()?this._emitEnd():this._mainEnded=!0)},_onEmpty:function(){this._mainEnded&&this._emitEnd()},_clear:function(){f.prototype._clear.call(this),this._source=null,this._lastCurrent=null,this._$handleMain=null}}),t.exports=r},function(t,e,n){"use strict";function r(t,e){f.call(this,t,e)}var i=n(3),o=i.VALUE,a=i.ERROR,s=i.END,u=n(2),c=u.inherit,f=n(64);c(r,f,{_handleMain:function(t){if(t.type===a){var e=this._activating&&this._hadNoEvSinceDeact&&this._lastCurrent===t.value;e||this._add(t.value,this._fn),this._lastCurrent=t.value,this._hadNoEvSinceDeact=!1}t.type===o&&this._emitValue(t.value),t.type===s&&(this._isEmpty()?this._emitEnd():this._mainEnded=!0)}}),t.exports=r},function(t,e,n){"use strict";var r=n(67),i=r.createStream,o=r.createProperty,a=n(3),s=a.NOTHING,u={_handlePrimaryValue:function(t){this._lastSecondary!==s&&this._lastSecondary&&this._emitValue(t)},_handleSecondaryEnd:function(){this._lastSecondary!==s&&this._lastSecondary||this._emitEnd()}},c=i("filterBy",u),f=o("filterBy",u);t.exports=function(t,e){return new(t._ofSameType(c,f))(t,e)}},function(t,e,n){"use strict";function r(t,e){return function(n,r,i){var o=this;t.call(this),this._primary=n,this._secondary=r,this._name=n._name+"."+e,this._lastSecondary=v,this._$handleSecondaryAny=function(t){return o._handleSecondaryAny(t)},this._$handlePrimaryAny=function(t){return o._handlePrimaryAny(t)},this._init(i)}}function i(t){return{_init:function(t){},_free:function(){},_handlePrimaryValue:function(t){this._emitValue(t)},_handlePrimaryError:function(t){this._emitError(t)},_handlePrimaryEnd:function(){this._emitEnd()},_handleSecondaryValue:function(t){this._lastSecondary=t},_handleSecondaryError:function(t){this._emitError(t)},_handleSecondaryEnd:function(){},_handlePrimaryAny:function(t){switch(t.type){case h:return this._handlePrimaryValue(t.value);case d:return this._handlePrimaryError(t.value);case p:return this._handlePrimaryEnd(t.value)}},_handleSecondaryAny:function(t){switch(t.type){case h:return this._handleSecondaryValue(t.value);case d:return this._handleSecondaryError(t.value);case p:this._handleSecondaryEnd(t.value),this._removeSecondary()}},_removeSecondary:function(){null!==this._secondary&&(this._secondary.offAny(this._$handleSecondaryAny),this._$handleSecondaryAny=null,this._secondary=null)},_onActivation:function(){null!==this._secondary&&this._secondary.onAny(this._$handleSecondaryAny),this._active&&this._primary.onAny(this._$handlePrimaryAny)},_onDeactivation:function(){null!==this._secondary&&this._secondary.offAny(this._$handleSecondaryAny),this._primary.offAny(this._$handlePrimaryAny)},_clear:function(){t.prototype._clear.call(this),this._primary=null,this._secondary=null,this._lastSecondary=null,this._$handleSecondaryAny=null,this._$handlePrimaryAny=null,this._free()}}}function o(t,e){var n=r(s,t);return f(n,s,i(s),e),n}function a(t,e){var n=r(u,t);return f(n,u,i(u),e),n}var s=n(6),u=n(7),c=n(2),f=c.inherit,l=n(3),h=l.VALUE,d=l.ERROR,p=l.END,v=l.NOTHING;t.exports={createStream:o,createProperty:a}},function(t,e,n){"use strict";var r=n(57),i=function(t,e){return e};t.exports=function(t,e,n){var o=n?function(t,e){return n(e,t)}:i;return r([e],[t],o).setName(t,"sampledBy")}},function(t,e,n){"use strict";var r=n(67),i=r.createStream,o=r.createProperty,a=n(3),s=a.NOTHING,u={_handlePrimaryValue:function(t){this._lastSecondary!==s&&this._emitValue(t)},_handleSecondaryEnd:function(){this._lastSecondary===s&&this._emitEnd()}},c=i("skipUntilBy",u),f=o("skipUntilBy",u);t.exports=function(t,e){return new(t._ofSameType(c,f))(t,e)}},function(t,e,n){"use strict";var r=n(67),i=r.createStream,o=r.createProperty,a={_handleSecondaryValue:function(t){this._emitEnd()}},s=i("takeUntilBy",a),u=o("takeUntilBy",a);t.exports=function(t,e){return new(t._ofSameType(s,u))(t,e)}},function(t,e,n){"use strict";var r=n(67),i=r.createStream,o=r.createProperty,a={_init:function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=t.flushOnEnd,n=void 0===e?!0:e;this._buff=[],this._flushOnEnd=n},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&(this._emitValue(this._buff),this._buff=[])},_handlePrimaryEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()},_onActivation:function(){this._primary.onAny(this._$handlePrimaryAny),this._alive&&null!==this._secondary&&this._secondary.onAny(this._$handleSecondaryAny)},_handlePrimaryValue:function(t){this._buff.push(t)},_handleSecondaryValue:function(t){this._flush()},_handleSecondaryEnd:function(t){this._flushOnEnd||this._emitEnd()}},s=i("bufferBy",a),u=o("bufferBy",a);t.exports=function(t,e,n){return new(t._ofSameType(s,u))(t,e,n)}},function(t,e,n){"use strict";var r=n(67),i=r.createStream,o=r.createProperty,a=n(3),s=a.NOTHING,u={_init:function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=t.flushOnEnd,n=void 0===e?!0:e,r=t.flushOnChange,i=void 0===r?!1:r,o=t.emitEmpty,a=void 0===o?!1:o;this._buff=[],this._emitEmpty=a,this._flushOnEnd=n,this._flushOnChange=i},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&(this._emitEmpty||this._buff.length>0)&&(this._emitValue(this._buff),this._buff=[])},_handlePrimaryEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()},_handlePrimaryValue:function(t){this._buff.push(t),this._lastSecondary===s||this._lastSecondary||this._flush()},_handleSecondaryEnd:function(t){this._flushOnEnd||this._lastSecondary!==s&&!this._lastSecondary||this._emitEnd()},_handleSecondaryValue:function(t){this._flushOnChange&&!t&&this._flush(),this._lastSecondary=t}},c=i("bufferWhileBy",u),f=o("bufferWhileBy",u);t.exports=function(t,e,n){return new(t._ofSameType(c,f))(t,e,n)}},function(t,e,n){"use strict";var r=n(59),i=n(29),o=n(36),a=n(25),s=function(){return!1},u=function(){return!0};t.exports=function(t,e){var n=r([i(t,u),i(e,s)]);return n=o(n),n=a(n,s),n.setName(t,"awaiting")}},function(t,e,n){"use strict";function r(){a.call(this)}var i=n(2),o=i.inherit,a=n(6);o(r,a,{_name:"emitter",emit:function(t){return this._emitValue(t),this},error:function(t){return this._emitError(t),this},end:function(){return this._emitEnd(),this},emitEvent:function(t){this._emit(t.type,t.value)}}),t.exports=r},function(t,e,n){"use strict";function r(){a.call(this)}var i=n(2),o=i.inherit,a=n(60);o(r,a,{_name:"bus",plug:function(t){return this._add(t),this},unplug:function(t){return this._remove(t),this},emit:function(t){return this._emitValue(t),this},error:function(t){return this._emitError(t),this},end:function(){return this._emitEnd(),this},emitEvent:function(t){this._emit(t.type,t.value)}}),t.exports=r},function(t,e,n){"use strict";var r=n(26),i=r.createStream,o=r.createProperty,a=n(3),s=a.NOTHING,u={_init:function(t){var e=t.fn,n=t.seed;this._fn=e,this._result=n},_free:function(){this._fn=null,this._result=null},_handleValue:function(t){var e=this._fn;this._result=this._result===s?t:e(this._result,t)},_handleEnd:function(){this._result!==s&&this._emitValue(this._result),this._emitEnd()}},c=i("reduce",u),f=o("reduce",u);t.exports=function(t,e){var n=arguments.length<=2||void 0===arguments[2]?s:arguments[2];return new(t._ofSameType(c,f))(t,{fn:e,seed:n})}},function(t,e,n){"use strict";var r=n(57),i=n(21),o=i.apply,a=n(5),s=a.circleShift;t.exports=function(t,e,n){var i=n;return t.length>0&&(i=function(){var e=s(arguments,t.length);return n?o(n,null,e):e}),r(e,t,i).setName("sampledBy")}},function(t,e,n){"use strict";var r=n(10),i=n(5),o=i.cloneArray,a=r({_name:"repeatedly",_init:function(t){var e=t.xs;this._xs=o(e),this._i=-1},_onTick:function(){this._xs.length>0&&(this._i=(this._i+1)%this._xs.length,this._emitValue(this._xs[this._i]))}});t.exports=function(t,e){return new a(t,{xs:e})}},function(t,e,n){"use strict";var r=n(29);t.exports=function(t,e){return r(t,function(){return e}).setName(t,"mapTo")}},function(t,e,n){"use strict";var r=n(29);t.exports=function(t,e){return r(t,function(t){return e(t),t}).setName(t,"tap")}},function(t,e,n){"use strict";var r=n(29);t.exports=function(t,e){return r(t,function(t){return t[e]}).setName(t,"pluck")}},function(t,e,n){"use strict";var r=n(29),i=n(21),o=i.apply;t.exports=function(t,e,n){var i=0===n.length?function(t){return t[e]()}:function(t){return o(t[e],t,n)};return r(t,i).setName(t,"invoke")}},function(t,e,n){"use strict";var r=n(29),i=n(42);t.exports=function(t){return r(t,function(t){return{value:t,time:i()}}).setName(t,"timestamp")}},function(t,e,n){"use strict";function r(){var t=void 0;for(t=0;t<arguments.length;t++)if(!arguments[t])return arguments[t];return arguments[t-1]}var i=n(57);t.exports=function(t){return i(t,[],r).setName("and")}},function(t,e,n){"use strict";function r(){var t=void 0;for(t=0;t<arguments.length;t++)if(arguments[t])return arguments[t];return arguments[t-1]}var i=n(57);t.exports=function(t){return i(t,[],r).setName("or")}},function(t,e,n){"use strict";var r=n(29);t.exports=function(t){return r(t,function(t){return!t}).setName(t,"not")}},function(t,e,n){"use strict";var r=n(67),i=r.createStream,o=r.createProperty,a=n(3),s=a.NOTHING,u={_handlePrimaryValue:function(t){this._lastSecondary!==s&&this._emitValue(t)},_handleSecondaryValue:function(t){this._lastSecondary=t,this._lastSecondary||this._emitEnd()},_handleSecondaryEnd:function(){this._lastSecondary===s&&this._emitEnd()}},c=i("takeWhileBy",u),f=o("takeWhileBy",u);t.exports=function(t,e){return new(t._ofSameType(c,f))(t,e)}},function(t,e,n){"use strict";var r=n(67),i=r.createStream,o=r.createProperty,a={_init:function(){this._hasFalseyFromSecondary=!1},_handlePrimaryValue:function(t){this._hasFalseyFromSecondary&&this._emitValue(t)},_handleSecondaryValue:function(t){this._hasFalseyFromSecondary=this._hasFalseyFromSecondary||!t},_handleSecondaryEnd:function(){this._hasFalseyFromSecondary||this._emitEnd()}},s=i("skipWhileBy",a),u=o("skipWhileBy",a);t.exports=function(t,e){return new(t._ofSameType(s,u))(t,e)}}])})},function(t,e,n){"use strict";var r=n(16);t.exports=function(t,e,n){var i;return isNaN(t)?(i=e,i>=0?n&&i?i-1:i:1):t===!1?!1:r(t)}},function(t,e,n){"use strict";var r,i,o,a,s=n(16),u=function(t,e){};try{Object.defineProperty(u,"length",{configurable:!0,writable:!1,enumerable:!1,value:1})}catch(c){}1===u.length?(r={configurable:!0,writable:!1,enumerable:!1},i=Object.defineProperty,t.exports=function(t,e){return e=s(e),t.length===e?t:(r.value=e,i(t,"length",r))}):(a=n(115),o=function(){var t=[];return function(e){var n,r=0;if(t[e])return t[e];for(n=[];e--;)n.push("a"+(++r).toString(36));return new Function("fn","return function ("+n.join(", ")+") { return fn.apply(this, arguments); };")}}(),t.exports=function(t,e){var n;if(e=s(e),t.length===e)return t;n=o(e)(t);try{a(n,t)}catch(r){}return n})},function(t,e){"use strict";t.exports=function(){}},function(t,e,n){"use strict";t.exports=n(216)()?Object.assign:n(217)},function(t,e){"use strict";t.exports=function(t){return"function"==typeof t}},function(t,e,n){"use strict";var r=n(34),i=Object.defineProperty,o=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames;t.exports=function(t,e){var n;if(t=Object(r(t)),a(Object(r(e))).forEach(function(r){try{i(t,r,o(e,r))}catch(a){n=a}}),void 0!==n)throw n;return t}},function(t,e){"use strict";var n=Array.prototype.forEach,r=Object.create,i=function(t,e){var n;for(n in t)e[n]=t[n]};t.exports=function(t){var e=r(null);return n.call(arguments,function(t){null!=t&&i(Object(t),e)}),e}},function(t,e,n){"use strict";var r=n(140)["default"],i=n(138)["default"],o=n(139)["default"];e.__esModule=!0,n(240);var a=n(127);e.Renderer=r(a);var s=n(18);e.Object3D=r(s);var u=n(83);e.Group=r(u);var c=n(57);e.Model=r(c);var f=n(121);e.MouseViewController=r(f);var l=n(79);e.DirectionalLight=r(l);var h=n(80);e.PointLight=r(h);var d=n(81);e.SpotLight=r(d);var p=n(75);e.PerspectiveCamera=r(p);var v=n(120);e.OrthographicCamera=r(v);var m=n(35);e.Geometry=r(m);var _=n(78);i(e,o(_,i));var g=n(84);e.Texture2D=r(g);var y=n(128);e.CubeMap=r(y);var b=n(122);e.Skybox=r(b);var x=n(56);e.PhongMaterial=r(x);var E=n(38);e.GLProgram=r(E);var w=n(39);e.GLShader=r(w);var T=n(85);e.GLBuffer=r(T)},function(t,e){"use strict";e["default"]=function(t){return t&&t.__esModule?t:{"default":t}},e.__esModule=!0},function(t,e,n){/*!
	  * domready (c) Dustin Diaz 2014 - License MIT
	  */
!function(e,n){t.exports=n()}("domready",function(){var t,e=[],n=document,r=n.documentElement.doScroll,i="DOMContentLoaded",o=(r?/^loaded|^c/:/^loaded|^i|^c/).test(n.readyState);return o||n.addEventListener(i,t=function(){for(n.removeEventListener(i,t),o=1;t=e.shift();)t()}),function(t){o?setTimeout(t,0):e.push(t)}})},function(t,e,n){"use strict";var r=n(6)["default"],i=n(1)["default"],o=n(2)["default"];e.__esModule=!0;var a=n(52),s=o(a),u=n(5),c=o(u),f=function(t){function e(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,e),t.call(this,n);var r=n.left,o=void 0===r?-1:r,a=n.right,s=void 0===a?1:a,u=n.bottom,c=void 0===u?-1:u,f=n.top,l=void 0===f?1:f,h=n.near,d=void 0===h?.1:h,p=n.far,v=void 0===p?1e3:p;this.left=o,this.right=s,this.bottom=c,this.top=l,this.near=d,this.far=v,this._lastLeft=this.left,this._lastRight=this.right,this._lastBottom=this.bottom,this._lastTop=this.top,this._lastNear=this.near,this._lastFar=this.far}return r(e,t),e.prototype.recalculate=function(e,n){return(null!==this.parent&&this.parent.dirty||this.left!==this._lastLeft||this.right!==this._lastRight||this.bottom!==this._lastBottom||this.top!==this._lastTop||this.near!==this._lastNear||this.far!==this._lastFar)&&(this.dirty=!0,c["default"].mat4.ortho(this.projectionMatrix,this.left,this.right,this.bottom,this.top,this.near,this.far),this._lastLeft=this.left,this._lastRight=this.right,this._lastBottom=this.bottom,this._lastTop=this.top,this._lastNear=this.near,this._lastFar=this.far),t.prototype.recalculate.call(this,e,n)},e}(s["default"]);e["default"]=f,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(1)["default"],i=n(2)["default"];e.__esModule=!0;var o=n(5),a=n(53),s=i(a),u=o.vec3.create(),c={87:new Int8Array([0,0,-1]),65:new Int8Array([-1,0,0]),83:new Int8Array([0,0,1]),68:new Int8Array([1,0,0]),81:new Int8Array([0,1,0]),69:new Int8Array([0,-1,0])},f=function(){function t(e,n){function i(t){var e=void 0!==t.movementX?t.movementX:t.mozMovementX,n=void 0!==t.movementY?t.movementY:t.mozMovementY;_.pitch=Math.max(-90,Math.min(90,_.pitch+x*n)),_.yaw+=x*e,_.yaw=_.yaw%360}function a(){document.pointerLockElement===m||document.mozPointerLockElement===m?(console.log("The pointer lock status is now locked"),document.addEventListener("mousemove",i,!1),_.locked=!0):(console.log("The pointer lock status is now unlocked"),document.removeEventListener("mousemove",i,!1),_.locked=!1)}function u(t){t.preventDefault(),S=t.touches[0].pageX,R=t.touches[0].pageY;var e=A-S,n=M-R;_.pitch=Math.max(-90,Math.min(90,w+E*n)),_.yaw=T+E*e,_.yaw=_.yaw%360}var f=this,l=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],h=l.speed,d=void 0===h?1:h,p=l.mode,v=void 0===p?"walk":p;r(this,t),this.node=e,this.mode=v,this.yaw=0,this.pitch=0,this.roll=0,this.locked=!1,this.first=!0,this.speed=d,this.keysPressed=new s["default"];var m=n.canvas,_=this,g=m.requestFullscreen||m.msRequestFullscreen||m.mozRequestFullScreen||m.webkitRequestFullscreen,y=m.requestPointerLock||m.mozRequestPointerLock||m.webkitRequestPointerLock,b=function(t){return function(e){return o.vec3.add(e,e,c[t])}};this.tickActions={87:b(87),65:b(65),83:b(83),68:b(68),81:b(81),69:b(69)},this.immediateActions={70:g},document.body.addEventListener("keydown",function(t){_.keysPressed.set(t.keyCode);var e=_.immediateActions[t.keyCode];e&&e.call(this)},!1),document.body.addEventListener("keyup",function(t){return _.keysPressed.unset(t.keyCode)},!1),y&&m.addEventListener("click",y,!1);var x=.1;document.addEventListener("pointerlockchange",a,!1),document.addEventListener("mozpointerlockchange",a,!1),this.touching=!1;var E=.2,w=void 0,T=void 0,A=void 0,M=void 0,S=void 0,R=void 0;m.addEventListener("touchstart",function(t){m.addEventListener("touchmove",u,!1),w=f.pitch,T=f.yaw,A=t.touches[0].pageX,M=t.touches[0].pageY,_.touching=!0},!1),m.addEventListener("touchend",function(t){m.removeEventListener("touchmove",u,!1),_.touching=0!==t.touches.length},!1),n.on("tick",this.tick.bind(this))}return t.prototype.tick=function(t){var e=this;(this.first||this.locked||this.touching||!this.keysPressed.isEmpty())&&(o.vec3.set(u,0,0,0),this.keysPressed.forEach(function(t){var n=e.tickActions[t];n&&n(u)}),this.node.lookForward(),this.node.rotateY(-this.yaw),o.vec3.normalize(u,u),o.vec3.scale(u,u,t/1e3*this.speed),"walk"===this.mode&&this.node.translateRelatively(u),this.node.rotateX(-this.pitch),this.node.rotateZ(-this.roll),"fly"===this.mode&&this.node.translateRelatively(u),this.first=!1)},t}();e["default"]=f,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(6)["default"],i=n(1)["default"],o=n(9)["default"],a=n(2)["default"];e.__esModule=!0;var s=n(5),u=n(76),c=a(u),f=n(38),l=a(f),h=n(39),d=a(h),p=n(78),v=n(37),m="\n    uniform mat4 cameraMatrix;\n    attribute mediump vec3 vertex;\n    varying mediump vec3 texcoord;\n\n    void main() {\n        vec4 pos = cameraMatrix * vec4(vertex, 1.0);\n        gl_Position = pos.xyww;\n        texcoord = vertex;\n    }\n",_="\n    precision mediump float;\n    varying vec3 texcoord;\n    uniform samplerCube skybox;\n\n    void main() {\n        gl_FragColor = textureCube(skybox, texcoord);\n    }\n",g=function(t){function e(n){var r=this,a=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];i(this,e),t.call(this,a),this.cubemap=null,this._onCubemapReady=o.resolve(n).then(function(t){r.cubemap=t}),this.cube=new p.Cube,this.program=null,this.unit=null,this.handle=null,this.cubeRenderer=null,this.locations=null,this.initialized=!1,this.cameraMatrix=s.mat4.create()}return r(e,t),e.prototype.initialize=function(e){var n=this;t.prototype.initialize.call(this,e);var r=this.gl=e.gl;this.program=new l["default"](r,new d["default"](r,_,r.FRAGMENT_SHADER),new d["default"](r,m,r.VERTEX_SHADER)),this.unit=v.allocateTextureUnit(r),this.handle=r.createTexture(),this.cubeRenderer=this.cube.getRenderer(r),this.locations={sampler:this.program.getUniformLocation("skybox"),cameraMatrix:this.program.getUniformLocation("cameraMatrix")},this.cubeRenderer.vertexBuffer.setAttribLocation("vertex",this.program),this._onCubemapReady.then(function(){r.activeTexture(r.TEXTURE0+n.unit),r.bindTexture(r.TEXTURE_CUBE_MAP,n.handle),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,n.cubemap.right),r.texImage2D(r.TEXTURE_CUBE_MAP_NEGATIVE_X,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,n.cubemap.left),r.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_Y,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,n.cubemap.top),r.texImage2D(r.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,n.cubemap.bottom),r.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_Z,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,n.cubemap.back),r.texImage2D(r.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,n.cubemap.front),r.generateMipmap(r.TEXTURE_CUBE_MAP),r.bindTexture(r.TEXTURE_CUBE_MAP,null),n.initialized=!0})},e.prototype.render=function(){this.gl.clear(this.gl.DEPTH_BUFFER_BIT)},e.prototype.renderLast=function(t){if(this.initialized){var e=this.program.gl;e.disable(e.CULL_FACE),e.depthFunc(e.LEQUAL),this.program.use(),e.uniform1i(this.locations.sampler,this.unit),e.activeTexture(e.TEXTURE0+this.unit),e.bindTexture(e.TEXTURE_CUBE_MAP,this.handle),s.mat4.copy(this.cameraMatrix,t.camera.viewMatrix),this.cameraMatrix[12]=0,this.cameraMatrix[13]=0,this.cameraMatrix[14]=0,s.mat4.multiply(this.cameraMatrix,t.camera.projectionMatrix,this.cameraMatrix),e.uniformMatrix4fv(this.locations.cameraMatrix,!1,this.cameraMatrix),this.cubeRenderer.render(),e.enable(e.CULL_FACE),e.depthFunc(e.LESS)}},e}(c["default"]);e["default"]=g,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(1)["default"],i=n(27)["default"],o=n(59)["default"],a=n(26)["default"],s=n(71)["default"],u=n(41)["default"];e.__esModule=!0;var c=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=e.maxSize,i=void 0===n?10:n,o=e.initialSize,a=void 0===o?0:o;r(this,t),this.regions=[new f(0,0,1<<a,1<<a)],this.maxSize=i}return t.imageComparator=function(e,n){return t.getImageSize(n)-t.getImageSize(e)},t.getImageSize=function(t){return Math.max(t.width,t.height)},t.getFittingSize=function(e){return Math.ceil(o(t.getImageSize(e)))},t.prototype.insert=function(e){if(t.getFittingSize(e)>this.maxSize)return[t.FAILED,"Image size is too large!"];for(var n=void 0,r=0,i=this.regions.length;i>r;++r)if(n=this.regions[r].insert(e))return[t.SUCCESS,r,n];for(var o=[e],s=this.regions,u=Array.isArray(s),c=0,s=u?s:a(s);;){var l;if(u){if(c>=s.length)break;l=s[c++]}else{if(c=s.next(),c.done)break;l=c.value}for(var h=l,d=h.images(),p=Array.isArray(d),v=0,d=p?d:a(d);;){var m;if(p){if(v>=d.length)break;m=d[v++]}else{if(v=d.next(),v.done)break;m=v.value}var _=m;o.push(_)}}o.sort(t.imageComparator);var g=t.getFittingSize(o[0]);this.regions.length=1;t:for(;;){for(var r=0;r<this.regions.length-1;++r)this.regions[r]=new f(0,0,1<<this.maxSize,1<<this.maxSize);this.regions[this.regions.length-1]=new f(0,0,1<<g,1<<g);for(var y=0,h=this.regions[y],b=o,x=Array.isArray(b),E=0,b=x?b:a(b);;){var w;if(x){if(E>=b.length)break;w=b[E++]}else{if(E=b.next(),E.done)break;w=E.value}var _=w;if(!h.insert(_)){if(g++,g<=this.maxSize)continue t;h=this.regions[++y],h||(g=t.getFittingSize(_),h=this.regions[y]=new f(0,0,1<<g,1<<g)),h.insert(_)}}break}return[t.RESET]},t}();e.Atlas=c,c.FAILED=0,c.SUCCESS=1,c.RESET=2;var f=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],n=arguments.length<=1||void 0===arguments[1]?0:arguments[1],i=arguments.length<=2||void 0===arguments[2]?0:arguments[2],o=arguments.length<=3||void 0===arguments[3]?0:arguments[3];r(this,t),this.left=e,this.top=n,this.right=i,this.bottom=o,this.image=null,this.downRegion=null,this.rightRegion=null}return t.prototype.toString=function(){return this.constructor.name+"("+this.left+", "+this.top+", "+this.right+", "+this.bottom+")"},i(t,[{key:"outerWidth",get:function(){return this.right-this.left}},{key:"outerHeight",get:function(){return this.bottom-this.top}},{key:"innerWidth",get:function(){return this.image.width}},{key:"innerHeight",get:function(){return this.image.height}},{key:"isFilled",get:function(){return null!==this.image}}]),t.prototype.images=s.mark(function e(){var t,n,r,i,o;return s.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this,n=Array.isArray(t),r=0,t=n?t:a(t);case 1:if(!n){e.next=7;break}if(!(r>=t.length)){e.next=4;break}return e.abrupt("break",16);case 4:i=t[r++],e.next=11;break;case 7:if(r=t.next(),!r.done){e.next=10;break}return e.abrupt("break",16);case 10:i=r.value;case 11:return o=i,e.next=14,o.image;case 14:e.next=1;break;case 16:case"end":return e.stop()}},e,this)}),t.prototype[u]=s.mark(function n(){return s.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isFilled){t.next=5;break}return t.next=3,this;case 3:return t.delegateYield(this.downRegion,"t0",4);case 4:return t.delegateYield(this.rightRegion,"t1",5);case 5:case"end":return t.stop()}},n,this)}),t.prototype.insert=function(e){if(this.isFilled)return this.image===e?this:this.downRegion.insert(e)||this.rightRegion.insert(e);if(e.height>this.outerHeight||e.width>this.outerWidth)return void 0;this.image=e;var n=this.outerWidth-this.innerWidth,r=this.outerHeight-this.innerHeight;return n>r?(this.downRegion=new t(this.left,this.top+this.innerHeight,this.right,this.bottom),this.rightRegion=new t(this.left+this.innerWidth,this.top,this.right,this.top+this.innerHeight)):(this.downRegion=new t(this.left,this.top+this.innerHeight,this.left+this.innerWidth,this.bottom),this.rightRegion=new t(this.left+this.innerWidth,this.top,this.right,this.bottom)),this},t}();e.Region=f},function(t,e,n){"use strict";var r=n(6)["default"],i=n(27)["default"],o=n(1)["default"];e.__esModule=!0;var a=function(t){function e(){var n=arguments.length<=0||void 0===arguments[0]?"Method not implemented!":arguments[0];o(this,e),t.call(this,n)}return r(e,t),i(e,[{key:"name",get:function(){return"UnimplementedMethod"}}]),e}(Error);e.UnimplementedMethodError=a},function(t,e,r){"use strict";var i=r(1)["default"];e.__esModule=!0;var o=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0];i(this,t),this._callbacks={},this._buffers={},this._bubbleTarget=e}return t.prototype.on=function(t,e){var n=this._callbacks[t]||(this._callbacks[t]=[]);if(n.push(e),t in this._buffers){for(var r=this._buffers[t],i=0,o=r.length;o>i;++i)this.trigger.apply(this,[t,r[i].options].concat(r[i].args));r.length=0}},t.prototype.off=function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if(t in this._callbacks){var n=this._callbacks[t];n.splice(n.indexOf(e),1),0===n.length&&delete this._callbacks[t]}},t.prototype.once=function(t,e){var n=this,r=function i(){e.apply(void 0,arguments),n.off(t,i)};this.on(t,r)},t.prototype.trigger=function(t){for(var e=arguments.length,r=Array(e>2?e-2:0),i=2;e>i;i++)r[i-2]=arguments[i];var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=o.bubble,s=void 0===a?!1:a,u=o.buffer,c=void 0===u?!1:u,f=o.sync,l=void 0===f?!1:f,h=o.target,d=void 0===h?this:h,p=o.delay,v=void 0===p?0:p;if(t in this._callbacks){var m=this._callbacks[t];if(l)for(var _=0,g=m.length;g>_;++_)m[_].apply(m,r.concat([d]));else for(var _=0,g=m.length;g>_;++_)setTimeout(function(t){return m[t].apply(m,r.concat([d]))},v,n)}else if(s&&null!==this._bubbleTarget){var y;(y=this._bubbleTarget).trigger.apply(y,[t,o].concat(r))}else if(c){var b=this._buffers[t];void 0===b&&(b=this._buffers[t]=[]),b.push({args:r,options:o})}},t}();e["default"]=o,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){if(null==_){_={},g={};for(var e in t)"number"==typeof t[e]&&(_[t[e]]=e,g[e]=t[e])}}function i(){if(null==_)throw"WebGLDebugUtils.init(ctx) not called"}function o(t){return i(),void 0!==_[t]}function a(t){i();var e=_[t];return void 0!==e?"gl."+e:"/*UNKNOWN WebGL ENUM*/ 0x"+t.toString(16)}function s(t,e,n,r){var i=m[t];if(void 0!==i){var i=i[e];if(void 0!==i&&i[n]){if("object"==typeof i[n]&&void 0!==i[n].enumBitwiseOr){for(var o=i[n].enumBitwiseOr,s=0,u=[],c=0;c<o.length;++c){var f=g[o[c]];0!==(r&f)&&(s|=f,u.push(a(f)))}return s===r?u.join(" | "):a(r)}return a(r)}}return null===r?"null":void 0===r?"undefined":r.toString()}function u(t,e){for(var n="",r=e.length,i=0;r>i;++i)n+=(0==i?"":", ")+s(t,r,i,e[i]);return n}function c(t,e,n){t.__defineGetter__(n,function(){return e[n]}),t.__defineSetter__(n,function(t){e[n]=t})}function f(t,e,n,i){function o(t,r){return function(){n&&n(r,arguments);var o=t[r].apply(t,arguments),a=i.getError();return 0!=a&&(u[a]=!0,e(a,r,arguments)),o}}i=i||t,r(t),e=e||function(t,e,n){for(var r="",i=n.length,o=0;i>o;++o)r+=(0==o?"":", ")+s(e,i,o,n[o]);v("WebGL error "+a(t)+" in "+e+"("+r+")")};var u={},l={};for(var h in t)if("function"==typeof t[h])if("getExtension"!=h)l[h]=o(t,h);else{var d=o(t,h);l[h]=function(){var r=d.apply(t,arguments);return f(r,e,n,i)}}else c(l,t,h);return l.getError=function(){for(var e in u)if(u.hasOwnProperty(e)&&u[e])return u[e]=!1,e;return t.NO_ERROR},l}function l(t){var e=t.getParameter(t.MAX_VERTEX_ATTRIBS),n=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,n);for(var r=0;e>r;++r)t.disableVertexAttribArray(r),t.vertexAttribPointer(r,4,t.FLOAT,!1,0,0),t.vertexAttrib1f(r,0);t.deleteBuffer(n);for(var i=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),r=0;i>r;++r)t.activeTexture(t.TEXTURE0+r),t.bindTexture(t.TEXTURE_CUBE_MAP,null),t.bindTexture(t.TEXTURE_2D,null);for(t.activeTexture(t.TEXTURE0),t.useProgram(null),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.DITHER),t.disable(t.SCISSOR_TEST),t.blendColor(0,0,0,0),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.clearColor(0,0,0,0),t.clearDepth(1),t.clearStencil(-1),t.colorMask(!0,!0,!0,!0),t.cullFace(t.BACK),t.depthFunc(t.LESS),t.depthMask(!0),t.depthRange(0,1),t.frontFace(t.CCW),t.hint(t.GENERATE_MIPMAP_HINT,t.DONT_CARE),t.lineWidth(1),t.pixelStorei(t.PACK_ALIGNMENT,4),t.pixelStorei(t.UNPACK_ALIGNMENT,4),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.UNPACK_COLORSPACE_CONVERSION_WEBGL&&t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.BROWSER_DEFAULT_WEBGL),t.polygonOffset(0,0),t.sampleCoverage(1,!1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilMask(4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.viewport(0,0,t.canvas.width,t.canvas.height),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT);t.getError(););}function h(t){function e(t){return"function"==typeof t?t:function(e){t.handleEvent(e)}}function n(t){var e=t.addEventListener;t.addEventListener=function(n,r,i){switch(n){case"webglcontextlost":T(r);break;case"webglcontextrestored":A(r);break;default:e.apply(t,arguments)}}}function r(){for(var t=d(w),e=0;e<t.length;++e)delete w[t]}function i(){++b,_||y==b&&t.loseContext()}function o(t,e){var n=t[e];return function(){if(i(),!_){var e=n.apply(t,arguments);return e}}}function a(){for(var t=0;t<g.length;++t){var e=g[t];e instanceof WebGLBuffer?f.deleteBuffer(e):e instanceof WebGLFramebuffer?f.deleteFramebuffer(e):e instanceof WebGLProgram?f.deleteProgram(e):e instanceof WebGLRenderbuffer?f.deleteRenderbuffer(e):e instanceof WebGLShader?f.deleteShader(e):e instanceof WebGLTexture&&f.deleteTexture(e)}}function s(t){return{statusMessage:t,preventDefault:function(){x=!0}}}function u(t){for(var e in t)"function"==typeof t[e]?h[e]=o(t,e):c(h,t,e);h.getError=function(){if(i(),!_)for(var t;t=f.getError();)w[t]=!0;for(var t in w)if(w[t])return delete w[t],t;return h.NO_ERROR};for(var n=["createBuffer","createFramebuffer","createProgram","createRenderbuffer","createShader","createTexture"],r=0;r<n.length;++r){var a=n[r];h[a]=function(e){return function(){if(i(),_)return null;var n=e.apply(t,arguments);return n.__webglDebugContextLostId__=m,g.push(n),n}}(t[a])}for(var s=["getActiveAttrib","getActiveUniform","getBufferParameter","getContextAttributes","getAttachedShaders","getFramebufferAttachmentParameter","getParameter","getProgramParameter","getProgramInfoLog","getRenderbufferParameter","getShaderParameter","getShaderInfoLog","getShaderSource","getTexParameter","getUniform","getUniformLocation","getVertexAttrib"],r=0;r<s.length;++r){var a=s[r];h[a]=function(e){return function(){return i(),_?null:e.apply(t,arguments)}}(h[a])}for(var u=["isBuffer","isEnabled","isFramebuffer","isProgram","isRenderbuffer","isShader","isTexture"],r=0;r<u.length;++r){var a=u[r];h[a]=function(e){return function(){return i(),_?!1:e.apply(t,arguments)}}(h[a])}return h.checkFramebufferStatus=function(e){return function(){return i(),_?h.FRAMEBUFFER_UNSUPPORTED:e.apply(t,arguments)}}(h.checkFramebufferStatus),h.getAttribLocation=function(e){return function(){return i(),_?-1:e.apply(t,arguments)}}(h.getAttribLocation),h.getVertexAttribOffset=function(e){return function(){return i(),_?0:e.apply(t,arguments)}}(h.getVertexAttribOffset),h.isContextLost=function(){return _},h}var f,h,p=[],v=[],h={},m=1,_=!1,g=[],y=0,b=0,x=!1,E=0,w={};t.getContext=function(e){return function(){var n=e.apply(t,arguments);if(n instanceof WebGLRenderingContext){if(n!=f){if(f)throw"got different context";f=n,h=u(f)}return h}return n}}(t.getContext);var T=function(t){p.push(e(t))},A=function(t){v.push(e(t))};return n(t),t.loseContext=function(){if(!_){for(_=!0,y=0,++m;f.getError(););r(),w[f.CONTEXT_LOST_WEBGL]=!0;var e=s("context lost"),n=p.slice();setTimeout(function(){for(var r=0;r<n.length;++r)n[r](e);E>=0&&setTimeout(function(){t.restoreContext()},E)},0)}},t.restoreContext=function(){_&&v.length&&setTimeout(function(){if(!x)throw"can not restore. webglcontestlost listener did not call event.preventDefault";a(),l(f),_=!1,b=0,x=!1;for(var t=v.slice(),e=s("context restored"),n=0;n<t.length;++n)t[n](e)},0)},t.loseContextInNCalls=function(t){if(_)throw"You can not ask a lost contet to be lost";y=b+t},t.getNumCalls=function(){return b},t.setRestoreTimeout=function(t){E=t},t}var d=n(60)["default"];e.__esModule=!0;var p=function(t){window.console&&window.console.log&&window.console.log(t)},v=function(t){window.console&&window.console.error?window.console.error(t):p(t)},m={enable:{1:{0:!0}},disable:{1:{0:!0}},getParameter:{1:{0:!0}},drawArrays:{3:{0:!0}},drawElements:{4:{0:!0,2:!0}},createShader:{1:{0:!0}},getShaderParameter:{2:{1:!0}},getProgramParameter:{2:{1:!0}},getShaderPrecisionFormat:{2:{0:!0,1:!0}},getVertexAttrib:{2:{1:!0}},vertexAttribPointer:{6:{2:!0}},bindTexture:{2:{0:!0}},activeTexture:{1:{0:!0}},getTexParameter:{2:{0:!0,1:!0}},texParameterf:{3:{0:!0,1:!0}},texParameteri:{3:{0:!0,1:!0,2:!0}},texImage2D:{9:{0:!0,2:!0,6:!0,7:!0},6:{0:!0,2:!0,3:!0,4:!0}},texSubImage2D:{9:{0:!0,6:!0,7:!0},7:{0:!0,4:!0,5:!0}},copyTexImage2D:{8:{0:!0,2:!0}},copyTexSubImage2D:{8:{0:!0}},generateMipmap:{1:{0:!0}},compressedTexImage2D:{7:{0:!0,2:!0}},compressedTexSubImage2D:{8:{0:!0,6:!0}},bindBuffer:{2:{0:!0}},bufferData:{3:{0:!0,2:!0}},bufferSubData:{3:{0:!0}},getBufferParameter:{2:{0:!0,1:!0}},pixelStorei:{2:{0:!0,1:!0}},readPixels:{7:{4:!0,5:!0}},bindRenderbuffer:{2:{0:!0}},bindFramebuffer:{2:{0:!0}},checkFramebufferStatus:{1:{0:!0}},framebufferRenderbuffer:{4:{0:!0,1:!0,2:!0}},framebufferTexture2D:{5:{0:!0,1:!0,2:!0}},getFramebufferAttachmentParameter:{3:{0:!0,1:!0,2:!0}},getRenderbufferParameter:{2:{0:!0,1:!0}},renderbufferStorage:{4:{0:!0,1:!0}},clear:{1:{0:{enumBitwiseOr:["COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT"]}}},depthFunc:{1:{0:!0}},blendFunc:{2:{0:!0,1:!0}},blendFuncSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},blendEquation:{1:{0:!0}},blendEquationSeparate:{2:{0:!0,1:!0}},stencilFunc:{3:{0:!0}},stencilFuncSeparate:{4:{0:!0,1:!0}},stencilMaskSeparate:{2:{0:!0}},stencilOp:{3:{0:!0,1:!0,2:!0}},stencilOpSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},cullFace:{1:{0:!0}},frontFace:{1:{0:!0}},drawArraysInstancedANGLE:{4:{0:!0}},drawElementsInstancedANGLE:{5:{0:!0,2:!0}},blendEquationEXT:{1:{0:!0}}},_=null,g=null;e["default"]={init:r,mightBeEnum:o,glEnumToString:a,glFunctionArgToString:s,glFunctionArgsToString:u,makeDebugContext:f,makeLostContextSimulatingCanvas:h,resetToInitialState:l},t.exports=e["default"]},function(t,e,n){"use strict";function r(t,e,n,r,i){for(var o=!0;o;){var a=t,s=e,u=n,c=r,f=i;l=void 0,o=!1,c=c||0,f=f||s.length;var l=Math.floor(c+(f-c)/2);if(s[l]===a)return l;if(1>=f-c)return s[l]>a?l-1:l;u(s[l],a)<0?(t=a,e=s,n=u,r=l,i=f,o=!0):(t=a,e=s,n=u,r=c,i=l,o=!0)}}function i(t,e,n){return e.splice(r(t,e,n)+1,0,t),e}function o(t){return v["default"].makeDebugContext(t,function(t,e){console.error(v["default"].glEnumToString(t)+" was caused by call to: "+e)},function(t,e){console.log("gl."+t+"("+v["default"].glFunctionArgsToString(t,e)+")");for(var n=e,r=Array.isArray(n),i=0,n=r?n:l(n);;){var o;if(r){if(i>=n.length)break;o=n[i++]}else{if(i=n.next(),i.done)break;o=i.value}var a=o;void 0===a&&console.error("undefined passed to gl."+t+"("+v["default"].glFunctionArgsToString(t,e)+")")}})}var a=n(6)["default"],s=n(1)["default"],u=n(9)["default"],c=n(89)["default"],f=n(137)["default"],l=n(26)["default"],h=n(2)["default"];e.__esModule=!0;var d=n(5),p=n(126),v=h(p),m=n(125),_=h(m),g=n(239),y=h(g),b=n(52),x=(h(b),n(75)),E=h(x),w=n(18),T=h(w),A=n(57),M=h(A),S=n(83),R=h(S),P=n(36),L=n(76),O=h(L),I=n(53),k=h(I),C=new Uint8Array(1),N=[],F=function(t){function e(n,r,a){var l=this,h=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],d=h.environment,p=void 0===d?0:d,v=h.debug,m=void 0===v?!1:v,_=h.showFPS,g=void 0===_?!1:_,b=h.hidpi,x=void 0===b?!0:b,w=h.antialias,A=void 0===w?!0:w,M=h.fullscreen,S=void 0===M?!0:M;s(this,e),t.call(this),this.scene=n,this.camera=r,this.canvas=a,u.resolve(p).then(function(t){l.environment=t instanceof O["default"]?t:new O["default"]({ambient:t}),l.environment.initialize(l)}),this._activeModels=[],this._geometryRenderers=[],this._materialRenderers=[],this._lightRenderers=[],this._materialsUsingGeometry=new c,this._newNodes=new k["default"],this._processedNodes=new k["default"],this._visibleNodes=new k["default"];var R=x?devicePixelRatio:1;a.width=Math.round(a.clientWidth*R),a.height=Math.round(a.clientHeight*R);var P={antialias:A},L=a.getContext("webgl",P)||a.getContext("experimental-webgl",P);if(void 0===L)throw"Your browser does not seem to support WebGL! Too bad!";if(m&&(L=o(L)),g){var I=new y["default"];I.setMode(0),I.domElement.style.position="absolute",I.domElement.style.left="0px",I.domElement.style.top="0px",document.body.appendChild(I.domElement),this._stats=I}S&&r instanceof E["default"]&&(r.aspect=a.clientWidth/a.clientHeight,window.addEventListener("resize",function(){a.width=Math.round(a.clientWidth*R),a.height=Math.round(a.clientHeight*R),L.viewport(0,0,a.width,a.height),r.aspect=a.clientWidth/a.clientHeight})),this.gl=L;var C=function U(t){return t.thenBy=function(e){return U(function(n,r){return t(n,r)||e(n,r)})},t},N=function(t){var e=arguments.length<=1||void 0===arguments[1]?function(t,e){return e-t}:arguments[1];return function(n,r){return e(t(n),t(r))}},F=function(t,e){return t===e?0:-1};this._modelComparator=C(N(function(t){return l._materialRenderers[t].program},F)).thenBy(N(function(t){return T["default"].instances[t].material},F)),this.start=this.start.bind(this),this._processNode=this._processNode.bind(this),this._processModelCallback=function(t){var e=t.geometry.getRenderer(l.gl),n=t.material.getRenderer(l.gl);n.init(l),l._geometryRenderers[t.id]=e,l._materialRenderers[t.id]=n;var r=l._materialsUsingGeometry.get(t.geometry);void 0===r&&(r=new f,l._materialsUsingGeometry.set(t.geometry,new f)),r.has(t.material)||(n.setGeometryRenderer(e),r.add(t.material)),i(t.id,l._activeModels,l._modelComparator),t.dirty=!0},L.enable(L.DEPTH_TEST),L.enable(L.CULL_FACE),L.cullFace(L.BACK),this.supportsUint=L.getExtension("OES_element_index_uint")}return a(e,t),e.prototype.start=function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0],e=this._lastTime||0;this.render(t-e,t),this._lastTime=t,this._animationFrame=requestAnimationFrame(this.start)},e.prototype.stop=function(){this._animationFrame&&cancelAnimationFrame(this._animationFrame)},e.prototype._processNode=function(t){var e=T["default"].instances[t];if(e instanceof M["default"])this._processModel(e);else if(e instanceof P.LightBase){this._lightRenderers.push(e.getRenderer(this.gl));for(var n=this._materialRenderers,r=Array.isArray(n),i=0,n=r?n:l(n);;){var o;if(r){if(i>=n.length)break;o=n[i++]}else{if(i=n.next(),i.done)break;o=i.value}var a=o;a.init(this)}}},e.prototype._processModel=function(t){null!==t.onReady?t.onReady.then(this._processModelCallback):setTimeout(this._processModelCallback,0,t)},e.prototype._markVisibleNodes=function(t){var e=this.camera,n=this._visibleNodes,r=0;N[r++]=t,N[r++]=63;var i=void 0,o=void 0;do switch(C[0]=N[--r],t=N[--r],i=e.canSee(t,C),o=C[0],i){case 1:for(var a=0,s=t._subtreeIds,u=s.length;u>a;++a)n.set(s[a]);break;case 2:if(n.set(t.id),t instanceof R["default"])for(var a=0,u=t.children.length;u>a;++a)N[r++]=t.children[a],N[r++]=o}while(r>0)},e.prototype.render=function(t,e){this._stats&&this._stats.begin();var n=this.scene,r=this.camera,i=this._geometryRenderers,o=this._materialRenderers,a=this._activeModels,s=this._visibleNodes,u=this._newNodes,c=this._processedNodes,f=T["default"].instances;this.trigger("tick",{sync:!0},t,e);var l=n.recalculate(u,!1);if(I.applyBinaryFunction(I.added,c,u,u),u.forEach(this._processNode),u.isEmpty()||n.recalculateSubtreeIds(),I.applyBinaryFunction(I.or,u,c,c),l){this._markVisibleNodes(n),this.environment&&this.environment.render(this);for(var h=void 0,p=void 0,v=void 0,m=void 0,_=void 0,g=void 0,y=void 0,b=0,x=a.length;x>b;++b)h=a[b],y=f[h],s.get(h)&&((r.dirty||y.dirty)&&d.mat4.multiply(y.mvpMatrix,r.cameraMatrix,y.worldTransform),m=i[h],_=o[h],g=_.program,g!==p&&g.use(),_!==v&&_.beforeRender(),_.render(y),m.render(),_!==v&&_.afterRender(),p=g,v=_),y.dirty=!1;r.dirty=!1,this.environment&&this.environment.renderLast(this),s.reset(),u.reset(),this._stats&&this._stats.end()}},e}(_["default"]);e["default"]=F,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(1)["default"],i=n(61)["default"],o=n(9)["default"],a=n(59)["default"];e.__esModule=!0;var s=n(37),u=function(){var t=document.createElement("canvas"),e=t.getContext("webgl")||t.getContext("experimental-webgl");return e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE)}();e.MAX_SIZE=u;var c=function(){function t(e,n,i,o,a,s){r(this,t),this.right=e,this.left=n,this.top=i,this.bottom=o,this.front=a,this.back=s}return t.fromFiles=function(e,n,r,c,f,l,h){return o.all([e,n,r,c,f,l].map(function(t){return s.getImage(t,h)})).then(function(e){var n=function(t){return 0!=t&&!(t&t-1)};return(e[0].width!==e[0].height||e[0].width>u||!n(e[0].width)||e.slice(0).some(function(t){return t.width!==e[0].width||t.height!==e[0].height}))&&!function(){var t=function(t){return 1<<Math.floor(a(Math.max(t.width,t.height)))},n=e.reduce(function(e,n){return Math.max(e,t(n))},0),r=Math.min(u,n);e=e.map(function(t){return s.resizeImage(t,r,r)})}(),new(i.apply(t,[null].concat(e)))})},t}();e["default"]=c},function(t,e,n){"use strict";function r(t,e){function n(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t}function r(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function i(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}function o(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}var a=e.vertices,s=e.indices,u="Computing vertex normals ("+s.length/3+" vertices)";console.time(u);for(var c=new Float32Array(3),f=new Float32Array(3),l=new Float32Array(3),h=new Float32Array(a.length),d=new Array(a.length/3),p=new Float32Array(s.length),v=0,m=d.length;m>v;++v)d[v]=[];for(var _=0,m=s.length;m>_;_+=3){var g=s[_],y=s[_+1],b=s[_+2],x=3*g,E=3*y,w=3*b,T=o(c,a[x],a[x+1],a[x+2]),A=o(f,a[E],a[E+1],a[E+2]),M=o(l,a[w],a[w+1],a[w+2]);d[g].push(_),d[y].push(_),d[b].push(_);var S=n(c,r(f,A,T),r(l,M,T));p[_]=S[0],p[_+1]=S[1],p[_+2]=S[2]}for(var R=0,P=d.length;P>R;++R){for(var L=d[R],O=L[0],I=o(c,p[O],p[O+1],p[O+2]),k=1,C=L.length;C>k;++k)O=L[k],I[0]+=p[O],I[1]+=p[O+1],I[2]+=p[O+2];i(I,I);var _=3*R;h[_]=I[0],h[_+1]=I[1],h[_+2]=I[2]}console.timeEnd(u),t.done({indices:s,vertices:a,normals:h},[s.buffer,a.buffer,h.buffer])}var i=n(2)["default"];e.__esModule=!0;var o=n(55),a=i(o),s=a["default"].fromFunction(r);e.workerpool=s},function(t,e,n){"use strict";function r(t,e){tga.load(new Uint8ClampedArray(e));var n=tga.getImageData();t.done(n,[n.data.buffer])}var i=n(2)["default"];e.__esModule=!0;var o=n(55),a=i(o),s=n(238),u=i(s),c=a["default"].fromFunction(r,{dependencies:[u["default"],"var tga = new TGA();"]});e.workerpool=c},function(t,e,n){t.exports={"default":n(145),__esModule:!0}},function(t,e,n){t.exports={"default":n(148),__esModule:!0}},function(t,e,n){t.exports={"default":n(149),__esModule:!0}},function(t,e,n){t.exports={"default":n(151),__esModule:!0}},function(t,e,n){t.exports={"default":n(153),__esModule:!0}},function(t,e,n){t.exports={"default":n(154),__esModule:!0}},function(t,e,n){t.exports={"default":n(157),__esModule:!0}},function(t,e,n){"use strict";var r=n(133)["default"],i=n(132)["default"],o=n(88)["default"];e["default"]=function(t,e){for(var n=r(e),a=0;a<n.length;a++){var s=n[a],u=i(e,s);u&&u.configurable&&void 0===t[s]&&o(t,s,u)}return t},e.__esModule=!0},function(t,e){"use strict";e["default"]=function(t,e){var n=e({},t);return delete n["default"],n},e.__esModule=!0},function(t,e){"use strict";e["default"]=function(t){return t&&t.__esModule?t["default"]:t;
},e.__esModule=!0},function(t,e,n){n(21),n(171),t.exports=n(3).Array.from},function(t,e,n){n(22),n(21),t.exports=n(170)},function(t,e,n){n(33),n(21),n(22),n(172),n(184),t.exports=n(3).Map},function(t,e,n){n(173),t.exports=n(3).Math.log2},function(t,e,n){n(174),t.exports=n(3).Object.assign},function(t,e,n){var r=n(4);t.exports=function(t,e){return r.create(t,e)}},function(t,e,n){var r=n(4);t.exports=function(t,e,n){return r.setDesc(t,e,n)}},function(t,e,n){var r=n(4);n(175),t.exports=function(t,e){return r.getDesc(t,e)}},function(t,e,n){var r=n(4);n(176),t.exports=function(t){return r.getNames(t)}},function(t,e,n){n(177),t.exports=n(3).Object.keys},function(t,e,n){n(178),t.exports=n(3).Object.setPrototypeOf},function(t,e,n){n(33),n(21),n(22),n(179),t.exports=n(3).Promise},function(t,e,n){n(33),n(21),n(22),n(180),n(185),t.exports=n(3).Set},function(t,e,n){n(181),t.exports=n(3).Symbol},function(t,e,n){n(21),n(22),t.exports=n(8)("iterator")},function(t,e,n){n(33),n(105),n(182),t.exports=n(3).WeakMap},function(t,e,n){n(33),n(22),n(183),t.exports=n(3).WeakSet},function(t,e,n){var r=n(13),i=n(64),o=n(48),a=n(69);t.exports=function(t){var e=1==t,n=2==t,s=3==t,u=4==t,c=6==t,f=5==t||c;return function(l,h,d){for(var p,v,m=o(l),_=i(m),g=r(h,d,3),y=a(_.length),b=0,x=e?Array(y):n?[]:void 0;y>b;b++)if((f||b in _)&&(p=_[b],v=g(p,b,m),t))if(e)x[b]=v;else if(v)switch(t){case 3:return!0;case 5:return p;case 6:return b;case 2:x.push(p)}else if(u)return!1;return c?-1:s||u?u:x}}},function(t,e,n){var r=n(48),i=n(64),o=n(94);t.exports=Object.assign||function(t,e){for(var n=r(t),a=arguments.length,s=1;a>s;)for(var u,c=i(arguments[s++]),f=o(c),l=f.length,h=0;l>h;)n[u=f[h++]]=c[u];return n}},function(t,e,n){var r=n(15),i=n(10).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){t.exports=n(10).document&&document.documentElement},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){"use strict";var r=n(4),i={};n(14)(i,n(8)("iterator"),function(){return this}),t.exports=function(t,e,o){t.prototype=r.create(i,{next:n(68)(1,o)}),n(30)(t,e+" Iterator")}},function(t,e,n){var r=n(4),i=n(31);t.exports=function(t,e){for(var n,o=i(t),a=r.getKeys(o),s=a.length,u=0;s>u;)if(o[n=a[u++]]===e)return n}},function(t,e,n){var r,i,o,a=n(10),s=n(168).set,u=a.MutationObserver||a.WebKitMutationObserver,c=a.process,f="process"==n(42)(c),l=function(){var t,e;for(f&&(t=c.domain)&&(c.domain=null,t.exit());r;)e=r.domain,e&&e.enter(),r.fn.call(),e&&e.exit(),r=r.next;i=void 0,t&&t.enter()};if(f)o=function(){c.nextTick(l)};else if(u){var h=1,d=document.createTextNode("");new u(l).observe(d,{characterData:!0}),o=function(){d.data=h=-h}}else o=function(){s.call(a,l)};t.exports=function(t){var e={fn:t,next:void 0,domain:f&&c.domain};i&&(i.next=e),r||(r=e,o()),i=e}},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},function(t,e,n){var r=n(104),i=n(44);t.exports=function(t){return function(e,n){var o,a,s=String(i(e)),u=r(n),c=s.length;return 0>u||u>=c?t?"":void 0:(o=s.charCodeAt(u),55296>o||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):(o-55296<<10)+(a-56320)+65536)}}},function(t,e,n){"use strict";var r,i,o,a=n(13),s=n(162),u=n(161),c=n(160),f=n(10),l=f.process,h=f.setImmediate,d=f.clearImmediate,p=f.MessageChannel,v=0,m={},_="onreadystatechange",g=function(){var t=+this;if(m.hasOwnProperty(t)){var e=m[t];delete m[t],e()}},y=function(t){g.call(t.data)};h&&d||(h=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return m[++v]=function(){s("function"==typeof t?t:Function(t),e)},r(v),v},d=function(t){delete m[t]},"process"==n(42)(l)?r=function(t){l.nextTick(a(g,t,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=y,r=a(o.postMessage,o,1)):f.addEventListener&&"function"==typeof postMessage&&!f.importScript?(r=function(t){f.postMessage(t+"","*")},f.addEventListener("message",y,!1)):r=_ in c("script")?function(t){u.appendChild(c("script"))[_]=function(){u.removeChild(this),g.call(t)}}:function(t){setTimeout(a(g,t,1),0)}),t.exports={set:h,clear:d}},function(t,e){t.exports=function(){}},function(t,e,n){var r=n(12),i=n(70);t.exports=n(3).getIterator=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return r(e.call(t))}},function(t,e,n){"use strict";var r=n(13),i=n(7),o=n(48),a=n(98),s=n(96),u=n(69),c=n(70);i(i.S+i.F*!n(99)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,i,f,l=o(t),h="function"==typeof this?this:Array,d=arguments[1],p=void 0!==d,v=0,m=c(l);if(p&&(d=r(d,arguments[2],2)),void 0==m||h==Array&&s(m))for(n=new h(e=u(l.length));e>v;v++)n[v]=p?d(l[v],v):l[v];else for(f=m.call(l),n=new h;!(i=f.next()).done;v++)n[v]=p?a(f,d,[i.value,v],!0):i.value;return n.length=v,n}})},function(t,e,n){"use strict";var r=n(91);n(43)("Map",function(t){return function(){return t(this,arguments[0])}},{get:function(t){var e=r.getEntry(this,t);return e&&e.v},set:function(t,e){return r.def(this,0===t?0:t,e)}},r,!0)},function(t,e,n){var r=n(7);r(r.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,n){var r=n(7);r(r.S,"Object",{assign:n(159)})},function(t,e,n){var r=n(31);n(67)("getOwnPropertyDescriptor",function(t){return function(e,n){return t(r(e),n)}})},function(t,e,n){n(67)("getOwnPropertyNames",function(){return n(95).get})},function(t,e,n){var r=n(48);n(67)("keys",function(t){return function(e){return t(r(e))}})},function(t,e,n){var r=n(7);r(r.S,"Object",{setPrototypeOf:n(101).set})},function(t,e,n){"use strict";var r,i=n(4),o=n(66),a=n(10),s=n(13),u=n(62),c=n(7),f=n(15),l=n(12),h=n(90),d=n(47),p=n(28),v=n(101).set,m=n(166),_=n(103),g=n(8)("species"),y=n(32)("record"),b=n(165),x="Promise",E=a.process,w="process"==u(E),T=a[x],A=function(t){var e=new T(function(){});return t&&(e.constructor=Object),T.resolve(e)===e},M=function(){function t(e){var n=new T(e);return v(n,t.prototype),n}var e=!1;try{if(e=T&&T.resolve&&A(),v(t,T),t.prototype=i.create(T.prototype,{constructor:{value:t}}),t.resolve(5).then(function(){})instanceof t||(e=!1),e&&n(20)){var r=!1;T.resolve(i.setDesc({},"then",{get:function(){r=!0}})),e=r}}catch(o){e=!1}return e}(),S=function(t){return f(t)&&(M?"Promise"==u(t):y in t)},R=function(t,e){return o&&t===T&&e===r?!0:m(t,e)},P=function(t){var e=l(t)[g];return void 0!=e?e:t},L=function(t){var e;return f(t)&&"function"==typeof(e=t.then)?e:!1},O=function(t,e){if(!t.n){t.n=!0;var n=t.c;b(function(){for(var r=t.v,i=1==t.s,o=0,s=function(e){var n,o,a=i?e.ok:e.fail;try{a?(i||(t.h=!0),n=a===!0?r:a(r),n===e.P?e.rej(TypeError("Promise-chain cycle")):(o=L(n))?o.call(n,e.res,e.rej):e.res(n)):e.rej(r)}catch(s){e.rej(s)}};n.length>o;)s(n[o++]);n.length=0,t.n=!1,e&&setTimeout(function(){b(function(){I(t.p)&&(w?E.emit("unhandledRejection",r,t.p):a.console&&console.error&&console.error("Unhandled promise rejection",r)),t.a=void 0})},1)})}},I=function(t){var e,n=t[y],r=n.a||n.c,i=0;if(n.h)return!1;for(;r.length>i;)if(e=r[i++],e.fail||!I(e.P))return!1;return!0},k=function(t){var e=this;e.d||(e.d=!0,e=e.r||e,e.v=t,e.s=2,e.a=e.c.slice(),O(e,!0))},C=function(t){var e,n=this;if(!n.d){n.d=!0,n=n.r||n;try{(e=L(t))?b(function(){var r={r:n,d:!1};try{e.call(t,s(C,r,1),s(k,r,1))}catch(i){k.call(r,i)}}):(n.v=t,n.s=1,O(n,!1))}catch(r){k.call({r:n,d:!1},r)}}};M||(T=function(t){h(t);var e={p:d(this,T,x),c:[],a:void 0,s:0,d:!1,v:void 0,h:!1,n:!1};this[y]=e;try{t(s(C,e,1),s(k,e,1))}catch(n){k.call(e,n)}},n(45)(T.prototype,{then:function(t,e){var n=l(l(this).constructor)[g],r={ok:"function"==typeof t?t:!0,fail:"function"==typeof e?e:!1},i=r.P=new(void 0!=n?n:T)(function(t,e){r.res=h(t),r.rej=h(e)}),o=this[y];return o.c.push(r),o.a&&o.a.push(r),o.s&&O(o,!1),i},"catch":function(t){return this.then(void 0,t)}})),c(c.G+c.W+c.F*!M,{Promise:T}),n(30)(T,x),_(T),_(r=n(3)[x]),c(c.S+c.F*!M,x,{reject:function(t){return new this(function(e,n){n(t)})}}),c(c.S+c.F*(!M||A(!0)),x,{resolve:function(t){return S(t)&&R(t.constructor,this)?t:new this(function(e){e(t)})}}),c(c.S+c.F*!(M&&n(99)(function(t){T.all(t)["catch"](function(){})})),x,{all:function(t){var e=P(this),n=[];return new e(function(r,o){p(t,!1,n.push,n);var a=n.length,s=Array(a);a?i.each.call(n,function(t,n){e.resolve(t).then(function(t){s[n]=t,--a||r(s)},o)}):r(s)})},race:function(t){var e=P(this);return new e(function(n,r){p(t,!1,function(t){e.resolve(t).then(n,r)})})}})},function(t,e,n){"use strict";var r=n(91);n(43)("Set",function(t){return function(){return t(this,arguments[0])}},{add:function(t){return r.def(this,t=0===t?0:t,t)}},r)},function(t,e,n){"use strict";var r=n(4),i=n(10),o=n(19),a=n(20),s=n(7),u=n(46),c=n(102),f=n(30),l=n(32),h=n(8),d=n(164),p=n(95),v=n(94),m=n(12),_=n(31),g=n(68),y=r.getDesc,b=r.setDesc,x=r.create,E=p.get,w=i.Symbol,T=!1,A=h("_hidden"),M=r.isEnum,S=c("symbol-registry"),R=c("symbols"),P="function"==typeof w,L=Object.prototype,O=a?function(){try{return x(b({},A,{get:function(){return b(this,A,{value:!1})[A]}}))[A]||b}catch(t){return function(t,e,n){var r=y(L,e);r&&delete L[e],b(t,e,n),r&&t!==L&&b(L,e,r)}}}():b,I=function(t){var e=R[t]=x(w.prototype);return e._k=t,a&&T&&O(L,t,{configurable:!0,set:function(e){o(this,A)&&o(this[A],t)&&(this[A][t]=!1),O(this,t,g(1,e))}}),e},k=function(t,e,n){return n&&o(R,e)?(n.enumerable?(o(t,A)&&t[A][e]&&(t[A][e]=!1),n=x(n,{enumerable:g(0,!1)})):(o(t,A)||b(t,A,g(1,{})),t[A][e]=!0),O(t,e,n)):b(t,e,n)},C=function(t,e){m(t);for(var n,r=v(e=_(e)),i=0,o=r.length;o>i;)k(t,n=r[i++],e[n]);return t},N=function(t,e){return void 0===e?x(t):C(x(t),e)},F=function(t){var e=M.call(this,t);return e||!o(this,t)||!o(R,t)||o(this,A)&&this[A][t]?e:!0},U=function(t,e){var n=y(t=_(t),e);return!n||!o(R,e)||o(t,A)&&t[A][e]||(n.enumerable=!0),n},D=function(t){for(var e,n=E(_(t)),r=[],i=0;n.length>i;)o(R,e=n[i++])||e==A||r.push(e);return r},B=function(t){for(var e,n=E(_(t)),r=[],i=0;n.length>i;)o(R,e=n[i++])&&r.push(R[e]);return r};P||(w=function(){if(this instanceof w)throw TypeError("Symbol is not a constructor");return I(l(arguments[0]))},u(w.prototype,"toString",function(){return this._k}),r.create=N,r.isEnum=F,r.getDesc=U,r.setDesc=k,r.setDescs=C,r.getNames=p.get=D,r.getSymbols=B,a&&!n(66)&&u(L,"propertyIsEnumerable",F,!0)),(!P||n(63)(function(){return"[null]"!=JSON.stringify([w()])}))&&u(w.prototype,"toJSON",function(){});var V={"for":function(t){return o(S,t+="")?S[t]:S[t]=w(t)},keyFor:function(t){return d(S,t)},useSetter:function(){T=!0},useSimple:function(){T=!1}};r.each.call("hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),function(t){var e=h(t);V[t]=P?e:I(e)}),T=!0,s(s.G+s.W,{Symbol:w}),s(s.S,"Symbol",V),s(s.S+s.F*!P,"Object",{create:N,defineProperty:k,defineProperties:C,getOwnPropertyDescriptor:U,getOwnPropertyNames:D,getOwnPropertySymbols:B}),f(w,"Symbol"),f(Math,"Math",!0),f(i.JSON,"JSON",!0)},function(t,e,n){"use strict";var r=n(4),i=n(93),o=n(15),a=n(19),s=i.frozenStore,u=i.WEAK,c=Object.isExtensible||o,f={},l=n(43)("WeakMap",function(t){return function(){return t(this,arguments[0])}},{get:function(t){if(o(t)){if(!c(t))return s(this).get(t);if(a(t,u))return t[u][this._i]}},set:function(t,e){return i.def(this,t,e)}},i,!0,!0);7!=(new l).set((Object.freeze||Object)(f),7).get(f)&&r.each.call(["delete","has","get","set"],function(t){var e=l.prototype,r=e[t];n(46)(e,t,function(e,n){if(o(e)&&!c(e)){var i=s(this)[t](e,n);return"set"==t?this:i}return r.call(this,e,n)})})},function(t,e,n){"use strict";var r=n(93);n(43)("WeakSet",function(t){return function(){return t(this,arguments[0])}},{add:function(t){return r.def(this,t,!0)}},r,!1,!0)},function(t,e,n){var r=n(7);r(r.P,"Map",{toJSON:n(92)("Map")})},function(t,e,n){var r=n(7);r(r.P,"Set",{toJSON:n(92)("Set")})},function(t,e,n){(function(e,r){"use strict";var i=n(136)["default"],o=n(41)["default"],a=n(87)["default"],s=n(9)["default"];!function(e){function n(t,e,n,r){var i=a((e||c).prototype);return i._invoke=v(t,n||null,new g(r||[])),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(r){return{type:"throw",arg:r}}}function c(){}function f(){}function l(){}function h(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function d(t){this.arg=t}function p(t){function e(e,n){var r=t[e](n),i=r.value;return i instanceof d?s.resolve(i.arg).then(o,a):s.resolve(i).then(function(t){return r.value=t,r})}function n(t,n){var r=i?i.then(function(){return e(t,n)}):new s(function(r){r(e(t,n))});return i=r["catch"](function(t){}),r}"object"==typeof r&&r.domain&&(e=r.domain.bind(e));var i,o=e.bind(t,"next"),a=e.bind(t,"throw");e.bind(t,"return");this._invoke=n}function v(t,e,n){var r=M;return function(i,o){if(r===R)throw new Error("Generator is already running");if(r===P){if("throw"===i)throw o;return b()}for(;;){var a=n.delegate;if(a){if("return"===i||"throw"===i&&a.iterator[i]===x){n.delegate=null;var s=a.iterator["return"];if(s){var c=u(s,a.iterator,o);if("throw"===c.type){i="throw",o=c.arg;continue}}if("return"===i)continue}var c=u(a.iterator[i],a.iterator,o);if("throw"===c.type){n.delegate=null,i="throw",o=c.arg;continue}i="next",o=x;var f=c.arg;if(!f.done)return r=S,f;n[a.resultName]=f.value,n.next=a.nextLoc,n.delegate=null}if("next"===i)r===S?n.sent=o:n.sent=x;else if("throw"===i){if(r===M)throw r=P,o;n.dispatchException(o)&&(i="next",o=x)}else"return"===i&&n.abrupt("return",o);r=R;var c=u(t,e,n);if("normal"===c.type){r=n.done?P:S;var f={value:c.arg,done:n.done};if(c.arg!==L)return f;n.delegate&&"next"===i&&(o=x)}else"throw"===c.type&&(r=P,i="throw",o=c.arg)}}}function m(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function g(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(m,this),this.reset(!0)}function y(t){if(t){var e=t[w];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function i(){for(;++n<t.length;)if(E.call(t,n))return i.value=t[n],i.done=!1,i;return i.value=x,i.done=!0,i};return r.next=r}}return{next:b}}function b(){return{value:x,done:!0}}var x,E=Object.prototype.hasOwnProperty,w="function"==typeof i&&o||"@@iterator",T="object"==typeof t,A=e.regeneratorRuntime;if(A)return void(T&&(t.exports=A));A=e.regeneratorRuntime=T?t.exports:{},A.wrap=n;var M="suspendedStart",S="suspendedYield",R="executing",P="completed",L={},O=l.prototype=c.prototype;f.prototype=O.constructor=l,l.constructor=f,f.displayName="GeneratorFunction",A.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return e?e===f||"GeneratorFunction"===(e.displayName||e.name):!1},A.mark=function(t){return t.__proto__=l,t.prototype=a(O),t},A.awrap=function(t){return new d(t)},h(p.prototype),A.async=function(t,e,r,i){var o=new p(n(t,e,r,i));return A.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},h(O),O[w]=function(){return this},O.toString=function(){return"[object Generator]"},A.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},A.values=y,g.prototype={constructor:g,reset:function(t){if(this.prev=0,this.next=0,this.sent=x,this.done=!1,this.delegate=null,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&E.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=x)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,r){return o.type="throw",o.arg=t,n.next=e,!!r}if(this.done)throw t;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=E.call(i,"catchLoc"),s=E.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&E.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?this.next=i.finallyLoc:this.complete(o),L},complete:function(t,e){if("throw"===t.type)throw t.arg;"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=t.arg,this.next="end"):"normal"===t.type&&e&&(this.next=e)},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),L}},"catch":function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;_(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:y(t),resultName:e,nextLoc:n},L}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:void 0)}).call(e,function(){return this}(),n(50))},function(t,e,n){var r=n(11),i={};i.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},i.clone=function(t){var e=new r.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},i.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},i.transpose=function(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},i.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*o-i*r;return a?(a=1/a,t[0]=o*a,t[1]=-r*a,t[2]=-i*a,t[3]=n*a,t):null},i.adjoint=function(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t},i.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},i.multiply=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],c=n[2],f=n[3];return t[0]=r*s+o*u,t[1]=i*s+a*u,t[2]=r*c+o*f,t[3]=i*c+a*f,t},i.mul=i.multiply,i.rotate=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=i*u+a*s,t[2]=r*-s+o*u,t[3]=i*-s+a*u,t},i.scale=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1];return t[0]=r*s,t[1]=i*s,t[2]=o*u,t[3]=a*u,t},i.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t},i.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},i.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},i.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},i.LDU=function(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]},t.exports=i},function(t,e,n){var r=n(11),i={};i.create=function(){var t=new r.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},i.clone=function(t){var e=new r.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},i.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},i.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=n*o-r*i;return u?(u=1/u,t[0]=o*u,t[1]=-r*u,t[2]=-i*u,t[3]=n*u,t[4]=(i*s-o*a)*u,t[5]=(r*a-n*s)*u,t):null},i.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},i.multiply=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=n[0],f=n[1],l=n[2],h=n[3],d=n[4],p=n[5];return t[0]=r*c+o*f,t[1]=i*c+a*f,t[2]=r*l+o*h,t[3]=i*l+a*h,t[4]=r*d+o*p+s,t[5]=i*d+a*p+u,t},i.mul=i.multiply,i.rotate=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=Math.sin(n),f=Math.cos(n);return t[0]=r*f+o*c,t[1]=i*f+a*c,t[2]=r*-c+o*f,t[3]=i*-c+a*f,t[4]=s,t[5]=u,t},i.scale=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=n[0],f=n[1];return t[0]=r*c,t[1]=i*c,t[2]=o*f,t[3]=a*f,t[4]=s,t[5]=u,t},i.translate=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=n[0],f=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=r*c+o*f+s,t[5]=i*c+a*f+u,t},i.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t},i.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},i.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},i.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},i.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},t.exports=i},function(t,e,n){var r=n(11),i={};i.create=function(){var t=new r.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.clone=function(t){var e=new r.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},i.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},i.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8],l=e[9],h=e[10],d=e[11],p=e[12],v=e[13],m=e[14],_=e[15],g=n*s-r*a,y=n*u-i*a,b=n*c-o*a,x=r*u-i*s,E=r*c-o*s,w=i*c-o*u,T=f*v-l*p,A=f*m-h*p,M=f*_-d*p,S=l*m-h*v,R=l*_-d*v,P=h*_-d*m,L=g*P-y*R+b*S+x*M-E*A+w*T;return L?(L=1/L,t[0]=(s*P-u*R+c*S)*L,t[1]=(i*R-r*P-o*S)*L,t[2]=(v*w-m*E+_*x)*L,t[3]=(h*E-l*w-d*x)*L,t[4]=(u*M-a*P-c*A)*L,t[5]=(n*P-i*M+o*A)*L,t[6]=(m*b-p*w-_*y)*L,t[7]=(f*w-h*b+d*y)*L,t[8]=(a*R-s*M+c*T)*L,t[9]=(r*M-n*R-o*T)*L,t[10]=(p*E-v*b+_*g)*L,t[11]=(l*b-f*E-d*g)*L,t[12]=(s*A-a*S-u*T)*L,t[13]=(n*S-r*A+i*T)*L,t[14]=(v*y-p*x-m*g)*L,t[15]=(f*x-l*y+h*g)*L,t):null},i.adjoint=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8],l=e[9],h=e[10],d=e[11],p=e[12],v=e[13],m=e[14],_=e[15];return t[0]=s*(h*_-d*m)-l*(u*_-c*m)+v*(u*d-c*h),t[1]=-(r*(h*_-d*m)-l*(i*_-o*m)+v*(i*d-o*h)),t[2]=r*(u*_-c*m)-s*(i*_-o*m)+v*(i*c-o*u),t[3]=-(r*(u*d-c*h)-s*(i*d-o*h)+l*(i*c-o*u)),t[4]=-(a*(h*_-d*m)-f*(u*_-c*m)+p*(u*d-c*h)),t[5]=n*(h*_-d*m)-f*(i*_-o*m)+p*(i*d-o*h),t[6]=-(n*(u*_-c*m)-a*(i*_-o*m)+p*(i*c-o*u)),t[7]=n*(u*d-c*h)-a*(i*d-o*h)+f*(i*c-o*u),t[8]=a*(l*_-d*v)-f*(s*_-c*v)+p*(s*d-c*l),t[9]=-(n*(l*_-d*v)-f*(r*_-o*v)+p*(r*d-o*l)),t[10]=n*(s*_-c*v)-a*(r*_-o*v)+p*(r*c-o*s),t[11]=-(n*(s*d-c*l)-a*(r*d-o*l)+f*(r*c-o*s)),t[12]=-(a*(l*m-h*v)-f*(s*m-u*v)+p*(s*h-u*l)),t[13]=n*(l*m-h*v)-f*(r*m-i*v)+p*(r*h-i*l),t[14]=-(n*(s*m-u*v)-a*(r*m-i*v)+p*(r*u-i*s)),t[15]=n*(s*h-u*l)-a*(r*h-i*l)+f*(r*u-i*s),t},i.determinant=function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],f=t[9],l=t[10],h=t[11],d=t[12],p=t[13],v=t[14],m=t[15],_=e*a-n*o,g=e*s-r*o,y=e*u-i*o,b=n*s-r*a,x=n*u-i*a,E=r*u-i*s,w=c*p-f*d,T=c*v-l*d,A=c*m-h*d,M=f*v-l*p,S=f*m-h*p,R=l*m-h*v;return _*R-g*S+y*M+b*A-x*T+E*w},i.multiply=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=e[8],h=e[9],d=e[10],p=e[11],v=e[12],m=e[13],_=e[14],g=e[15],y=n[0],b=n[1],x=n[2],E=n[3];return t[0]=y*r+b*s+x*l+E*v,t[1]=y*i+b*u+x*h+E*m,t[2]=y*o+b*c+x*d+E*_,t[3]=y*a+b*f+x*p+E*g,y=n[4],b=n[5],x=n[6],E=n[7],t[4]=y*r+b*s+x*l+E*v,t[5]=y*i+b*u+x*h+E*m,t[6]=y*o+b*c+x*d+E*_,t[7]=y*a+b*f+x*p+E*g,y=n[8],b=n[9],x=n[10],E=n[11],t[8]=y*r+b*s+x*l+E*v,t[9]=y*i+b*u+x*h+E*m,t[10]=y*o+b*c+x*d+E*_,t[11]=y*a+b*f+x*p+E*g,y=n[12],b=n[13],x=n[14],E=n[15],t[12]=y*r+b*s+x*l+E*v,t[13]=y*i+b*u+x*h+E*m,t[14]=y*o+b*c+x*d+E*_,t[15]=y*a+b*f+x*p+E*g,t},i.mul=i.multiply,i.translate=function(t,e,n){var r,i,o,a,s,u,c,f,l,h,d,p,v=n[0],m=n[1],_=n[2];return e===t?(t[12]=e[0]*v+e[4]*m+e[8]*_+e[12],t[13]=e[1]*v+e[5]*m+e[9]*_+e[13],t[14]=e[2]*v+e[6]*m+e[10]*_+e[14],t[15]=e[3]*v+e[7]*m+e[11]*_+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=e[8],h=e[9],d=e[10],p=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=c,t[7]=f,t[8]=l,t[9]=h,t[10]=d,t[11]=p,t[12]=r*v+s*m+l*_+e[12],t[13]=i*v+u*m+h*_+e[13],t[14]=o*v+c*m+d*_+e[14],t[15]=a*v+f*m+p*_+e[15]),t},i.scale=function(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},i.rotate=function(t,e,n,i){var o,a,s,u,c,f,l,h,d,p,v,m,_,g,y,b,x,E,w,T,A,M,S,R,P=i[0],L=i[1],O=i[2],I=Math.sqrt(P*P+L*L+O*O);return Math.abs(I)<r.EPSILON?null:(I=1/I,P*=I,L*=I,O*=I,o=Math.sin(n),a=Math.cos(n),s=1-a,u=e[0],c=e[1],f=e[2],l=e[3],h=e[4],d=e[5],p=e[6],v=e[7],m=e[8],_=e[9],g=e[10],y=e[11],b=P*P*s+a,x=L*P*s+O*o,E=O*P*s-L*o,w=P*L*s-O*o,T=L*L*s+a,A=O*L*s+P*o,M=P*O*s+L*o,S=L*O*s-P*o,R=O*O*s+a,t[0]=u*b+h*x+m*E,t[1]=c*b+d*x+_*E,t[2]=f*b+p*x+g*E,t[3]=l*b+v*x+y*E,t[4]=u*w+h*T+m*A,t[5]=c*w+d*T+_*A,t[6]=f*w+p*T+g*A,t[7]=l*w+v*T+y*A,t[8]=u*M+h*S+m*R,t[9]=c*M+d*S+_*R,t[10]=f*M+p*S+g*R,t[11]=l*M+v*S+y*R,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},i.rotateX=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],f=e[9],l=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+c*r,t[5]=a*i+f*r,t[6]=s*i+l*r,t[7]=u*i+h*r,t[8]=c*i-o*r,t[9]=f*i-a*r,t[10]=l*i-s*r,t[11]=h*i-u*r,t},i.rotateY=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[8],f=e[9],l=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-c*r,t[1]=a*i-f*r,t[2]=s*i-l*r,t[3]=u*i-h*r,t[8]=o*r+c*i,t[9]=a*r+f*i,t[10]=s*r+l*i,t[11]=u*r+h*i,t},i.rotateZ=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[4],f=e[5],l=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+c*r,t[1]=a*i+f*r,t[2]=s*i+l*r,t[3]=u*i+h*r,t[4]=c*i-o*r,t[5]=f*i-a*r,t[6]=l*i-s*r,t[7]=h*i-u*r,t},i.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},i.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.fromRotation=function(t,e,n){var i,o,a,s=n[0],u=n[1],c=n[2],f=Math.sqrt(s*s+u*u+c*c);return Math.abs(f)<r.EPSILON?null:(f=1/f,s*=f,u*=f,c*=f,i=Math.sin(e),o=Math.cos(e),a=1-o,t[0]=s*s*a+o,t[1]=u*s*a+c*i,t[2]=c*s*a-u*i,t[3]=0,t[4]=s*u*a-c*i,t[5]=u*u*a+o,t[6]=c*u*a+s*i,t[7]=0,t[8]=s*c*a+u*i,t[9]=u*c*a-s*i,t[10]=c*c*a+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},i.fromXRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.fromYRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.fromZRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.fromRotationTranslation=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=r+r,u=i+i,c=o+o,f=r*s,l=r*u,h=r*c,d=i*u,p=i*c,v=o*c,m=a*s,_=a*u,g=a*c;return t[0]=1-(d+v),t[1]=l+g,t[2]=h-_,t[3]=0,t[4]=l-g,t[5]=1-(f+v),t[6]=p+m,t[7]=0,t[8]=h+_,t[9]=p-m,t[10]=1-(f+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},i.fromRotationTranslationScale=function(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3],u=i+i,c=o+o,f=a+a,l=i*u,h=i*c,d=i*f,p=o*c,v=o*f,m=a*f,_=s*u,g=s*c,y=s*f,b=r[0],x=r[1],E=r[2];return t[0]=(1-(p+m))*b,t[1]=(h+y)*b,t[2]=(d-g)*b,t[3]=0,t[4]=(h-y)*x,t[5]=(1-(l+m))*x,t[6]=(v+_)*x,t[7]=0,t[8]=(d+g)*E,t[9]=(v-_)*E,t[10]=(1-(l+p))*E,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},i.fromRotationTranslationScaleOrigin=function(t,e,n,r,i){var o=e[0],a=e[1],s=e[2],u=e[3],c=o+o,f=a+a,l=s+s,h=o*c,d=o*f,p=o*l,v=a*f,m=a*l,_=s*l,g=u*c,y=u*f,b=u*l,x=r[0],E=r[1],w=r[2],T=i[0],A=i[1],M=i[2];return t[0]=(1-(v+_))*x,t[1]=(d+b)*x,t[2]=(p-y)*x,t[3]=0,t[4]=(d-b)*E,t[5]=(1-(h+_))*E,t[6]=(m+g)*E,t[7]=0,t[8]=(p+y)*w,t[9]=(m-g)*w,t[10]=(1-(h+v))*w,t[11]=0,t[12]=n[0]+T-(t[0]*T+t[4]*A+t[8]*M),t[13]=n[1]+A-(t[1]*T+t[5]*A+t[9]*M),t[14]=n[2]+M-(t[2]*T+t[6]*A+t[10]*M),t[15]=1,t},i.fromQuat=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,c=n*a,f=r*a,l=r*s,h=i*a,d=i*s,p=i*u,v=o*a,m=o*s,_=o*u;return t[0]=1-l-p,t[1]=f+_,t[2]=h-m,t[3]=0,t[4]=f-_,t[5]=1-c-p,t[6]=d+v,t[7]=0,t[8]=h+m,t[9]=d-v,t[10]=1-c-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.frustum=function(t,e,n,r,i,o,a){var s=1/(n-e),u=1/(i-r),c=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*u,t[10]=(a+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*c,t[15]=0,t},i.perspective=function(t,e,n,r,i){var o=1/Math.tan(e/2),a=1/(r-i);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*a,t[15]=0,t},i.perspectiveFromFieldOfView=function(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(a+s),c=2/(i+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-((a-s)*u*.5),t[9]=(i-o)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t},i.ortho=function(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*c,t[15]=1,t},i.lookAt=function(t,e,n,o){var a,s,u,c,f,l,h,d,p,v,m=e[0],_=e[1],g=e[2],y=o[0],b=o[1],x=o[2],E=n[0],w=n[1],T=n[2];return Math.abs(m-E)<r.EPSILON&&Math.abs(_-w)<r.EPSILON&&Math.abs(g-T)<r.EPSILON?i.identity(t):(h=m-E,d=_-w,p=g-T,v=1/Math.sqrt(h*h+d*d+p*p),h*=v,d*=v,p*=v,a=b*p-x*d,s=x*h-y*p,u=y*d-b*h,v=Math.sqrt(a*a+s*s+u*u),v?(v=1/v,a*=v,s*=v,u*=v):(a=0,s=0,u=0),c=d*u-p*s,f=p*a-h*u,l=h*s-d*a,v=Math.sqrt(c*c+f*f+l*l),v?(v=1/v,c*=v,f*=v,l*=v):(c=0,f=0,l=0),t[0]=a,t[1]=c,t[2]=h,t[3]=0,t[4]=s,t[5]=f,t[6]=d,t[7]=0,t[8]=u,t[9]=l,t[10]=p,t[11]=0,t[12]=-(a*m+s*_+u*g),t[13]=-(c*m+f*_+l*g),t[14]=-(h*m+d*_+p*g),t[15]=1,t)},i.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},i.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2));
},t.exports=i},function(t,e,n){var r=n(11),i=n(106),o=n(107),a=n(108),s={};s.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},s.rotationTo=function(){var t=o.create(),e=o.fromValues(1,0,0),n=o.fromValues(0,1,0);return function(r,i,a){var u=o.dot(i,a);return-.999999>u?(o.cross(t,e,i),o.length(t)<1e-6&&o.cross(t,n,i),o.normalize(t,t),s.setAxisAngle(r,t,Math.PI),r):u>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(o.cross(t,i,a),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+u,s.normalize(r,r))}}(),s.setAxes=function(){var t=i.create();return function(e,n,r,i){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],s.normalize(e,s.fromMat3(e,t))}}(),s.clone=a.clone,s.fromValues=a.fromValues,s.copy=a.copy,s.set=a.set,s.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},s.setAxisAngle=function(t,e,n){n=.5*n;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t},s.add=a.add,s.multiply=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],c=n[2],f=n[3];return t[0]=r*f+a*s+i*c-o*u,t[1]=i*f+a*u+o*s-r*c,t[2]=o*f+a*c+r*u-i*s,t[3]=a*f-r*s-i*u-o*c,t},s.mul=s.multiply,s.scale=a.scale,s.rotateX=function(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+a*s,t[1]=i*u+o*s,t[2]=o*u-i*s,t[3]=a*u-r*s,t},s.rotateY=function(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u-o*s,t[1]=i*u+a*s,t[2]=o*u+r*s,t[3]=a*u-i*s,t},s.rotateZ=function(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+i*s,t[1]=i*u-r*s,t[2]=o*u+a*s,t[3]=a*u-o*s,t},s.calculateW=function(t,e){var n=e[0],r=e[1],i=e[2];return t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),t},s.dot=a.dot,s.lerp=a.lerp,s.slerp=function(t,e,n,r){var i,o,a,s,u,c=e[0],f=e[1],l=e[2],h=e[3],d=n[0],p=n[1],v=n[2],m=n[3];return o=c*d+f*p+l*v+h*m,0>o&&(o=-o,d=-d,p=-p,v=-v,m=-m),1-o>1e-6?(i=Math.acos(o),a=Math.sin(i),s=Math.sin((1-r)*i)/a,u=Math.sin(r*i)/a):(s=1-r,u=r),t[0]=s*c+u*d,t[1]=s*f+u*p,t[2]=s*l+u*v,t[3]=s*h+u*m,t},s.sqlerp=function(){var t=s.create(),e=s.create();return function(n,r,i,o,a,u){return s.slerp(t,r,a,u),s.slerp(e,i,o,u),s.slerp(n,t,e,2*u*(1-u)),n}}(),s.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o,s=a?1/a:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-i*s,t[3]=o*s,t},s.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},s.length=a.length,s.len=s.length,s.squaredLength=a.squaredLength,s.sqrLen=s.squaredLength,s.normalize=a.normalize,s.fromMat3=function(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;n=Math.sqrt(e[3*i+i]-e[3*o+o]-e[3*a+a]+1),t[i]=.5*n,n=.5/n,t[3]=(e[3*o+a]-e[3*a+o])*n,t[o]=(e[3*o+i]+e[3*i+o])*n,t[a]=(e[3*a+i]+e[3*i+a])*n}return t},s.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},t.exports=s},function(t,e,n){var r=n(11),i={};i.create=function(){var t=new r.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},i.clone=function(t){var e=new r.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},i.fromValues=function(t,e){var n=new r.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},i.set=function(t,e,n){return t[0]=e,t[1]=n,t},i.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},i.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t},i.sub=i.subtract,i.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t},i.mul=i.multiply,i.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t},i.div=i.divide,i.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},i.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},i.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},i.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t},i.distance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)},i.dist=i.distance,i.squaredDistance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r},i.sqrDist=i.squaredDistance,i.length=function(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)},i.len=i.length,i.squaredLength=function(t){var e=t[0],n=t[1];return e*e+n*n},i.sqrLen=i.squaredLength,i.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},i.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},i.normalize=function(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i),t},i.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},i.cross=function(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t},i.lerp=function(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t},i.random=function(t,e){e=e||1;var n=2*r.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},i.transformMat2=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t},i.transformMat2d=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t},i.transformMat3=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t},i.transformMat4=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t},i.forEach=function(){var t=i.create();return function(e,n,r,i,o,a){var s,u;for(n||(n=2),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;u>s;s+=n)t[0]=e[s],t[1]=e[s+1],o(t,t,a),e[s]=t[0],e[s+1]=t[1];return e}}(),i.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},t.exports=i},function(t,e,n){"use strict";var r=n(73),i=n(115),o=n(111),a=n(227),s=Array.prototype.slice,u=Function.prototype.apply,c=Object.create,f=Object.prototype.hasOwnProperty;n(24).async=function(t,e){var n,l,h,d=c(null),p=c(null),v=e.memoized,m=e.original;e.memoized=o(function(t){var e=arguments,r=e[e.length-1];return"function"==typeof r&&(n=r,e=s.call(e,0,-1)),v.apply(l=this,h=e)},v);try{i(e.memoized,v)}catch(_){}e.on("get",function(t){var r,i,o;if(n){if(d[t])return"function"==typeof d[t]?d[t]=[d[t],n]:d[t].push(n),void(n=null);r=n,i=l,o=h,n=l=h=null,a(function(){var a;f.call(p,t)?(a=p[t],e.emit("getasync",t,o,i),u.call(r,a.context,a.args)):(n=r,l=i,h=o,v.apply(i,o))})}}),e.original=function(){var t,i,o,s;return n?(t=r(arguments),i=function c(t){var n,i,o=c.id;return null==o?void a(u.bind(c,this,arguments)):(delete c.id,n=d[o],delete d[o],n?(i=r(arguments),e.has(o)&&(t?e["delete"](o):(p[o]={context:this,args:i},e.emit("setasync",o,"function"==typeof n?1:n.length))),"function"==typeof n?s=u.call(n,this,i):n.forEach(function(t){s=u.call(t,this,i)},this),s):void 0)},o=n,n=l=h=null,t.push(i),s=u.call(m,this,t),i.cb=o,n=i,s):u.call(m,this,arguments)},e.on("set",function(t){return n?(d[t]?"function"==typeof d[t]?d[t]=[d[t],n.cb]:d[t].push(n.cb):d[t]=n.cb,delete n.cb,n.id=t,void(n=null)):void e["delete"](t)}),e.on("delete",function(t){var n;f.call(d,t)||p[t]&&(n=p[t],delete p[t],e.emit("deleteasync",t,n))}),e.on("clear",function(){var t=p;p=c(null),e.emit("clearasync",t)})}},function(t,e,n){"use strict";var r=n(17),i=n(74),o=n(24),a=Array.prototype.slice,s=Function.prototype.apply;o.dispose=function(t,e,n){var u;return r(t),n.async&&o.async?(e.on("deleteasync",u=function(e,n){s.call(t,null,a.call(n.args,1))}),void e.on("clearasync",function(t){i(t,function(t,e){u(e,t)})})):(e.on("delete",u=function(e,n){t(n)}),void e.on("clear",function(t){i(t,function(t,e){u(e,t)})}))}},function(t,e,n){"use strict";var r=n(73),i=n(112),o=n(74),a=n(229),s=n(24),u=Math.max,c=Math.min,f=Object.create;s.maxAge=function(t,e,n){var l,h,d,p;t=a(t),t&&(l=f(null),h=n.async&&s.async?"async":"",e.on("set"+h,function(n){l[n]=setTimeout(function(){e["delete"](n)},t),p&&(p[n]&&clearTimeout(p[n]),p[n]=setTimeout(function(){delete p[n]},d))}),e.on("delete"+h,function(t){clearTimeout(l[t]),delete l[t],p&&(clearTimeout(p[t]),delete p[t])}),n.preFetch&&(d=n.preFetch===!0||isNaN(n.preFetch)?.333:u(c(Number(n.preFetch),1),0),d&&(p={},d=(1-d)*t,e.on("get"+h,function(t,o,a){p[t]||(p[t]=setTimeout(function(){delete p[t],e["delete"](t),n.async&&(o=r(o),o.push(i)),e.memoized.apply(a,o)},0))}))),e.on("clear"+h,function(){o(l,function(t){clearTimeout(t)}),l={},p&&(o(p,function(t){clearTimeout(t)}),p={})}))}},function(t,e,n){"use strict";var r=n(16),i=n(226),o=n(24);o.max=function(t,e,n){var a,s,u;t=r(t),t&&(s=i(t),a=n.async&&o.async?"async":"",e.on("set"+a,u=function(t){t=s.hit(t),void 0!==t&&e["delete"](t)}),e.on("get"+a,u),e.on("delete"+a,s["delete"]),e.on("clear"+a,s.clear))}},function(t,e,n){"use strict";var r=n(49),i=n(24),o=Object.create,a=Object.defineProperties;i.refCounter=function(t,e,n){var s,u;s=o(null),u=n.async&&i.async?"async":"",e.on("set"+u,function(t,e){s[t]=e||1}),e.on("get"+u,function(t){++s[t]}),e.on("delete"+u,function(t){delete s[t]}),e.on("clear"+u,function(){s={}}),a(e.memoized,{deleteRef:r(function(){var t=e.get(arguments);return null===t?null:s[t]?--s[t]?!1:(e["delete"](t),!0):null}),getRefCount:r(function(){var t=e.get(arguments);return null===t?0:s[t]?s[t]:0})})}},function(t,e,n){"use strict";var r=n(203),i=n(111),o=n(49),a=n(225).methods,s=n(199),u=n(198),c=Function.prototype.apply,f=Function.prototype.call,l=Object.create,h=Object.prototype.hasOwnProperty,d=Object.defineProperties,p=a.on,v=a.emit;t.exports=function(t,e,n){var a,m,_,g,y,b,x,E,w,T,A,M,S,R=l(null);return m=e!==!1?e:isNaN(t.length)?1:t.length,n.normalizer&&(E=u(n.normalizer),_=E.get,g=E.set,y=E["delete"],b=E.clear),null!=n.resolvers&&(S=s(n.resolvers)),M=_?i(function(e){var n,i,o=arguments;if(S&&(o=S(o)),n=_(o),null!==n&&h.call(R,n))return w&&a.emit("get",n,o,this),R[n];if(i=1===o.length?f.call(t,this,e):c.call(t,this,o),null===n){if(n=_(o),null!==n)throw r("Circular invocation","CIRCULAR_INVOCATION");n=g(o)}else if(h.call(R,n))throw r("Circular invocation","CIRCULAR_INVOCATION");return R[n]=i,T&&a.emit("set",n),i},m):0===e?function(){var e;if(h.call(R,"data"))return w&&a.emit("get","data",arguments,this),R.data;if(e=arguments.length?c.call(t,this,arguments):f.call(t,this),h.call(R,"data"))throw r("Circular invocation","CIRCULAR_INVOCATION");return R.data=e,T&&a.emit("set","data"),e}:function(e){var n,i,o=arguments;if(S&&(o=S(arguments)),i=String(o[0]),h.call(R,i))return w&&a.emit("get",i,o,this),R[i];if(n=1===o.length?f.call(t,this,o[0]):c.call(t,this,o),h.call(R,i))throw r("Circular invocation","CIRCULAR_INVOCATION");return R[i]=n,T&&a.emit("set",i),n},a={original:t,memoized:M,get:function(t){return S&&(t=S(t)),_?_(t):String(t[0])},has:function(t){return h.call(R,t)},"delete":function(t){var e;h.call(R,t)&&(y&&y(t),e=R[t],delete R[t],A&&a.emit("delete",t,e))},clear:function(){var t=R;b&&b(),R=l(null),a.emit("clear",t)},on:function(t,e){return"get"===t?w=!0:"set"===t?T=!0:"delete"===t&&(A=!0),p.call(this,t,e)},emit:v,updateEnv:function(){t=a.original}},x=_?i(function(t){var e,n=arguments;S&&(n=S(n)),e=_(n),null!==e&&a["delete"](e)},m):0===e?function(){return a["delete"]("data")}:function(t){return S&&(t=S(arguments)[0]),a["delete"](t)},d(M,{__memoized__:o(!0),"delete":o(x),clear:o(a.clear)}),a}},function(t,e,n){"use strict";var r=n(17);t.exports=function(t){var e;return"function"==typeof t?{set:t,get:t}:(e={get:r(t.get)},void 0!==t.set?(e.set=r(t.set),e["delete"]=r(t["delete"]),e.clear=r(t.clear),e):(e.set=e.get,e))}},function(t,e,n){"use strict";var r,i=n(202),o=n(17),a=Array.prototype.slice;r=function(t){return this.map(function(e,n){return e?e(t[n]):t[n]}).concat(a.call(t,this.length))},t.exports=function(t){return t=i(t),t.forEach(function(t){null!=t&&o(t)}),r.bind(t)}},function(t,e){"use strict";t.exports=function(){var t,e,n=Array.from;return"function"!=typeof n?!1:(t=["raz","dwa"],e=n(t),Boolean(e&&e!==t&&"dwa"===e[1]))}},function(t,e,n){"use strict";var r=n(209).iterator,i=n(204),o=n(205),a=n(16),s=n(17),u=n(34),c=n(224),f=Array.isArray,l=Function.prototype.call,h={configurable:!0,enumerable:!0,writable:!0,value:null},d=Object.defineProperty;t.exports=function(t){var e,n,p,v,m,_,g,y,b,x,E=arguments[1],w=arguments[2];if(t=Object(u(t)),null!=E&&s(E),this&&this!==Array&&o(this))e=this;else{if(!E){if(i(t))return m=t.length,1!==m?Array.apply(null,t):(v=new Array(1),v[0]=t[0],v);if(f(t)){for(v=new Array(m=t.length),n=0;m>n;++n)v[n]=t[n];return v}}v=[]}if(!f(t))if(void 0!==(b=t[r])){for(g=s(b).call(t),e&&(v=new e),y=g.next(),n=0;!y.done;)x=E?l.call(E,w,y.value,n):y.value,e?(h.value=x,d(v,n,h)):v[n]=x,y=g.next(),++n;m=n}else if(c(t)){for(m=t.length,e&&(v=new e),n=0,p=0;m>n;++n)x=t[n],m>n+1&&(_=x.charCodeAt(0),_>=55296&&56319>=_&&(x+=t[++n])),x=E?l.call(E,w,x,p):x,e?(h.value=x,d(v,p,h)):v[p]=x,++p;m=p}if(void 0===m)for(m=a(t.length),e&&(v=new e(m)),n=0;m>n;++n)x=E?l.call(E,w,t[n],n):t[n],e?(h.value=x,d(v,n,h)):v[n]=x;return e&&(h.value=null,v.length=m),v}},function(t,e,n){"use strict";var r=n(73),i=Array.isArray;t.exports=function(t){return i(t)?t:r(t)}},function(t,e,n){"use strict";var r=n(113),i=Error.captureStackTrace;e=t.exports=function(t){var n=new Error,o=arguments[1],a=arguments[2];return null==a&&o&&"object"==typeof o&&(a=o,o=null),null!=a&&r(n,a),n.message=String(t),null!=o&&(n.code=String(o)),i&&i(n,e),n}},function(t,e){"use strict";var n=Object.prototype.toString,r=n.call(function(){return arguments}());t.exports=function(t){return n.call(t)===r}},function(t,e,n){"use strict";var r=Object.prototype.toString,i=r.call(n(112));t.exports=function(t){return"function"==typeof t&&r.call(t)===i}},function(t,e,n){"use strict";t.exports=n(207)()?Math.sign:n(208)},function(t,e){"use strict";t.exports=function(){var t=Math.sign;return"function"!=typeof t?!1:1===t(10)&&-1===t(-20)}},function(t,e){"use strict";t.exports=function(t){return t=Number(t),isNaN(t)||0===t?t:t>0?1:-1}},function(t,e,n){"use strict";t.exports=n(210)()?Symbol:n(212)},function(t,e){"use strict";t.exports=function(){var t;if("function"!=typeof Symbol)return!1;t=Symbol("test symbol");try{String(t)}catch(e){return!1}return"symbol"==typeof Symbol.iterator?!0:"object"!=typeof Symbol.isConcatSpreadable?!1:"object"!=typeof Symbol.iterator?!1:"object"!=typeof Symbol.toPrimitive?!1:"object"!=typeof Symbol.toStringTag?!1:"object"!=typeof Symbol.unscopables?!1:!0}},function(t,e){"use strict";t.exports=function(t){return t&&("symbol"==typeof t||"Symbol"===t["@@toStringTag"])||!1}},function(t,e,n){"use strict";var r,i,o=n(49),a=n(213),s=Object.create,u=Object.defineProperties,c=Object.defineProperty,f=Object.prototype,l=s(null),h=function(){var t=s(null);return function(e){for(var n,r=0;t[e+(r||"")];)++r;return e+=r||"",t[e]=!0,n="@@"+e,c(f,n,o.gs(null,function(t){c(this,n,o(t))})),n}}();i=function d(t){if(this instanceof i)throw new TypeError("TypeError: Symbol is not a constructor");return d(t)},t.exports=r=function p(t){var e;if(this instanceof p)throw new TypeError("TypeError: Symbol is not a constructor");return e=s(i.prototype),t=void 0===t?"":String(t),u(e,{__description__:o("",t),__name__:o("",h(t))})},u(r,{"for":o(function(t){return l[t]?l[t]:l[t]=r(String(t))}),keyFor:o(function(t){var e;a(t);for(e in l)if(l[e]===t)return e}),hasInstance:o("",r("hasInstance")),isConcatSpreadable:o("",r("isConcatSpreadable")),iterator:o("",r("iterator")),match:o("",r("match")),replace:o("",r("replace")),search:o("",r("search")),species:o("",r("species")),split:o("",r("split")),toPrimitive:o("",r("toPrimitive")),toStringTag:o("",r("toStringTag")),unscopables:o("",r("unscopables"))}),u(i.prototype,{constructor:o(r),toString:o("",function(){return this.__name__})}),u(r.prototype,{toString:o(function(){return"Symbol ("+a(this).__description__+")"}),valueOf:o(function(){return a(this)})}),c(r.prototype,r.toPrimitive,o("",function(){return a(this)})),c(r.prototype,r.toStringTag,o("c","Symbol")),c(i.prototype,r.toPrimitive,o("c",r.prototype[r.toPrimitive])),c(i.prototype,r.toStringTag,o("c",r.prototype[r.toStringTag]))},function(t,e,n){"use strict";var r=n(211);t.exports=function(t){if(!r(t))throw new TypeError(t+" is not a symbol");return t}},function(t,e,n){"use strict";var r=n(206),i=Math.abs,o=Math.floor;t.exports=function(t){return isNaN(t)?0:(t=Number(t),0!==t&&isFinite(t)?r(t)*o(i(t)):t)}},function(t,e,n){"use strict";var r=n(114),i=n(17),o=n(34),a=Function.prototype.call,s=Object.keys,u=Object.prototype.propertyIsEnumerable;t.exports=function(t,e){return function(n,c){var f,l=arguments[2],h=arguments[3];return n=Object(o(n)),i(c),f=s(n),h&&f.sort(r(h)?h.bind(n):void 0),f[t](function(t,r){return u.call(n,t)?a.call(c,l,n[t],t,n,r):e})}}},function(t,e){"use strict";t.exports=function(){var t,e=Object.assign;return"function"!=typeof e?!1:(t={foo:"raz"},e(t,{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}},function(t,e,n){"use strict";var r=n(218),i=n(34),o=Math.max;t.exports=function(t,e){var n,a,s,u=o(arguments.length,2);for(t=Object(i(t)),s=function(r){try{t[r]=e[r]}catch(i){n||(n=i)}},a=1;u>a;++a)e=arguments[a],r(e).forEach(s);if(void 0!==n)throw n;return t}},function(t,e,n){"use strict";t.exports=n(219)()?Object.keys:n(220)},function(t,e){"use strict";t.exports=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}},function(t,e){"use strict";var n=Object.keys;t.exports=function(t){return n(null==t?t:Object(t))}},function(t,e,n){"use strict";t.exports=n(222)()?String.prototype.contains:n(223)},function(t,e){"use strict";var n="razdwatrzy";t.exports=function(){return"function"!=typeof n.contains?!1:n.contains("dwa")===!0&&n.contains("foo")===!1}},function(t,e){"use strict";var n=String.prototype.indexOf;t.exports=function(t){return n.call(this,t,arguments[1])>-1}},function(t,e){"use strict";var n=Object.prototype.toString,r=n.call("");t.exports=function(t){return"string"==typeof t||t&&"object"==typeof t&&(t instanceof String||n.call(t)===r)||!1}},function(t,e,n){"use strict";var r,i,o,a,s,u,c,f=n(49),l=n(17),h=Function.prototype.apply,d=Function.prototype.call,p=Object.create,v=Object.defineProperty,m=Object.defineProperties,_=Object.prototype.hasOwnProperty,g={configurable:!0,enumerable:!1,writable:!0};r=function(t,e){var n;return l(e),_.call(this,"__ee__")?n=this.__ee__:(n=g.value=p(null),v(this,"__ee__",g),g.value=null),n[t]?"object"==typeof n[t]?n[t].push(e):n[t]=[n[t],e]:n[t]=e,this},i=function(t,e){var n,i;return l(e),i=this,r.call(this,t,n=function(){o.call(i,t,n),h.call(e,this,arguments)}),n.__eeOnceListener__=e,this},o=function(t,e){var n,r,i,o;if(l(e),!_.call(this,"__ee__"))return this;if(n=this.__ee__,!n[t])return this;if(r=n[t],"object"==typeof r)for(o=0;i=r[o];++o)(i===e||i.__eeOnceListener__===e)&&(2===r.length?n[t]=r[o?0:1]:r.splice(o,1));else(r===e||r.__eeOnceListener__===e)&&delete n[t];return this},a=function(t){var e,n,r,i,o;if(_.call(this,"__ee__")&&(i=this.__ee__[t]))if("object"==typeof i){for(n=arguments.length,o=new Array(n-1),e=1;n>e;++e)o[e-1]=arguments[e];for(i=i.slice(),e=0;r=i[e];++e)h.call(r,this,o)}else switch(arguments.length){case 1:d.call(i,this);break;case 2:d.call(i,this,arguments[1]);break;case 3:d.call(i,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),e=1;n>e;++e)o[e-1]=arguments[e];h.call(i,this,o)}},s={on:r,once:i,off:o,emit:a},u={on:f(r),once:f(i),off:f(o),emit:f(a)},c=m({},u),t.exports=e=function(t){return null==t?p(c):m(Object(t),u)},e.methods=s},function(t,e,n){"use strict";var r=n(16),i=Object.create,o=Object.prototype.hasOwnProperty;t.exports=function(t){var e,n=0,a=1,s=i(null),u=i(null),c=0;return t=r(t),{hit:function(r){var i=u[r],f=++c;if(s[f]=r,u[r]=f,!i){if(++n,t>=n)return;return r=s[a],e(r),r}if(delete s[i],a===i)for(;!o.call(s,++a);)continue},"delete":e=function(t){var e=u[t];if(e&&(delete s[e],delete u[t],--n,a===e)){if(!n)return c=0,void(a=1);for(;!o.call(s,++a);)continue}},clear:function(){n=0,a=1,s=i(null),u=i(null),c=0}}}},function(t,e,n){(function(e,n){"use strict";var r,i;r=function(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t},i=function(t){var e,n=document.createTextNode(""),i=0;return new t(function(){var t;if(e)return t=e,e=null,"function"==typeof t?void t():void t.forEach(function(t){t()})}).observe(n,{characterData:!0}),function(t){return r(t),e?void("function"==typeof e?e=[e,t]:e.push(t)):(e=t,void(n.data=i=++i%2))}},t.exports=function(){if("undefined"!=typeof e&&e&&"function"==typeof e.nextTick)return e.nextTick;if("object"==typeof document&&document){if("function"==typeof MutationObserver)return i(MutationObserver);if("function"==typeof WebKitMutationObserver)return i(WebKitMutationObserver)}return"function"==typeof n?function(t){n(r(t))}:"function"==typeof setTimeout?function(t){setTimeout(r(t),0)}:null}()}).call(e,n(50),n(51).setImmediate)},function(t,e){"use strict";t.exports=2147483647},function(t,e,n){"use strict";var r=n(16),i=n(228);t.exports=function(t){if(t=r(t),t>i)throw new TypeError(t+" exceeds maximum possible timeout");return t}},function(t,e,n){"use strict";var r=n(72);t.exports=function(){var t=0,e=[],n=[];return{get:function(t){var i=r.call(e,t[0]);return-1===i?null:n[i]},set:function(r){return e.push(r[0]),n.push(++t),t},"delete":function(t){var i=r.call(n,t);-1!==i&&(e.splice(i,1),n.splice(i,1))},clear:function(){e=[],n=[]}}}},function(t,e,n){"use strict";var r=n(72),i=Object.create;t.exports=function(t){var e=0,n=[[],[]],o=i(null);return{get:function(e){for(var i,o=0,a=n;t-1>o;){if(i=r.call(a[0],e[o]),-1===i)return null;a=a[1][i],++o}return i=r.call(a[0],e[o]),-1===i?null:a[1][i]||null},set:function(i){for(var a,s=0,u=n;t-1>s;)a=r.call(u[0],i[s]),-1===a&&(a=u[0].push(i[s])-1,u[1].push([[],[]])),u=u[1][a],++s;return a=r.call(u[0],i[s]),-1===a&&(a=u[0].push(i[s])-1),u[1][a]=++e,o[e]=i,e},"delete":function(e){for(var i,a=0,s=n,u=[],c=o[e];t-1>a;){if(i=r.call(s[0],c[a]),-1===i)return;u.push(s,i),s=s[1][i],++a}if(i=r.call(s[0],c[a]),-1!==i){for(e=s[1][i],s[0].splice(i,1),s[1].splice(i,1);!s[0].length&&u.length;)i=u.pop(),s=u.pop(),s[0].splice(i,1),s[1].splice(i,1);delete o[e]}},clear:function(){n=[[],[]],o=i(null)}}}},function(t,e){"use strict";t.exports=function(t){return t?function(e){for(var n=String(e[0]),r=0,i=t;--i;)n+=""+e[++r];return n}:function(){return""}}},function(t,e,n){"use strict";var r=n(72),i=Object.create;t.exports=function(){var t=0,e=[],n=i(null);return{get:function(t){var n,i=0,o=e,a=t.length;if(0===a)return o[a]||null;if(o=o[a]){for(;a-1>i;){if(n=r.call(o[0],t[i]),-1===n)return null;o=o[1][n],++i}return n=r.call(o[0],t[i]),-1===n?null:o[1][n]||null}return null},set:function(i){var o,a=0,s=e,u=i.length;if(0===u)s[u]=++t;else{for(s[u]||(s[u]=[[],[]]),s=s[u];u-1>a;)o=r.call(s[0],i[a]),-1===o&&(o=s[0].push(i[a])-1,s[1].push([[],[]])),s=s[1][o],++a;o=r.call(s[0],i[a]),-1===o&&(o=s[0].push(i[a])-1),s[1][o]=++t}return n[t]=i,t},"delete":function(t){var i,o=0,a=e,s=n[t],u=s.length,c=[];if(0===u)delete a[u];else if(a=a[u]){for(;u-1>o;){if(i=r.call(a[0],s[o]),-1===i)return;c.push(a,i),a=a[1][i],++o}if(i=r.call(a[0],s[o]),-1===i)return;for(t=a[1][i],a[0].splice(i,1),a[1].splice(i,1);!a[0].length&&c.length;)i=c.pop(),a=c.pop(),a[0].splice(i,1),a[1].splice(i,1)}delete n[t]},clear:function(){e=[],n=i(null)}}}},function(t,e){"use strict";t.exports=function(t){var e,n,r=t.length;if(!r)return"";for(e=String(t[n=0]);--r;)e+=""+t[++n];return e}},function(t,e,n){"use strict";var r=n(17),i=n(74),o=n(24),a=n(197),s=n(110),u=Object.prototype.hasOwnProperty;t.exports=function c(t){var e,n,f;return r(t),e=Object(arguments[1]),u.call(t,"__memoized__")&&!e.force?t:(n=s(e.length,t.length,e.async&&o.async),f=a(t,n,e),i(o,function(t,n){e[n]&&t(e[n],f,e)}),c.__profiler__&&c.__profiler__(f),f.updateEnv(),f.memoized)}},function(t,e){t.exports="precision mediump float;\n\nstruct Material {\n#ifndef AMBIENT_MAP \n  vec3 ambient;\n#endif\n#ifndef DIFFUSE_MAP\n  vec3 diffuse;\n#endif\n#ifndef SPECULAR_MAP\n  vec3 specular;\n#endif\n#ifdef TRANSPARENT\n  float opacity;\n#endif\n  float shininess;\n};\n\nstruct Light {\n  vec3 pos;\n  vec3 color;\n  float radius;\n};\n\nstruct DirectionalLight {\n    vec3 direction;\n    vec3 color;\n};\n\nstruct PointLight {\n    vec3 position;\n    vec3 color;\n    float constant, linear, quadratic;\n};\n\nstruct Spotlight {\n    vec3 position, direction;\n    vec3 color;\n    float cutoff, outer_cutoff;\n    float constant, linear, quadratic;\n};\n\n#if SPOTLIGHT_COUNT\nuniform Spotlight spotlights[SPOTLIGHT_COUNT];\n#endif\n\n#if DIRECTIONAL_LIGHT_COUNT\nuniform DirectionalLight directional_lights[DIRECTIONAL_LIGHT_COUNT];\n#endif\n\n#if POINT_LIGHT_COUNT\nuniform PointLight point_lights[POINT_LIGHT_COUNT];\n#endif\n\n#ifdef AMBIENT_MAP\nuniform sampler2D ambient_sampler;\nuniform vec4 ambient_uv_bounds;\n#endif\n\n#ifdef DIFFUSE_MAP\nuniform sampler2D diffuse_sampler;\nuniform vec4 diffuse_uv_bounds;\n#endif\n\n#ifdef SPECULAR_MAP\nuniform sampler2D specular_sampler;\nuniform vec4 specular_uv_bounds;\n#endif\n\nuniform Material material; \nuniform vec3 view_pos;\nuniform vec3 ambient;\n\nvarying vec3 lerp_normal;\nvarying vec3 frag_pos;\n\n#if defined(AMBIENT_MAP) || defined(DIFFUSE_MAP) || defined(SPECULAR_MAP)\nvarying vec2 lerp_uv;\n#endif\n\nconst vec3 black = vec3(0.0, 0.0, 0.0);\n\nvoid main(void) {\n  vec3 normal = normalize(lerp_normal);\n  vec3 view_dir = normalize(view_pos - frag_pos); \n  vec3 diffuse = black;\n  vec3 specular = black;\n  \n#ifdef TRANSPARENT\n  float opacity = material.opacity;\n#else\n  float opacity = 1.0;\n#endif\n\n#if defined(AMBIENT_MAP) || defined(DIFFUSE_MAP) || defined(SPECULAR_MAP)\n  vec2 uv = fract(lerp_uv);\n#endif\n\n#ifdef AMBIENT_MAP\n  vec2 ambient_uv = ambient_uv_bounds.xy + uv * ambient_uv_bounds.zw;\n  vec3 material_ambient = texture2D(ambient_sampler, ambient_uv).stp;\n#else\n  vec3 material_ambient = material.ambient;\n#endif\n\n#ifdef DIFFUSE_MAP\n  vec2 diffuse_uv = diffuse_uv_bounds.xy + uv * diffuse_uv_bounds.zw;\n  vec3 material_diffuse = texture2D(diffuse_sampler, diffuse_uv).stp;\n#else\n  vec3 material_diffuse = material.diffuse;\n#endif\n\n#ifdef SPECULAR_MAP\n  vec2 specular_uv = specular_uv_bounds.xy + uv * specular_uv_bounds.zw;\n  vec3 material_specular = texture2D(specular_sampler, specular_uv).stp;\n#else\n  vec3 material_specular = material.specular;\n#endif\n\n\n#if DIRECTIONAL_LIGHT_COUNT\n  for (int i = 0; i < DIRECTIONAL_LIGHT_COUNT; ++i) {\n    DirectionalLight light = directional_lights[i];\n    \n    vec3 light_dir = -light.direction;\n    \n    vec3 reflected_light_dir = reflect(-light_dir, normal);\n    \n    diffuse += light.color * dot(light_dir, normal);\n    specular += light.color * pow(max(dot(reflected_light_dir, view_dir), 0.0), material.shininess);\n  }\n#endif\n\n#if POINT_LIGHT_COUNT\n  for (int i = 0; i < POINT_LIGHT_COUNT; ++i) {\n    PointLight light = point_lights[i];\n    \n    vec3 light_dir = light.position - frag_pos;\n    float distance = length(light_dir);\n    light_dir /= distance;\n    \n    float attenuation = 1.0 / (light.constant + distance * (light.linear + distance * light.quadratic));\n\n    vec3 reflected_light_dir = reflect(-light_dir, normal);\n    vec3 color = attenuation * light.color;\n    \n    diffuse += color * dot(light_dir, normal);\n    specular += color * pow(max(dot(reflected_light_dir, view_dir), 0.0), material.shininess);\n  }\n#endif\n\n#if SPOTLIGHT_COUNT\n  for (int i = 0; i < SPOTLIGHT_COUNT; ++i) {\n    Spotlight light = spotlights[i];\n    \n    vec3 light_dir = light.position - frag_pos;\n    float distance = length(light_dir);\n    light_dir /= distance;\n    \n    float attenuation = 1.0 / (light.constant + distance * (light.linear + distance * light.quadratic));\n    float theta = dot(light_dir, light.direction);\n    float epsilon = light.cutoff - light.outer_cutoff;\n    float cutoff = clamp((theta - light.outer_cutoff) / epsilon, 0.0, 1.0);\n    \n    vec3 reflected_light_dir = reflect(-light_dir, normal);\n    vec3 color = (attenuation * cutoff) * light.color;\n    \n    diffuse += color * dot(light_dir, normal);\n    specular += color * pow(max(dot(reflected_light_dir, view_dir), 0.0), material.shininess);\n  }\n#endif\n  \n  gl_FragColor = \n    vec4(material_ambient * ambient \n       + material_diffuse * diffuse \n       + material_specular * specular, opacity);\n}"},function(t,e){t.exports="precision mediump float;\n// Model-view-projection matrix for the current model\n// Transforms model coordinates to clip space\nuniform mat4 mvp_matrix;\n// Model matrix, transforms model coordinates to world space\nuniform mat4 model_matrix;\n// Rotates hello\nuniform mat3 normal_matrix;\n\n// Model-space vertex position\nattribute vec3 vertex;\n// Pre-normalized vertex normals\nattribute vec3 normal;\n\n// World-space fragment position\nvarying vec3 frag_pos;\n// Interpolated fragment normals\nvarying vec3 lerp_normal;\n\n\n#if defined(AMBIENT_MAP) || defined(DIFFUSE_MAP) || defined(SPECULAR_MAP)\nattribute vec2 uv;\nvarying vec2 lerp_uv;\n#endif\n\n\nvoid main(void) {\n  vec4 vertex4 = vec4(vertex, 1.0);\n  vec4 vertex_pos4 = model_matrix * vertex4;\n\n  frag_pos = vec3(vertex_pos4) / vertex_pos4.w;  \n  lerp_normal = normal_matrix * normal;\n\n#if defined(AMBIENT_MAP) || defined(DIFFUSE_MAP) || defined(SPECULAR_MAP)\n  lerp_uv = uv;\n#endif\n\n  gl_Position = mvp_matrix * vertex4;\n}"},function(t,e){t.exports='!function(e){"use strict";function t(){}function r(e){if(e.imageType===t.Type.NO_DATA)throw new Error("Targa::checkHeader() - No data");if(e.hasColorMap){if(e.colorMapLength>256||24!==e.colorMapSize||1!==e.colorMapType)throw new Error("Targa::checkHeader() - Invalid colormap for indexed type")}else if(e.colorMapType)throw new Error("Targa::checkHeader() - Why does the image contain a palette ?");if(e.width<=0||e.height<=0)throw new Error("Targa::checkHeader() - Invalid image size");if(8!==e.pixelDepth&&16!==e.pixelDepth&&24!==e.pixelDepth&&32!==e.pixelDepth)throw new Error(\'Targa::checkHeader() - Invalid pixel size "\'+e.pixelDepth+\'"\')}function a(e,t,r,a){var i,o,h,n,p,s;for(s=new Uint8Array(a),p=new Uint8Array(r),i=0;a>i;)if(o=e[t++],h=(127&o)+1,128&o){for(n=0;r>n;++n)p[n]=e[t++];for(n=0;h>n;++n)s.set(p,i),i+=r}else for(h*=r,n=0;h>n;++n)s[i++]=e[t++];return s}function i(e,t,r,a,i,o,h,n,p,s){var d,f,g,c;for(f=0,c=i;c!==h;c+=o)for(g=n;g!==s;g+=p,f++)d=t[f],e[4*(g+a*c)+3]=255,e[4*(g+a*c)+2]=r[3*d+0],e[4*(g+a*c)+1]=r[3*d+1],e[4*(g+a*c)+0]=r[3*d+2];return e}function o(e,t,r,a,i,o,h,n,p,s){var d,f,g,c;for(f=0,c=i;c!==h;c+=o)for(g=n;g!==s;g+=p,f+=2)d=t[f+0]|t[f+1]<<8,e[4*(g+a*c)+0]=(31744&d)>>7,e[4*(g+a*c)+1]=(992&d)>>2,e[4*(g+a*c)+2]=(31&d)>>3,e[4*(g+a*c)+3]=32768&d?0:255;return e}function h(e,t,r,a,i,o,h,n,p,s){var d,f,g;for(d=0,g=i;g!==h;g+=o)for(f=n;f!==s;f+=p,d+=3)e[4*(f+a*g)+3]=255,e[4*(f+a*g)+2]=t[d+0],e[4*(f+a*g)+1]=t[d+1],e[4*(f+a*g)+0]=t[d+2];return e}function n(e,t,r,a,i,o,h,n,p,s){var d,f,g;for(d=0,g=i;g!==h;g+=o)for(f=n;f!==s;f+=p,d+=4)e[4*(f+a*g)+2]=t[d+0],e[4*(f+a*g)+1]=t[d+1],e[4*(f+a*g)+0]=t[d+2],e[4*(f+a*g)+3]=t[d+3];return e}function p(e,t,r,a,i,o,h,n,p,s){var d,f,g,c;for(f=0,c=i;c!==h;c+=o)for(g=n;g!==s;g+=p,f++)d=t[f],e[4*(g+a*c)+0]=d,e[4*(g+a*c)+1]=d,e[4*(g+a*c)+2]=d,e[4*(g+a*c)+3]=255;return e}function s(e,t,r,a,i,o,h,n,p,s){var d,f,g;for(d=0,g=i;g!==h;g+=o)for(f=n;f!==s;f+=p,d+=2)e[4*(f+a*g)+0]=t[d+0],e[4*(f+a*g)+1]=t[d+0],e[4*(f+a*g)+2]=t[d+0],e[4*(f+a*g)+3]=t[d+1];return e}t.Type={NO_DATA:0,INDEXED:1,RGB:2,GREY:3,RLE_INDEXED:9,RLE_RGB:10,RLE_GREY:11},t.Origin={BOTTOM_LEFT:0,BOTTOM_RIGHT:1,TOP_LEFT:2,TOP_RIGHT:3,SHIFT:4,MASK:48},t.prototype.open=function(e,t){var r,a=this;r=new XMLHttpRequest,r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200===this.status&&(a.load(new Uint8Array(r.response)),t&&t.call(a))},r.send(null)},t.prototype.load=function(e){var i=0;if(e.length<18)throw new Error("Targa::load() - Not enough data to contain header");if(this.header={idLength:e[i++],colorMapType:e[i++],imageType:e[i++],colorMapIndex:e[i++]|e[i++]<<8,colorMapLength:e[i++]|e[i++]<<8,colorMapDepth:e[i++],offsetX:e[i++]|e[i++]<<8,offsetY:e[i++]|e[i++]<<8,width:e[i++]|e[i++]<<8,height:e[i++]|e[i++]<<8,pixelDepth:e[i++],flags:e[i++]},this.header.hasEncoding=this.header.imageType===t.Type.RLE_INDEXED||this.header.imageType===t.Type.RLE_RGB||this.header.imageType===t.Type.RLE_GREY,this.header.hasColorMap=this.header.imageType===t.Type.RLE_INDEXED||this.header.imageType===t.Type.INDEXED,this.header.isGreyColor=this.header.imageType===t.Type.RLE_GREY||this.header.imageType===t.Type.GREY,r(this.header),i+=this.header.idLength,i>=e.length)throw new Error("Targa::load() - No data");if(this.header.hasColorMap){var o=this.header.colorMapLength*(this.header.colorMapDepth>>3);this.palette=e.subarray(i,i+o),i+=o}var h=this.header.pixelDepth>>3,n=this.header.width*this.header.height,p=n*h;this.header.hasEncoding?this.imageData=a(e,i,h,p):this.imageData=e.subarray(i,i+(this.header.hasColorMap?n:p))},t.prototype.getImageData=function(e){var r,a,d,f,g,c,T,l=this.header.width,y=this.header.height,u=(this.header.flags&t.Origin.MASK)>>t.Origin.SHIFT;switch(e||(e="object"==typeof window?document.createElement("canvas").getContext("2d").createImageData(l,y):{width:l,height:y,data:new Uint8ClampedArray(l*y*4)}),u===t.Origin.TOP_LEFT||u===t.Origin.TOP_RIGHT?(f=0,g=1,c=y):(f=y-1,g=-1,c=-1),u===t.Origin.TOP_LEFT||u===t.Origin.BOTTOM_LEFT?(r=0,a=1,d=l):(r=l-1,a=-1,d=-1),this.header.pixelDepth){case 8:T=this.header.isGreyColor?p:i;break;case 16:T=this.header.isGreyColor?s:o;break;case 24:T=h;break;case 32:T=n}return T(e.data,this.imageData,this.palette,l,f,g,c,r,a,d),e},t.prototype.getCanvas=function(){var e,t,r;return e=document.createElement("canvas"),t=e.getContext("2d"),r=t.createImageData(this.header.width,this.header.height),e.width=this.header.width,e.height=this.header.height,t.putImageData(this.getImageData(r),0,0),e},t.prototype.getDataURL=function(e){return this.getCanvas().toDataURL(e||"image/png")};var d={};"undefined"==typeof exports?"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return t}):d.exports="undefined"!=typeof window?window:e:d.exports=exports,d.exports&&(d.exports.TGA=t)}(this);\n//# sourceMappingURL=out.map.js';
},function(t,e){var n=function(){var t=Date.now(),e=t,n=0,r=1/0,i=0,o=0,a=1/0,s=0,u=0,c=0,f=document.createElement("div");f.id="stats",f.addEventListener("mousedown",function(t){t.preventDefault(),g(++c%2)},!1),f.style.cssText="width:80px;opacity:0.9;cursor:pointer";var l=document.createElement("div");l.id="fps",l.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",f.appendChild(l);var h=document.createElement("div");h.id="fpsText",h.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",h.innerHTML="FPS",l.appendChild(h);var d=document.createElement("div");for(d.id="fpsGraph",d.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",l.appendChild(d);74>d.children.length;){var p=document.createElement("span");p.style.cssText="width:1px;height:30px;float:left;background-color:#113",d.appendChild(p)}var v=document.createElement("div");v.id="ms",v.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",f.appendChild(v);var m=document.createElement("div");m.id="msText",m.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",m.innerHTML="MS",v.appendChild(m);var _=document.createElement("div");for(_.id="msGraph",_.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",v.appendChild(_);74>_.children.length;)p=document.createElement("span"),p.style.cssText="width:1px;height:30px;float:left;background-color:#131",_.appendChild(p);var g=function(t){switch(c=t){case 0:l.style.display="block",v.style.display="none";break;case 1:l.style.display="none",v.style.display="block"}};return{REVISION:12,domElement:f,setMode:g,begin:function(){t=Date.now()},end:function(){var c=Date.now();n=c-t,r=Math.min(r,n),i=Math.max(i,n),m.textContent=n+" MS ("+r+"-"+i+")";var f=Math.min(30,30-30*(n/200));return _.appendChild(_.firstChild).style.height=f+"px",u++,c>e+1e3&&(o=Math.round(1e3*u/(c-e)),a=Math.min(a,o),s=Math.max(s,o),h.textContent=o+" FPS ("+a+"-"+s+")",f=Math.min(30,30-30*(o/100)),d.appendChild(d.firstChild).style.height=f+"px",e=c,u=0),c},update:function(){t=this.end()}}};"object"==typeof t&&(t.exports=n)},function(t,e){!function(){"use strict";function t(t){if("string"!=typeof t&&(t=t.toString()),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function e(t){return"string"!=typeof t&&(t=t.toString()),t}function n(t){this.map={},t instanceof n?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function r(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function i(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function o(t){var e=new FileReader;return e.readAsArrayBuffer(t),i(e)}function a(t){var e=new FileReader;return e.readAsText(t),i(e)}function s(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(d.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(d.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else{if(t)throw new Error("unsupported BodyInit type");this._bodyText=""}},d.blob?(this.blob=function(){var t=r(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(o)},this.text=function(){var t=r(this);if(t)return t;if(this._bodyBlob)return a(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var t=r(this);return t?t:Promise.resolve(this._bodyText)},d.formData&&(this.formData=function(){return this.text().then(f)}),this.json=function(){return this.text().then(JSON.parse)},this}function u(t){var e=t.toUpperCase();return p.indexOf(e)>-1?e:t}function c(t,e){if(e=e||{},this.url=t,this.credentials=e.credentials||"omit",this.headers=new n(e.headers),this.method=u(e.method||"GET"),this.mode=e.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&e.body)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(e.body)}function f(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}}),e}function l(t){var e=new n,r=t.getAllResponseHeaders().trim().split("\n");return r.forEach(function(t){var n=t.trim().split(":"),r=n.shift().trim(),i=n.join(":").trim();e.append(r,i)}),e}function h(t,e){e||(e={}),this._initBody(t),this.type="default",this.url=null,this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof n?e.headers:new n(e.headers),this.url=e.url||""}if(!self.fetch){n.prototype.append=function(n,r){n=t(n),r=e(r);var i=this.map[n];i||(i=[],this.map[n]=i),i.push(r)},n.prototype["delete"]=function(e){delete this.map[t(e)]},n.prototype.get=function(e){var n=this.map[t(e)];return n?n[0]:null},n.prototype.getAll=function(e){return this.map[t(e)]||[]},n.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},n.prototype.set=function(n,r){this.map[t(n)]=[e(r)]},n.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(r){t.call(e,r,n,this)},this)},this)};var d={blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in self},p=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];s.call(c.prototype),s.call(h.prototype),self.Headers=n,self.Request=c,self.Response=h,self.fetch=function(t,e){var n;return n=c.prototype.isPrototypeOf(t)&&!e?t:new c(t,e),new Promise(function(t,e){function r(){return"responseURL"in i?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):void 0}var i=new XMLHttpRequest;i.onload=function(){var n=1223===i.status?204:i.status;if(100>n||n>599)return void e(new TypeError("Network request failed"));var o={status:n,statusText:i.statusText,headers:l(i),url:r()},a="response"in i?i.response:i.responseText;t(new h(a,o))},i.onerror=function(){e(new TypeError("Network request failed"))},i.open(n.method,n.url,!0),"include"===n.credentials&&(i.withCredentials=!0),"responseType"in i&&d.blob&&(i.responseType="blob"),n.headers.forEach(function(t,e){i.setRequestHeader(e,t)}),i.send("undefined"==typeof n._bodyInit?null:n._bodyInit)})},self.fetch.polyfill=!0}}()}]);